{"issue_number": 125544, "issue_title": "[CI] HuggingFaceServiceUpgradeIT testElser {upgradedNodes=3} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7270 / 8.14.3_bwc\nelasticsearch-periodic #7270 / 8.13.4_bwc\nelasticsearch-periodic #7270 / 8.12.2_bwc\nelasticsearch-pull-request #65114 / 8.12.2_bwc\nelasticsearch-pull-request #65114 / 8.14.3_bwc\nelasticsearch-pull-request #65114 / 8.13.4_bwc\nelasticsearch-periodic #7263 / 8.14.3_bwc\nelasticsearch-periodic #7263 / 8.13.4_bwc\nelasticsearch-periodic #7263 / 8.12.2_bwc\nelasticsearch-periodic #7256 / 8.14.3_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.14.3#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.HuggingFaceServiceUpgradeIT\" -Dtests.method=\"testHFEmbeddings {upgradedNodes=3}\" -Dtests.seed=8A4606AD6DD5BF6D -Dtests.bwc=true -Dtests.locale=fil-PH -Dtests.timezone=Europe/Kaliningrad -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred while checking cluster 'test-cluster' status.\n\nIssue Reasons:\n\n[8.x] 11 consecutive failures in step 8.14.3_bwc\n[8.x] 11 consecutive failures in step 8.13.4_bwc\n[8.x] 11 consecutive failures in step 8.12.2_bwc\n[8.x] 33 failures in test testElser {upgradedNodes=3} (4.8% fail rate in 682 executions)\n[8.x] 11 failures in step 8.14.3_bwc (100.0% fail rate in 11 executions)\n[8.x] 11 failures in step 8.13.4_bwc (100.0% fail rate in 11 executions)\n[8.x] 11 failures in step 8.12.2_bwc (100.0% fail rate in 11 executions)\n[8.x] 10 failures in pipeline elasticsearch-periodic (100.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125543, "issue_title": "[CI] HuggingFaceServiceUpgradeIT testHFEmbeddings {upgradedNodes=3} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7270 / 8.14.3_bwc\nelasticsearch-periodic #7270 / 8.13.4_bwc\nelasticsearch-periodic #7270 / 8.12.2_bwc\nelasticsearch-pull-request #65114 / 8.12.2_bwc\nelasticsearch-pull-request #65114 / 8.14.3_bwc\nelasticsearch-pull-request #65114 / 8.13.4_bwc\nelasticsearch-periodic #7263 / 8.14.3_bwc\nelasticsearch-periodic #7263 / 8.13.4_bwc\nelasticsearch-periodic #7263 / 8.12.2_bwc\nelasticsearch-periodic #7256 / 8.14.3_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.14.3#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.HuggingFaceServiceUpgradeIT\" -Dtests.method=\"testHFEmbeddings {upgradedNodes=3}\" -Dtests.seed=8A4606AD6DD5BF6D -Dtests.bwc=true -Dtests.locale=fil-PH -Dtests.timezone=Europe/Kaliningrad -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred while checking cluster 'test-cluster' status.\n\nIssue Reasons:\n\n[8.x] 11 consecutive failures in step 8.14.3_bwc\n[8.x] 11 consecutive failures in step 8.13.4_bwc\n[8.x] 11 consecutive failures in step 8.12.2_bwc\n[8.x] 33 failures in test testHFEmbeddings {upgradedNodes=3} (4.8% fail rate in 682 executions)\n[8.x] 11 failures in step 8.14.3_bwc (100.0% fail rate in 11 executions)\n[8.x] 11 failures in step 8.13.4_bwc (100.0% fail rate in 11 executions)\n[8.x] 11 failures in step 8.12.2_bwc (100.0% fail rate in 11 executions)\n[8.x] 10 failures in pipeline elasticsearch-periodic (100.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125536, "issue_title": "[CI] StatementParserTests testInvalidJoinPatterns failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7209 / single-processor-node-tests\nelasticsearch-periodic-platform-support #7231 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.parser.StatementParserTests.testInvalidJoinPatterns\" -Dtests.seed=40CE02365A6C686B -Dtests.locale=ln-AO -Dtests.timezone=America/Monterrey -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a string containing \"mismatched input '::' expecting {<EOF>, '|', ',', 'metadata'}\"\n     but: was \"line 1:162: mismatched input '-11:00}}>::data' expecting {DEV_CHANGE_POINT, 'enrich', 'dissect', 'eval', 'grok', 'limit', 'sort', 'stats', 'where', DEV_INLINESTATS, DEV_FORK, 'lookup', DEV_JOIN_LEFT, DEV_JOIN_RIGHT, DEV_LOOKUP, 'mv_expand', 'drop', 'keep', DEV_INSIST, DEV_RRF, 'rename'}\"\n\nIssue Reasons:\n\n[main] 13 failures in test testInvalidJoinPatterns (26.5% fail rate in 49 executions)\n[main] 2 failures in step part-3 (8.7% fail rate in 23 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (8.7% fail rate in 23 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-27", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk", "v8.19.0", "v9.1.0"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125535, "issue_title": "[CI] ModelRegistryUpgradeIT testUpgradeModels {upgradedNodes=3} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21241 / 8.17.5_bwc-snapshots\nelasticsearch-intake #21241 / 8.18.0_bwc-snapshots\nelasticsearch-intake #21241 / 8.16.7_bwc-snapshots\nelasticsearch-intake #21241 / 8.19.0_bwc-snapshots\nelasticsearch-periodic #7396 / 8.11.4_bwc\nelasticsearch-periodic #7270 / 8.14.3_bwc\nelasticsearch-periodic #7270 / 8.13.4_bwc\nelasticsearch-periodic #7270 / 8.11.4_bwc\nelasticsearch-periodic #7270 / 8.12.2_bwc\nelasticsearch-pull-request #65162 / 8.18.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.17.5#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.ModelRegistryUpgradeIT\" -Dtests.method=\"testUpgradeModels {upgradedNodes=3}\" -Dtests.seed=84560C13E60BBEBD -Dtests.bwc=true -Dtests.locale=it-IT -Dtests.timezone=Antarctica/Macquarie -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a value greater than <0>\n     but: <0> was equal to <0>\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in test testUpgradeModels {upgradedNodes=3}\n[8.x] 5 consecutive failures in step 8.11.4_bwc\n[8.x] 25 failures in test testUpgradeModels {upgradedNodes=3} (7.0% fail rate in 359 executions)\n[8.x] 4 failures in step 8.18.0_bwc-snapshots (9.5% fail rate in 42 executions)\n[8.x] 4 failures in step 8.14.3_bwc (80.0% fail rate in 5 executions)\n[8.x] 4 failures in step 8.12.2_bwc (80.0% fail rate in 5 executions)\n[8.x] 4 failures in step 8.13.4_bwc (80.0% fail rate in 5 executions)\n[8.x] 5 failures in step 8.11.4_bwc (100.0% fail rate in 5 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-pull-request (9.8% fail rate in 41 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125534, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest module projects are wired into test cluster setup failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7338 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7338 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.spockframework.runtime.ConditionFailedWithExceptionError: Condition failed with Exception:\n\nresult.task(\":distribution:archives:integ-test-zip:buildExpanded\").outcome == TaskOutcome.SUCCESS\n|      |                                                           |\n|      null                                                        java.lang.NullPointerException: Cannot get property 'outcome' on null object\n|                                                                  \tat org.elasticsearch.gradle.internal.test.rest.LegacyYamlRestTestPluginFuncTest.#type projects are wired into test cluster setup(LegacyYamlRestTestPluginFuncTest.groovy:143)\n<org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner$NormalizedBuildResult@5ae1c281 delegate=org.gradle.testkit.runner.internal.FeatureCheckBuildResult@1e957e2f normalizedString=null this$0=org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner@691500ab>\n\n\nIssue Reasons:\n\n[8.16] 2 consecutive failures in test module projects are wired into test cluster setup\n[8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 38 failures in test module projects are wired into test cluster setup (29.0% fail rate in 131 executions)\n[8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 19 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 19 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-31", "labels": [":Delivery/Build", "Team:Delivery", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125533, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest plugin projects are wired into test cluster setup failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]\n\nOutput:\nCalculating task graph as no cached configuration is available for tasks: yamlRestTest\n=======================================\nElasticsearch Build Hamster says Hello!\n  Gradle Version        : 8.13\n  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)\n  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)\n  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)\n  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Random Testing Seed   : C70DCF99734E0852\n  In FIPS 140 mode      : false\n=======================================\n\nFAILURE: \n[truncated]\n\nIssue Reasons:\n\n[8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 39 failures in test plugin projects are wired into test cluster setup (28.3% fail rate in 138 executions)\n[8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)\n[8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-31", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125532, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest yamlRestTest executes and copies api and tests to correct source set failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]\n\nOutput:\nCalculating task graph as no cached configuration is available for tasks: yamlRestTest\n=======================================\nElasticsearch Build Hamster says Hello!\n  Gradle Version        : 8.13\n  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)\n  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)\n  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)\n  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Random Testing Seed   : C70DCF99734E0852\n  In FIPS 140 mode      : false\n=======================================\n\nFAILURE: \n[truncated]\n\nIssue Reasons:\n\n[8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 39 failures in test yamlRestTest executes and copies api and tests to correct source set (28.3% fail rate in 138 executions)\n[8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)\n[8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-31", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125531, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest yamlRestTest does nothing when there are no tests failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]\n\nOutput:\nCalculating task graph as no cached configuration is available for tasks: yamlRestTest\n=======================================\nElasticsearch Build Hamster says Hello!\n  Gradle Version        : 8.13\n  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)\n  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)\n  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)\n  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Random Testing Seed   : C70DCF99734E0852\n  In FIPS 140 mode      : false\n=======================================\n\nFAILURE: \n[truncated]\n\nIssue Reasons:\n\n[8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 39 failures in test yamlRestTest does nothing when there are no tests (28.3% fail rate in 138 executions)\n[8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)\n[8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-31", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125516, "issue_title": "[CI] ModelRegistryMetadataTests.testAlreadyUpgraded", "issue_body": "CI Link\nhttps://gradle-enterprise.elastic.co/s/ftobtcknux2yy/console-log?anchor=8903&page=9\nRepro line\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.registry.ModelRegistryMetadataTests.testAlreadyUpgraded\" -Dtests.seed=57D83B0D7329D6D -Dtests.locale=su-Latn-ID -Dtests.timezone=Atlantic/Reykjavik -Druntime.java=24\nDoes it reproduce?\nYes\nApplicable branches\nmain\nFailure history\nNo response\nFailure excerpt\njunit.framework.AssertionFailedError: Expected exception IllegalArgumentException but no exception was thrown\n        at __randomizedtesting.SeedInfo.seed([57D83B0D7329D6D:5DACAE4EF9E07A4E]:0)\n        at org.apache.lucene.tests.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2889)\n        at org.apache.lucene.tests.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2875)\n        at org.elasticsearch.xpack.inference.registry.ModelRegistryMetadataTests.testAlreadyUpgraded(ModelRegistryMetadataTests.java:105)\n", "created_at": "2025-03-24", "closed_at": "2025-03-28", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "thecoop"}
{"issue_number": 125515, "issue_title": "Cannot migrate a semantic text index from 8.18 to 9.0", "issue_body": "Elasticsearch Version\n9.0\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nN/A\nProblem Description\nIf a user creates an index with a semantic_text field in 8.18+, they cannot migrate that index to 9.0. If they try, they get this error:\n\"type\": \"illegal_argument_exception\",\n        \"reason\": \"\"\"cannot change field \"description.inference.chunks.embeddings\" from storeTermVector=true to inconsistent storeTermVector=false\"\"\"\n\nSteps to Reproduce\n\nCreate an index with a semantic_text field in 8.18\nUpgrade to 9.0\nAttempt to reload the index on 9.0\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-24", "closed_at": "2025-03-24", "labels": [">bug", "blocker", ":SearchOrg/Relevance"], "State": "closed", "Author": "Mikep86"}
{"issue_number": 125511, "issue_title": "Errors when running Elasticsearch with inline scripts disabled because of shipped default ingest pipeline templates", "issue_body": "Elasticsearch Version\n8.17.3\nInstalled Plugins\nNone\nJava Version\nbundled\nOS Version\nUbuntu 20.04.1\nProblem Description\nWhen inline scripts are disabled, Elasticsearch logs out large volume of errors adding ingest pipeline template (logs@json-message & logs@json-pipeline) on start up, and on certain operations like creating or deleting indices.\nSetting stack.templates.enabled: false did not prevent these errors from being logged.\nWhen looking at the code in ES that creates these templates (logs@json-message & logs@json-pipeline), couldn't see any config settings to prevent their creation.\nSteps to Reproduce\n\nRun ES container locally\ndocker run -p 127.0.0.1:9200:9200 -e \"script.allowed_types=stored\" -e=\"stack.templates.enabled=false\" docker.elastic.co/elasticsearch/elasticsearch:8.17.3\nSee logs that have message: error adding ingest pipeline template and error.message: java.lang.IllegalArgumentException: cannot execute [inline] scripts\n\nLogs (if relevant)\n{\n    \"@timestamp\": \"2025-03-24T14:26:14.278Z\",\n    \"log.level\": \"ERROR\",\n    \"message\": \"error adding ingest pipeline template [logs@json-message] for [stack]\",\n    \"ecs.version\": \"1.2.0\",\n    \"service.name\": \"ES_ECS\",\n    \"event.dataset\": \"elasticsearch.server\",\n    \"process.thread.name\": \"elasticsearch[{{.Service.Name}}][management][T#5]\",\n    \"log.logger\": \"org.elasticsearch.xpack.core.template.IndexTemplateRegistry\",\n    \"elasticsearch.cluster.uuid\": \"rovbdM29SeiH6PFjQdhZWA\",\n    \"elasticsearch.node.id\": \"6IZfGtCDRquENVBQueeGog\",\n    \"elasticsearch.node.name\": \"{{.Service.Name}}\",\n    \"elasticsearch.cluster.name\": \"docker-cluster\",\n    \"error.type\": \"org.elasticsearch.ElasticsearchException\",\n    \"error.message\": \"java.lang.IllegalArgumentException: cannot execute [inline] scripts\",\n    \"error.stack_trace\": \"org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ExceptionsHelper.convertToElastic(ExceptionsHelper.java:55)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.newConfigurationException(ConfigurationUtils.java:480)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:631)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:579)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessorConfigs(ConfigurationUtils.java:499)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.Pipeline.create(Pipeline.java:98)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.validatePipeline(IngestService.java:688)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.validatePipelineRequest(IngestService.java:502)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.lambda$putPipeline$5(IngestService.java:485)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:245)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:32)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:202)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:196)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:307)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListener.respondAndRelease(ActionListener.java:367)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.lambda$newResponseAsync$2(TransportNodesAction.java:215)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListener.run(ActionListener.java:444)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.newResponseAsync(TransportNodesAction.java:215)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction$1.lambda$onCompletion$4(TransportNodesAction.java:166)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.lambda$doExecute$0(TransportNodesAction.java:178)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:245)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.ThreadedActionListener$1.doRun(ThreadedActionListener.java:39)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\\n\\tat java.base/java.lang.Thread.run(Thread.java:1570)\\n\\tSuppressed: org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\t... 27 more\\n\\tCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t\\t... 24 more\\n\\tSuppressed: org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\t... 27 more\\n\\tCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t\\t... 24 more\\nCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t... 24 more\\n\"\n}\n\n{\n    \"@timestamp\": \"2025-03-24T14:26:14.278Z\",\n    \"log.level\": \"ERROR\",\n    \"message\": \"error adding ingest pipeline template [logs@json-pipeline] for [stack]\",\n    \"ecs.version\": \"1.2.0\",\n    \"service.name\": \"ES_ECS\",\n    \"event.dataset\": \"elasticsearch.server\",\n    \"process.thread.name\": \"elasticsearch[{{.Service.Name}}][management][T#1]\",\n    \"log.logger\": \"org.elasticsearch.xpack.core.template.IndexTemplateRegistry\",\n    \"elasticsearch.cluster.uuid\": \"rovbdM29SeiH6PFjQdhZWA\",\n    \"elasticsearch.node.id\": \"6IZfGtCDRquENVBQueeGog\",\n    \"elasticsearch.node.name\": \"{{.Service.Name}}\",\n    \"elasticsearch.cluster.name\": \"docker-cluster\",\n    \"error.type\": \"org.elasticsearch.ElasticsearchException\",\n    \"error.message\": \"java.lang.IllegalArgumentException: cannot execute [inline] scripts\",\n    \"error.stack_trace\": \"org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ExceptionsHelper.convertToElastic(ExceptionsHelper.java:55)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.newConfigurationException(ConfigurationUtils.java:480)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:631)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:579)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessorConfigs(ConfigurationUtils.java:499)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.Pipeline.create(Pipeline.java:98)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.validatePipeline(IngestService.java:688)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.validatePipelineRequest(IngestService.java:502)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.lambda$putPipeline$5(IngestService.java:485)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:245)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:32)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:202)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:196)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:307)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListener.respondAndRelease(ActionListener.java:367)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.lambda$newResponseAsync$2(TransportNodesAction.java:215)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListener.run(ActionListener.java:444)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.newResponseAsync(TransportNodesAction.java:215)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction$1.lambda$onCompletion$4(TransportNodesAction.java:166)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.lambda$doExecute$0(TransportNodesAction.java:178)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:245)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.ThreadedActionListener$1.doRun(ThreadedActionListener.java:39)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\\n\\tat java.base/java.lang.Thread.run(Thread.java:1570)\\n\\tSuppressed: org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\t... 27 more\\n\\tCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t\\t... 24 more\\n\\tSuppressed: org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\t... 27 more\\n\\tCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t\\t... 24 more\\nCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t... 24 more\\n\"\n}\n", "created_at": "2025-03-24", "closed_at": null, "labels": [">bug", ":Data Management/Ingest Node", "Team:Data Management"], "State": "open", "Author": "cexmmaqsood"}
{"issue_number": 125499, "issue_title": "Missing mappings in monitoring-logstash-mb template", "issue_body": "Elasticsearch Version\n8.17.3\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nElastic Cloud Service\nProblem Description\nAfter each update of our ECS instances, we have to manually add some missing mapping fields in monitoring templates (in this issue, I'll discuss about logstash monitoring template, ie, \".monitoring-logstash-mb\")...\nWe can retrieve the missing field list by adding a data view on the corresponding datastream, is \".monitoring-logstash-*\", all missing fields appear in the \"Unmapped field\" section on the field panel on Discover.\n\nI can push a merge pull request if needed...\nSteps to Reproduce\n\nAdd metricbeat to monitor a Logstash instance in a Elasticsearch cluster\nThis will automatically create \".monitoring-logstash-mb\" template\nCreate a dataview on \".monitoring-logstash-*\"\nGot to Discover and have a look to Unmapped fields in fields panel\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-24", "closed_at": null, "labels": [">bug", ":Data Management/Monitoring", "Team:Data Management", "Team:Stack Monitoring"], "State": "open", "Author": "ijardillier"}
{"issue_number": 125488, "issue_title": "[ES|QL] Provide a way for combining results of multiple queries", "issue_body": "Description\nIn ES|QL there is currently no way to combine the results of 2+ queries that requires STATS ... BY ... of differing combinations, but that have a similar result column set.\nExample:\nI want to determine the approximate cost of a number of AWS EKS clusters based on their resources. I can write an ES|QL query for each of the resource types (ex: EBS storage & EKS cluster runtime), but I can't then combine (SUM) their costs into a single result that I can then use.\nEBS cost query: note the STATS ... BY ... values.\nFROM metrics-kubernetes.node-*\n| SORT @timestamp DESC\n| WHERE `kubernetes.labels.k8s_io/cloud-provider-aws` IS NOT NULL\n| STATS first_ts = TOP(@timestamp, 1, \"asc\"), last_ts = TOP(@timestamp, 1, \"desc\") BY name = kubernetes.node.name, host = host.id, capacity_bytes = `kubernetes.node.fs.capacity.bytes`, environment = service.environment\n| EVAL time_range = DATE_DIFF(\"second\", first_ts, last_ts) / 3600.0,\n    capacity_gb = capacity_bytes / POW(1024, 3),\n    ebs_gp3_cost_per_gb_per_hr = 0.08 / 730.001,\n    rw_fs_cost = (capacity_gb * ebs_gp3_cost_per_gb_per_hr) * time_range,\n    ro_fs_cost = (2 * ebs_gp3_cost_per_gb_per_hr) * time_range,\n    total_fs_cost = rw_fs_cost + ro_fs_cost\n| STATS cost = SUM(total_fs_cost)\n\nEKS cost query:\nFROM metrics-kubernetes.node-*\n| SORT @timestamp DESC\n| STATS first_ts = TOP(@timestamp, 1, \"asc\"), last_ts = TOP(@timestamp, 1, \"desc\") BY cluster = orchestrator.cluster.name\n| WHERE cluster IS NOT NULL\n| EVAL time_range = DATE_DIFF(\"second\", first_ts, last_ts) / 3600.0,\n    eks_cost_hour = 0.1,\n    cluster_cost = eks_cost_hour * time_range\n| STATS cost = SUM(cluster_cost)\n\n\nBecause the STATS ... BY ... are different (even though the query the same index), they can't be run at the same time.", "created_at": "2025-03-24", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "BenB196"}
{"issue_number": 125483, "issue_title": "[Field_caps] field_caps request don't return fields for indices with readonly_state when include_empty_fields=false", "issue_body": "Elasticsearch Version\n9.0rc1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nmacOS 15.3.2\nProblem Description\nWhen requesting field_stats using the param include_empty_fields set to false targeting an index in readonly state, the only fields returned are _tier, _index, _index_mode.  There should be much more fields being returned, attaching a screenshot showing the problem with migrated indices from 7.18 -> 9.0rc1:\n\nOriginally reported by @jughosta\nSteps to Reproduce\n\nSet an Elasticsearch index to readonly\nTarget the index with a field_caps request with the parameter include_empty_fields=false\nThe returned resultset just returns a few meta fields\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-24", "closed_at": "2025-03-26", "labels": [">bug", "blocker", ":Search Foundations/Mapping", "Team:Search Foundations"], "State": "closed", "Author": "kertal"}
{"issue_number": 125482, "issue_title": "ES|QL - Allow full text functions to be used in EVAL", "issue_body": "Description\nFull text functions should be usable in EVAL:\nFROM books \n| EVAL m = author:\"tolkien\"", "created_at": "2025-03-24", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL", "ES|QL-ui"], "State": "open", "Author": "carlosdelest"}
{"issue_number": 125481, "issue_title": "ES|QL - Allow full text functions to be used in STATS ... WHERE", "issue_body": "Description\nAllows full text functions to be used in STATS ... WHERE:\nFROM books \n| STATS c = count(*) where author:\"tolkien\"\nJust filters should be enough for now, although BY could also use full text functions for grouping", "created_at": "2025-03-24", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "carlosdelest"}
{"issue_number": 125472, "issue_title": "[CI] DateTimeToCharProcessorTests test {tochar-generated.csv:70 TZH @ FMTZHTH} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7189 / corretto11_java-matrix\nelasticsearch-periodic #7189 / zulu11_java-matrix\nelasticsearch-periodic #7189 / zulu8_java-matrix\nelasticsearch-periodic #7182 / corretto11_java-matrix\nelasticsearch-periodic #7182 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7182 / zulu11_java-matrix\nelasticsearch-periodic #7182 / zulu8_java-matrix\nelasticsearch-periodic #7175 / zulu11_java-matrix\nelasticsearch-periodic #7175 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7175 / zulu8_java-matrix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:test' --tests \"org.elasticsearch.xpack.sql.expression.function.scalar.datetime.DateTimeToCharProcessorTests\" -Dtests.method=\"test {tochar-generated.csv:76 mi @ FMmiTH}\" -Dtests.seed=2EBBF65D34692CF7 -Dtests.locale=sl-SI -Dtests.timezone=CST6CDT -Druntime.java=11\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.ComparisonFailure: \nLine number:                        76 (in tochar-generated.csv)\nzone:                               CET\ntimestamp (as epoch):               -46592614152.945861\ntimestamp (java, UTC):              0493-07-15T15:10:47.054139Z\ntimestamp (postgres, to_timestamp): 0493-07-15 16:10:47.054139+01\ntimestamp (java with zone):         0493-07-15T15:28:17.054139+00:17:30[CET]\nformat string:                      mi @ FMmiTH\nexpected (postgres to_char result): 10 @ 10TH\nactual (ES to_char result):         28 @ 28TH\n    FAILED (sub)pattern: mi, expected:<[10]> but was:<[28]>\n\nIssue Reasons:\n\n[7.17] 3 consecutive failures in test test {tochar-generated.csv:70 TZH @ FMTZHTH}\n[7.17] 16 consecutive failures in step corretto11_java-matrix\n[7.17] 16 consecutive failures in step zulu11_java-matrix\n[7.17] 16 consecutive failures in step zulu8_java-matrix\n[7.17] 14 consecutive failures in step adoptopenjdk11_java-matrix\n[7.17] 62 failures in test test {tochar-generated.csv:70 TZH @ FMTZHTH} (10.0% fail rate in 620 executions)\n[7.17] 16 failures in step corretto11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 16 failures in step zulu11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 16 failures in step zulu8_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 14 failures in step adoptopenjdk11_java-matrix (100.0% fail rate in 14 executions)\n[7.17] 16 failures in pipeline elasticsearch-periodic (100.0% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-25", "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125471, "issue_title": "[CI] DateTimeToCharProcessorTests test {tochar-generated.csv:76 mi @ FMmiTH} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7189 / corretto11_java-matrix\nelasticsearch-periodic #7189 / zulu11_java-matrix\nelasticsearch-periodic #7189 / zulu8_java-matrix\nelasticsearch-periodic #7182 / corretto11_java-matrix\nelasticsearch-periodic #7182 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7182 / zulu11_java-matrix\nelasticsearch-periodic #7182 / zulu8_java-matrix\nelasticsearch-periodic #7175 / zulu11_java-matrix\nelasticsearch-periodic #7175 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7175 / zulu8_java-matrix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:test' --tests \"org.elasticsearch.xpack.sql.expression.function.scalar.datetime.DateTimeToCharProcessorTests\" -Dtests.method=\"test {tochar-generated.csv:76 mi @ FMmiTH}\" -Dtests.seed=2EBBF65D34692CF7 -Dtests.locale=sl-SI -Dtests.timezone=CST6CDT -Druntime.java=11\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.ComparisonFailure: \nLine number:                        76 (in tochar-generated.csv)\nzone:                               CET\ntimestamp (as epoch):               -46592614152.945861\ntimestamp (java, UTC):              0493-07-15T15:10:47.054139Z\ntimestamp (postgres, to_timestamp): 0493-07-15 16:10:47.054139+01\ntimestamp (java with zone):         0493-07-15T15:28:17.054139+00:17:30[CET]\nformat string:                      mi @ FMmiTH\nexpected (postgres to_char result): 10 @ 10TH\nactual (ES to_char result):         28 @ 28TH\n    FAILED (sub)pattern: mi, expected:<[10]> but was:<[28]>\n\nIssue Reasons:\n\n[7.17] 3 consecutive failures in test test {tochar-generated.csv:76 mi @ FMmiTH}\n[7.17] 16 consecutive failures in step corretto11_java-matrix\n[7.17] 16 consecutive failures in step zulu11_java-matrix\n[7.17] 16 consecutive failures in step zulu8_java-matrix\n[7.17] 14 consecutive failures in step adoptopenjdk11_java-matrix\n[7.17] 62 failures in test test {tochar-generated.csv:76 mi @ FMmiTH} (10.0% fail rate in 620 executions)\n[7.17] 16 failures in step corretto11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 16 failures in step zulu11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 16 failures in step zulu8_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 14 failures in step adoptopenjdk11_java-matrix (100.0% fail rate in 14 executions)\n[7.17] 16 failures in pipeline elasticsearch-periodic (100.0% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-25", "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125460, "issue_title": "[ES|QL] `TO_IP` Doesn't properly handle 0 padded IPv4 Addresses", "issue_body": "Elasticsearch Version\n8.17.1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nContainer\nProblem Description\nWhen attempting to convert a string to IP via TO_IP that has 0 padding (ex: 001.001.001.001) does not correctly process the IP. 0 padding is generally considered a valid way to represent IP addresses, and most system (ex: Windows), will convert 001.001.001.001 -> 1.1.1.1.\nSteps to Reproduce\n\nCreate an ES|QL function like:\n\nROW str = \"001.001.001.001\"\n| EVAL ip = TO_IP(str)\n\n\nObserve the response doesn't contain the ip value:\n\n{\n  \"rawResponse\": {\n    \"is_running\": false,\n    \"took\": 1,\n    \"all_columns\": [\n      {\n        \"name\": \"str\",\n        \"type\": \"keyword\"\n      },\n      {\n        \"name\": \"ip\",\n        \"type\": \"ip\"\n      }\n    ],\n    \"columns\": [\n      {\n        \"name\": \"str\",\n        \"type\": \"keyword\"\n      }\n    ],\n    \"values\": [\n      [\n        \"001.001.001.001\"\n      ]\n    ]\n  }\n}\nExpect the response to contain the ip value of 1.1.1.1\nThis problem can kind of be worked around using REPLACE with regexp\nROW str = \"010.10.100.000\"\n| EVAL ip = TO_IP(REPLACE(str, \"(?<=^|\\\\.)0{0,2}\", \"\"))\n\nBut it isn't the best user experience, and I'm sure isn't \"free\" from a query overhead perspective.\nLogs (if relevant)\nNo response", "created_at": "2025-03-22", "closed_at": "2025-04-11", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "BenB196"}
{"issue_number": 125457, "issue_title": "[ES|QL] DATE_DIFF Integer Overflow returns nothing", "issue_body": "Elasticsearch Version\n8.17.1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nContainer\nProblem Description\nWhen you run the DATE_DIFF function that produces a value larger than what can fit into an Integer (DATE_DIFF's response value), nothing is returned.\nI'm opening this as a bug for a few reasons, but it's possible that it might also be a feature request:\n\nES|QL doesn't seem to have any documentation on the standard response one should expect when a value overflow happens; (should it be an error/exception?, should it return null?)\n\nFor me it took a bit to recognize in a query that I was writing that I was seeing weird results because DATE_DIFF was overflowing\n\n\nDATE_DIFF being locked to a response of integer rather than long (or possibly definable/dynamic) seems somewhat limiting, especially with the smaller time units and longer date ranges.\n\nSteps to Reproduce\n\nRun an ES|QL query where 2 dates have a diff larger than int in any time unit.\n\nExample:\nROW start_date = \"2025-02-14T17:05:36.630Z\"::datetime, end_date = \"2025-03-22T15:17:56.631Z\"::datetime\n| EVAL diff = DATE_DIFF(\"millisecond\", start_date, end_date)\n\n\nObserve that the response does not include anything for diff\n\n{\n  \"rawResponse\": {\n    \"is_running\": false,\n    \"took\": 3,\n    \"all_columns\": [\n      {\n        \"name\": \"start_date\",\n        \"type\": \"date\"\n      },\n      {\n        \"name\": \"end_date\",\n        \"type\": \"date\"\n      },\n      {\n        \"name\": \"diff\",\n        \"type\": \"integer\"\n      }\n    ],\n    \"columns\": [\n      {\n        \"name\": \"start_date\",\n        \"type\": \"date\"\n      },\n      {\n        \"name\": \"end_date\",\n        \"type\": \"date\"\n      }\n    ],\n    \"values\": [\n      [\n        \"2025-02-14T17:05:36.630Z\",\n        \"2025-03-22T15:17:56.631Z\"\n      ]\n    ]\n  }\n}\n\nChange the unit to something that doesn't overflow int\n\nExample:\nROW start_date = \"2025-02-14T17:05:36.630Z\"::datetime, end_date = \"2025-03-22T15:17:56.631Z\"::datetime\n| EVAL diff = DATE_DIFF(\"second\", start_date, end_date)\n\n\nObserve that a value is included for diff.\n\n{\n  \"rawResponse\": {\n    \"is_running\": false,\n    \"took\": 2,\n    \"all_columns\": [\n      {\n        \"name\": \"start_date\",\n        \"type\": \"date\"\n      },\n      {\n        \"name\": \"end_date\",\n        \"type\": \"date\"\n      },\n      {\n        \"name\": \"diff\",\n        \"type\": \"integer\"\n      }\n    ],\n    \"columns\": [\n      {\n        \"name\": \"start_date\",\n        \"type\": \"date\"\n      },\n      {\n        \"name\": \"end_date\",\n        \"type\": \"date\"\n      },\n      {\n        \"name\": \"diff\",\n        \"type\": \"integer\"\n      }\n    ],\n    \"values\": [\n      [\n        \"2025-02-14T17:05:36.630Z\",\n        \"2025-03-22T15:17:56.631Z\",\n        3103940\n      ]\n    ]\n  }\n}\nLogs (if relevant)\nNo response", "created_at": "2025-03-22", "closed_at": null, "labels": [">bug", "team-discuss", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "BenB196"}
{"issue_number": 125456, "issue_title": "[ES|QL] Provide a better way to get the current DSL queries within ESQL expressions", "issue_body": "Description\nWhen using ES|QL through something like Kibana, it will automatically add a DSL filter for a time range;\nExample:\nPOST /_query/async?drop_null_columns\n{\n  \"query\": \"FROM metrics-kubernetes.node-* | LIMIT 10 \",\n  \"locale\": \"en\",\n  \"include_ccs_metadata\": true,\n  \"filter\": {\n    \"bool\": {\n      \"must\": [],\n      \"filter\": [\n        {\n          \"range\": {\n            \"@timestamp\": {\n              \"format\": \"strict_date_optional_time\",\n              \"gte\": \"2025-03-22T14:05:51.328Z\",\n              \"lte\": \"2025-03-22T14:20:51.328Z\"\n            }\n          }\n        }\n      ],\n      \"should\": [],\n      \"must_not\": []\n    }\n  }\n}\nHowever, if you want to know what this range is, there isn't a good to access this information within ES|QL.\nToday, the only way I've been able to \"get\" this information is to use something like:\nFROM metrics-kubernetes.node-*\n| SORT @timestamp DESC\n| STATS first_ts = TOP(@timestamp, 1, \"asc\"), last_ts = TOP(@timestamp, 1, \"desc\") by kubernetes.node.name\n| EVAL time_range = DATE_DIFF(\"millisecond\", first_ts, last_ts)\n\nHowever, this has a number of different drawbacks:\n\nIt's affected by LIMIT, so if there are a lot of docs/dimensions, you might actually miss data.\nIt requires performing multiple aggs and an eval to get to a number\n\nPossibly exposing the DSL parts of the query within the METADATA fields or a dedicated function/field set.", "created_at": "2025-03-22", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "BenB196"}
{"issue_number": 125445, "issue_title": "Deprecation logger rejects new entries after upgrade to 9.0 unless deprecation log data stream is rolled over", "issue_body": "Elasticsearch Version\n9.0\nProblem Description\nIn #117933, we changed the name of the dataset for the deprecation log data stream from deprecation.elasticsearch to elasticsearch.deprecation. If you had data in that data stream in 8.x or earlier, then when you upgrade to 9.0, if the deprecation logger is called the deprecations will be rejected. You will see entries like this in your (non-deprecation) logs:\nCaused by: java.lang.IllegalArgumentException: [constant_keyword] field [data_stream.dataset] only accepts values that are equal to the value defined in the mappings [deprecation.elasticsearch], but got [elasticsearch.deprecation] \n\n[instance-0000000005] Bulk write of deprecation logs encountered some failures: [[4VK3j5UBamJ0EqvgUJmJ org.elasticsearch.index.mapper.DocumentParsingException: [1:87] failed to parse field [data_stream.dataset] of type [constant_keyword] in document with id '4VK3j5UBamJ0EqvgUJmJ'. Preview of field's value: 'elasticsearch.deprecation']]\n\nThe problem continues until you roll over the deprecation log data stream (.logs-deprecation.default). We discussed a couple of options to fix this:\n\nA one-off service that gets started with a node from the deprecation xpack module. It would wait in a new feature in the cluster, and once that feature is available (so once all nodes are 9.0+), force a rollover of the .logs-deprecation.default datastream. Then the service would shut itself down.\nChange the mapping of the dataset field to be a keyword rather than a constant_keyword, since that field is no longer a constant in this data stream (it is a constant in any backing index, but across the data stream it can now have two different values).\n\nSteps to Reproduce\nStart a cluster in 8.x. Do something that causes a deprecation message to be logged. Upgrade to 9.0. Do something that causes a deprecation message to be logged.", "created_at": "2025-03-21", "closed_at": "2025-03-25", "labels": [">bug", "blocker", ":Core/Infra/Logging", "Team:Core/Infra", "v9.0.0", "stateful", "v9.0.1"], "State": "closed", "Author": "masseyke"}
{"issue_number": 125439, "issue_title": "[ES|QL] comparison between date-like params and date_nanos fields is failing", "issue_body": "Elasticsearch Version\nmain\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nDarwin Kernel Version 24.3.0: Thu Jan  2 20:24:22 PST 2025; root:xnu-11215.81.4~3/RELEASE_ARM64_T6041 arm64\nProblem Description\nKibana's time picker params are causing errors when compared with date_nanos fields.\n\nSteps to Reproduce\nThis is the query that is sent\nPOST /_query/async?drop_null_columns\n{\n  \"query\": \"FROM sample* | WHERE date_nanos >= ?_tstart AND date_nanos <= ?_tend | LIMIT 10\",\n  \"locale\": \"en\",\n  \"include_ccs_metadata\": true,\n  \"params\": [\n    {\n      \"_tstart\": \"2010-03-20T15:08:25.608Z\"\n    },\n    {\n      \"_tend\": \"2025-03-20T15:08:25.608Z\"\n    }\n  ],\n  \"filter\": {\n    \"bool\": {\n      \"must\": [],\n      \"filter\": [\n        {\n          \"range\": {\n            \"date_nanos\": {\n              \"format\": \"strict_date_optional_time\",\n              \"gte\": \"2010-03-20T15:08:25.608Z\",\n              \"lte\": \"2025-03-20T15:08:25.608Z\"\n            }\n          }\n        }\n      ],\n      \"should\": [],\n      \"must_not\": []\n    }\n  }\n}\n\nAnd the mappings for that index\n\nPUT sample/_mapping\n{\n  \"properties\": {\n    \"keyword_key\": {\n      \"type\": \"keyword\"\n    },\n    \"text_message\": {\n      \"type\": \"text\"\n    },\n    \"number_amount\": {\n      \"type\": \"long\"\n    },\n    \"number_price\": {\n      \"type\": \"float\"\n    },\n    \"bool_enabled\": {\n      \"type\": \"boolean\"\n    },\n    \"binary_blob\": {\n      \"type\": \"binary\"\n    },\n    \"date\": {\n      \"type\": \"date\"\n    },\n    \"date_nanos\": {\n      \"type\": \"date_nanos\"\n    },\n    \"object_user\": {\n      \"properties\": {\n        \"first\": { \"type\": \"text\" },\n        \"last\": { \"type\": \"text\" }\n      }\n    },\n    \"nested_user\": {\n      \"type\": \"nested\"\n    },\n    \"flattened_labels\": {\n      \"type\": \"flattened\"\n    },\n    \"range_time_frame\": {\n      \"type\": \"date_range\", \n      \"format\": \"yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis\"\n    },\n    \"ip_addr\": {\n      \"type\": \"ip\"\n    },\n    \"version\": {\n      \"type\": \"version\"\n    },\n    \"vector\": {\n      \"type\": \"dense_vector\",\n      \"dims\": 3\n    },\n    \"geo_point\": {\n      \"type\": \"geo_point\"\n    },\n    \"histogram\" : {\n      \"type\" : \"histogram\"\n    },\n    \"rank_features\": {\n      \"type\": \"rank_features\" \n    },\n    \"geometry\": {\n      \"type\": \"shape\"\n    }\n  }\n}\n\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-21", "closed_at": "2025-03-24", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL", "ES|QL-ui"], "State": "closed", "Author": "drewdaemon"}
{"issue_number": 125417, "issue_title": "ESQL: high count fields sorting removal", "issue_body": "Description\nWhen analysing a query on thousands of fields, sorting these can take a significant chunk of time of the Analyzer (% goes up with fields count).\nThis is visible in simple queries already (FROM pattern).\nThe question of usability of a response containing Ks of fields aside, we could consider dropping sorting the fields, should the count be over a given threshold (1K) for improved responsiveness (the user can then still search through the list, by a pattern, in the UI).\n", "created_at": "2025-03-21", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "bpintea"}
{"issue_number": 125396, "issue_title": "Fork-and-forget processor", "issue_body": "Description\nIn some scenarios it's helpful to be able to save a single documents twice in different forms:\n\nTesting processing changes without going all in - \"fork\" the document, apply both processing, store it in two places and see whether any unexpected things happen\nStore a sample of \"raw\" documents to be able to simulate changes - \"fork\" the document, only apply processing to one, store the unprocessed document by the side, later you can load it and use it to simulate processing changes (which isn't possible with the processed doc because it changed its form)\nMigrating data management step-by-step (e.g. going from indices to data streams) - \"fork\" the document for a while, sending it to both places, see whether both look the same, if yes, turn off the \"old\" path\n\nCurrently these things are usually solved outside of Elasticsearch, but it would be helpful to have a \"native\" solution for them.\nIt could work like this (just dreaming up an API here to illustrate the idea):\nExpand the \"reroute\" processor with a new fork option:\n{\n  \"reroute\": {\n     \"destination\": \"my-new-location\",\n     \"fork\": true,\n     \"if\": \"ctx.service == 'a'\"\n  }\n}\n\nThis processor in a pipeline will fork all documents coming through, sending them to my-new-location besides the old location. The \"forked\" document is treated as \"fire-and-forget\" - the client never learns about forked documents and the response only reports the \"original\" non-forked document.\nThis means it's possible that the forked document is not processed correctly due to a variety of reasons and the client won't know about it. This is acceptable for the use cases explained above, which all benefit from the \"main\" data flow not being disturbed. Other means like pipeline metrics and failure store can be used to observe the behavior of forked documents.\nThis is separate from #56769 which describes use cases where the sender needs to be information about what happens to all \"forked\" documents.", "created_at": "2025-03-21", "closed_at": null, "labels": [">enhancement", ":Data Management/Ingest Node", "Team:Data Management"], "State": "open", "Author": "flash1293"}
{"issue_number": 125394, "issue_title": "Support sparse bit vector", "issue_body": "Description\nCurrently dense vectors support bit element type but sparse vectors are only float.", "created_at": "2025-03-21", "closed_at": "2025-04-01", "labels": [">enhancement", ":Search Relevance/Vectors", "Team:Search Relevance"], "State": "closed", "Author": "alrz"}
{"issue_number": 125378, "issue_title": "[ML] Support binary embeddings from Amazon Bedrock", "issue_body": "Description\nAmazon Titan text embedding models have an embeddingType parameter that selects either float or binary embeddings. Add support for binary embeddings in the Inference API via the embedding_type option.\nhttps://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-titan-embed-text.html", "created_at": "2025-03-21", "closed_at": null, "labels": [">enhancement", ":ml", "Team:ML"], "State": "open", "Author": "davidkyle"}
{"issue_number": 125368, "issue_title": "How to use ElasticLowLevelClient feature in ES8.0", "issue_body": "Hi Team,\nI have a project created before the release of ES 8.0, which utilizes ElasticLowLevelClient to connect to ES services. Since all index types in the project are dynamically generated based on user selection, I need to concatenate the original JSON data and pass it to the API. When upgrading the project to ES 8.0, I found that the official has removed ElasticLowLevelClient and required that all data must be processed by creating corresponding classes in advance. This change may have a fatal impact on the functionality of my system. At present, I have not found any component in ES 8.0 that has similar ElasticLowLevelClient functionality. How can I make changes to meet the functional requirements of the system?\nCode example:\nprivate ElasticLowLevelClient _lowClient; var lowSettings = new ConnectionConfiguration(new StaticConnectionPool(uriCollection)).BasicAuthentication(Account, Pwd); lowSettings.DisableDirectStreaming(false); lowSettings.ServerCertificateValidationCallback((o, certificate, chain, errors) => true); lowSettings.PingTimeout(new TimeSpan(0, 0, 60)); lowSettings.RequestTimeout(new TimeSpan(0, 30, 0)); _lowClient = new ElasticLowLevelClient(lowSettings); var updateResult = await _lowClient.Indices.UpdateSettingsAsync(\"IndexName\", \"{\"index\":{\"userselectfile\":-1}}\");\nDevelopment language:\n.Net(.Net 8.0 & .Net Framework 4.8)\nES Version:\n8.17.3\nWe look forward to your reply.", "created_at": "2025-03-21", "closed_at": "2025-03-21", "labels": ["needs:triage"], "State": "closed", "Author": "luxiaodui"}
{"issue_number": 125356, "issue_title": "Consider preventing repo location update when it is used by searchable snapshots", "issue_body": "When deleting a repository, we check for its searchable snapshots usage and reject the deletion if any usage is found. However, the same is not done when updating the repo's location. This can potentially lead to red cluster due to missing snapshots. We should consider adding such check to prevent it from happening.", "created_at": "2025-03-21", "closed_at": null, "labels": [">bug", ":Distributed Coordination/Snapshot/Restore", "Team:Distributed Coordination"], "State": "open", "Author": "ywangd"}
{"issue_number": 125321, "issue_title": "Arithmetic exception when sort by date field", "issue_body": "Elasticsearch Version\n8.17.2\nInstalled Plugins\nnon\nJava Version\nbundled\nOS Version\ndocker 8.17.2\nProblem Description\nWhen sort by date field, which is not required we have arithmetic exception.\nHelp only add \"missing\": Long.MAX_VALUE to sort date field\nIMPORTANT:  dont work sort only by ASC\n\nSteps to Reproduce\nSet settings:\nPUT /_cluster/settings \n{\n    \"persistent\" : {\n        \"search.default_allow_partial_results\" : false\n    }\n}\n\nCreate index:\nPUT test8\n{\n  \"settings\": {\n    \"number_of_shards\": 10\n  },\n  \"mappings\": {\n    \"properties\": {\n    \"reopen_date\" : {\n      \"type\" : \"date\",\n      \"format\": \"yyyy-MM-dd HH:mm:ss\"\n    }\n  }}\n}\n\nAdd docs:\nPOST _bulk\n{\"index\":{\"_index\":\"test8\"}}\n{\"reopen_date\": null}\n{\"index\":{\"_index\":\"test8\"}}\n{\"reopen_date\": \"2024-07-09 21:11:31\"}\n{\"index\":{\"_index\":\"test8\"}}\n{\"reopen_date\": null}\n{\"index\":{\"_index\":\"test8\"}}\n{\"reopen_date\": null}\n{\"index\":{\"_index\":\"test8\"}}\n{\"reopen_date\": null}\n\nExecute:\nGET /test8/_search?&from=0&size=1&sort=reopen_date%3Aasc\n\nSee error:\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"arithmetic_exception\",\n        \"reason\": \"long overflow\"\n      }\n    ],\n    \"type\": \"search_phase_execution_exception\",\n    \"reason\": \"Partial shards failure\",\n    \"phase\": \"query\",\n    \"grouped\": true,\n    \"failed_shards\": [\n      {\n        \"shard\": 3,\n        \"index\": \"test8\",\n        \"node\": \"gnciuUg2SMSP756yJz6TGA\",\n        \"reason\": {\n          \"type\": \"arithmetic_exception\",\n          \"reason\": \"long overflow\"\n        }\n      }\n    ]\n  },\n  \"status\": 500\n}\n\nSometimes need change size in query.\nAlso its not reproduce when shards < 3-5\nLogs (if relevant)\n{\"type\": \"server\", \"timestamp\": \"2025-03-18T13:48:49,777Z\", \"level\": \"WARN\", \"component\": \"o.e.a.s.TransportSearchAction\", \"cluster.name\": \"prod-ue1-la-es-02\", \"node.name\": \"qla-prod-ue1-la-es-02-data-1.prod-ue1.live-agent.net\", \"message\": \"TransportSearchAction shard failure (partial results response)\", \"cluster.uuid\": \"zha7TU5yTgGZJ8kpiQemqg\", \"node.id\": \"tBs2yh-jSjyPb05WS4SURA\" ,\n\"stacktrace\": [\"org.elasticsearch.action.search.ShardSearchFailure: null\",\n\"at org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:534) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:458) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:337) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:54) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:647) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1786) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1510) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1644) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1619) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:44) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:45) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.ActionRunnable.onFailure(ActionRunnable.java:152) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:29) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1023) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27) ~[elasticsearch-8.17.2.jar:?]\",\n\"at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]\",\n\"at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]\",\n\"at java.lang.Thread.run(Thread.java:1575) ~[?:?]\",\n\"Caused by: java.lang.ArithmeticException: long overflow\",\n\"at java.lang.Math.addExact(Math.java:932) ~[?:?]\",\n\"at java.time.Instant.toEpochMilli(Instant.java:1287) ~[?:?]\",\n\"at org.elasticsearch.index.mapper.DateFieldMapper$Resolution$1.convert(DateFieldMapper.java:101) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.index.mapper.DateFieldMapper$DateFieldType.parseToLong(DateFieldMapper.java:696) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.index.mapper.DateFieldMapper$DateFieldType.isFieldWithinQuery(DateFieldMapper.java:778) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.index.mapper.DateFieldMapper$DateFieldType.isFieldWithinQuery(DateFieldMapper.java:742) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.search.sort.FieldSortBuilder.isBottomSortShardDisjoint(FieldSortBuilder.java:426) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.search.internal.ShardSearchRequest$RequestRewritable.rewrite(ShardSearchRequest.java:593) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.search.internal.ShardSearchRequest$RequestRewritable.rewrite(ShardSearchRequest.java:577) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.index.query.Rewriteable.rewrite(Rewriteable.java:57) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.search.SearchService.createSearchContext(SearchService.java:1173) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.search.SearchService.createContext(SearchService.java:1103) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:706) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.search.SearchService.lambda$executeQueryPhase$2(SearchService.java:576) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101) ~[elasticsearch-8.17.2.jar:?]\",\n\"at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27) ~[elasticsearch-8.17.2.jar:?]\",\n\"... 6 more\"] }\n", "created_at": "2025-03-20", "closed_at": null, "labels": [">bug", "needs:reproduction", "priority:high", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "denyszrazhevskiy"}
{"issue_number": 125319, "issue_title": "[CI] NativeArrayIntegrationTestCase testSynthesizeArrayRandomIgnoresMalformed failing", "issue_body": "CI Link\nhttps://gradle-enterprise.elastic.co/s/4tqauf2avsfje\nRepro line\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.IPSyntheticSourceNativeArrayIntegrationTests.testSynthesizeArrayRandomIgnoresMalformed\" -Dtests.seed=BB869D9B8771C8FC -Dtests.locale=vun -Dtests.timezone=America/Sao_Paulo -Druntime.java=24\nDoes it reproduce?\nYes\nApplicable branches\nmain\nFailure history\nhttps://gradle-enterprise.elastic.co/scans/tests?search.timeZoneId=Europe/Warsaw&tests.container=org.elasticsearch.index.mapper.IPSyntheticSourceNativeArrayIntegrationTests&tests.test=testSynthesizeArrayRandomIgnoresMalformed\nFailure excerpt\njava.lang.AssertionError:\n    Expected: \"{}\"\n         but: was \"{\\\"field\\\":[]}\"\n        at __randomizedtesting.SeedInfo.seed([BB869D9B8771C8FC:426F8810775588C0]:0)\n        at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:18)\n        at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:6)\n        at org.elasticsearch.test.ESTestCase.assertThat(ESTestCase.java:2670)\n        at org.elasticsearch.index.mapper.NativeArrayIntegrationTestCase.testSynthesizeArrayRandomIgnoresMalformed(NativeArrayIntegrationTestCase.java:160)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:565)\n        at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1763)\n        at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)\n        at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)\n        at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)\n        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n        at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n        at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)\n        at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)\n        at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)\n        at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)\n        at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)\n        at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n        at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)\n        at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)\n        at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)\n        at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)\n        at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)\n        at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)\n        at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)\n        at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)\n        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n        at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)\n        at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n        at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n        at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\n        at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)\n        at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)\n        at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)\n        at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)\n        at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n        at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)\n        at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)\n        at java.base/java.lang.Thread.run(Thread.java:1447)\n", "created_at": "2025-03-20", "closed_at": "2025-03-20", "labels": [">test-failure", "Team:StorageEngine", ":StorageEngine/Mapping", "needs:risk"], "State": "closed", "Author": "jozala"}
{"issue_number": 125307, "issue_title": "[CI] ApiKeyBackwardsCompatibilityIT testCreatingAndUpdatingApiKeys failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20465 / 7.17.29_bwc-snapshots\nelasticsearch-intake #20459 / 7.17.29_bwc-snapshots\n\nReproduction Line:\n./gradlew \":x-pack:qa:rolling-upgrade:v7.17.29#oneThirdUpgradedTest\" -Dtests.class=\"org.elasticsearch.upgrades.ApiKeyBackwardsCompatibilityIT\" -Dtests.method=\"testCreatingAndUpdatingApiKeys\" -Dtests.seed=4AA6B82E19FE0977 -Dtests.bwc=true -Dtests.locale=rof -Dtests.timezone=Asia/Pyongyang -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a string containing \"all nodes must have version [8.10.0-8.10.4] or higher to support remote indices privileges for API keys\"\n     but: was \"method [POST], host [http://127.0.0.1:38903], URI [_security/api_key/_bulk_update], status line [HTTP/1.1 400 Bad Request]\n{\"error\":{\"root_cause\":[{\"type\":\"action_request_validation_exception\",\"reason\":\"Validation Failed: 1: remote index privileges cannot contain privileges that grant access to the failure store;\"}],\"type\":\"action_request_validation_exception\",\"reason\":\"Validation Failed: 1: remote index privileges cannot contain privileges that grant access to the failure store;\"},\"status\":400}\"\n\nIssue Reasons:\n\n[8.x] 2 failures in test testCreatingAndUpdatingApiKeys (1.1% fail rate in 175 executions)\n[8.x] 2 failures in step 7.17.29_bwc-snapshots (5.7% fail rate in 35 executions)\n[8.x] 2 failures in pipeline elasticsearch-intake (13.3% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-20", "closed_at": "2025-03-20", "labels": [">test-failure", ":Security/Security", "Team:Security", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125305, "issue_title": "testProcessMultipleChunks failing on main", "issue_body": "CI Link\nhttps://gradle-enterprise.elastic.co/s/kecdw42hbpira\nRepro line\n./gradlew \":server:test\" --tests \"org.elasticsearch.reservedstate.service.ReservedClusterStateServiceTests.testProcessMultipleChunks\" -Dtests.seed=DE74EADEC3471C7B -Dtests.locale=en-SX -Dtests.timezone=America/Indiana/Vevay -Druntime.java=24\nDoes it reproduce?\nYes\nApplicable branches\nmain\nFailure history\nNo response\nFailure excerpt\n2> java.util.NoSuchElementException\nat __randomizedtesting.SeedInfo.seed([DE74EADEC3471C7B:D0E3B1F84A7491EA]:0)\nat java.base/java.util.ArrayList.getFirst(ArrayList.java:440)\nat org.elasticsearch.reservedstate.service.ReservedClusterStateService.process(ReservedClusterStateService.java:426)\nat org.elasticsearch.reservedstate.service.ReservedClusterStateServiceTests.testProcessMultipleChunks(ReservedClusterStateServiceTests.java:430)", "created_at": "2025-03-20", "closed_at": "2025-03-24", "labels": [":Core/Infra/Settings", ">test-failure", "Team:Core/Infra", "needs:risk"], "State": "closed", "Author": "jfreden"}
{"issue_number": 125291, "issue_title": "Improve logging in `PublishResponseHandler#onFailure`", "issue_body": "If a publication request is rejected by the remote node then today we always log it at DEBUG. Mostly that makes sense, because a rejection in this situation is typically because of some other hopefully-transient issue (e.g. a network disconnect or near to a contended election). However, it could also indicate some more serious problem if it's not one of these expected/transient cases. For instance I saw a cluster persistently failing to write the cluster state because of a fundamental internal error, and this deserves much more noisy logging:\n\nClick to expand\n[instance-0000000046] PublishResponseHandler: [REDACTED] failed\norg.elasticsearch.transport.RemoteTransportException: [REDACTED][internal:cluster/coordination/publish_state]\nCaused by: java.lang.IllegalArgumentException: Nul character not allowed: _2zc1_Lucene90FieldsIndex\ufffd_0.tmp\n\tat sun.nio.fs.UnixPath.checkNotNul(UnixPath.java:98) ~[?:?]\n\tat sun.nio.fs.UnixPath.normalizeAndCheck(UnixPath.java:88) ~[?:?]\n\tat sun.nio.fs.UnixPath.<init>(UnixPath.java:76) ~[?:?]\n\tat sun.nio.fs.UnixFileSystem.getPath(UnixFileSystem.java:312) ~[?:?]\n\tat java.nio.file.Path.resolve(Path.java:516) ~[?:?]\n\tat org.apache.lucene.store.FSDirectory$FSIndexOutput.<init>(FSDirectory.java:392) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.store.FSDirectory.createTempOutput(FSDirectory.java:234) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.store.FilterDirectory.createTempOutput(FilterDirectory.java:81) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.store.TrackingDirectoryWrapper.createTempOutput(TrackingDirectoryWrapper.java:49) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.codecs.lucene90.compressing.FieldsIndexWriter.<init>(FieldsIndexWriter.java:83) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.codecs.lucene90.compressing.Lucene90CompressingStoredFieldsWriter.<init>(Lucene90CompressingStoredFieldsWriter.java:148) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.codecs.lucene90.compressing.Lucene90CompressingStoredFieldsFormat.fieldsWriter(Lucene90CompressingStoredFieldsFormat.java:140) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.codecs.lucene90.Lucene90StoredFieldsFormat.fieldsWriter(Lucene90StoredFieldsFormat.java:154) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.index.StoredFieldsConsumer.initStoredFieldsWriter(StoredFieldsConsumer.java:50) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.index.StoredFieldsConsumer.startDocument(StoredFieldsConsumer.java:57) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.index.IndexingChain.startStoredFields(IndexingChain.java:512) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.index.IndexingChain.processDocument(IndexingChain.java:543) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.index.DocumentsWriterPerThread.updateDocuments(DocumentsWriterPerThread.java:242) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.index.DocumentsWriter.updateDocuments(DocumentsWriter.java:432) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.index.IndexWriter.updateDocuments(IndexWriter.java:1545) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1830) ~[lucene-core-9.7.0.jar:?]\n\tat org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1470) ~[lucene-core-9.7.0.jar:?]\n\tat org.elasticsearch.gateway.PersistedClusterStateService$Writer.lambda$addGlobalMetadataDocuments$6(PersistedClusterStateService.java:1162) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.gateway.PersistedClusterStateService$PageWriterOutputStream.flushPage(PersistedClusterStateService.java:1439) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.gateway.PersistedClusterStateService$PageWriterOutputStream.close(PersistedClusterStateService.java:1426) ~[elasticsearch-8.10.4.jar:?]\n\tat java.util.zip.DeflaterOutputStream.close(DeflaterOutputStream.java:249) ~[?:?]\n\tat org.elasticsearch.common.compress.DeflateCompressor$2.close(DeflateCompressor.java:186) ~[elasticsearch-8.10.4.jar:?]\n\tat java.io.FilterOutputStream.close(FilterOutputStream.java:190) ~[?:?]\n\tat com.fasterxml.jackson.dataformat.smile.SmileGenerator.close(SmileGenerator.java:1894) ~[?:?]\n\tat org.elasticsearch.xcontent.provider.json.JsonXContentGenerator.close(JsonXContentGenerator.java:567) ~[?:?]\n\tat org.elasticsearch.xcontent.XContentBuilder.close(XContentBuilder.java:1252) ~[elasticsearch-x-content-8.10.4.jar:?]\n\tat org.elasticsearch.gateway.PersistedClusterStateService$Writer.writePages(PersistedClusterStateService.java:1176) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.gateway.PersistedClusterStateService$Writer.addGlobalMetadataDocuments(PersistedClusterStateService.java:1155) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.gateway.PersistedClusterStateService$Writer.addMetadata(PersistedClusterStateService.java:1193) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.gateway.PersistedClusterStateService$Writer.overwriteMetadata(PersistedClusterStateService.java:1186) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.gateway.PersistedClusterStateService$Writer.writeFullStateAndCommit(PersistedClusterStateService.java:933) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.gateway.GatewayMetaState$LucenePersistedState.writeClusterStateToDisk(GatewayMetaState.java:569) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.gateway.GatewayMetaState$LucenePersistedState.setLastAcceptedState(GatewayMetaState.java:562) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.cluster.coordination.CoordinationState.handlePublishRequest(CoordinationState.java:392) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.cluster.coordination.Coordinator.handlePublishRequest(Coordinator.java:469) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.cluster.coordination.PublicationTransportHandler.acceptState(PublicationTransportHandler.java:213) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.cluster.coordination.PublicationTransportHandler.handleIncomingPublishRequest(PublicationTransportHandler.java:148) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.cluster.coordination.PublicationTransportHandler.lambda$new$0(PublicationTransportHandler.java:112) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$1.doRun(SecurityServerTransportInterceptor.java:563) ~[?:?]\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$3.onResponse(SecurityServerTransportInterceptor.java:625) ~[?:?]\n\tat org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$3.onResponse(SecurityServerTransportInterceptor.java:614) ~[?:?]\n\tat org.elasticsearch.xpack.security.authz.AuthorizationService.authorizeSystemUser(AuthorizationService.java:668) ~[?:?]\n\tat org.elasticsearch.xpack.security.authz.AuthorizationService.authorize(AuthorizationService.java:310) ~[?:?]\n\tat org.elasticsearch.xpack.security.transport.ServerTransportFilter.lambda$inbound$1(ServerTransportFilter.java:113) ~[?:?]\n\tat org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:236) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:95) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.xpack.security.authc.AuthenticatorChain.authenticateAsync(AuthenticatorChain.java:94) ~[?:?]\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:261) ~[?:?]\n\tat org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:199) ~[?:?]\n\tat org.elasticsearch.xpack.security.transport.ServerTransportFilter.authenticate(ServerTransportFilter.java:126) ~[?:?]\n\tat org.elasticsearch.xpack.security.transport.ServerTransportFilter.inbound(ServerTransportFilter.java:104) ~[?:?]\n\tat org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler.messageReceived(SecurityServerTransportInterceptor.java:636) ~[?:?]\n\tat org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:74) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.transport.InboundHandler$1.doRun(InboundHandler.java:294) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:983) ~[elasticsearch-8.10.4.jar:?]\n\tat org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26) ~[elasticsearch-8.10.4.jar:?]\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]\n\tat java.lang.Thread.run(Thread.java:1583) ~[?:?]\n\n\nI think we should check the exception type and choose DEBUG only if it's a org.elasticsearch.transport.ConnectTransportException or a org.elasticsearch.transport.RemoteTransportException wrapped around a org.elasticsearch.cluster.coordination.CoordinationStateRejectedException, and use WARN otherwise.", "created_at": "2025-03-20", "closed_at": null, "labels": [">enhancement", ":Distributed Coordination/Cluster Coordination", "Supportability", "Team:Distributed Coordination"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 125290, "issue_title": "Improve reporting of unexpected network disconnects", "issue_body": "Today if a node-to-node connection drops we log this message:\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/transport/ClusterConnectionManager.java\n\n\n        Lines 242 to 248\n      in\n      a59c182\n\n\n\n\n\n\n logger.info( \n\n\n\n \"\"\" \n\n\n\n                                                 transport connection to [{}] closed by remote; \\ \n\n\n\n                                                 if unexpected, see [{}] for troubleshooting guidance\"\"\", \n\n\n\n node.descriptionWithoutAttributes(), \n\n\n\n ReferenceDocs.NETWORK_DISCONNECT_TROUBLESHOOTING \n\n\n\n                                         ); \n\n\n\n\n\nThe \"if unexpected\" bit is tricksy, it's actually pretty hard to tell from the logs whether a disconnect was expected (e.g. the node shut down) or not (e.g. network disruption). Yet we should be able to work out ourselves whether a disconnect was unexpected, and log a message that unambiguously indicates that we saw an unexpected disconnect.\nIn particular, if the org.elasticsearch.cluster.NodeConnectionsService finds it is disconnected from a peer and then successfully reconnects to that same peer again (its DiscoveryNode#ephemeralId did not change) then that's definitely not due to the node shutting down. We should be emitting a WARN log in this case. Moreover, it'd be incredibly useful to capture the exception (if any) that TcpTransport reported as causing the disconnect so we can repeat it in such a log message.", "created_at": "2025-03-20", "closed_at": null, "labels": [">enhancement", ":Distributed Coordination/Network", "Team:Distributed Coordination"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 125271, "issue_title": "[CI] EntitlementsDeniedNonModularIT testAction {actionName=socket_channel_connect} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7116 / graalvm-ce17_checkpart1_java-matrix\nelasticsearch-periodic #7102 / openjdk17_checkpart1_java-matrix\nelasticsearch-periodic #7102 / graalvm-ce17_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":libs:entitlement:qa:javaRestTest\" --tests \"org.elasticsearch.entitlement.qa.EntitlementsDeniedNonModularIT.testAction {actionName=socket_channel_bind}\" -Dtests.seed=77C0CBA5BCEA134 -Dtests.locale=es-PR -Dtests.timezone=Etc/GMT+8 -Druntime.java=17\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Expected exception ResponseException but no exception was thrown\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step graalvm-ce17_checkpart1_java-matrix\n[8.x] 3 failures in test testAction {actionName=socket_channel_connect} (3.9% fail rate in 76 executions)\n[8.x] 2 failures in step graalvm-ce17_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-21", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125270, "issue_title": "[CI] EntitlementsDeniedNonModularIT testAction {actionName=socket_channel_bind} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7116 / graalvm-ce17_checkpart1_java-matrix\nelasticsearch-periodic #7102 / openjdk17_checkpart1_java-matrix\nelasticsearch-periodic #7102 / graalvm-ce17_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":libs:entitlement:qa:javaRestTest\" --tests \"org.elasticsearch.entitlement.qa.EntitlementsDeniedNonModularIT.testAction {actionName=socket_channel_bind}\" -Dtests.seed=77C0CBA5BCEA134 -Dtests.locale=es-PR -Dtests.timezone=Etc/GMT+8 -Druntime.java=17\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Expected exception ResponseException but no exception was thrown\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step graalvm-ce17_checkpart1_java-matrix\n[8.x] 3 failures in test testAction {actionName=socket_channel_bind} (3.9% fail rate in 76 executions)\n[8.x] 2 failures in step graalvm-ce17_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-21", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125269, "issue_title": "[CI] EntitlementsDeniedIT testAction {actionName=socket_channel_connect} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7116 / graalvm-ce17_checkpart1_java-matrix\nelasticsearch-periodic #7102 / openjdk17_checkpart1_java-matrix\nelasticsearch-periodic #7102 / graalvm-ce17_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":libs:entitlement:qa:javaRestTest\" --tests \"org.elasticsearch.entitlement.qa.EntitlementsDeniedIT.testAction {actionName=socket_channel_connect}\" -Dtests.seed=77C0CBA5BCEA134 -Dtests.locale=nmg-CM -Dtests.timezone=Asia/Brunei -Druntime.java=17\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Expected exception ResponseException but no exception was thrown\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step graalvm-ce17_checkpart1_java-matrix\n[8.x] 3 failures in test testAction {actionName=socket_channel_connect} (3.8% fail rate in 78 executions)\n[8.x] 2 failures in step graalvm-ce17_checkpart1_java-matrix (66.7% fail rate in 3 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-21", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125268, "issue_title": "[CI] EntitlementsDeniedIT testAction {actionName=socket_channel_bind} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7116 / graalvm-ce17_checkpart1_java-matrix\nelasticsearch-periodic #7102 / openjdk17_checkpart1_java-matrix\nelasticsearch-periodic #7102 / graalvm-ce17_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":libs:entitlement:qa:javaRestTest\" --tests \"org.elasticsearch.entitlement.qa.EntitlementsDeniedIT.testAction {actionName=socket_channel_connect}\" -Dtests.seed=77C0CBA5BCEA134 -Dtests.locale=nmg-CM -Dtests.timezone=Asia/Brunei -Druntime.java=17\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Expected exception ResponseException but no exception was thrown\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step graalvm-ce17_checkpart1_java-matrix\n[8.x] 3 failures in test testAction {actionName=socket_channel_bind} (3.9% fail rate in 76 executions)\n[8.x] 2 failures in step graalvm-ce17_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-21", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125267, "issue_title": "[CI] EntitlementsDeniedIT testAction {actionName=proxySelector_setDefault} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7102 / openjdk17_checkpart1_java-matrix\nelasticsearch-periodic #7102 / graalvm-ce17_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":libs:entitlement:qa:javaRestTest\" --tests \"org.elasticsearch.entitlement.qa.EntitlementsDeniedIT.testAction {actionName=proxySelector_setDefault}\" -Dtests.seed=73A8808A18EB0E7F -Dtests.locale=kk-KZ -Dtests.timezone=CET -Druntime.java=17\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Expected exception ResponseException but no exception was thrown\n\nIssue Reasons:\n\n[8.x] 2 failures in test testAction {actionName=proxySelector_setDefault} (1.9% fail rate in 104 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-21", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125265, "issue_title": "Exercise `FieldExtractPreference.EXTRACT_SPATIAL_BOUNDS` in ES|QL block loader tests", "issue_body": "#125164 and PRs before have added a new set of tests that specifically target block loaders (see #115257).\nSpecifically #125164 added GeoShapeFieldBlockLoaderTests and ShapeFieldBlockLoaderTests but these tests don't cover custom logic related to FieldExtractPreference.EXTRACT_SPATIAL_BOUNDS. They should be extended to cover it. Currently this behavior is tested only by CSV tests.", "created_at": "2025-03-19", "closed_at": null, "labels": [">test", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "lkts"}
{"issue_number": 125264, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest yamlRestTest executes and copies api and tests to correct source set failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7191 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7156 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7156 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7142 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7135 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7135 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7121 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7121 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7114 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7114 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.spockframework.runtime.ConditionFailedWithExceptionError: Condition failed with Exception:\n\nresult.task(\":distribution:archives:integ-test-zip:buildExpanded\").outcome == TaskOutcome.SUCCESS\n|      |                                                           |\n|      null                                                        java.lang.NullPointerException: Cannot get property 'outcome' on null object\n|                                                                  \tat org.elasticsearch.gradle.internal.test.rest.LegacyYamlRestTestPluginFuncTest.#type projects are wired into test cluster setup(LegacyYamlRestTestPluginFuncTest.groovy:143)\n<org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner$NormalizedBuildResult@7ca16adc delegate=org.gradle.testkit.runner.internal.FeatureCheckBuildResult@4ac8768e normalizedString=null this$0=org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner@1e957e2f>\n\n\nIssue Reasons:\n\n[8.16] 4 consecutive failures in test yamlRestTest executes and copies api and tests to correct source set\n[8.16] 5 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 5 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 6 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 10 failures in test yamlRestTest executes and copies api and tests to correct source set (35.7% fail rate in 28 executions)\n[8.16] 5 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 5 executions)\n[8.16] 5 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 5 executions)\n[8.16] 6 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-23", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125263, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest module projects are wired into test cluster setup failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7191 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7156 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7156 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7142 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7135 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7135 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7121 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7121 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7114 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7114 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.spockframework.runtime.ConditionFailedWithExceptionError: Condition failed with Exception:\n\nresult.task(\":distribution:archives:integ-test-zip:buildExpanded\").outcome == TaskOutcome.SUCCESS\n|      |                                                           |\n|      null                                                        java.lang.NullPointerException: Cannot get property 'outcome' on null object\n|                                                                  \tat org.elasticsearch.gradle.internal.test.rest.LegacyYamlRestTestPluginFuncTest.#type projects are wired into test cluster setup(LegacyYamlRestTestPluginFuncTest.groovy:143)\n<org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner$NormalizedBuildResult@7ca16adc delegate=org.gradle.testkit.runner.internal.FeatureCheckBuildResult@4ac8768e normalizedString=null this$0=org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner@1e957e2f>\n\n\nIssue Reasons:\n\n[8.16] 4 consecutive failures in test module projects are wired into test cluster setup\n[8.16] 5 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 5 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 6 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 10 failures in test module projects are wired into test cluster setup (35.7% fail rate in 28 executions)\n[8.16] 5 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 5 executions)\n[8.16] 5 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 5 executions)\n[8.16] 6 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-23", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125262, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest yamlRestTest does nothing when there are no tests failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7191 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7156 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7156 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7142 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7135 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7135 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7121 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7121 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7114 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7114 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.spockframework.runtime.ConditionFailedWithExceptionError: Condition failed with Exception:\n\nresult.task(\":distribution:archives:integ-test-zip:buildExpanded\").outcome == TaskOutcome.SUCCESS\n|      |                                                           |\n|      null                                                        java.lang.NullPointerException: Cannot get property 'outcome' on null object\n|                                                                  \tat org.elasticsearch.gradle.internal.test.rest.LegacyYamlRestTestPluginFuncTest.#type projects are wired into test cluster setup(LegacyYamlRestTestPluginFuncTest.groovy:143)\n<org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner$NormalizedBuildResult@7ca16adc delegate=org.gradle.testkit.runner.internal.FeatureCheckBuildResult@4ac8768e normalizedString=null this$0=org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner@1e957e2f>\n\n\nIssue Reasons:\n\n[8.16] 4 consecutive failures in test yamlRestTest does nothing when there are no tests\n[8.16] 5 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 5 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 6 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 10 failures in test yamlRestTest does nothing when there are no tests (35.7% fail rate in 28 executions)\n[8.16] 5 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 5 executions)\n[8.16] 5 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 5 executions)\n[8.16] 6 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-23", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125261, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest plugin projects are wired into test cluster setup failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7191 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7156 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7156 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7142 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7135 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7135 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7121 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7121 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7114 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7114 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.spockframework.runtime.ConditionFailedWithExceptionError: Condition failed with Exception:\n\nresult.task(\":distribution:archives:integ-test-zip:buildExpanded\").outcome == TaskOutcome.SUCCESS\n|      |                                                           |\n|      null                                                        java.lang.NullPointerException: Cannot get property 'outcome' on null object\n|                                                                  \tat org.elasticsearch.gradle.internal.test.rest.LegacyYamlRestTestPluginFuncTest.#type projects are wired into test cluster setup(LegacyYamlRestTestPluginFuncTest.groovy:143)\n<org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner$NormalizedBuildResult@7ca16adc delegate=org.gradle.testkit.runner.internal.FeatureCheckBuildResult@4ac8768e normalizedString=null this$0=org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner@1e957e2f>\n\n\nIssue Reasons:\n\n[8.16] 4 consecutive failures in test plugin projects are wired into test cluster setup\n[8.16] 5 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 5 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 6 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 10 failures in test plugin projects are wired into test cluster setup (35.7% fail rate in 28 executions)\n[8.16] 5 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 5 executions)\n[8.16] 5 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 5 executions)\n[8.16] 6 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-23", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125254, "issue_title": "Add ability to update index types to `bbq` index types", "issue_body": "Description\nSimilar to the previous work that unlocked updating vector index types, we should unlock the ability to update to bbq index types: #106591\nSimilar rules and logic applies to the other types.", "created_at": "2025-03-19", "closed_at": null, "labels": [">enhancement", ":Search Relevance/Vectors", "Team:Search Relevance"], "State": "open", "Author": "benwtrent"}
{"issue_number": 125243, "issue_title": "[ML] Add recursive chunking strategy with Markdown splitters", "issue_body": "TODO: Update this once there's been some time to research this.\nThe goal is to be able to chunk markdown documents and the best way seems to be through recursive chunking (splitting on a list of characters until chunks reach a desired size). We might as well create a generic recursive chunker that we can extend to use markdown chunking. We can look at LangChain's recursive splitter https://python.langchain.com/v0.1/docs/modules/data_connection/document_transformers/. They also offer some interesting extra features with markdown chunking that include metadata in the chunked results. We might be able to utilize this metadata in the future so let's look into how we can expand this in the future.", "created_at": "2025-03-19", "closed_at": null, "labels": [">enhancement", ":ml", "Team:ML", "Feature:GenAI"], "State": "open", "Author": "dan-rubinstein"}
{"issue_number": 125240, "issue_title": "[CI] GeoIpReindexedIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20423 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #63610 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #63179 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #63169 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #63116 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #63105 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #63041 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #62933 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #62931 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #62256 / 8.19.0_bwc-snapshots\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 10 failures in class org.elasticsearch.ingest.geoip.GeoIpReindexedIT (1.3% fail rate in 745 executions)\n[main] 10 failures in step 8.19.0_bwc-snapshots (1.5% fail rate in 656 executions)\n[main] 9 failures in pipeline elasticsearch-pull-request (1.8% fail rate in 501 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125236, "issue_title": "[CI] ThreadPoolMergeSchedulerTests testSchedulerCloseWaitsForRunningMerge failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7412 / single-processor-node-tests\nelasticsearch-pull-request #66160 / part-1\nelasticsearch-pull-request #66120 / part-1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.engine.ThreadPoolMergeSchedulerTests.testSchedulerCloseWaitsForRunningMerge\" -Dtests.seed=AC984A9BB73DF1FC -Dtests.configure_test_clusters_with_one_processor=true -Dtests.locale=mg -Dtests.timezone=Cuba -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable containing [<Mock for OneMerge, hashCode: 469523963>]\n     but: no item was <Mock for OneMerge, hashCode: 469523963>\n\nIssue Reasons:\n\n[main] 3 failures in test testSchedulerCloseWaitsForRunningMerge (6.7% fail rate in 45 executions)\n[main] 2 failures in step part-1 (7.7% fail rate in 26 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (8.3% fail rate in 24 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": null, "labels": [">test-failure", ":Distributed Indexing/Engine", "low-risk", "Team:Distributed Indexing"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125235, "issue_title": "ES|QL: Allow CONCAT to automatically convert value types to string", "issue_body": "Description\nWhen using CONCAT() it will currently throw an error if you attempt to use a field that is anything except for a string. There are times when we need to concat numbers or even geopoints to strings.\nExample 1:\nnumOfEvents = 74\neventAverage = 20\nCustomer wants | EVAL output = CONCAT(\"Number of events \", numOfEvents, \" is higher than the average of \", eventAverage)\nCurrent workaround | EVAL output = CONCAT(\"Number of events \", TO_STRING(numOfEvents), \" is higher than the average of \", TO_STRING(eventAverage))\nExample 2:\nWe needed to pass timestamps and geopoints through a concat so they would retain relation and then run that through a STATs command so we could compare geopoints over time for land speed calculations.\nWhat I wanted to do:\n| EVAL geokey = CONCAT(DATE_TRUNC(5 minutes, @timestamp), \";\", COALESCE(source.geo.location, destination.geo.location))\nWhat I had to do:\n| EVAL geokey = CONCAT(TO_STRING(DATE_TRUNC(5 minutes, @timestamp)), \";\", TO_STRING(COALESCE(source.geo.location, destination.geo.location)))\nCONCAT always requires the values be strings so it should cast them automatically.", "created_at": "2025-03-19", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "KyleOnK8s"}
{"issue_number": 125222, "issue_title": "[CI] ScoringIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7109 / release-tests\nelasticsearch-periodic #7102 / release-tests\nelasticsearch-periodic #7095 / release-tests\nelasticsearch-periodic #7081 / release-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.plugin.ScoringIT.testDisjunctionScoringMultipleNonPushableFunctions {p0=term(content, \"fox\")}\" -Dtests.seed=BA2ACA26D0FC1E58 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=ewo-CM -Dtests.timezone=America/Chihuahua -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.xpack.esql.VerificationException: Found 1 problem\nline 2:9: Unknown function [term], did you mean [trim]?\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in step release-tests\n[8.x] 2 consecutive failures in pipeline elasticsearch-periodic\n[8.x] 4 failures in class org.elasticsearch.xpack.esql.plugin.ScoringIT (3.5% fail rate in 114 executions)\n[8.x] 4 failures in step release-tests (100.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (80.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-20", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125216, "issue_title": "[CI] ILMHistoryItemTests testTruncateLongError failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7138 / windows-2019_checkpart2_platform-support-windows\nelasticsearch-periodic-platform-support #7138 / windows-2022_checkpart2_platform-support-windows\nelasticsearch-periodic #7116 / openjdk17_checkpart2_java-fips-matrix\nelasticsearch-periodic #7116 / openjdk17_checkpart2_java-matrix\nelasticsearch-periodic #7116 / graalvm-ce17_checkpart2_java-matrix\nelasticsearch-periodic-platform-support #7124 / windows-2019_checkpart2_platform-support-windows\nelasticsearch-periodic-platform-support #7124 / windows-2022_checkpart2_platform-support-windows\nelasticsearch-periodic #7102 / openjdk17_checkpart2_java-fips-matrix\nelasticsearch-periodic #7102 / openjdk17_checkpart2_java-matrix\nelasticsearch-periodic #7102 / graalvm-ce17_checkpart2_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:test\" --tests \"org.elasticsearch.xpack.ilm.history.ILMHistoryItemTests.testTruncateLongError\" -Dtests.seed=FB314CB68F54F81E -Dtests.locale=asa-TZ -Dtests.timezone=America/Mazatlan -Druntime.java=17\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: \"{\\\"type\\\":\\\"illegal_argument_exception\\\",\\\"reason\\\":\\\"iiKfktKSpRbcAoAQafqyhoSqnuBofOwtTaNuUTXPmRMYIJnHnYNkmkzzdcIJTcKjmdYyAVZmGRJOjRzrAgxPtsZKtcPNEvDyfFUisCLRXdFACTjLTNanxmqFxqJxCddrYamcQbjuNKwthDynxwxoHMpQuqjisKUtAlwBZJlonbWwthsYlodHZZxnBOdlwfMbcSjUVhmFUOZMyPiqhYyDloGICseKyiTMCPpcouRCansfkvsYhIVDFfDOsNHdUiZGiegoBxVWnCqDFSEXlLpcnOrYzyJaknwdsNWuuUlSSAZhVCqJSfukVlOvlmTDnRHoSftYlLLXscJuWKfJoXhGppZfoCLntuOOFobAzwSKOltbwvIbCUrAvYTxmSBXdWrPLuFAvJizITQozThiYZOQkhOUurCnCqoRXRETYxvzYhsgSbyXnIulVToSArDXKObubuDJgBKRzbRgpZFeLjXwaCEquluLfRPdovDydlAWqUUIjgGuhhCHGONxjfSFTBjhQCDHbGrgjkvdVKXoNueXVugUkVSsaWSsbYxvkuCsEhEiwxICpuBdYehWCBgCmXSnOSXOnKHzfoZRGMoWVHnGAeMQrICrgESnNtqPGzkMlxfnNlKXMEpUbstKSRDWpbRzYOZUvTQFBTYpaUstMTfiQGmTAWRpYMIcqLFVjaBEBNnTNacDZZcUohuKqrwRxbSkIeHxxKIJEadqLclkeLTQEjmYGOBdpuXpfpOGrfikLwFcbhrFlmRSIiywjlNyKVvUEdjZoeyuwKAjTzaDzBsKRXoETKFlAhMaHrFGRrDQRlWllMdefcRMRXgQXvCURMFjIGuSRwgLwzgOuawhvjHtyTMPajoMrGOcHxexSCQYxCBZzdBLiUcHVsSHUtsuJxDQUFRLpXWDMYvS\n[truncated]\n\nIssue Reasons:\n\n[8.x] 5 consecutive failures in test testTruncateLongError\n[8.x] 3 consecutive failures in step windows-2019_checkpart2_platform-support-windows\n[8.x] 3 consecutive failures in step windows-2022_checkpart2_platform-support-windows\n[8.x] 3 consecutive failures in step openjdk17_checkpart2_java-fips-matrix\n[8.x] 3 consecutive failures in step openjdk17_checkpart2_java-matrix\n[8.x] 3 consecutive failures in step graalvm-ce17_checkpart2_java-matrix\n[8.x] 15 failures in test testTruncateLongError (14.7% fail rate in 102 executions)\n[8.x] 3 failures in step windows-2019_checkpart2_platform-support-windows (100.0% fail rate in 3 executions)\n[8.x] 3 failures in step windows-2022_checkpart2_platform-support-windows (100.0% fail rate in 3 executions)\n[8.x] 3 failures in step openjdk17_checkpart2_java-fips-matrix (100.0% fail rate in 3 executions)\n[8.x] 3 failures in step openjdk17_checkpart2_java-matrix (100.0% fail rate in 3 executions)\n[8.x] 3 failures in step graalvm-ce17_checkpart2_java-matrix (100.0% fail rate in 3 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 4 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic (75.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-19", "closed_at": "2025-03-27", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125170, "issue_title": "[CI] EsqlSpecIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7839 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\nelasticsearch-pull-request #69158 / part-3\nelasticsearch-periodic-platform-support #7827 / oraclelinux-7_platform-support-unix\nelasticsearch-periodic-platform-support #7821 / sles-12_platform-support-unix\nelasticsearch-periodic-platform-support #7821 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic-platform-support #7815 / rocky-8_platform-support-unix\nelasticsearch-periodic-platform-support #7809 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #7797 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #7797 / rhel-7_platform-support-unix\nelasticsearch-periodic-platform-support #7791 / almalinux-9_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {math.Log10ofZero SYNC}\" -Dtests.seed=764BDCEDD9D90FA8 -Dtests.locale=da-Latn-DK -Dtests.timezone=Pacific/Marquesas -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.net.ConnectException: Connection refused\n\nIssue Reasons:\n\n[8.x] 36 failures in class org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT (4.7% fail rate in 766 executions)\n[8.x] 2 failures in step ubuntu-2004-aarch64_checkpart3_platform-support-arm (10.0% fail rate in 20 executions)\n[8.x] 4 failures in step ubuntu-2404-aarch64_checkpart3_platform-support-arm (20.0% fail rate in 20 executions)\n[8.x] 3 failures in step almalinux-8-aarch64_checkpart3_platform-support-arm (15.0% fail rate in 20 executions)\n[8.x] 2 failures in step concurrent-search-tests (10.0% fail rate in 20 executions)\n[8.x] 2 failures in step ubuntu-1804_platform-support-unix (10.0% fail rate in 20 executions)\n[8.x] 2 failures in step debian-11_platform-support-unix (11.1% fail rate in 18 executions)\n[8.x] 2 failures in step rhel-7_platform-support-unix (10.5% fail rate in 19 executions)\n[8.x] 3 failures in step ubuntu-2404_platform-support-unix (15.0% fail rate in 20 executions)\n[8.x] 2 failures in step rocky-8_platform-support-unix (10.0% fail rate in 20 executions)\n[8.x] 2 failures in step sles-12_platform-support-unix (11.1% fail rate in 18 executions)\n[8.x] 18 failures in pipeline elasticsearch-periodic-platform-support (85.7% fail rate in 21 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (19.0% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-18", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125168, "issue_title": "[CI] SystemIndicesUpgradeIT testUpgradeSystemIndexAndDataStream failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7757 / 8.0.1_bwc\nelasticsearch-periodic #7751 / 8.0.1_bwc\nelasticsearch-periodic #7745 / 8.0.1_bwc\nelasticsearch-periodic #7739 / 8.0.1_bwc\nelasticsearch-periodic #7733 / 8.0.1_bwc\nelasticsearch-periodic #7727 / 8.0.1_bwc\n\nReproduction Line:\n./gradlew \":x-pack:qa:rolling-upgrade:v8.0.1#oldClusterTest\" -Dtests.class=\"org.elasticsearch.upgrades.SystemIndicesUpgradeIT\" -Dtests.method=\"testUpgradeSystemIndexAndDataStream\" -Dtests.seed=60F81F0A3795B29B -Dtests.bwc=true -Dtests.locale=hy-AM -Dtests.timezone=Africa/Maputo -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [GET], host [http://127.0.0.1:44853], URI [.fleet-actions-results/_count], status line [HTTP/1.1 503 Service Unavailable]\n{\"error\":{\"root_cause\":[{\"type\":\"no_shard_available_action_exception\",\"reason\":null,\"index_uuid\":\"kJztQM49SXupXD90YVpKWA\",\"shard\":\"0\",\"index\":\".ds-.fleet-actions-results-2025.04.20-000001\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\".ds-.fleet-actions-results-2025.04.20-000001\",\"node\":null,\"reason\":{\"type\":\"no_shard_available_action_exception\",\"reason\":null,\"index_uuid\":\"kJztQM49SXupXD90YVpKWA\",\"shard\":\"0\",\"index\":\".ds-.fleet-actions-results-2025.04.20-000001\"}}]},\"status\":503}\n\nIssue Reasons:\n\n[8.x] 6 consecutive failures in step 8.0.1_bwc\n[8.x] 6 failures in test testUpgradeSystemIndexAndDataStream (0.7% fail rate in 911 executions)\n[8.x] 6 failures in step 8.0.1_bwc (100.0% fail rate in 6 executions)\n[8.x] 6 failures in pipeline elasticsearch-periodic (100.0% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-18", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125167, "issue_title": "[CI] UpgradeClusterClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7080 / 8.0.1_bwc\nelasticsearch-periodic #7073 / 8.0.1_bwc\n\nReproduction Line:\n./gradlew \":x-pack:qa:rolling-upgrade:v8.0.1#oldClusterTest\" -Dtests.class=\"org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=old_cluster/80_transform_jobs_crud/Test put batch transform on old cluster}\" -Dtests.seed=F5377982D8D243B5 -Dtests.bwc=true -Dtests.locale=brx-IN -Dtests.timezone=Africa/Lagos -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nYes\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure in test setup: Failed to initialize at least 3 watcher nodes\n\nIssue Reasons:\n\n[8.18] 2 failures in class org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT (0.2% fail rate in 1000 executions)\n[8.18] 2 failures in step 8.0.1_bwc (100.0% fail rate in 2 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-18", "closed_at": "2025-03-24", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125166, "issue_title": "[CI] Ec2DiscoveryTests testFilterByMultipleTags failing", "issue_body": "Build Scans:\n\nelasticsearch-pull-request #63612 / part-1\nelasticsearch-intake #20410 / part1\nelasticsearch-intake #20409 / part1\nelasticsearch-intake #20408 / part1\nelasticsearch-intake #20390 / part1\nelasticsearch-periodic-platform-support #7105 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-pull-request #63448 / part-1\nelasticsearch-pull-request #63442 / part-1\nelasticsearch-pull-request #63427 / part-1\nelasticsearch-pull-request #63406 / part-1\n\nReproduction Line:\n./gradlew \":plugins:discovery-ec2:test\" --tests \"org.elasticsearch.discovery.ec2.Ec2DiscoveryTests.testFilterByMultipleTags\" -Dtests.seed=14E31C1D1F072933 -Dtests.locale=dz -Dtests.timezone=Asia/Karachi -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a collection with size <2>\n     but: collection size was <0>\n\nIssue Reasons:\n\n[main] 3 consecutive failures in step part1\n[main] 3 consecutive failures in pipeline elasticsearch-intake\n[main] 12 failures in test testFilterByMultipleTags (5.2% fail rate in 233 executions)\n[main] 6 failures in step part-1 (5.7% fail rate in 106 executions)\n[main] 5 failures in step part1 (15.2% fail rate in 33 executions)\n[main] 6 failures in pipeline elasticsearch-pull-request (5.8% fail rate in 104 executions)\n[main] 5 failures in pipeline elasticsearch-intake (15.2% fail rate in 33 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-18", "closed_at": "2025-03-19", "labels": [">test-failure", ":Distributed Coordination/Discovery-Plugins", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125162, "issue_title": "[ES|QL] Duration Format/Convert Function", "issue_body": "Description\nToday, in ES|QL there doesn't appear to be a good way to \"easily\" format or change the formatting of a duration value.\nSuppose, I have a document with 2 fields, that are both durations in microseconds:\n{\n  \"saved\": 503954668,\n  \"changed\": 3519110225\n}\nIn ES|QL I can easily calculate the diff of these 2 durations:\nEVAL diff = saved - changed\n\nAnd I get the value 3015155557. However, this value isn't too useful for a human reading it (trying to understand what it means without having to do math in their head).\nIn Kibana visualizations (and data views) today, there is a concept of \"Duration\" in which you can convert a value's formatting from one duration unit to another;\n\nWith options like Friendly (approximate) and Friendly (precise) as well to make the formatting easier for varying duration amounts.\nIt would be nice to have a function like FORMAT_DURATION (or similar) available in ES|QL, that would do something like FORMAT_DURATION(field, original_unit, new_unit) and that would also offer the \"friendly\" variants.", "created_at": "2025-03-18", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "BenB196"}
{"issue_number": 125158, "issue_title": "Default `bbq` vector indices to oversample", "issue_body": "Description\nWe know to achieve adequate recall in a distributed vector index with bbq oversampling and rescoring is required. Let's have that on by default for users.\nBenchmarking shows that a default around 3 gives a nice balance of query latency and recall.\nOf course, this should be overridable at query time, and if the user wants to provide their own oversampling defaults, they should be able to do that at the mapping level.\nRelated: #124581", "created_at": "2025-03-18", "closed_at": null, "labels": [">enhancement", ":Search Relevance/Vectors", "Team:Search Relevance"], "State": "open", "Author": "benwtrent"}
{"issue_number": 125157, "issue_title": "Add ability to bypass default vector oversampling and rescoring", "issue_body": "Description\nIt is now possible to set a default oversample & rescore parameter for a given quantized index: #124581\nHowever, it is possible that at query time, users may want to bypass that default oversampling and disable oversampling for particular queries.\nConsequently, we should add a specialized floating point value for query time rescore_vector parameters.\nI suggest that the value oversample: 0 indicates no oversampling is desired, and will override any index level defaults for oversampling.", "created_at": "2025-03-18", "closed_at": "2025-03-26", "labels": [">enhancement", ":Search Relevance/Vectors", "Team:Search Relevance"], "State": "closed", "Author": "benwtrent"}
{"issue_number": 125156, "issue_title": "Downsampling fails if source index contains fields of type passthrough", "issue_body": "Downsampling fails if source index contains fields of type passthrough and these fields are configured with time_series_dimension to true.  There are two problems that occur in this case:\n\nThe target index that the downsample api tries to creates is with a flattened like mapping (fields with dots) and so the type of the object field is never specified (1).\nThe downsample api detects all fields with time_series_dimension set to true as dimension fields. This isn't true as passthrough fields are just container fields.\n\n1: This is a field mapping that the downsample tries to create:\n        \"metrics.process.memory.usage\": {\n            \"type\": \"aggregate_metric_double\",\n            \"metrics\": [\n                \"max\",\n                \"min\",\n                \"value_count\",\n                \"sum\"\n            ],\n            \"default_metric\": \"max\",\n            \"time_series_metric\": \"gauge\"\n        },\n\nThe metrics. is an object field here and but in the mapping that this fields get merged with it is a passthrough object field.", "created_at": "2025-03-18", "closed_at": null, "labels": [">bug", ":StorageEngine/Downsampling", "Team:StorageEngine"], "State": "open", "Author": "martijnvg"}
{"issue_number": 126048, "issue_title": "Watcher actions should allow the use of defined connectors", "issue_body": "Kibana version:\n8.15.3\nDescribe the bug:\nWatcher actions should work the same as api/alerting/rule/<id> and allow specifying the connector id.\nCurrently the connector webhooks allow more flexibility than the watcher action webhook.\nThe connector webhook allows users to input PKI credentials and set the verification options for TLS verification.\nCurrently if you use the watcher action with a webhook output you will get ssl handshake errors PKI path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target.\nIf you try to set the verificationmode the same as you would when defining a webhook connector you get invalid template error.\nI propose making a change to allows for watchers to use the defined connectors. This would consolidate rules and watcher actions to use the same api.", "created_at": "2025-03-18", "closed_at": null, "labels": [":Data Management/Watcher", "Team:Data Management"], "State": "open", "Author": "desean1625"}
{"issue_number": 125142, "issue_title": "[CI] ScalingThreadPoolTests testScalingThreadPoolConfiguration failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20336 / part1\nelasticsearch-intake #20333 / part1\nelasticsearch-pull-request #63038 / part-1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.threadpool.ScalingThreadPoolTests.testScalingThreadPoolConfiguration\" -Dtests.seed=E0F53813882DA65D -Dtests.locale=kk-Cyrl-KZ -Dtests.timezone=America/Nuuk -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.NullPointerException: Cannot invoke \"java.util.function.Function.apply(Object)\" because the return value of \"java.util.Map.get(Object)\" is null\n\nIssue Reasons:\n\n[main] 3 failures in test testScalingThreadPoolConfiguration (1.0% fail rate in 300 executions)\n[main] 2 failures in step part1 (4.9% fail rate in 41 executions)\n[main] 2 failures in pipeline elasticsearch-intake (4.9% fail rate in 41 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-18", "closed_at": "2025-03-20", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125129, "issue_title": "[CI] ShapeGeometryFieldMapperTests testCartesianBoundsBlockLoader failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20316 / part1\nelasticsearch-periodic-platform-support #6983 / ubuntu-2004_platform-support-unix\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.ShapeGeometryFieldMapperTests.testCartesianBoundsBlockLoader\" -Dtests.seed=7684500F49392A5D -Dtests.locale=xh-ZA -Dtests.timezone=Africa/Blantyre -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: geometry[0] 'BBOX (1.4987720674024342E-18, 1210127.625, -4.881798120682227E-36, -3.402822246271586E35)' wasn't extracted correctly\nExpected: \"    BBOX (1.4987720674024342E-18, 1210127.625, -4.881798120682227E-36, -3.402822246271586E35)\"\n     but: was <BBOX (-3.4028234663852886E38, 3.4028234663852886E38, 3.4028234663852886E38, -3.4028234663852886E38)>\n\nIssue Reasons:\n\n[8.18] 2 failures in test testCartesianBoundsBlockLoader (0.3% fail rate in 685 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-18", "closed_at": null, "labels": [":Analytics/Geo", ">test-failure", "Team:Analytics", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125090, "issue_title": "[CI] Ec2DiscoveryTests testFilterByTags failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7117 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7117 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7117 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic #7095 / openjdk22_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7117 / almalinux-8_platform-support-unix\nelasticsearch-intake #20388 / part1\nelasticsearch-pull-request #63475 / part-1\nelasticsearch-pull-request #63463 / part-1\nelasticsearch-periodic #7081 / encryption-at-rest\nelasticsearch-periodic-platform-support #7103 / rocky-9_platform-support-unix\n\nReproduction Line:\ngradlew \":plugins:discovery-ec2:test\" --tests \"org.elasticsearch.discovery.ec2.Ec2DiscoveryTests.testFilterByTags\" -Dtests.seed=6270229B48F52580 -Dtests.locale=bn-Beng-BD -Dtests.timezone=America/Ciudad_Juarez -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a collection with size <5>\n     but: collection size was <0>\n\nIssue Reasons:\n\n[8.x] 13 failures in test testFilterByTags (9.0% fail rate in 144 executions)\n[8.x] 2 failures in step part1 (9.1% fail rate in 22 executions)\n[8.x] 3 failures in step part-1 (10.7% fail rate in 28 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n[8.x] 2 failures in pipeline elasticsearch-intake (9.1% fail rate in 22 executions)\n[8.x] 3 failures in pipeline elasticsearch-pull-request (10.7% fail rate in 28 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-18", "closed_at": "2025-03-19", "labels": [">test-failure", ":Distributed Coordination/Discovery-Plugins", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125083, "issue_title": "[CI] DataStreamAndIndexLifecycleMixingTests testGetDataStreamResponse failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20280 / part2\nelasticsearch-pull-request #63107 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:internalClusterTest\" --tests \"org.elasticsearch.xpack.ilm.DataStreamAndIndexLifecycleMixingTests.testGetDataStreamResponse\" -Dtests.seed=C6EF1926138857C0 -Dtests.locale=sd-Deva -Dtests.timezone=Indian/Mahe -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.ArrayIndexOutOfBoundsException: Index 2 out of bounds for length 2\n\nIssue Reasons:\n\n[main] 2 failures in test testGetDataStreamResponse (1.1% fail rate in 187 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-18", "closed_at": "2025-03-26", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125070, "issue_title": "Add validation of field name length", "issue_body": "Currently ES does not validate field name length when ingesting documents. We've recently seen cases with unreasonably long names which we should better protect against as this is likely unintentional in most cases.\nIn 8.16 the Jackson upgrade to 2.17 causes a breaking change in this area as Jackson started to impose an upper limit of 50.000 chars for field names.\nAs done in other areas, we suggest validating field names using an initial warning threshold and a second critical threshold.\nFurther context (cc @jmoon-elastic )\n\nJust out of curiosity, I'm wondering if Elasticsearch has any safeguards to prevent or warn against the unintentional ingestion of excessively long field names. I understand that starting from version 8.16.0, Elasticsearch will throw an error if field names exceed 50,000 characters. However, given that such lengthy field names are likely accidental rather than intentional, I wanted to check if Elasticsearch can log a warning when such ingestion is encountered.\n", "created_at": "2025-03-18", "closed_at": "2025-03-18", "labels": [">enhancement", ":Search Foundations/Mapping", "Team:Search Foundations"], "State": "closed", "Author": "mosche"}
{"issue_number": 125061, "issue_title": "[CI] AzureOpenAiEmbeddingsRequestTests testCreateRequest_WithEntraIdDefined failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7117 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #7117 / ubuntu-2204_platform-support-unix\nelasticsearch-pull-request #63456 / part-2\nelasticsearch-periodic-platform-support #7103 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #7103 / sles-12_platform-support-unix\nelasticsearch-pull-request #63433 / part-2\nelasticsearch-pull-request #63402 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.external.request.azureopenai.embeddings.AzureOpenAiEmbeddingsRequestTests.testCreateRequest_WithEntraIdDefined\" -Dtests.seed=8314E8BEDADD9422 -Dtests.locale=ps-Arab-AF -Dtests.timezone=America/Punta_Arenas -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <3>\n     but: was <2>\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in test testCreateRequest_WithEntraIdDefined\n[8.x] 7 failures in test testCreateRequest_WithEntraIdDefined (5.2% fail rate in 135 executions)\n[8.x] 3 failures in step part-2 (9.4% fail rate in 32 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n[8.x] 3 failures in pipeline elasticsearch-pull-request (10.0% fail rate in 30 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-17", "closed_at": "2025-03-19", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125059, "issue_title": "[CI] JinaAIEmbeddingsRequestTests testCreateRequest_TaskSettingsInputType failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7117 / debian-11_platform-support-unix\nelasticsearch-periodic-platform-support #7117 / rhel-7_platform-support-unix\nelasticsearch-periodic-platform-support #7117 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-intake #20387 / part2\nelasticsearch-pull-request #63456 / part-2\nelasticsearch-periodic-platform-support #7103 / windows-2022_checkpart2_platform-support-windows\nelasticsearch-pull-request #63433 / part-2\nelasticsearch-pull-request #63392 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.external.request.jinaai.JinaAIEmbeddingsRequestTests.testCreateRequest_TaskSettingsInputType\" -Dtests.seed=FC2BAE4031007161 -Dtests.locale=zh-Hans-SG -Dtests.timezone=Australia/Yancowinna -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: received invalid input type value [unspecified]\n\nIssue Reasons:\n\n[8.x] 8 failures in test testCreateRequest_TaskSettingsInputType (7.6% fail rate in 105 executions)\n[8.x] 3 failures in step part-2 (10.7% fail rate in 28 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (66.7% fail rate in 3 executions)\n[8.x] 3 failures in pipeline elasticsearch-pull-request (11.5% fail rate in 26 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-17", "closed_at": "2025-03-19", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125057, "issue_title": "[CI] AzureOpenAiEmbeddingsActionTests testExecute_ReturnsSuccessfulResponse failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7103 / almalinux-9_platform-support-unix\nelasticsearch-periodic #7081 / graalvm-ce17_checkpart2_java-matrix\nelasticsearch-pull-request #63428 / part-2\nelasticsearch-intake #20315 / part2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.external.action.azureopenai.AzureOpenAiEmbeddingsActionTests.testExecute_ReturnsSuccessfulResponse\" -Dtests.seed=5245B776F6B71BC3 -Dtests.locale=en-CH -Dtests.timezone=Chile/Continental -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: is <3>\n     but: was <2>\n\nIssue Reasons:\n\n[8.x] 4 failures in test testExecute_ReturnsSuccessfulResponse (2.7% fail rate in 150 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-17", "closed_at": "2025-03-19", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125039, "issue_title": "ES|QL: MV_SLICE \"start offset is greater than end offset\" when using -1", "issue_body": "Elasticsearch Version\n8.17.1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nCloud\nProblem Description\n| EVAL list = MV_SLICE(data, 1, -1) will return the error \"Start offset is greater than end offset\". The documentation says that -1 should be used to get all items in the list but this does not work. I used | EVAL list = MV_SLICE(data, 1, MV_COUNT(data)) as a workaround.\nSteps to Reproduce\n\nSwitch to ES|QL editor\nFind a multi-value field.\nUse MV_SLICE to reference a field and then -1 to reference \"the rest of the fields\".\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-17", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL", "v8.17.1"], "State": "open", "Author": "KyleOnK8s"}
{"issue_number": 125019, "issue_title": "Explore GPU accelerated vector search with cuVS", "issue_body": "Description\n\nNVIDIA's cuVS library (https://github.com/rapidsai/cuvs) is a state-of-the-art vector search library. It supports fast indexing and search using GPUs.\n\nSupport use-case such as:\n\nindex and search both on GPU\nindex on GPU, search on CPU\nflat brute force and graph based\n\nDependencies:\n\nlucene GH issue: apache/lucene#14243\nlucene PR: apache/lucene#14131\n\nTasks:\n\nAllow vector mapping types in a custom Elasticsearch Plugin - so that the plugin can directly implement a KnnVectorsFormat that leverages cuVS to index and search on CPU (similar to that in lucene-cuvs).\n..\n", "created_at": "2025-03-17", "closed_at": null, "labels": ["Team:Search Relevance", ":Search Relevance/Search"], "State": "open", "Author": "ChrisHegarty"}
{"issue_number": 125012, "issue_title": "ES|QL: Add support for match_phrase", "issue_body": "tracked in #123043\nWe want to add support in ES|QL for match_phrase as a separate function in ES|QL:\nFROM books\nWHERE match_phrase(plot, \"Tale of two cities\", {\"analyzer\": \"my_analyzer\"})\n\nThe function will translate to match_phrase query.\nThe function needs to support all existing options that we have for the match_phrase query.", "created_at": "2025-03-17", "closed_at": null, "labels": [">feature", "ES|QL-ui", "Team:Search Relevance", ":Search Relevance/Search"], "State": "open", "Author": "ioanatia"}
{"issue_number": 125010, "issue_title": "[CI] MixedClusterClientYamlTestSuiteIT test {p0=search/610_function_score/Random} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7075 / openjdk21_8.18.0_java-fips-matrix-bwc\nelasticsearch-pull-request #63243 / 8.18.0_bwc-snapshots\nelasticsearch-pull-request #63243 / 8.18.0_bwc-snapshots\nelasticsearch-pull-request #63119 / 8.18.0_bwc-snapshots\nelasticsearch-periodic #7068 / openjdk23_8.18.0_java-matrix-bwc\nelasticsearch-pull-request #63174 / 8.18.0_bwc-snapshots\nelasticsearch-periodic #7061 / openjdk21_8.18.0_java-fips-matrix-bwc\nelasticsearch-periodic #7061 / openjdk21_8.18.0_java-matrix-bwc\nelasticsearch-periodic #7061 / 8.18.0_bwc\nelasticsearch-pull-request #63119 / 8.18.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:mixed-cluster:v8.18.0#mixedClusterTest\" -Dtests.class=\"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=search/610_function_score/Random}\" -Dtests.seed=32A6AECE6905D0F -Dtests.bwc=true -Dtests.locale=ff-Latn-CM -Dtests.timezone=Asia/Vladivostok -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [search/610_function_score:61]: expected [2xx] status code but api [search] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"query_shard_exception\",\"reason\":\"failed to create query: Fielddata access on the _id field is disallowed, you can re-enable it by updating the dynamic cluster setting: indices.id_field_data.enabled\",\"index_uuid\":\"LgpTemhCSP6uMxf524GVvg\",\"index\":\"test\",\"stack_trace\":\"[test/LgpTemhCSP6uMxf524GVvg] org.elasticsearch.index.query.QueryShardException: failed to create query: Fielddata access on the _id field is disallowed, you can re-enable it by updating the dynamic cluster setting: indices.id_field_data.enabled\\n\\tat org.elasticsearch.server@8.18.0-SNAPSHOT/org.elasticsearch.index.query.SearchExecutionContext.toQuery(SearchExecutionContext.java:568)\\n\\tat org.elasticsearch.server@8.18.0-SNAPSHOT/org.elasticsearch.search.SearchService.parseSource(SearchService.java:1365)\\n\\tat org.elasticsearch.server@8.18.0-SNAPSHOT/or\n[truncated]\n\nIssue Reasons:\n\n[9.0] 14 failures in test test {p0=search/610_function_score/Random} (45.2% fail rate in 31 executions)\n[9.0] 2 failures in step openjdk21_8.18.0_java-fips-matrix-bwc (66.7% fail rate in 3 executions)\n[9.0] 9 failures in step 8.18.0_bwc-snapshots (47.4% fail rate in 19 executions)\n[9.0] 3 failures in pipeline elasticsearch-periodic (100.0% fail rate in 3 executions)\n[9.0] 6 failures in pipeline elasticsearch-pull-request (66.7% fail rate in 9 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-17", "closed_at": "2025-03-20", "labels": [">test-failure", "low-risk", "priority:normal", "Team:Search Relevance", ":Search Relevance/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124999, "issue_title": "[CI] DataStreamLifecycleServiceIT testLifecycleAppliedToFailureStore failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20200 / part1\nelasticsearch-pull-request #62630 / part-1\n\nReproduction Line:\n./gradlew \":modules:data-streams:internalClusterTest\" --tests \"org.elasticsearch.datastreams.lifecycle.DataStreamLifecycleServiceIT.testLifecycleAppliedToFailureStore\" -Dtests.seed=E12E2984ECFA793C -Dtests.locale=vmw-MZ -Dtests.timezone=Asia/Tbilisi -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\n\nIssue Reasons:\n\n[main] 2 failures in test testLifecycleAppliedToFailureStore (0.4% fail rate in 454 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-17", "closed_at": "2025-03-24", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124990, "issue_title": "[CI] DockerTests test011SecurityEnabledStatus failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #6732 / ubuntu-2204_packaging-tests-unix\nelasticsearch-pull-request #62434 / ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-pull-request #62434 / rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-pull-request #62420 / ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-pull-request #62420 / rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\n    PID TTY      STAT   TIME COMMAND\n      1 ?        Ss     0:00 /bin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper\n      7 ?        Sl     0:28 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n    331 pts/1    Rs+    0:00 ps ax\n\nStdout:\nCreated elasticsearch keystore in /usr/share/elasticsearch/config/elasticsearch.keystore\n\nStderr:\n\n\nThread dump:\n\n\nIssue Reasons:\n\n[main] 5 failures in test test011SecurityEnabledStatus (0.5% fail rate in 943 executions)\n[main] 2 failures in step rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample (0.9% fail rate in 230 executions)\n[main] 2 failures in step ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample (0.9% fail rate in 230 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.9% fail rate in 234 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-17", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124987, "issue_title": "[CI] TimeSeriesDataStreamsIT testRolloverAction failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7070 / ubuntu-2404-aarch64_checkpart5_platform-support-arm\nelasticsearch-periodic #7048 / openjdk23_entitlements_true_checkpart5_java-matrix\nelasticsearch-pull-request #62808 / part-5\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:qa:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.ilm.TimeSeriesDataStreamsIT.testRolloverAction\" -Dtests.seed=3EFB608771468786 -Dtests.locale=szl-Latn-PL -Dtests.timezone=America/Port-au-Prince -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [GET], host [http://127.0.0.1:33007], URI [/.ds-logs-anbivaggyy-2025.03.17-000002/_settings?flat_settings=true], status line [HTTP/1.1 404 Not Found]\n{\"error\":{\"root_cause\":[{\"type\":\"index_not_found_exception\",\"reason\":\"no such index [.ds-logs-anbivaggyy-2025.03.17-000002]\",\"resource.type\":\"index_or_alias\",\"resource.id\":\".ds-logs-anbivaggyy-2025.03.17-000002\",\"index_uuid\":\"_na_\",\"index\":\".ds-logs-anbivaggyy-2025.03.17-000002\"}],\"type\":\"index_not_found_exception\",\"reason\":\"no such index [.ds-logs-anbivaggyy-2025.03.17-000002]\",\"resource.type\":\"index_or_alias\",\"resource.id\":\".ds-logs-anbivaggyy-2025.03.17-000002\",\"index_uuid\":\"_na_\",\"index\":\".ds-logs-anbivaggyy-2025.03.17-000002\"},\"status\":404}\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test testRolloverAction\n[main] 3 failures in test testRolloverAction (1.1% fail rate in 282 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-17", "closed_at": "2025-03-26", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124986, "issue_title": "[CI] ShardBulkInferenceActionFilterTests testHandleEmptyInput {p0=true} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7068 / ubuntu-2404-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7054 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.action.filter.ShardBulkInferenceActionFilterTests.testHandleEmptyInput {p0=false}\" -Dtests.seed=46E19F64DEAB8338 -Dtests.locale=nb-NO -Dtests.timezone=Africa/Freetown -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IllegalArgumentException: failed to parse value [0] for setting [indices.inference.batch_size], must be >= [1b]\n\nIssue Reasons:\n\n[8.x] 2 failures in test testHandleEmptyInput {p0=true} (1.8% fail rate in 113 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-17", "closed_at": "2025-03-17", "labels": [">test-failure", ":SearchOrg/Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124985, "issue_title": "[CI] ShardBulkInferenceActionFilterTests testHandleEmptyInput {p0=false} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7068 / ubuntu-2404-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7054 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.action.filter.ShardBulkInferenceActionFilterTests.testHandleEmptyInput {p0=false}\" -Dtests.seed=46E19F64DEAB8338 -Dtests.locale=nb-NO -Dtests.timezone=Africa/Freetown -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IllegalArgumentException: failed to parse value [0] for setting [indices.inference.batch_size], must be >= [1b]\n\nIssue Reasons:\n\n[8.x] 2 failures in test testHandleEmptyInput {p0=false} (1.8% fail rate in 113 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-17", "closed_at": "2025-03-17", "labels": [">test-failure", ":SearchOrg/Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124978, "issue_title": "[CI] DataStreamLifecycleServiceRuntimeSecurityIT testRolloverLifecycleAndForceMergeAuthorized failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7063 / oraclelinux-8_platform-support-unix\nelasticsearch-pull-request #62888 / part-4\nelasticsearch-pull-request #62849 / part-4\nelasticsearch-pull-request #62764 / part-4\nelasticsearch-pull-request #62711 / part-4\nelasticsearch-periodic #6985 / openjdk21_checkpart4_java-fips-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:internalClusterTest\" --tests \"org.elasticsearch.integration.DataStreamLifecycleServiceRuntimeSecurityIT.testRolloverLifecycleAndForceMergeAuthorized\" -Dtests.seed=FA302D460B4ACFC7 -Dtests.locale=fo -Dtests.timezone=America/Nipigon -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <3>\n     but: was <2>\n\nIssue Reasons:\n\n[main] 6 failures in test testRolloverLifecycleAndForceMergeAuthorized (1.6% fail rate in 382 executions)\n[main] 4 failures in step part-4 (4.1% fail rate in 97 executions)\n[main] 4 failures in pipeline elasticsearch-pull-request (4.0% fail rate in 101 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-16", "closed_at": "2025-04-01", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124977, "issue_title": "[CI] CrossClusterAsyncQueryStopIT testStopQuery failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7063 / rocky-9_platform-support-unix\nelasticsearch-pull-request #62913 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.CrossClusterAsyncQueryStopIT.testStopQueryLocal\" -Dtests.seed=78ACBDD525C3BDC3 -Dtests.locale=pt-PT -Dtests.timezone=Africa/Khartoum -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: is <true>\n     but: was <false>\n\nIssue Reasons:\n\n[main] 2 failures in test testStopQuery (1.8% fail rate in 112 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-16", "closed_at": "2025-04-01", "labels": [">test-failure", "low-risk", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124959, "issue_title": "[CI] CrossClusterAsyncQueryStopIT testStopQueryLocalNoRemotes failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7049 / almalinux-8-aarch64_checkpart3_platform-support-arm\nelasticsearch-pull-request #62913 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.CrossClusterAsyncQueryStopIT.testStopQueryLocal\" -Dtests.seed=2D625088089E642D -Dtests.locale=el -Dtests.timezone=America/Indiana/Tell_City -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: is <true>\n     but: was <false>\n\nIssue Reasons:\n\n[main] 2 failures in test testStopQueryLocalNoRemotes (1.8% fail rate in 114 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-16", "closed_at": "2025-04-01", "labels": [">test-failure", "low-risk", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124957, "issue_title": "[CI] BootstrapCheckTests test10Install failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #6725 / ubuntu-2004_packaging-tests-unix\nelasticsearch-periodic-packaging #6725 / ubuntu-2004_packaging-tests-unix\nelasticsearch-periodic-packaging #6725 / oraclelinux-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6725 / oraclelinux-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6725 / almalinux-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6725 / almalinux-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6725 / rocky-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6725 / rocky-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6725 / debian-12_packaging-tests-unix\nelasticsearch-periodic-packaging #6725 / debian-12_packaging-tests-unix\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\nPID   USER     TIME  COMMAND\n    1 elastics  0:00 /sbin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper\n    7 elastics  0:23 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n  164 elastics  0:52 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySe\n[truncated]\n\nIssue Reasons:\n\n[main] 107 failures in test test10Install (27.9% fail rate in 384 executions)\n[main] 4 failures in step ubuntu-2004_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step oraclelinux-9_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step almalinux-9_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step rocky-9_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step debian-12_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step ubuntu-2404_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step almalinux-8_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step oraclelinux-8_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step ubuntu-2204_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step rocky-8_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step rhel-9_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step opensuse-leap-15_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 4 failures in step rhel-8_packaging-tests-unix (100.0% fail rate in 4 executions)\n[main] 2 failures in step ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample (20.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-15", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124956, "issue_title": "[CI] BootstrapCheckTests test10Install failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #6704 / rocky-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6704 / rocky-9_packaging-tests-unix\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\nPID   USER     TIME  COMMAND\n    1 elastics  0:00 /sbin/tini -- /app/elasticsearch.sh\n    7 elastics  0:16 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n  136 elastics  1:01 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test10Install (0.5% fail rate in 440 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-15", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124955, "issue_title": "[CI] ShardBulkInferenceActionFilterTests testInferenceNotFound {p0=true} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7042 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7014 / opensuse-leap-15_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.action.filter.ShardBulkInferenceActionFilterTests.testInferenceNotFound {p0=false}\" -Dtests.seed=FA9210B10B2BCA4A -Dtests.locale=bm -Dtests.timezone=Asia/Istanbul -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IllegalArgumentException: failed to parse value [0] for setting [indices.inference.batch_size], must be >= [1b]\n\nIssue Reasons:\n\n[main] 2 failures in test testInferenceNotFound {p0=true} (0.8% fail rate in 244 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (40.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-15", "closed_at": "2025-03-17", "labels": [">test-failure", ":SearchOrg/Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124954, "issue_title": "[CI] ShardBulkInferenceActionFilterTests testInferenceNotFound {p0=false} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7042 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7014 / opensuse-leap-15_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.action.filter.ShardBulkInferenceActionFilterTests.testInferenceNotFound {p0=false}\" -Dtests.seed=FA9210B10B2BCA4A -Dtests.locale=bm -Dtests.timezone=Asia/Istanbul -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IllegalArgumentException: failed to parse value [0] for setting [indices.inference.batch_size], must be >= [1b]\n\nIssue Reasons:\n\n[main] 2 failures in test testInferenceNotFound {p0=false} (0.8% fail rate in 244 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (40.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-15", "closed_at": "2025-03-17", "labels": [">test-failure", ":SearchOrg/Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124953, "issue_title": "[CI] PropagateInlineEvalsTests testGroupingAliasingMoved_To_LeftSideOfJoin_WithExpression failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7054 / release-tests\nelasticsearch-periodic #7047 / release-tests\nelasticsearch-periodic #7040 / release-tests\nelasticsearch-periodic #7033 / release-tests\nelasticsearch-periodic #7026 / release-tests\nelasticsearch-periodic #7019 / release-tests\nelasticsearch-periodic #7012 / release-tests\nelasticsearch-periodic #7005 / release-tests\nelasticsearch-periodic #6998 / release-tests\nelasticsearch-periodic #6991 / release-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.optimizer.rules.logical.PropagateInlineEvalsTests.testGroupingAliasingMoved_To_LeftSideOfJoin_WithExpression\" -Dtests.seed=14E771E79B9E8DFC -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=shi-Latn-MA -Dtests.timezone=Etc/GMT+8 -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.xpack.esql.parser.ParsingException: line 4:3: mismatched input 'inlinestats' expecting {'enrich', 'dissect', 'eval', 'grok', 'limit', 'sort', 'stats', 'where', 'lookup', 'mv_expand', 'drop', 'keep', 'rename'}\n\nIssue Reasons:\n\n[9.0] 13 consecutive failures in step release-tests\n[9.0] 13 failures in test testGroupingAliasingMoved_To_LeftSideOfJoin_WithExpression (3.2% fail rate in 407 executions)\n[9.0] 13 failures in step release-tests (100.0% fail rate in 13 executions)\n[9.0] 13 failures in pipeline elasticsearch-periodic (100.0% fail rate in 13 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-15", "closed_at": "2025-03-17", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124952, "issue_title": "[CI] PropagateInlineEvalsTests testGroupingAliasingMoved_To_LeftSideOfJoin failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7054 / release-tests\nelasticsearch-periodic #7047 / release-tests\nelasticsearch-periodic #7040 / release-tests\nelasticsearch-periodic #7033 / release-tests\nelasticsearch-periodic #7026 / release-tests\nelasticsearch-periodic #7019 / release-tests\nelasticsearch-periodic #7012 / release-tests\nelasticsearch-periodic #7005 / release-tests\nelasticsearch-periodic #6998 / release-tests\nelasticsearch-periodic #6991 / release-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.optimizer.rules.logical.PropagateInlineEvalsTests.testGroupingAliasingMoved_To_LeftSideOfJoin_WithExpression\" -Dtests.seed=14E771E79B9E8DFC -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=shi-Latn-MA -Dtests.timezone=Etc/GMT+8 -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.xpack.esql.parser.ParsingException: line 4:3: mismatched input 'inlinestats' expecting {'enrich', 'dissect', 'eval', 'grok', 'limit', 'sort', 'stats', 'where', 'lookup', 'mv_expand', 'drop', 'keep', 'rename'}\n\nIssue Reasons:\n\n[9.0] 13 consecutive failures in step release-tests\n[9.0] 13 failures in test testGroupingAliasingMoved_To_LeftSideOfJoin (3.2% fail rate in 407 executions)\n[9.0] 13 failures in step release-tests (100.0% fail rate in 13 executions)\n[9.0] 13 failures in pipeline elasticsearch-periodic (100.0% fail rate in 13 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-15", "closed_at": "2025-03-17", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124951, "issue_title": "[CI] EsqlSpecIT test {lookup-join.MvJoinKeyFromRow SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7020 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-pull-request #62598 / part-3\nelasticsearch-pull-request #62049 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:single-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.single_node.EsqlSpecIT\" -Dtests.method=\"test {lookup-join.MvJoinKeyFromRow SYNC}\" -Dtests.seed=6ACADFEF61E87DD -Dtests.locale=rwk -Dtests.timezone=Europe/Ulyanovsk -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected a list containing\n0: expected \"Line 2:3: evaluation of [LOOKUP JOIN languages_lookup_non_unique_key ON language_code] failed, treating result as null. Only first 20 failures recorded.\" but was <missing>\n1: expected \"Line 2:3: java.lang.IllegalArgumentException: LOOKUP JOIN encountered multi-value\" but was <missing>\n\nIssue Reasons:\n\n[main] 3 failures in test test {lookup-join.MvJoinKeyFromRow SYNC} (0.4% fail rate in 812 executions)\n[main] 2 failures in step part-3 (0.6% fail rate in 355 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.6% fail rate in 354 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-15", "closed_at": "2025-03-20", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124950, "issue_title": "[CI] DataStreamLifecycleServiceIT testErrorRecordingOnRetention failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7042 / oraclelinux-8_platform-support-unix\nelasticsearch-pull-request #62741 / part-1\nelasticsearch-periodic #6985 / openjdk21_checkpart1_java-fips-matrix\n\nReproduction Line:\n./gradlew \":modules:data-streams:internalClusterTest\" --tests \"org.elasticsearch.datastreams.lifecycle.DataStreamLifecycleServiceIT.testErrorRecordingOnRetention\" -Dtests.seed=CFDE29E4917E878A -Dtests.locale=yrl-VE -Dtests.timezone=Africa/Conakry -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\n\nIssue Reasons:\n\n[main] 3 failures in test testErrorRecordingOnRetention (1.0% fail rate in 295 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-15", "closed_at": "2025-03-24", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124942, "issue_title": "Request cache is sensitive to the runtime mapping order", "issue_body": "Description\nWhen a search request contains a runtime mapping, the request cache may not be hit when expected due to the inconsistent order of entries in the runtime mapping.\nCould the order be somehow made deterministic so that the request cache is leveraged when expected ?\n\nBelow is a description of the apparent cause of the issue:\nWhen parsed from the JSON request, the runtime mapping is given a HashMap where the iteration order isn't consistent across invocations. (Here I just take parsing as an example, but the runtime mappings setter may also be called programmatically via the request builder)\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/search/builder/SearchSourceBuilder.java\n\n\n         Line 1517\n      in\n      481d91c\n\n\n\n\n\n\n runtimeMappings = parser.map(); \n\n\n\n\n\nThe request cache key is computed using the following method, which is based on the serialization of a ShardSearchRequest\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/search/internal/ShardSearchRequest.java\n\n\n        Lines 543 to 546\n      in\n      481d91c\n\n\n\n\n\n\n public BytesReference cacheKey(CheckedBiConsumer<ShardSearchRequest, StreamOutput, IOException> differentiator) throws IOException { \n\n\n\n BytesStreamOutput out = scratch.get(); \n\n\n\n try { \n\n\n\n this.innerWriteTo(out, true); \n\n\n\n\n\nThe ShardSearchRequest then serializes the SearchSourceBuilder, which then serializes the runtime mappings.\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/search/internal/ShardSearchRequest.java\n\n\n        Lines 353 to 361\n      in\n      481d91c\n\n\n\n\n\n\n protected final void innerWriteTo(StreamOutput out, boolean asKey) throws IOException { \n\n\n\n shardId.writeTo(out); \n\n\n\n out.writeByte(searchType.id()); \n\n\n\n if (asKey == false) { \n\n\n\n out.writeVInt(shardRequestIndex); \n\n\n\n out.writeVInt(numberOfShards); \n\n\n\n     } \n\n\n\n out.writeOptionalTimeValue(scroll); \n\n\n\n out.writeOptionalWriteable(source); \n\n\n\n\n\nThe runtime mappings being a HashMap (always?) then gets serialized, where the iteration order isn't guaranteed to output always the same thing (byte-wise).\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/common/io/stream/StreamOutput.java\n\n\n        Lines 708 to 712\n      in\n      481d91c\n\n\n\n\n\n\n if (v instanceof LinkedHashMap) { \n\n\n\n o.writeByte((byte) 9); \n\n\n\n } else { \n\n\n\n o.writeByte((byte) 10); \n\n\n\n } \n\n\n\n\n\n\ud83d\udc49 The consequence is that the content of the StreamOutput may differ across calls to ShardSearchRequest#cacheKey thus creating a different SHA256 value, even though the request itself didn't change.", "created_at": "2025-03-15", "closed_at": null, "labels": [">enhancement", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "scampi"}
{"issue_number": 124940, "issue_title": "[CI] BootstrapCheckTests test20RunWithBootstrapChecks failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #6690 / rocky-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6690 / rocky-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6690 / rocky-8_packaging-tests-unix\nelasticsearch-periodic-packaging #6690 / rocky-8_packaging-tests-unix\nelasticsearch-periodic-packaging #6690 / rhel-8_packaging-tests-unix\nelasticsearch-periodic-packaging #6690 / rhel-8_packaging-tests-unix\nelasticsearch-periodic-packaging #6690 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #6690 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #6690 / oraclelinux-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6690 / oraclelinux-9_packaging-tests-unix\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\nPID   USER     TIME  COMMAND\n    1 elastics  0:00 /sbin/tini -- /app/elasticsearch.sh\n    7 elastics  0:05 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n   79 elastics  1:06 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.netty.recycler.maxCapacityP\n[truncated]\n\nIssue Reasons:\n\n[main] 39 failures in test test20RunWithBootstrapChecks (3.9% fail rate in 1000 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-15", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124920, "issue_title": "[CI] SystemResourceSnapshotIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-pull-request #62849 / part-1\nelasticsearch-periodic-platform-support #7021 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-pull-request #62845 / part-1\nelasticsearch-pull-request #62839 / part-1\nelasticsearch-periodic #6999 / openjdk24_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #6999 / release-tests\nelasticsearch-periodic-platform-support #7021 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7021 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #7021 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #7021 / almalinux-9_platform-support-unix\n\nReproduction Line:\ngradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.snapshots.SystemResourceSnapshotIT.testDeletedDatastreamIsRestorable\" -Dtests.seed=6ABB43D270B066D3 -Dtests.locale=fr-GN -Dtests.timezone=America/Dawson -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.ResourceNotFoundException: data streams [.test-system-data-stream] not found\n\nIssue Reasons:\n\n[main] 39 failures in class org.elasticsearch.snapshots.SystemResourceSnapshotIT (52.0% fail rate in 75 executions)\n[main] 21 failures in step part-1 (53.8% fail rate in 39 executions)\n[main] 3 failures in step part-1-entitlements (42.9% fail rate in 7 executions)\n[main] 2 failures in step part1 (25.0% fail rate in 8 executions)\n[main] 22 failures in pipeline elasticsearch-pull-request (57.9% fail rate in 38 executions)\n[main] 2 failures in pipeline elasticsearch-intake (25.0% fail rate in 8 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-31", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124903, "issue_title": "ESQL: FieldExtractorIT failing release tests", "issue_body": "CI Link\nhttps://gradle-enterprise.elastic.co/s/nfjjswsdnnffw/tests/task/:x-pack:plugin:esql:qa:server:single-node:javaRestTest/details/org.elasticsearch.xpack.esql.qa.single_node.FieldExtractorIT/testTypeConflictInObject%20%7BSTORED%7D?top-execution=1\nRepro line\n./gradlew \":x-pack:plugin:esql:qa:server:single-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.single_node.FieldExtractorIT.testTypeConflictInObject {STORED}\" -Dtests.seed=2693A1F8F8BB7B85 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=fr-NE -Dtests.timezone=Asia/Dhaka -Druntime.java=23\nDoes it reproduce?\nDidn't try\nApplicable branches\nmain\nFailure history\nNo response\nFailure excerpt\n\u00bfeerror\u00bfjroot_cause\ufffd\u00bfdtypex#action_request_validation_exceptionfreasonx?Validation Failed: 1: [pragma] only allowed in snapshot builds;kstack_trace\ufffdy\ufffd\ufffdorg.elasticsearch.ElasticsearchException$1: Validation Failed: 1: [pragma] only allowed in snapshot builds;\t\n\nIt looks like #122891 added pragmas to the test but didn't exclude release builds, so I had this fail on a PR of mine when activating the test-release label.\n@nik9000 , could you maybe take a look as you're familiar with this test?", "created_at": "2025-03-14", "closed_at": "2025-03-17", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "alex-spies"}
{"issue_number": 124892, "issue_title": "[CI] ShardBulkInferenceActionFilterTests testExplicitNull {p0=true} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20119 / part2\nelasticsearch-periodic-platform-support #7014 / almalinux-8-aarch64_checkpart2_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.action.filter.ShardBulkInferenceActionFilterTests.testExplicitNull {p0=false}\" -Dtests.seed=4ACADDB0C64A1E44 -Dtests.locale=sbp-TZ -Dtests.timezone=Asia/Kuwait -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IllegalArgumentException: failed to parse value [0] for setting [indices.inference.batch_size], must be >= [1b]\n\nIssue Reasons:\n\n[main] 2 failures in test testExplicitNull {p0=true} (0.8% fail rate in 257 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-17", "labels": [">test-failure", "medium-risk", ":SearchOrg/Relevance", "priority:high"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124891, "issue_title": "[CI] ShardBulkInferenceActionFilterTests testExplicitNull {p0=false} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20119 / part2\nelasticsearch-periodic-platform-support #7014 / almalinux-8-aarch64_checkpart2_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.action.filter.ShardBulkInferenceActionFilterTests.testExplicitNull {p0=false}\" -Dtests.seed=4ACADDB0C64A1E44 -Dtests.locale=sbp-TZ -Dtests.timezone=Asia/Kuwait -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IllegalArgumentException: failed to parse value [0] for setting [indices.inference.batch_size], must be >= [1b]\n\nIssue Reasons:\n\n[main] 2 failures in test testExplicitNull {p0=false} (0.8% fail rate in 257 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-17", "labels": [">test-failure", "medium-risk", ":SearchOrg/Relevance", "priority:high"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124887, "issue_title": "ES|QL COUNT_DISTINCT does not support spatial types", "issue_body": "While investigating #123903 I noticed that COUNT_DISTINCT did not support spatial types. While it is true we cannot define a sort order for these types, there should be no problem defining equality for at least the geo_point and cartesian_point types (to the resolution supported by Lucene). It might be harder to support geo_shape and cartesian_shape, but we could at least investigate that, and make a new issue if that cannot be done together with geo_point and cartesian_point.", "created_at": "2025-03-14", "closed_at": null, "labels": [":Analytics/Geo", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "craigtaverner"}
{"issue_number": 124886, "issue_title": "[CI] DataStreamAndIndexLifecycleMixingTests testIndexTemplateSwapsILMForDataStreamLifecycle failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7014 / sles-15_platform-support-unix\nelasticsearch-pull-request #62626 / part-2\nelasticsearch-pull-request #62097 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:internalClusterTest\" --tests \"org.elasticsearch.xpack.ilm.DataStreamAndIndexLifecycleMixingTests.testIndexTemplateSwapsILMForDataStreamLifecycle\" -Dtests.seed=1DFFCE84BC4BFB0A -Dtests.locale=ks -Dtests.timezone=Canada/Saskatchewan -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.util.concurrent.ExecutionException: [.ds-datastream-uqwigbyzzdzpjs-2025.03.14-000003] org.elasticsearch.index.IndexNotFoundException: no such index [.ds-datastream-uqwigbyzzdzpjs-2025.03.14-000003]\n\nIssue Reasons:\n\n[main] 3 failures in test testIndexTemplateSwapsILMForDataStreamLifecycle (0.7% fail rate in 446 executions)\n[main] 2 failures in step part-2 (1.1% fail rate in 175 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.1% fail rate in 178 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-26", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124885, "issue_title": "[CI] ExplainDataStreamLifecycleIT testSystemExplainLifecycle failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6992 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-pull-request #62697 / part-1\nelasticsearch-intake #20069 / part1\n\nReproduction Line:\n./gradlew \":modules:data-streams:internalClusterTest\" --tests \"org.elasticsearch.datastreams.lifecycle.ExplainDataStreamLifecycleIT.testSystemExplainLifecycle\" -Dtests.seed=E30F24AE87453693 -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=he-Hebr-IL -Dtests.timezone=Atlantic/Canary -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.index.IndexNotFoundException: no such index [.ds-.system-test-2025.03.14-000002]\n\nIssue Reasons:\n\n[main] 3 failures in test testSystemExplainLifecycle (1.4% fail rate in 207 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-26", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124882, "issue_title": "[CI] ExplainDataStreamLifecycleIT testExplainLifecycle failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6992 / openjdk24_entitlements_false_checkpart1_java-matrix\nelasticsearch-pull-request #62635 / part-1\nelasticsearch-periodic-platform-support #7007 / almalinux-8-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":modules:data-streams:internalClusterTest\" --tests \"org.elasticsearch.datastreams.lifecycle.ExplainDataStreamLifecycleIT.testExplainLifecycle\" -Dtests.seed=35C798498ADFFBFA -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=lag-TZ -Dtests.timezone=US/Mountain -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.index.IndexNotFoundException: no such index [.ds-metrics-foo-2025.03.14-000002]\n\nIssue Reasons:\n\n[main] 3 failures in test testExplainLifecycle (1.4% fail rate in 207 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-26", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124875, "issue_title": "[AwsS3Snap] path is not accessible on master node", "issue_body": "Elasticsearch Version\n8.17.3\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nLinux 5.10.233-224.894.amzn2.x86_64\nProblem Description\nAfter this is taken, it cannot take snap and gets an error.\nSteps to Reproduce\nI'm taking snaps to s3 via the Kibana UI. After a certain period of time this connection breaks and repository verify gets an error. then it can't take a snap and gets an error.\nLogs (if relevant)\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"repository_verification_exception\",\n        \"reason\": \"[AwsS3Snap] path  is not accessible on master node\"\n      }\n    ],\n    \"type\": \"repository_verification_exception\",\n    \"reason\": \"[AwsS3Snap] path  is not accessible on master node\",\n    \"caused_by\": {\n      \"type\": \"i_o_exception\",\n      \"reason\": \"Unable to upload object [tests-A34534kfdkggVFqQ/master.dat] using a single upload\",\n      \"caused_by\": {\n        \"type\": \"amazon_client_exception\",\n        \"reason\": \"java.lang.IllegalStateException: Connection pool shut down\",\n        \"caused_by\": {\n          \"type\": \"illegal_state_exception\",\n          \"reason\": \"Connection pool shut down\"\n        }\n      }\n    }\n  },\n  \"status\": 500\n}", "created_at": "2025-03-14", "closed_at": "2025-03-14", "labels": [">bug", "needs:triage"], "State": "closed", "Author": "ahmetdd"}
{"issue_number": 124867, "issue_title": "Extend reproduction for starvation bug of scaling EsExecutors to work if max pool size > 1", "issue_body": "The reproduction of the EsExecutors starvation bug fixed in PR should be improved to also reliably test the cases where max pool size > 1.\nCurrently the reproduction only works if pool size doesn't exceed 1.", "created_at": "2025-03-14", "closed_at": null, "labels": [">test", ":Core/Infra/Core", "Team:Core/Infra"], "State": "open", "Author": "mosche"}
{"issue_number": 124850, "issue_title": "[CI] DataStreamAndIndexLifecycleMixingTests testUpdateIndexTemplateFromILMtoBothILMAndDataStreamLifecycle failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20078 / part2\nelasticsearch-intake #20063 / part2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:internalClusterTest\" --tests \"org.elasticsearch.xpack.ilm.DataStreamAndIndexLifecycleMixingTests.testUpdateIndexTemplateFromILMtoBothILMAndDataStreamLifecycle\" -Dtests.seed=278C43E22FB0D44C -Dtests.locale=syr-Syrc-IQ -Dtests.timezone=SystemV/EST5EDT -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.util.concurrent.ExecutionException: [.ds-datastream-boemntfvfhb-2025.03.14-000004] org.elasticsearch.index.IndexNotFoundException: no such index [.ds-datastream-boemntfvfhb-2025.03.14-000004]\n\nIssue Reasons:\n\n[main] 2 failures in test testUpdateIndexTemplateFromILMtoBothILMAndDataStreamLifecycle (0.9% fail rate in 227 executions)\n[main] 2 failures in step part2 (7.4% fail rate in 27 executions)\n[main] 2 failures in pipeline elasticsearch-intake (7.4% fail rate in 27 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-26", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124849, "issue_title": "[CI] DataStreamAndIndexLifecycleMixingTests testUpdateIndexTemplateToMigrateFromDataStreamLifecycleToIlm failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6985 / concurrent-search-tests\nelasticsearch-intake #20071 / part2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:internalClusterTest\" --tests \"org.elasticsearch.xpack.ilm.DataStreamAndIndexLifecycleMixingTests.testUpdateIndexTemplateToMigrateFromDataStreamLifecycleToIlm\" -Dtests.seed=B29C2B0D9A883D2F -Dtests.jvm.argline=\"-Des.concurrent_search=true\" -Dtests.locale=tg -Dtests.timezone=America/St_Vincent -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.ArrayIndexOutOfBoundsException: Index 3 out of bounds for length 3\n\nIssue Reasons:\n\n[main] 2 failures in test testUpdateIndexTemplateToMigrateFromDataStreamLifecycleToIlm (0.9% fail rate in 226 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-26", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124848, "issue_title": "[CI] MixedClusterClientYamlTestSuiteIT test {p0=search.vectors/41_knn_search_bbq_hnsw/Test knn search} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6985 / openjdk21_9.0.0_java-fips-matrix-bwc\nelasticsearch-pull-request #62285 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #62164 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62164 / 8.19.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:mixed-cluster:v9.0.0#mixedClusterTest\" -Dtests.class=\"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=search.vectors/41_knn_search_bbq_hnsw/Test knn search}\" -Dtests.seed=EC439959769A3C6F -Dtests.bwc=true -Dtests.locale=mgo-Latn-CM -Dtests.timezone=Pacific/Galapagos -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [search.vectors/41_knn_search_bbq_hnsw:105]: \nExpected: \"3\"\n     but: was \"2\"\n\nIssue Reasons:\n\n[main] 4 failures in test test {p0=search.vectors/41_knn_search_bbq_hnsw/Test knn search} (0.8% fail rate in 486 executions)\n[main] 2 failures in step 8.19.0_bwc-snapshots (0.9% fail rate in 219 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.1% fail rate in 176 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-27", "labels": [">test-failure", ":Search Relevance/Vectors", "low-risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124847, "issue_title": "[CI] FileSettingsServiceIT testSettingsApplied failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7049 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7007 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6979 / ubuntu-2404-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.reservedstate.service.FileSettingsServiceIT.testSettingsApplied\" -Dtests.seed=2F090328A9D11F30 -Dtests.locale=dz-Tibt-BT -Dtests.timezone=Indian/Comoro -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 3 failures in test testSettingsApplied (0.5% fail rate in 578 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-platform-support (27.3% fail rate in 11 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124846, "issue_title": "[CI] DataStreamLifecycleServiceIT testAutomaticForceMerge failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7007 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7007 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic #6985 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-pull-request #62601 / part-1\n\nReproduction Line:\n./gradlew \":modules:data-streams:internalClusterTest\" --tests \"org.elasticsearch.datastreams.lifecycle.DataStreamLifecycleServiceIT.testAutomaticForceMerge\" -Dtests.seed=A4A18D06FC83A975 -Dtests.locale=ksb -Dtests.timezone=America/Cambridge_Bay -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\n\nIssue Reasons:\n\n[main] 4 failures in test testAutomaticForceMerge (1.9% fail rate in 214 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-03-24", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124845, "issue_title": "[CI] OpenIdConnectAuthIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7684 / almalinux-8-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7657 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7650 / almalinux-8-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7643 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7615 / ubuntu-2404-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7573 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 6 failures in class org.elasticsearch.xpack.security.authc.oidc.OpenIdConnectAuthIT (1.6% fail rate in 384 executions)\n[9.0] 2 failures in step almalinux-8-aarch64_checkpart2_platform-support-arm (14.3% fail rate in 14 executions)\n[9.0] 3 failures in step ubuntu-2004-aarch64_checkpart2_platform-support-arm (20.0% fail rate in 15 executions)\n[9.0] 6 failures in pipeline elasticsearch-periodic-platform-support (35.3% fail rate in 17 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124844, "issue_title": "[CI] ClassificationIT testDeleteExpiredData_RemovesUnusedState failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7030 / openjdk21_checkpart4_java-matrix\nelasticsearch-periodic #6981 / openjdk17_checkpart4_java-fips-matrix\nelasticsearch-periodic #6925 / openjdk22_checkpart4_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:native-multi-node-tests:javaRestTest\" --tests \"org.elasticsearch.xpack.ml.integration.ClassificationIT.testDeleteExpiredData_RemovesUnusedState\" -Dtests.seed=311BCA03A4C11FF0 -Dtests.locale=mt-MT -Dtests.timezone=Antarctica/Troll -Druntime.java=21\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Stats were: {\"id\":\"classification_delete_expired_data\",\"state\":\"started\",\"progress\":[{\"phase\":\"reindexing\",\"progress_percent\":100},{\"phase\":\"loading_data\",\"progress_percent\":100},{\"phase\":\"feature_selection\",\"progress_percent\":100},{\"phase\":\"coarse_parameter_search\",\"progress_percent\":100},{\"phase\":\"fine_tuning_parameters\",\"progress_percent\":93},{\"phase\":\"final_training\",\"progress_percent\":0},{\"phase\":\"writing_results\",\"progress_percent\":0},{\"phase\":\"inference\",\"progress_percent\":0}],\"data_counts\":{\"training_docs_count\":100,\"test_docs_count\":0,\"skipped_docs_count\":0},\"memory_usage\":{\"timestamp\":1742129434903,\"peak_usage_bytes\":56552,\"status\":\"ok\"},\"analysis_stats\":{\"classification_stats\":{\"timestamp\":1742129434903,\"iteration\":16,\"hyperparameters\":{\"class_assignment_objective\":\"maximize_minimum_recall\",\"alpha\":1.744853789550222,\"downsample_factor\":0.6273126154109778,\"eta\":0.2306758273935785,\"eta_growth_rate_per_tree\":1.128221351693222,\"feature_bag_fraction\":0.1\n[truncated]\n\nIssue Reasons:\n\n[8.17] 3 failures in test testDeleteExpiredData_RemovesUnusedState (0.6% fail rate in 492 executions)\n[8.17] 3 failures in pipeline elasticsearch-periodic (18.8% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-14", "closed_at": "2025-04-07", "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124839, "issue_title": "[CI] PropagateInlineEvalsTests testGroupingAliasingMoved_To_LeftSideOfJoin failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7012 / release-tests\nelasticsearch-periodic #7005 / release-tests\nelasticsearch-periodic #6998 / release-tests\nelasticsearch-periodic #6991 / release-tests\nelasticsearch-periodic #6984 / release-tests\nelasticsearch-periodic #6977 / release-tests\nelasticsearch-periodic #6970 / release-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.optimizer.rules.logical.PropagateInlineEvalsTests.testGroupingAliasingMoved_To_LeftSideOfJoin_WithExpression\" -Dtests.seed=EF9D141F4695A05A -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=yo-NG -Dtests.timezone=Europe/Istanbul -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.xpack.esql.parser.ParsingException: line 4:3: mismatched input 'inlinestats' expecting {'enrich', 'dissect', 'eval', 'grok', 'limit', 'sort', 'stats', 'where', 'lookup', 'mv_expand', 'drop', 'keep', 'rename'}\n\nIssue Reasons:\n\n[9.0] 7 consecutive failures in step release-tests\n[9.0] 7 failures in test testGroupingAliasingMoved_To_LeftSideOfJoin (3.1% fail rate in 227 executions)\n[9.0] 7 failures in step release-tests (100.0% fail rate in 7 executions)\n[9.0] 7 failures in pipeline elasticsearch-periodic (100.0% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-14", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124838, "issue_title": "[CI] PropagateInlineEvalsTests testGroupingAliasingMoved_To_LeftSideOfJoin_WithExpression failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7012 / release-tests\nelasticsearch-periodic #7005 / release-tests\nelasticsearch-periodic #6998 / release-tests\nelasticsearch-periodic #6991 / release-tests\nelasticsearch-periodic #6984 / release-tests\nelasticsearch-periodic #6977 / release-tests\nelasticsearch-periodic #6970 / release-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.optimizer.rules.logical.PropagateInlineEvalsTests.testGroupingAliasingMoved_To_LeftSideOfJoin_WithExpression\" -Dtests.seed=EF9D141F4695A05A -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=yo-NG -Dtests.timezone=Europe/Istanbul -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.xpack.esql.parser.ParsingException: line 4:3: mismatched input 'inlinestats' expecting {'enrich', 'dissect', 'eval', 'grok', 'limit', 'sort', 'stats', 'where', 'lookup', 'mv_expand', 'drop', 'keep', 'rename'}\n\nIssue Reasons:\n\n[9.0] 7 consecutive failures in step release-tests\n[9.0] 7 failures in test testGroupingAliasingMoved_To_LeftSideOfJoin_WithExpression (3.1% fail rate in 227 executions)\n[9.0] 7 failures in step release-tests (100.0% fail rate in 7 executions)\n[9.0] 7 failures in pipeline elasticsearch-periodic (100.0% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-14", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124837, "issue_title": "[CI] DataStreamAndIndexLifecycleMixingTests testUpdateIndexTemplateToDataStreamLifecyclePreference failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20055 / part2\nelasticsearch-pull-request #62097 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:internalClusterTest\" --tests \"org.elasticsearch.xpack.ilm.DataStreamAndIndexLifecycleMixingTests.testUpdateIndexTemplateToDataStreamLifecyclePreference\" -Dtests.seed=2602910DF6E7F1AB -Dtests.locale=hsb-DE -Dtests.timezone=Kwajalein -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.index.IndexNotFoundException: no such index [.ds-datastream-jkhqkuqadntqsrl-2025.03.13-000004]\n\nIssue Reasons:\n\n[main] 2 failures in test testUpdateIndexTemplateToDataStreamLifecyclePreference (0.6% fail rate in 328 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-26", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124833, "issue_title": "[CI] LogsdbIndexingRollingUpgradeIT testIndexing {upgradedNodes=1} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20048 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62598 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62595 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62592 / 9.0.0_bwc-snapshots\nelasticsearch-intake #20046 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62589 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62581 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62574 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62504 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62049 / 8.19.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:rolling-upgrade:v9.0.0#bwcTest\" -Dtests.class=\"org.elasticsearch.upgrades.LogsdbIndexingRollingUpgradeIT\" -Dtests.method=\"testIndexing {upgradedNodes=1}\" -Dtests.seed=BC808F086923CB28 -Dtests.bwc=true -Dtests.locale=es-PA -Dtests.timezone=Pacific/Fiji -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: timed out waiting for green state for index [logs-bwc-test] cluster state [{\n  \"cluster_name\" : \"test-cluster\",\n  \"cluster_uuid\" : \"bDRMLq-FTiaBRwWDcOp73Q\",\n  \"version\" : 92,\n  \"state_uuid\" : \"wJZwpQztSJSWdertfdwIqA\",\n  \"master_node\" : \"V20gptq2RlyMtqOAmf0Qgw\",\n  \"blocks\" : { },\n  \"nodes\" : {\n    \"V20gptq2RlyMtqOAmf0Qgw\" : {\n      \"name\" : \"test-cluster-1\",\n      \"ephemeral_id\" : \"45sNebf6Rr6Vw-t2H7lMQw\",\n      \"transport_address\" : \"127.0.0.1:39141\",\n      \"external_id\" : \"test-cluster-1\",\n      \"attributes\" : {\n        \"testattr\" : \"test\",\n        \"transform.config_version\" : \"10.0.0\",\n        \"xpack.installed\" : \"true\",\n        \"ml.allocated_processors\" : \"32\",\n        \"ml.max_jvm_size\" : \"536870912\",\n        \"ml.config_version\" : \"12.0.0\",\n        \"ml.machine_memory\" : \"101237063680\",\n        \"ml.allocated_processors_double\" : \"32.0\"\n      },\n      \"roles\" : [\n        \"data\",\n        \"data_cold\",\n        \"data_content\",\n        \"data_frozen\",\n        \"data\n[truncated]\n\nIssue Reasons:\n\n[main] 3 consecutive failures in step 9.0.0_bwc-snapshots\n[main] 13 failures in test testIndexing {upgradedNodes=1} (1.4% fail rate in 947 executions)\n[main] 10 failures in step 9.0.0_bwc-snapshots (3.5% fail rate in 286 executions)\n[main] 2 failures in step 9.1.0_bwc-snapshots (0.7% fail rate in 288 executions)\n[main] 2 failures in pipeline elasticsearch-intake (3.0% fail rate in 67 executions)\n[main] 9 failures in pipeline elasticsearch-pull-request (3.8% fail rate in 236 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-14", "labels": [">test-failure", "low-risk", "Team:StorageEngine", ":StorageEngine/Logs"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124831, "issue_title": "[CI] LogsdbIndexingRollingUpgradeIT testIndexing {upgradedNodes=3} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20048 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62598 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62595 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62597 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62592 / 9.0.0_bwc-snapshots\nelasticsearch-intake #20046 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62590 / 9.0.0_bwc-snapshots\nelasticsearch-intake #20045 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62589 / 9.0.0_bwc-snapshots\nelasticsearch-intake #20044 / 9.0.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:rolling-upgrade:v9.0.0#bwcTest\" -Dtests.class=\"org.elasticsearch.upgrades.LogsdbIndexingRollingUpgradeIT\" -Dtests.method=\"testIndexing {upgradedNodes=1}\" -Dtests.seed=BC808F086923CB28 -Dtests.bwc=true -Dtests.locale=es-PA -Dtests.timezone=Pacific/Fiji -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: timed out waiting for green state for index [logs-bwc-test] cluster state [{\n  \"cluster_name\" : \"test-cluster\",\n  \"cluster_uuid\" : \"bDRMLq-FTiaBRwWDcOp73Q\",\n  \"version\" : 92,\n  \"state_uuid\" : \"wJZwpQztSJSWdertfdwIqA\",\n  \"master_node\" : \"V20gptq2RlyMtqOAmf0Qgw\",\n  \"blocks\" : { },\n  \"nodes\" : {\n    \"V20gptq2RlyMtqOAmf0Qgw\" : {\n      \"name\" : \"test-cluster-1\",\n      \"ephemeral_id\" : \"45sNebf6Rr6Vw-t2H7lMQw\",\n      \"transport_address\" : \"127.0.0.1:39141\",\n      \"external_id\" : \"test-cluster-1\",\n      \"attributes\" : {\n        \"testattr\" : \"test\",\n        \"transform.config_version\" : \"10.0.0\",\n        \"xpack.installed\" : \"true\",\n        \"ml.allocated_processors\" : \"32\",\n        \"ml.max_jvm_size\" : \"536870912\",\n        \"ml.config_version\" : \"12.0.0\",\n        \"ml.machine_memory\" : \"101237063680\",\n        \"ml.allocated_processors_double\" : \"32.0\"\n      },\n      \"roles\" : [\n        \"data\",\n        \"data_cold\",\n        \"data_content\",\n        \"data_frozen\",\n        \"data\n[truncated]\n\nIssue Reasons:\n\n[main] 10 consecutive failures in step 9.0.0_bwc-snapshots\n[main] 17 failures in test testIndexing {upgradedNodes=3} (1.8% fail rate in 947 executions)\n[main] 14 failures in step 9.0.0_bwc-snapshots (4.9% fail rate in 286 executions)\n[main] 2 failures in step 9.1.0_bwc-snapshots (0.7% fail rate in 288 executions)\n[main] 4 failures in pipeline elasticsearch-intake (6.0% fail rate in 67 executions)\n[main] 11 failures in pipeline elasticsearch-pull-request (4.7% fail rate in 236 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-14", "labels": [">test-failure", "low-risk", "Team:StorageEngine", ":StorageEngine/Logs"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124830, "issue_title": "[CI] LogsdbIndexingRollingUpgradeIT testIndexing {upgradedNodes=2} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20048 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62598 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62595 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62597 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62592 / 9.0.0_bwc-snapshots\nelasticsearch-intake #20046 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62590 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62589 / 9.0.0_bwc-snapshots\nelasticsearch-intake #20044 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #62581 / 9.0.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:rolling-upgrade:v9.0.0#bwcTest\" -Dtests.class=\"org.elasticsearch.upgrades.LogsdbIndexingRollingUpgradeIT\" -Dtests.method=\"testIndexing {upgradedNodes=1}\" -Dtests.seed=BC808F086923CB28 -Dtests.bwc=true -Dtests.locale=es-PA -Dtests.timezone=Pacific/Fiji -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: timed out waiting for green state for index [logs-bwc-test] cluster state [{\n  \"cluster_name\" : \"test-cluster\",\n  \"cluster_uuid\" : \"bDRMLq-FTiaBRwWDcOp73Q\",\n  \"version\" : 92,\n  \"state_uuid\" : \"wJZwpQztSJSWdertfdwIqA\",\n  \"master_node\" : \"V20gptq2RlyMtqOAmf0Qgw\",\n  \"blocks\" : { },\n  \"nodes\" : {\n    \"V20gptq2RlyMtqOAmf0Qgw\" : {\n      \"name\" : \"test-cluster-1\",\n      \"ephemeral_id\" : \"45sNebf6Rr6Vw-t2H7lMQw\",\n      \"transport_address\" : \"127.0.0.1:39141\",\n      \"external_id\" : \"test-cluster-1\",\n      \"attributes\" : {\n        \"testattr\" : \"test\",\n        \"transform.config_version\" : \"10.0.0\",\n        \"xpack.installed\" : \"true\",\n        \"ml.allocated_processors\" : \"32\",\n        \"ml.max_jvm_size\" : \"536870912\",\n        \"ml.config_version\" : \"12.0.0\",\n        \"ml.machine_memory\" : \"101237063680\",\n        \"ml.allocated_processors_double\" : \"32.0\"\n      },\n      \"roles\" : [\n        \"data\",\n        \"data_cold\",\n        \"data_content\",\n        \"data_frozen\",\n        \"data\n[truncated]\n\nIssue Reasons:\n\n[main] 7 consecutive failures in step 9.0.0_bwc-snapshots\n[main] 16 failures in test testIndexing {upgradedNodes=2} (1.7% fail rate in 947 executions)\n[main] 13 failures in step 9.0.0_bwc-snapshots (4.5% fail rate in 286 executions)\n[main] 2 failures in step 9.1.0_bwc-snapshots (0.7% fail rate in 288 executions)\n[main] 3 failures in pipeline elasticsearch-intake (4.5% fail rate in 67 executions)\n[main] 11 failures in pipeline elasticsearch-pull-request (4.7% fail rate in 236 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-14", "labels": [">test-failure", "low-risk", "Team:StorageEngine", ":StorageEngine/Logs"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124829, "issue_title": "[CI] MixedClusterEsqlSpecIT test {string.EndsWithLucenePushdownIgnoreMultivalues ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6990 / 8.14.3_bwc\nelasticsearch-periodic #6976 / 8.14.3_bwc\nelasticsearch-periodic #6948 / 8.14.3_bwc\nelasticsearch-periodic #6941 / 8.14.3_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.14.3#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {string.EndsWithLucenePushdownIgnoreMultivalues SYNC}\" -Dtests.seed=AFDA69177808A303 -Dtests.bwc=true -Dtests.locale=bm-ML -Dtests.timezone=Etc/GMT-14 -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Unexpected warning: Line -1:-1: evaluation of [] failed, treating result as null. Only first 20 failures recorded.\n\nIssue Reasons:\n\n[8.x] 4 failures in test test {string.EndsWithLucenePushdownIgnoreMultivalues ASYNC} (0.9% fail rate in 441 executions)\n[8.x] 4 failures in step 8.14.3_bwc (50.0% fail rate in 8 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (50.0% fail rate in 8 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-14", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124828, "issue_title": "ESQL: Create an API for getting information for a specific running query", "issue_body": "Create an API for getting information on a currently running query.\nGET /_query/queries/{query_id}\n// returns in depth information, including memory/cpu/records/nodes\n\nGET /_query/queries/abc\n\n{\n \"id\" : \"abc\",\n  \"start_time_millis\": 14585858875292,\n  \"running_time_nanos\": 762794,\n  \"query\": \"FROM logs* | STATS BY hostname\"\n  \"memory_in_use\": 647823893,\n  \"records_processed\": 947386933,\n  \"coordinating_node\": \"oTUltX4IQMOUUVeiohTt8A\"\n  \"data_nodes\" : [ \"DwrYwfytxthse49X4\", \"i5msnbUyWlpe86e7\"]\n}\n", "created_at": "2025-03-13", "closed_at": null, "labels": ["Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "GalLalouche"}
{"issue_number": 124827, "issue_title": "ESQL: API for listing running queries", "issue_body": "Create an API for listing currently running ESQL queries.\nGET /_query/queries\n// returns for each of the running queries\n// query_id, start_time, running_time, query\n// could add status one of {\"running, cancelled, stopping\"}\n{ \"queries\" : {\n \"abc\": {\n  \"id\": \"abc\",\n  \"start_time_millis\": 14585858875292,\n  \"running_time_nanos\": 762794,\n  \"query\": \"FROM logs* | STATS BY hostname\"\n  },\n \"4321\": {\n  \"id\":\"4321\",\n  \"start_time_millis\": 14585858823573,\n  \"running_time_nanos\": 90231,\n  \"query\": \"FROM orders | LOOKUP country_code ON country\"\n  }\n } \n}\n", "created_at": "2025-03-13", "closed_at": "2025-04-08", "labels": ["Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "GalLalouche"}
{"issue_number": 124826, "issue_title": "[CI] MLModelDeploymentFullClusterRestartIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6977 / 8.1.3_bwc\nelasticsearch-pull-request #62480 / 8.2.3_bwc\nelasticsearch-pull-request #62480 / 8.1.3_bwc\nelasticsearch-pull-request #62480 / 8.0.1_bwc\nelasticsearch-periodic #6970 / 8.1.3_bwc\nelasticsearch-periodic #6970 / 8.0.1_bwc\nelasticsearch-periodic #6970 / 8.2.3_bwc\nelasticsearch-periodic #6963 / 8.2.3_bwc\nelasticsearch-periodic #6963 / 8.0.1_bwc\nelasticsearch-periodic #6963 / 8.1.3_bwc\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 8 consecutive failures in step 8.1.3_bwc\n[9.0] 7 consecutive failures in step 8.2.3_bwc\n[9.0] 7 consecutive failures in step 8.0.1_bwc\n[9.0] 22 failures in class org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT (5.1% fail rate in 430 executions)\n[9.0] 8 failures in step 8.1.3_bwc (100.0% fail rate in 8 executions)\n[9.0] 7 failures in step 8.2.3_bwc (100.0% fail rate in 7 executions)\n[9.0] 7 failures in step 8.0.1_bwc (100.0% fail rate in 7 executions)\n[9.0] 7 failures in pipeline elasticsearch-periodic (100.0% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124793, "issue_title": "ip_range ipv4 to ipv6 term query unexpected results", "issue_body": "Elasticsearch Version\n8.17.1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nElastic Cloud\nProblem Description\nTerm query of ip_range type field does not return expected documents.\nWhen docs ip_range field contains \"{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:0:0:ffff:ffff\" }}\" or smaller \"lte\" values consisting of ipv6 strings, terms queries will not match a ipv4 string even when the value is in the range of the ip_range field.\n# Bug Edge cases\nPUT _index_template/ip_range_index\n{\n    \"index_patterns\": [\"ip_range_index\"],\n    \"template\": {\n        \"mappings\": {\n            \"properties\": {\n                \"ip_range\": {\n                    \"type\": \"ip_range\"\n                }\n            }\n        }\n    }\n}\nPOST _bulk\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"1\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"2\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:ffff:ffff:ffff:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"3\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:ffff:ffff:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"4\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:ffff:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"5\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"6\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:0:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"7\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:0:0:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"8\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:0:0:0:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"9\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:0:0:0:0\" }}\n\n# query returns 9 hits as expected\nGET ip_range_index/_search\n{\n    \"query\": {\n        \"term\": {\n          \"ip_range\": {\n            \"value\": \"::0\"\n          }\n        }\n    }\n}\n\n# query returns 6 hits, should be 9? \nGET ip_range_index/_search\n{\n    \"query\": {\n        \"term\": {\n          \"ip_range\": {\n            \"value\": \"0.0.0.0\"\n          }\n        }\n    }\n}\n\nExpectation would be to have both the IPv4 and IPv6 version of this query return all 9 documents\nSteps to Reproduce\n# Bug Edge cases\nPUT _index_template/ip_range_index\n{\n    \"index_patterns\": [\"ip_range_index\"],\n    \"template\": {\n        \"mappings\": {\n            \"properties\": {\n                \"ip_range\": {\n                    \"type\": \"ip_range\"\n                }\n            }\n        }\n    }\n}\nPOST _bulk\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"1\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"2\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:ffff:ffff:ffff:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"3\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:ffff:ffff:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"4\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:ffff:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"5\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:ffff:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"6\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:0:ffff:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"7\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:0:0:ffff:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"8\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:0:0:0:ffff\" }}\n{ \"index\" : { \"_index\" : \"ip_range_index\", \"_id\" : \"9\" } }\n{\"ip_range\": { \"gte\": \"0:0:0:0:0:0:0:0\", \"lte\": \"0:0:0:0:0:0:0:0\" }}\n\n# query returns 9 hits as expected\nGET ip_range_index/_search\n{\n    \"query\": {\n        \"term\": {\n          \"ip_range\": {\n            \"value\": \"::0\"\n          }\n        }\n    }\n}\n\n# query returns 6 hits, should be 9? \nGET ip_range_index/_search\n{\n    \"query\": {\n        \"term\": {\n          \"ip_range\": {\n            \"value\": \"0.0.0.0\"\n          }\n        }\n    }\n}\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-13", "closed_at": null, "labels": [">bug", "priority:high", "Team:Search Relevance", ":Search Relevance/Search"], "State": "open", "Author": "DanielBrown2023"}
{"issue_number": 124776, "issue_title": "ESQL: return number of docs/bytes read as part of the response", "issue_body": "Description\nSimilar to the search API, ESQL could return the number of docs (and/or bytes) read from disk after successfully completing a query. This would help the user in understanding how expensive a query both during authoring and query execution.\nThere are some nuances in terms of getting accurate information across the entire system and how efficient this can be    which should influence the final information returned.", "created_at": "2025-03-13", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/Compute Engine"], "State": "open", "Author": "costin"}
{"issue_number": 124771, "issue_title": "elasticsearch-service-tokens utility creates file /etc/elasticsearch/service_tokens with wrong permissions under Ubuntu and perhaps other releases too)", "issue_body": "Elasticsearch Version\nVersion: 8.17.3, Build: deb/a091390de485bd4b127884f7e565c0cad59b10d2/2025-02-28T10:07:26.089129809Z, JVM: 23\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nLinux ubu1804 4.15.0-235-generic #247-Ubuntu SMP Wed Feb 12 19:53:11 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux\nProblem Description\nI noticed that using  the elasticsearch-service-tokens tool on my Ubuntu system creates the file /etc/elasticsearch/service-tokens with wrong permissions, such that its not readable by the elasticsearch process.  This is fixable by doing a chmod and restating elasticsearch, but this should not be necessary. This is despite the setgid bit being set (automatically) on /etc/elasticsearch when created on installation.\nSteps to Reproduce\n$ sudo apt install elasticsearch=8.17.3 -y\n$ sudo systemctl daemon-reload\n$ sudo systemctl start elasticsearch.service\n$ curl -s -k -u $EUSER:$EPASS https://localhost:9200 | jq -Sc\n{\"cluster_name\":\"elasticsearch\",\"cluster_uuid\":\"JCRDTktsQ_6iZ1DSYDR_pQ\",\"name\":\"ubu1804\",\"tagline\":\"You Know, for Search\",\"version\":{\"build_date\":\"2025-02-28T10:07:26.089129809Z\",\"build_flavor\":\"default\",\"build_hash\":\"a091390de485bd4b127884f7e565c0cad59b10d2\",\"build_snapshot\":false,\"build_type\":\"deb\",\"lucene_version\":\"9.12.0\",\"minimum_index_compatibility_version\":\"7.0.0\",\"minimum_wire_compatibility_version\":\"7.17.0\",\"number\":\"8.17.3\"}}\n$ sudo find /etc/elasticsearch/ -ls\n  1049835      4 drwxr-s---   4 root     elasticsearch     4096 Mar 13 15:59 /etc/elasticsearch/\n  1054376      4 -rw-rw----   1 root     elasticsearch      473 Feb 28 10:11 /etc/elasticsearch/role_mapping.yml\n  1054408      4 -rw-rw----   1 root     elasticsearch     4052 Mar 13 15:59 /etc/elasticsearch/elasticsearch.yml\n  1054385      0 -rw-rw----   1 root     elasticsearch        0 Feb 28 10:11 /etc/elasticsearch/users_roles\n  1054381      4 -rw-rw----   1 root     elasticsearch     1042 Feb 28 10:11 /etc/elasticsearch/elasticsearch-plugins.example.yml\n  1054386      0 -rw-rw----   1 root     elasticsearch        0 Feb 28 10:11 /etc/elasticsearch/users\n  1049917     20 -rw-rw----   1 root     elasticsearch    17969 Feb 28 10:11 /etc/elasticsearch/log4j2.properties\n  1054380      4 -rw-rw----   1 root     elasticsearch      197 Feb 28 10:11 /etc/elasticsearch/roles.yml\n  1054382      4 -rw-rw----   1 root     elasticsearch     3074 Feb 28 10:11 /etc/elasticsearch/jvm.options\n  1054389      4 drwxr-x---   2 root     elasticsearch     4096 Mar 13 15:59 /etc/elasticsearch/certs\n  1054407      4 -rw-rw----   1 root     elasticsearch     1915 Mar 13 15:59 /etc/elasticsearch/certs/http_ca.crt\n  1054410     12 -rw-rw----   1 root     elasticsearch    10061 Mar 13 15:59 /etc/elasticsearch/certs/http.p12\n  1054409      8 -rw-rw----   1 root     elasticsearch     5838 Mar 13 15:59 /etc/elasticsearch/certs/transport.p12\n  1054383      4 -rw-rw----   1 root     elasticsearch      536 Mar 13 15:59 /etc/elasticsearch/elasticsearch.keystore\n  1054388      4 drwxr-s---   2 root     elasticsearch     4096 Feb 28 10:15 /etc/elasticsearch/jvm.options.d\n$ sudo /usr/share/elasticsearch/bin/elasticsearch-service-tokens create elastic/kibana kibana1\nSERVICE_TOKEN elastic/kibana/kibana1 = AA...\n$ TOKEN=\"AA...\"\n$ sudo find /etc/elasticsearch/ -ls\n  1049835      4 drwxr-s---   4 root     elasticsearch     4096 Mar 13 16:02 /etc/elasticsearch/\n  1054376      4 -rw-rw----   1 root     elasticsearch      473 Feb 28 10:11 /etc/elasticsearch/role_mapping.yml\n  1054408      4 -rw-rw----   1 root     elasticsearch     4052 Mar 13 15:59 /etc/elasticsearch/elasticsearch.yml\n  1054385      0 -rw-rw----   1 root     elasticsearch        0 Feb 28 10:11 /etc/elasticsearch/users_roles\n  1054381      4 -rw-rw----   1 root     elasticsearch     1042 Feb 28 10:11 /etc/elasticsearch/elasticsearch-plugins.example.yml\n  1054386      0 -rw-rw----   1 root     elasticsearch        0 Feb 28 10:11 /etc/elasticsearch/users\n  1049917     20 -rw-rw----   1 root     elasticsearch    17969 Feb 28 10:11 /etc/elasticsearch/log4j2.properties\n  1054412      4 -rw-------   1 root     elasticsearch      135 Mar 13 16:02 /etc/elasticsearch/service_tokens\n  1054380      4 -rw-rw----   1 root     elasticsearch      197 Feb 28 10:11 /etc/elasticsearch/roles.yml\n  1054382      4 -rw-rw----   1 root     elasticsearch     3074 Feb 28 10:11 /etc/elasticsearch/jvm.options\n  1054389      4 drwxr-x---   2 root     elasticsearch     4096 Mar 13 15:59 /etc/elasticsearch/certs\n  1054407      4 -rw-rw----   1 root     elasticsearch     1915 Mar 13 15:59 /etc/elasticsearch/certs/http_ca.crt\n  1054410     12 -rw-rw----   1 root     elasticsearch    10061 Mar 13 15:59 /etc/elasticsearch/certs/http.p12\n  1054409      8 -rw-rw----   1 root     elasticsearch     5838 Mar 13 15:59 /etc/elasticsearch/certs/transport.p12\n  1054383      4 -rw-rw----   1 root     elasticsearch      536 Mar 13 15:59 /etc/elasticsearch/elasticsearch.keystore\n  1054388      4 drwxr-s---   2 root     elasticsearch     4096 Feb 28 10:15 /etc/elasticsearch/jvm.options.d\n$ sudo fgrep service_tokens /var/log/elasticsearch/elasticsearch.log /var/log/elasticsearch/elasticsearch_server.json\n/var/log/elasticsearch/elasticsearch.log:[2025-03-13T16:02:52,304][ERROR][o.e.x.s.a.s.FileServiceAccountTokenStore] [ubu1804] failed to parse service tokens file [/etc/elasticsearch/service_tokens]. skipping/removing all tokens...\n/var/log/elasticsearch/elasticsearch_server.json:{\"@timestamp\":\"2025-03-13T16:02:52.304Z\", \"log.level\":\"ERROR\", \"message\":\"failed to parse service tokens file [/etc/elasticsearch/service_tokens]. skipping/removing all tokens...\", \"ecs.version\": \"1.2.0\",\"service.name\":\"ES_ECS\",\"event.dataset\":\"elasticsearch.server\",\"process.thread.name\":\"elasticsearch[ubu1804][generic][T#14]\",\"log.logger\":\"org.elasticsearch.xpack.security.authc.service.FileServiceAccountTokenStore\",\"elasticsearch.cluster.uuid\":\"JCRDTktsQ_6iZ1DSYDR_pQ\",\"elasticsearch.node.id\":\"EXqrMhUjTEehYXEMHL_jjA\",\"elasticsearch.node.name\":\"ubu1804\",\"elasticsearch.cluster.name\":\"elasticsearch\"}\n $ curl -s -k -H \"Authorization: Bearer ${TOKEN}\" -k https://localhost:9200/ | jq -Sc\n{\"error\":{\"header\":{\"WWW-Authenticate\":[\"Basic realm=\\\"security\\\", charset=\\\"UTF-8\\\"\",\"Bearer realm=\\\"security\\\"\",\"ApiKey\"]},\"reason\":\"failed to authenticate service account [elastic/kibana] with token name [kibana1]\",\"root_cause\":[{\"header\":{\"WWW-Authenticate\":[\"Basic realm=\\\"security\\\", charset=\\\"UTF-8\\\"\",\"Bearer realm=\\\"security\\\"\",\"ApiKey\"]},\"reason\":\"failed to authenticate service account [elastic/kibana] with token name [kibana1]\",\"type\":\"security_exception\"}],\"type\":\"security_exception\"},\"status\":401}\n$ sudo chmod 660 /etc/elasticsearch/service_tokens\n$ sudo systemctl restart elasticsearch.service\n$ curl -s -k -H \"Authorization: Bearer ${TOKEN}\" -k https://localhost:9200/ | jq -Sc\n{\"cluster_name\":\"elasticsearch\",\"cluster_uuid\":\"JCRDTktsQ_6iZ1DSYDR_pQ\",\"name\":\"ubu1804\",\"tagline\":\"You Know, for Search\",\"version\":{\"build_date\":\"2025-02-28T10:07:26.089129809Z\",\"build_flavor\":\"default\",\"build_hash\":\"a091390de485bd4b127884f7e565c0cad59b10d2\",\"build_snapshot\":false,\"build_type\":\"deb\",\"lucene_version\":\"9.12.0\",\"minimum_index_compatibility_version\":\"7.0.0\",\"minimum_wire_compatibility_version\":\"7.17.0\",\"number\":\"8.17.3\"}}\n\n### Logs (if relevant)\n\n_No response_\n", "created_at": "2025-03-13", "closed_at": null, "labels": [">bug", ":Security/Security", "Team:Security"], "State": "open", "Author": "km1967"}
{"issue_number": 124754, "issue_title": "ESQL: Simplify PropagateInlineEvals", "issue_body": "C.f. original comment here: #124335 (comment)\nAn INLINESTATS internally becomes an InlineJoin with the upstream plan as left child, an an Aggregate + StubRelation (in place of the upstream plan) as the right child. ReplaceAggregateNestedExpressionWithEval will take INLINESTATS ... BY x = some_expression(...) and turn x = some_expression(...) into an Eval placed  ahead of the Aggregate in the right child.\nBut, this Eval needs to be placed in the left child, because it defines the join key x.\nPropagateInlineEvals fixes this by moving the right hand side Eval to the left side. However, it does so in a complicated way, picking apart the Eval out of defensiveness, and performing name-based matching to find if an expression in said Eval is used as a grouping expression in the Aggregate.\nThis is complex and more interdependent than it needs to be. It already caused bugs that required a non-trivial PR to fix.\nLet's fix the root cause: ReplaceAggregateNestedExpressionWithEval should be aware that it's currently working on an Aggregate that's sitting in the right hand side of an InlineJoin - and if so, it should place the Eval for the expression x = some_expression(...) on top of the left child of the join so this can be joined on.", "created_at": "2025-03-13", "closed_at": null, "labels": [":Analytics/EQL", "Team:Analytics", ">tech debt"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124752, "issue_title": "ESQL: InlineJoin (used for INLINESTATS) breaks a planning invariant", "issue_body": "C.f. original comment here: #123589 (comment)\nFor LOOKUP JOIN and other join types, we could safely assume that the attributes present in one join child are completely disjoint from the set of attributes ever present in the other child. We could rely on this fact e.g. for the correctness of the PruneColumns optimizer rule (c.f. \n\n\nelasticsearch/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/optimizer/rules/logical/PruneColumns.java\n\n\n        Lines 41 to 46\n      in\n      a0f3b24\n\n\n\n\n\n\n // Note: It is NOT required to do anything special for binary plans like JOINs. It is perfectly fine that transformDown descends \n\n\n\n // first into the left side, adding all kinds of attributes to the `used` set, and then descends into the right side - even \n\n\n\n // though the `used` set will contain stuff only used in the left hand side. That's because any attribute that is used in the \n\n\n\n // left hand side must have been created in the left side as well. Even field attributes belonging to the same index fields will \n\n\n\n // have different name ids in the left and right hand sides - as in the extreme example \n\n\n\n // `FROM lookup_idx | LOOKUP JOIN lookup_idx ON key_field`. \n\n\n\n\n).\nInlineJoin breaks with this assumption, because it specifically references attributes from the left child in the right child.\nI think we should decide if we should enforce this assumption; it would much simplify assumptions needed to make to reason about optimizer rules, what happens in case of multiple Joins with the same right hand side etc. (LOOKUP JOIN specifically generates different attributes even if the very same LOOKUP JOIN command is used multiple times to avoid bugs and problems.) On the flip side, enforcing this assumption would require slightly re-modeling InlineJoin. Maybe there's also a middle ground where attributes can only be generated in one child of a join but can be referenced from both (that's currently the case, but it's harder to enforce.)\nDepending on the decision, we'll need to:\n\nIf we don't want to enforce this assumption, or not to the full extent, double check all optimizer rules for compatibility with binary plans.\nOtherwise, re-model InlineJoin and StubRelation to comply with the assumption.\n", "created_at": "2025-03-13", "closed_at": null, "labels": ["Team:Analytics", ">tech debt", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124748, "issue_title": "ESQL: Make INLINESTATS work in CCQ", "issue_body": "C.f. Nik's comment here: https://github.com/elastic/elasticsearch/pull/112595/files#r1763676152", "created_at": "2025-03-13", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124747, "issue_title": "ESQL: Keep readers open for second phase of INLINESTATS' execution", "issue_body": "INLINESTATS is executed in 2 phases, first a STATS based on the query upstream from the INLINESTATS, then a second phase with the full query where the INLINESTATS is replaced by an InlineJoin that joins with the results of the previous STATS.\nIn between those two phases, we do not keep the index readers open; this means that the data the two phases use can be inconsistent; this could also affect performance.\nLet's consider an approach where we keep the index readers open between the two phases, and let's double check what this means for performance - esp. taking into account CCQ.", "created_at": "2025-03-13", "closed_at": null, "labels": [">non-issue", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124745, "issue_title": "[CI] MixedClusterEsqlSpecIT test {string.EndsWithLucenePushdownIgnoreMultivalues SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6990 / 8.14.3_bwc\nelasticsearch-periodic #6983 / 8.14.3_bwc\nelasticsearch-periodic #6969 / 8.14.3_bwc\nelasticsearch-periodic #6969 / 8.13.4_bwc\nelasticsearch-periodic #6969 / 8.12.2_bwc\nelasticsearch-periodic #6962 / 8.12.2_bwc\nelasticsearch-periodic #6962 / 8.13.4_bwc\nelasticsearch-periodic #6955 / 8.12.2_bwc\nelasticsearch-periodic #6948 / 8.11.4_bwc\nelasticsearch-periodic #6941 / 8.12.2_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.14.3#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {string.EndsWithLucenePushdownIgnoreMultivalues SYNC}\" -Dtests.seed=AFDA69177808A303 -Dtests.bwc=true -Dtests.locale=bm-ML -Dtests.timezone=Etc/GMT-14 -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Unexpected warning: Line -1:-1: evaluation of [] failed, treating result as null. Only first 20 failures recorded.\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step 8.14.3_bwc\n[8.x] 11 failures in test test {string.EndsWithLucenePushdownIgnoreMultivalues SYNC} (2.4% fail rate in 464 executions)\n[8.x] 3 failures in step 8.14.3_bwc (37.5% fail rate in 8 executions)\n[8.x] 3 failures in step 8.13.4_bwc (37.5% fail rate in 8 executions)\n[8.x] 4 failures in step 8.12.2_bwc (57.1% fail rate in 7 executions)\n[8.x] 7 failures in pipeline elasticsearch-periodic (87.5% fail rate in 8 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-14", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124744, "issue_title": "ESQL: Make INLINESTATS properly track memory of data passed between phases", "issue_body": "When INLINESTATS is executed, it performs a first phase where it only computes the STATS, then it stuffs the result thereof into the query plan of the second phase, which uses it to perform an InlineJoin.\nThe memory used for this was not properly tracked; instead we put a 1MB limit in place.\nThis should be properly tracked with ES|QL's circuit breaking infrastructure, otherwise many parallel INLINESTATS requests could run a node out of memory.", "created_at": "2025-03-13", "closed_at": null, "labels": ["Team:Analytics", ">tech debt", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124743, "issue_title": "ESQL: For INLINEJOIN, push down INLINEJOIN to data nodes when it makes sense", "issue_body": "For queries like ... | INLINESTATS total_count = COUNT(*) where the InlineJoin has no BY clause, the INLINEJOIN that's performed in the 2nd phase of execution is actually equivalent with an EVAL total_count = <some literal number>. In this case, it makes no sense to perform a proper join, and it also does not make sense to force the inline join onto the coordinator - said EVAL can easily be pushed down to data nodes, thus increasing parallelization.\nThe same is true for a more general INLINESTATS ... BY group_field1, group_field2 in the case when it turns out that there are only very few combinations of group_field1, group_field2, so that it would be better to perform the InlineJoin on the data nodes.\nLet's attempt this optimization + have optimizer tests that document correct behavior here.", "created_at": "2025-03-13", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124741, "issue_title": "ESQL: INLINESTATS with per-agg WHERE", "issue_body": "Let's enable queries like ... INLINESTATS count_with_filter = COUNT(*) WHERE <some predicate>, count_total = COUNT(*) BY group, group2; c.f. #113735 .", "created_at": "2025-03-13", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124731, "issue_title": "ESQL: INLINESTATS with union types", "issue_body": "Last time we checked, we said \"they are allowed now but they produce \"fun\" error messages and don't work\" - we need to enable + test union types in INLINESTATS.", "created_at": "2025-03-13", "closed_at": null, "labels": [">non-issue", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124725, "issue_title": "ESQL: Ensure we fail nicely for invalid INLINESTATS queries", "issue_body": "Examples:\n\nINLINESTATS with CATEGORIZE (c.f. #124717)\nINLINESTATS with no aggregates, e.g. INLINESTATS BY group, expr = foo(...)\nINLINESTATS in CCQ scenarios\n", "created_at": "2025-03-13", "closed_at": null, "labels": [">non-issue", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124723, "issue_title": "ESQL: Support CHANGE_POINT ... BY", "issue_body": "Description\nThe CHANGE_POINT should support partitioning the data and compute the change point for each partition, e.g.\nFROM data | CHANGE_POINT cpu BY host.name\n", "created_at": "2025-03-13", "closed_at": null, "labels": [">enhancement", ":ml", "Team:Analytics", "Team:ML", ":Analytics/ES|QL"], "State": "open", "Author": "jan-elastic"}
{"issue_number": 124721, "issue_title": "ESQL: Essential optimizations for INLINESTATS", "issue_body": "We should at least consider:\n\nLimit pushdown (for the 2nd phase of INLINESTATS, to limit the number of rows we join on)\nFilter pushdown (similarly)\n\nThe former is particularly important because we need to make sure that an INLINESTATS doesn't prevent queries with SORT from running because the default LIMIT cannot be pushed down to the SORT to turn it into a TopN.", "created_at": "2025-03-13", "closed_at": null, "labels": [">enhancement", ">non-issue", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124719, "issue_title": "ESQL: Increase test coverage for INLINESTATS", "issue_body": "\nTests with SORTs upstream from the INLINESTATS.\nMore tests for all kind of shadowing scenarios (and double check what we already have)\nTests with BUCKET in the BY-clause\nMore cases with ROW, c.f. this comment\nThink of things that might have interesting interactions, like full text search (we had a bug with LOOKUP JOIN in the past, so that's not trivial).\nINLINESTATS with constants and foldables\nThink about what else might require additional tests, including invalid queries.\n", "created_at": "2025-03-13", "closed_at": null, "labels": [">test", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124718, "issue_title": "ESQL: Ensure good docs coverage for INLINESTATS", "issue_body": "Also make sure we have an entry in Kibana's ES|QL reference.", "created_at": "2025-03-13", "closed_at": null, "labels": [">docs", "Team:Docs", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124717, "issue_title": "ESQL: INLINESTATS with CATEGORIZE in the BY clause", "issue_body": "INLINESTATS performs two query runs: in a first phase, it runs the whole query up until the INLINESTATS, but with a STATS command at the end instead of INLINESTATS; then in a second phase, it runs the full query but in place of the INLINESTATS command it performs a JOIN with the results of said STATS.\nThis means that INLINESTATS ... BY x = some_function(...) works because the expression x = some_function(...) can be performed as an EVAL before the INLINESTATS (in both phases), so that the attribute x can be used to join on.\nThe result of CATEGORIZE, however, is not computed by stuffing that into a previous EVAL - instead, the categorization is performed simultaneously with the STATS command - and thus, is only present in the first phase but missing from the second.\nLet's go about this in two steps:\n\nLet's fail INLINESTATS queries with CATEGORIZE gracefully at first.\nLet's find a way to make INLINESTATS with CATEGORIZE work, if possible.\n", "created_at": "2025-03-13", "closed_at": null, "labels": [">enhancement", ":ml", "Team:Analytics", "Team:ML", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124715, "issue_title": "ESQL: Enable multiple INLINESTATS + remaining tests", "issue_body": "Let's get rid of this big TODO here :)\n\nEspecially important to enable multiple INLINESTATS in the same command (c.f. test case here and comment on why this may be broken here).\nINLINESTATS after SORT, see initial bug report here\nINLINESTATS after STATS\nLet's also re-enable this optimizer test and other tests disabled in #115813, like this logical plan optimizer test: https://github.com/elastic/elasticsearch/blob/main/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/optimizer/LogicalPlanOptimizerTests.java\nThis query used to fail: FROM kibana_sample_data_logs | EVAL timestamp=DATE_TRUNC(5 minute, @timestamp) | INLINESTATS results = count(*) by timestamp | keep results, timestamp Let's add a test and potentially fix it.\nFix FROM idx | EVAL ip = to_ip(host), x = to_string(host), y = to_string(host) | INLINESTATS max(id) and re-enable the corresponding telemetry test case muted here.\n", "created_at": "2025-03-13", "closed_at": null, "labels": [">non-issue", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 124693, "issue_title": "[CI] MultiClusterSpecIT test {string.EndsWithLucenePushdownIgnoreMultivalues} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6990 / 8.13.4_bwc\nelasticsearch-periodic #6983 / 8.13.4_bwc\nelasticsearch-periodic #6976 / 8.13.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-clusters:v8.13.4#oldToNew\" -Dtests.class=\"org.elasticsearch.xpack.esql.ccq.MultiClusterSpecIT\" -Dtests.method=\"test {string.EndsWithLucenePushdownIgnoreMultivalues}\" -Dtests.seed=4AF8FC2825F3CCCA -Dtests.bwc=true -Dtests.locale=yue-Hant-HK -Dtests.timezone=Australia/ACT -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Unexpected warning: Line -1:-1: evaluation of [] failed, treating result as null. Only first 20 failures recorded.\n\nIssue Reasons:\n\n[8.x] 3 failures in test test {string.EndsWithLucenePushdownIgnoreMultivalues} (0.3% fail rate in 973 executions)\n[8.x] 3 failures in step 8.13.4_bwc (100.0% fail rate in 3 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic (75.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-14", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124692, "issue_title": "[CI] ExponentiallyWeightedMovingRateTests testEwmr_threadSafe failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6993 / almalinux-9_platform-support-unix\nelasticsearch-pull-request #62317 / part-1\nelasticsearch-periodic-platform-support #6986 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6966 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.common.metrics.ExponentiallyWeightedMovingRateTests.testEwmr_threadSafe\" -Dtests.seed=A1D9D6C0CD0FC7B2 -Dtests.locale=en-VU -Dtests.timezone=US/Pacific -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a numeric value within <1.0E-13> of <5.056759216300853>\n     but: <5.056759216300751> differed by <2.1405182655143987E-15> more than delta <1.0E-13>\n\nIssue Reasons:\n\n[main] 4 failures in test testEwmr_threadSafe (1.7% fail rate in 235 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-platform-support (60.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-13", "closed_at": "2025-03-27", "labels": [":Data Management/Stats", ">test-failure", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124691, "issue_title": "Feature Request: Add Dry-Run for Snapshot Restore in Kibana", "issue_body": "Description\nFeature Request: Add Dry-Run for Snapshot Restore in Kibana\nProblem\nCurrently, restoring a snapshot in Kibana can fail due to open indices, forcing manual troubleshooting after errors like:\ncannot restore index because an open index with same name already exists\n\nKibana does not provide a way to check for conflicts before execution, leading to unnecessary failures.\nProposal\nAdd a dry-run option to the snapshot restore UI to simulate the restore and identify conflicts (e.g., open indices, shard mismatches) before execution.\nBenefits\n\nPrevents unexpected failures\nProvides clear guidance before restore\nSaves troubleshooting time\n\nThis feature would improve the user experience and align with best practices for safer restores.", "created_at": "2025-03-13", "closed_at": "2025-03-13", "labels": [">enhancement", "needs:triage"], "State": "closed", "Author": "TomonoriSoejima"}
{"issue_number": 124687, "issue_title": "[CI] CoreWithMultipleProjectsClientYamlTestSuiteIT test {yaml=search.vectors/41_knn_search_byte_quantized/kNN search plus query} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19951 / part2\nelasticsearch-pull-request #61578 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:qa:multi-project:core-rest-tests-with-multiple-projects:yamlRestTest\" --tests \"org.elasticsearch.multiproject.test.CoreWithMultipleProjectsClientYamlTestSuiteIT\" -Dtests.method=\"test {yaml=search.vectors/41_knn_search_byte_quantized/kNN search plus query}\" -Dtests.seed=D928DB040DDE09E1 -Dtests.locale=en-SZ -Dtests.timezone=US/Hawaii -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: Failure at [search.vectors/41_knn_search_byte_quantized:130]: element was a list with 2 elements, but [2] was out of bounds\n\nIssue Reasons:\n\n[main] 2 failures in test test {yaml=search.vectors/41_knn_search_byte_quantized/kNN search plus query} (0.4% fail rate in 501 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124683, "issue_title": "[CI] RestSqlMultinodeIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6977 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\nelasticsearch-pull-request #61537 / part-3\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.xpack.sql.qa.multi_node.RestSqlMultinodeIT (0.4% fail rate in 465 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124682, "issue_title": "`lat_long` anomaly job function produces incorrect results", "issue_body": "Elasticsearch Version\n8.17.1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nDarwin Thumper.local 24.1.0 Darwin Kernel Version 24.1.0: Thu Oct 10 21:03:11 PDT 2024; root:xnu-11215.41.3~2/RELEASE_ARM64_T6020 arm64\nProblem Description\nA series of geo_point values all within the continental US results in a lat_long anomaly detector providing \"typical\" values out in the Atlantic Ocean. In other words, the way the centroid is calculated by the lat_long model appears to be incorrect or bugged.  The screenshot below includes every data point fed to the model and the resulting incorrect \"typical\" values.\n\nSteps to Reproduce\nPUT /test_index\n\nPUT test_index/_mapping\n{\n  \"properties\": {\n    \"@timestamp\": {\n      \"type\": \"date\"\n    },\n    \"location\": {\n      \"type\": \"geo_point\"\n    }\n  }\n}\n\nPUT /_bulk\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-04T21:50:51.222Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-05T12:22:28.087Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-06T11:34:29.579Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-06T16:05:48.285Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-07T19:12:48.236Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-01T13:18:18.881Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-01T17:39:29.896Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-03T13:57:11.335Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-03T18:54:04.229Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-04T12:32:36.699Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-04T18:01:05.219Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T15:57:42.206Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T15:58:33.505Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T16:00:13.551Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T16:28:08.770Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T16:29:45.952Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T16:29:15.286Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T20:26:44.941Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T20:27:33.950Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T20:28:03.250Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T20:28:14.611Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T20:30:28.972Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-29T20:41:25.347Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-30T12:06:31.995Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-30T17:50:32.214Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-21T15:38:19.421Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-22T16:34:06.306Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-23T14:51:20.105Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-24T11:29:00.354Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-24T18:48:10.666Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-25T15:17:37.585Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-25T21:40:30.640Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-27T18:44:10.414Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -71.3908,\n    \"lat\": 42.6347\n  },\n  \"@timestamp\": \"2025-01-27T22:59:44.614Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-28T13:16:19.118Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-18T13:25:07.974Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-19T11:47:43.219Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-20T14:06:09.590Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-20T19:55:00.182Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-01-21T11:06:12.666Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2203,\n    \"lat\": 40.7119\n  },\n  \"@timestamp\": \"2025-01-14T14:02:10.968Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2203,\n    \"lat\": 40.7119\n  },\n  \"@timestamp\": \"2025-01-14T18:55:55.709Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2203,\n    \"lat\": 40.7119\n  },\n  \"@timestamp\": \"2025-01-15T14:36:35.321Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2024-12-18T21:11:52.901Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2024-12-19T13:18:12.472Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.6212,\n    \"lat\": 41.8237\n  },\n  \"@timestamp\": \"2024-12-19T18:56:07.115Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2024-12-19T23:06:34.803Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2024-12-20T15:27:44.258Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.6212,\n    \"lat\": 41.8237\n  },\n  \"@timestamp\": \"2024-12-20T22:19:34.551Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2024-12-21T14:24:57.642Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2024-12-21T18:49:28.275Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -71.0882,\n    \"lat\": 42.3912\n  },\n  \"@timestamp\": \"2024-12-22T22:28:15.191Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -71.0882,\n    \"lat\": 42.3912\n  },\n  \"@timestamp\": \"2024-12-22T22:28:02.349Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -71.0882,\n    \"lat\": 42.3912\n  },\n  \"@timestamp\": \"2024-12-22T22:29:44.480Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2024-12-23T11:30:15.714Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2024-12-23T18:44:57.745Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -71.0798,\n    \"lat\": 42.2903\n  },\n  \"@timestamp\": \"2025-01-03T10:59:02.474Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -71.0798,\n    \"lat\": 42.2903\n  },\n  \"@timestamp\": \"2025-01-03T10:59:42.560Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-03T14:41:30.295Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-03T14:41:45.569Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-03T14:41:51.247Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-03T14:42:34.781Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-03T14:42:59.942Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-03T14:44:25.403Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-03T14:45:14.779Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.75,\n    \"lat\": 41.6187\n  },\n  \"@timestamp\": \"2025-01-03T17:10:56.088Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.75,\n    \"lat\": 41.6187\n  },\n  \"@timestamp\": \"2025-01-03T17:11:02.640Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.75,\n    \"lat\": 41.6187\n  },\n  \"@timestamp\": \"2025-01-03T17:11:50.809Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.75,\n    \"lat\": 41.6187\n  },\n  \"@timestamp\": \"2025-01-03T17:14:32.457Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.75,\n    \"lat\": 41.6187\n  },\n  \"@timestamp\": \"2025-01-03T17:12:40.783Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-04T11:37:06.569Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-04T15:43:33.192Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-06T13:26:54.566Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-07T13:12:51.710Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-07T17:22:51.321Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-08T12:04:05.759Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-09T12:22:03.793Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.2027,\n    \"lat\": 40.7066\n  },\n  \"@timestamp\": \"2025-01-10T12:22:41.890Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -112.0748,\n    \"lat\": 33.4532\n  },\n  \"@timestamp\": \"2025-03-12T19:55:47.491Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -115.1446,\n    \"lat\": 36.0383\n  },\n  \"@timestamp\": \"2025-03-12T15:47:30.181Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -115.1446,\n    \"lat\": 36.0383\n  },\n  \"@timestamp\": \"2025-03-11T13:16:22.140Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -115.1446,\n    \"lat\": 36.0383\n  },\n  \"@timestamp\": \"2025-03-11T17:20:38.352Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -115.1446,\n    \"lat\": 36.0383\n  },\n  \"@timestamp\": \"2025-03-11T21:27:47.686Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.6632,\n    \"lat\": 41.5557\n  },\n  \"@timestamp\": \"2025-03-05T14:48:43.972Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.6632,\n    \"lat\": 41.5557\n  },\n  \"@timestamp\": \"2025-03-05T14:49:59.538Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.6632,\n    \"lat\": 41.5557\n  },\n  \"@timestamp\": \"2025-03-05T14:51:45.640Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.6632,\n    \"lat\": 41.5557\n  },\n  \"@timestamp\": \"2025-03-05T14:51:35.164Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T13:48:48.173Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T13:48:43.008Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T13:50:23.374Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T13:50:44.654Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T13:51:42.717Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T13:51:44.309Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T13:55:36.247Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T13:57:08.681Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T13:59:25.277Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -111.6343,\n    \"lat\": 33.2487\n  },\n  \"@timestamp\": \"2025-03-10T14:01:45.338Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -115.1446,\n    \"lat\": 36.0383\n  },\n  \"@timestamp\": \"2025-03-10T18:07:05.931Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-13T19:30:57.361Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -74.1691,\n    \"lat\": 40.7399\n  },\n  \"@timestamp\": \"2025-02-14T17:34:15.297Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -71.3908,\n    \"lat\": 42.6347\n  },\n  \"@timestamp\": \"2025-02-14T23:44:30.711Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -71.3908,\n    \"lat\": 42.6347\n  },\n  \"@timestamp\": \"2025-02-14T23:46:41.611Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-16T16:23:09.894Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-17T14:28:02.848Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-19T12:49:14.488Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-19T18:30:11.704Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-20T13:55:27.025Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-20T13:57:46.377Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -71.3571,\n    \"lat\": 42.5945\n  },\n  \"@timestamp\": \"2025-02-20T22:48:14.654Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -72.5283,\n    \"lat\": 41.776\n  },\n  \"@timestamp\": \"2025-02-21T22:14:59.790Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-22T11:18:10.204Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-22T12:04:40.826Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-23T11:57:32.490Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-23T16:11:09.192Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-25T14:55:27.123Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-25T16:14:38.539Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-26T18:36:09.423Z\"\n}\n{\"index\":{\"_index\":\"test_index\"}}\n{\n  \"location\": {\n    \"lon\": -97.822,\n    \"lat\": 37.751\n  },\n  \"@timestamp\": \"2025-02-28T12:42:30.809Z\"\n}\n\nPUT /_ml/anomaly_detectors/bugged_lat_long_anomaly_job\n{\n  \"allow_lazy_open\": true,\n  \"analysis_config\": {\n    \"bucket_span\": \"1h\",\n    \"detectors\": [\n      {\n        \"detector_index\": 0,\n        \"field_name\": \"location\",\n        \"function\": \"lat_long\"\n      }\n    ],\n    \"influencers\": [],\n    \"model_prune_window\": \"30d\"\n  },\n  \"analysis_limits\": {\n    \"categorization_examples_limit\": 4,\n    \"model_memory_limit\": \"10mb\"\n  },\n  \"custom_settings\": {\n    \"custom_urls\": [],\n    \"job_revision\": 5,\n    \"security_app_display_name\": \"Broken location anomaly detector\"\n  },\n  \"daily_model_snapshot_retention_after_days\": 1,\n  \"data_description\": {\n    \"time_field\": \"@timestamp\",\n    \"time_format\": \"epoch_ms\"\n  },\n  \"datafeed_config\": {\n    \"chunking_config\": {\n      \"mode\": \"auto\"\n    },\n    \"delayed_data_check_config\": {\n      \"enabled\": true\n    },\n    \"indices\": [\n      \"test_index\"\n    ],\n    \"indices_options\": {\n      \"allow_no_indices\": true,\n      \"expand_wildcards\": [\n        \"open\"\n      ],\n      \"ignore_throttled\": true,\n      \"ignore_unavailable\": true\n    },\n    \"max_empty_searches\": 10,\n    \"query\": {\n      \"bool\": {\n        \"must\": [{\n          \"match_all\": {}\n        }]\n      }\n    },\n    \"query_delay\": \"500m\",\n    \"scroll_size\": 1000,\n    \"job_id\": \"bugged_lat_long_anomaly_job\",\n    \"datafeed_id\": \"datafeed-bugged_lat_long_anomaly_job\"\n  },\n  \"description\": \"\",\n  \"groups\": [],\n  \"model_plot_config\": {\n    \"annotations_enabled\": false,\n    \"enabled\": false\n  },\n  \"model_snapshot_retention_days\": 10,\n  \"results_index_name\": \"shared\"\n}\n\nPOST /_ml/anomaly_detectors/bugged_lat_long_anomaly_job/_open\n\nPOST /_ml/datafeeds/datafeed-bugged_lat_long_anomaly_job/_start?start=1732122000000\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-12", "closed_at": null, "labels": [">bug", ":ml", "Team:ML"], "State": "open", "Author": "r0ot"}
{"issue_number": 124678, "issue_title": "ESQL: Load from _source if a field was `ignore_above`-ed", "issue_body": "Description\nElasticsearch's ignore_above feature skips indexing a keyword field if it is longer than some number of characters. That's useful to preserve lucene's mind, but we lose the ability to search that field. It'd be good if we could load the field form _source in that case.\nExample:\ncurl -uelastic:password -XDELETE localhost:9200/long_field\ncurl -uelastic:password -XPUT -HContent-Type:application/json localhost:9200/long_field?pretty -d'{\n  \"mappings\": {\n    \"properties\": {\n      \"url\": {\n        \"properties\": {\n          \"query\": {\n            \"type\": \"keyword\",\n            \"ignore_above\": 10\n          }\n        }\n      }\n    }\n  },\n  \"settings\": {}\n}'\n\ncurl -uelastic:password -XPOST -HContent-Type:application/json localhost:9200/long_field/_doc?refresh -d'{\n  \"url\": {\n    \"query\": \"short\"\n  }\n}'\ncurl -uelastic:password -XPOST -HContent-Type:application/json localhost:9200/long_field/_doc?refresh -d'{\n  \"url\": {\n    \"query\": \"words words words\"\n  }\n}'\ncurl -uelastic:password -XPOST -HContent-Type:application/json localhost:9200/_query?pretty -d'{\n  \"query\": \"FROM long_field\"\n}'\n\nMakes:\n[\"short\"],\n[null]\n\nBut after this change it'd make:\n[\"short\"],\n[\"words words words\"]\n\nThese ignored fields are indexed and have a special doc value:\n                context.doc().add(new SortedSetDocValuesField(NAME, new BytesRef(ignoredField)));\n                context.doc().add(new StringField(NAME, ignoredField, Field.Store.NO));\n\nThis is generally cheap to maintain because there aren't that many unique field values and it powers the missing query. We could use the doc values to load these fields from _source. Pushed down queries are much harder - they'd need to double check the condition. I think. Something like that.", "created_at": "2025-03-12", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "nik9000"}
{"issue_number": 124677, "issue_title": "[CI] IOUtilsTests initializationError failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6958 / java11_java-fips-matrix\nelasticsearch-periodic #6958 / java11_java-matrix\nelasticsearch-periodic #6958 / openjdk16_java-matrix\nelasticsearch-periodic #6958 / corretto8_java-matrix\nelasticsearch-periodic #6958 / adoptopenjdk8_java-matrix\nelasticsearch-periodic #6958 / java8_java-matrix\nelasticsearch-periodic #6951 / java11_java-fips-matrix\nelasticsearch-periodic #6951 / java11_java-matrix\nelasticsearch-periodic #6951 / java8_java-matrix\nelasticsearch-periodic #6951 / openjdk16_java-matrix\n\nReproduction Line:\nnull\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.UnsupportedClassVersionError: org/elasticsearch/test/cluster/util/IOUtilsTests has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0\n\nIssue Reasons:\n\n[7.17] 12 consecutive failures in test initializationError\n[7.17] 2 consecutive failures in step java11_java-fips-matrix\n[7.17] 2 consecutive failures in step java11_java-matrix\n[7.17] 2 consecutive failures in step openjdk16_java-matrix\n[7.17] 2 consecutive failures in step corretto8_java-matrix\n[7.17] 2 consecutive failures in step adoptopenjdk8_java-matrix\n[7.17] 2 consecutive failures in step java8_java-matrix\n[7.17] 2 consecutive failures in pipeline elasticsearch-periodic\n[7.17] 12 failures in test initializationError (100.0% fail rate in 12 executions)\n[7.17] 2 failures in step java11_java-fips-matrix (100.0% fail rate in 2 executions)\n[7.17] 2 failures in step java11_java-matrix (100.0% fail rate in 2 executions)\n[7.17] 2 failures in step openjdk16_java-matrix (100.0% fail rate in 2 executions)\n[7.17] 2 failures in step corretto8_java-matrix (100.0% fail rate in 2 executions)\n[7.17] 2 failures in step adoptopenjdk8_java-matrix (100.0% fail rate in 2 executions)\n[7.17] 2 failures in step java8_java-matrix (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124675, "issue_title": "[ML] Elser inference service mode_version not converted to model_id", "issue_body": "Affected versions\n8.16.0 and greater\nIssue\nIn 8.16 we deprecated the elser service in favor of elastisearch here: https://github.com/elastic/elasticsearch/pull/114052/files#diff-719245221a062735f912753a41ba8d918a099627b89ee1f32fae3a133f7ae73cL55\nIn that change we no longer support model_version.\nWe were looking for model_version in 8.15 here: https://github.com/elastic/elasticsearch/blob/8.15/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/elser/ElserInternalService.java#L162-L165\nand remapping to model_id.\nThis issue occurs when an elser service is created in 8.12.x and then the cluster is upgraded to 8.16.x+.\nIn later versions of the inference plugin we'll return an error like this:\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"illegal_argument_exception\",\n        \"reason\": \"Error parsing request config, model id is missing\"\n      }\n    ],\n    \"type\": \"illegal_argument_exception\",\n    \"reason\": \"Error parsing request config, model id is missing\"\n  },\n  \"status\": 400\n}\n\nWorkaround\nUnfortunately, deleting the endpoint using DELETE _inference/<task type>/<inference id> won't work because we retrieve the model during the deletion process.\nTo determine which inference endpoint is the cause, retrieve the endpoints:\nPOST .inference/_search\n{\n  \"query\": {\n    \"match_all\": {}\n  }\n}\n\nFind the endpoint that is missing service_settings.model_id\n{\n  \"took\": 1,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"skipped\": 0,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": {\n      \"value\": 1,\n      \"relation\": \"eq\"\n    },\n    \"max_score\": 1,\n    \"hits\": [\n      {\n        \"_index\": \".inference\",\n        \"_id\": \"model_elser-model-v2\",\n        \"_score\": 1,\n        \"_source\": {\n          \"model_id\": \"elser-model-v2\", <------ inference endpoint id\n          \"task_type\": \"sparse_embedding\",\n          \"service\": \"elser\",\n          \"service_settings\": {\n            \"num_allocations\": 1,\n            \"num_threads\": 1,\n            \"model_version\": \".elser_model_2\" <----- has model_version and not model_id\n          },\n          \"task_settings\": {}\n        }\n      }\n    ]\n  }\n}\n\nModify the inference endpoint document to include model_id\nFirst create a role and user that can modify system indices:\nPUT _security/role/grant_system_indices\n{\n  \"indices\": [\n    {\n      \"names\": [\n        \".inference*\"\n      ],\n      \"privileges\": [\n        \"all\"\n      ],\n      \"allow_restricted_indices\": true\n    }\n  ]\n}\n\nPUT /_security/user/<user_name>\n{\n  \"roles\": [\"grant_system_indices\"]\n}\n\nThe run the painless script below while logged in as the new user\nPOST .inference/_update/model_elser-model-v2\n{\n  \"script\": {\n    \"source\": \"ctx._source.service_settings.model_id = \\\".elser_model_2_linux-x86_64\\\";\",\n    \"lang\": \"painless\"\n  }\n}\n\nNote: .elser_model_2_linux-x86_64 should be replaced with the version that is appropriate for the current environment.", "created_at": "2025-03-12", "closed_at": "2025-03-13", "labels": [">bug", ":ml", "Team:ML", "Feature:GenAI"], "State": "closed", "Author": "jonathan-buttner"}
{"issue_number": 124673, "issue_title": "[CI] IOUtilsTests testSyncWithLinksThrowExceptionWhenDestinationIsNotWritable failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6993 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6986 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6979 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6967 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected java.io.UncheckedIOException to be thrown, but nothing was thrown\n\nIssue Reasons:\n\n[main] 4 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[main] 4 failures in test testSyncWithLinksThrowExceptionWhenDestinationIsNotWritable (2.0% fail rate in 205 executions)\n[main] 4 failures in step windows-2022_checkpart1_platform-support-windows (100.0% fail rate in 4 executions)\n[main] 4 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124671, "issue_title": "[CI] DocsClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6969 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6942 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #6878 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6878 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-pull-request #61486 / part-1-windows\nelasticsearch-periodic-platform-support #6871 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6871 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-pull-request #61413 / part-1-windows\nelasticsearch-pull-request #61413 / part-1-windows\nelasticsearch-periodic-platform-support #6864 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 30 failures in class org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT (3.2% fail rate in 933 executions)\n[8.x] 9 failures in step windows-2022_checkpart1_platform-support-windows (42.9% fail rate in 21 executions)\n[8.x] 8 failures in step windows-2019_checkpart1_platform-support-windows (40.0% fail rate in 20 executions)\n[8.x] 9 failures in step part-1-windows (90.0% fail rate in 10 executions)\n[8.x] 11 failures in pipeline elasticsearch-periodic-platform-support (52.4% fail rate in 21 executions)\n[8.x] 5 failures in pipeline elasticsearch-pull-request (4.6% fail rate in 108 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-13", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124668, "issue_title": "Provide information about the specific functionality used when creating a specific index", "issue_body": "Since an index using LogsDB may or may not have Synthetic source enabled, and this can vary amongst backing indices within the same data stream, it would be nice to be able to quickly and easily see the mode of features like Synthetic source (and things like CLP in the future) for a given index. This could make it easier for Kibana to display this information. It is also likely helpful in support scenarios, in case a customer reports an issue with a LogsDB index, one of our first questions is likely going to be \"is it using synthetic source or not\" so there should be an easy way to gather this information.", "created_at": "2025-03-12", "closed_at": null, "labels": ["Team:StorageEngine", ":StorageEngine/Logs"], "State": "open", "Author": "martijnvg"}
{"issue_number": 124667, "issue_title": "Scaling EsExecutors with core size 0 might starve work due to missing workers", "issue_body": "This was discovered in cases where masterService#updateTask had work enqueued, but no worker to process it.\nThe root cause of the issue is a bug in EsExecutors. When the pool core size is set to 0 and max pool size is 1 (though, also possible with a higher max pool size, but less likely), EsThreadPoolExecutor sometimes fails to add another worker to execute the task because we're already at the max pool size (expected). However, in rare cases, a single worker thread (or threads) can time out at about the same time (based on their keepAliveTime) when then queueing the new task via ForceQueuePolicy (triggered by the initial rejection as we failed to add a worker). Unless more tasks are submitted later (which is not the case for masterService#updateTask), this task will starve in the queue without any worker to process it.\nRespective code in EsExecutors is old and unchanged. We were able to reproduce the bug on main using Java 21, 22, 23 as well as 8.0 using Java 17. Likely the same is possible for older versions of ES.\nIt looks as if the bug is triggered more frequently with more recent versions of the JDK, but this might just be an observation bias as we haven't been aware of this bug earlier.", "created_at": "2025-03-12", "closed_at": "2025-03-16", "labels": [">bug", "blocker", ":Core/Infra/Core", "Team:Core/Infra"], "State": "closed", "Author": "mosche"}
{"issue_number": 124664, "issue_title": "Reindexing Follower Indices fails", "issue_body": "Elasticsearch Version\n8.18.0\nInstalled Plugins\nNo response\nJava Version\nn/a\nOS Version\nn/a\nProblem Description\nWhile testing the Kibana Management plugins in preparation for 9.0.0 readiness, we have encountered some reindexing errors when it comes to follower indices. These are the steps we took:\n\nCreated two deployments in 7.17, let's call them \"leader\" and \"follower\". It doesn't matter if it's on cloud or stateful, the failure is the same.\nCreated a remote cluster in the \"follower\", pointing the \"leader\"\nAlso created some follower indices and auto-follow patterns, with and without documents.\nUpgraded the follower deployment to 8.18 without any issues.\n\nThe problem comes in the process of upgrading to 9.0.0.\n\nUpgrade assistant offers the possibility of mark as read-only and reindex the follower indices.\nReindex always fails, with different errors depending on the index to have documents or not. The error for the ones with documents is quite long as it has one for every document.\nMark as read-only works as expected, no issues.\n\nIf after upgrading the \"follower\" to v8.18 we upgrade the \"leader\" to v8.18 before trying to upgrade to v9.0, the outcome is the same.\n\n\nThe expected behavior would be to the reindexing succeed. Or maybe we shouldn't allow the users to reindexing follower indices but mark them as read-only.\nSteps to Reproduce\n\nGo to https://console.qa.cld.elstc.co/home and create two deployments with version 7.17, one Leader and one Follower. You also can do it in stateful but in cloud it's easier.\nIn the Follower one, navigate to Kibana > Stack Management > Remote Clusters and create one Remote Cluster pointing the Leader one. In the Elasticsearch endpoint URL use the Proxy Address of the Leader one. It can be found in Cloud > Hosted deployments > [leader deployment name] > Security\nCreate two indices in the Leader one, one with documents and one without.\nIn the Follower one, navigate to Kibana > Stack Management > Cross-Cluster Replication and create two follower indices, one for each one of the indices you have created in the Leader one.\nIn the Follower one, navigate to Kibana > Stack Management > Upgrade Assistant. Address the issues if any and Upgrade Elastic to 8.18. It should succeed.\nOnce the upgrade of the Follower is complete, come back to Kibana > Stack Management > Upgrade Assistant > Elasticsearch deprecation issues. Your should find a Critical issue for each of the follower indices you created.\nClick the Issue for the follower index with documents and, in the flyout, follow the steps to reindex it. Verify it fails in the Reindexing documents step.\nClick the Issue for the follower index without documents and, in the flyout, follow the steps to reindex it. Verify it fails in the Create alias step.\n\nLogs (if relevant)\nError in the alias creation step for an index without docs:\nResponseError: status_exception Root causes: \nstatus_exception: can't modify aliases on indices [reindexed-v8-follower-leader-autofollow-not-upgrade-no-docs]; \naliases of following indices are self-replicated from their leader indices\n\nError in the reindexing documents step for an index without docs (this index only contained two docs, but it would have one failure per doc):\n  Error: Reindexing failed:  {\n      \"completed\": true,\n      \"task\": {\n        \"node\": \"-sFwXKU_TYG_Tn7UZD7XUA\",\n        \"id\": 98446,\n        \"type\": \"transport\",\n        \"action\": \"indices:data/write/reindex\",\n        \"status\": {\n          \"total\": 2,\n          \"updated\": 0,\n          \"created\": 0,\n          \"deleted\": 0,\n          \"batches\": 1,\n          \"version_conflicts\": 0,\n          \"noops\": 0,\n          \"retries\": {\n            \"bulk\": 0,\n            \"search\": 0\n          },\n          \"throttled_millis\": 0,\n          \"requests_per_second\": -1,\n          \"throttled_until_millis\": 0\n        },\n        \"description\": \"reindex from [follower-not-upgrade-with-docs] to [reindexed-v8-follower-not-upgrade-with-docs]\",\n        \"start_time_in_millis\": 1741790222292,\n        \"running_time_in_nanos\": 3391471,\n        \"cancellable\": true,\n        \"cancelled\": false,\n        \"headers\": {\n          \"X-elastic-product-origin\": \"kibana\",\n          \"trace.id\": \"266533c444e040e5e86d5411b7c36833\",\n          \"X-Opaque-Id\": \"b9634800-ee30-4c46-bfde-0e9188bac1f8;kibana:application:management:\"\n        }\n      },\n      \"response\": {\n        \"took\": 2,\n        \"timed_out\": false,\n        \"total\": 2,\n        \"updated\": 0,\n        \"created\": 0,\n        \"deleted\": 0,\n        \"batches\": 1,\n        \"version_conflicts\": 0,\n        \"noops\": 0,\n        \"retries\": {\n          \"bulk\": 0,\n          \"search\": 0\n        },\n        \"throttled\": \"0s\",\n        \"throttled_millis\": 0,\n        \"requests_per_second\": -1,\n        \"throttled_until\": \"0s\",\n        \"throttled_until_millis\": 0,\n        \"failures\": [\n          {\n            \"index\": \"reindexed-v8-follower-not-upgrade-with-docs\",\n            \"id\": \"1\",\n            \"cause\": {\n              \"type\": \"status_exception\",\n              \"reason\": \"a following engine does not accept operations without an assigned sequence number\"\n            },\n            \"status\": 403\n          },\n          {\n            \"index\": \"reindexed-v8-follower-not-upgrade-with-docs\",\n            \"id\": \"2\",\n            \"cause\": {\n              \"type\": \"status_exception\",\n              \"reason\": \"a following engine does not accept operations without an assigned sequence number\"\n            },\n            \"status\": 403\n          }\n        ]\n      }\n    }\n", "created_at": "2025-03-12", "closed_at": null, "labels": [">bug", ":Distributed Indexing/Reindex", "Team:Distributed Indexing"], "State": "open", "Author": "SoniaSanzV"}
{"issue_number": 124654, "issue_title": "ES|QL INLINESTATS after STATS optimized incorrectly", "issue_body": "Elasticsearch Version\nmain\nInstalled Plugins\nNo response\nJava Version\nn/a\nOS Version\nn/a\nProblem Description\nFROM kibana_sample_data_ecommerce \n  | STATS price = SUM(taxful_total_price) BY day = BUCKET(order_date,1 DAY)\n  | INLINESTATS days = TOP(day, 10, \"ASC\")\n\nresults in\n[esql] > Unexpected error from Elasticsearch: illegal_state_exception - Found 1 problem\nline 3:5: Plan [ProjectExec[[price{r}#1229, day{r}#1226, days{r}#1233]]] optimized incorrectly due to missing references [price{r}#1229]\n\nI expected output like\n day  | price  | days\n------+--------+-------------------\n day1 | price1 | [day1, day2, ...]\n day2 | price2 | [day1, day2, ...]\n ...  | ...    | ...\n\nSteps to Reproduce\nsee above\nLogs (if relevant)\nNo response", "created_at": "2025-03-12", "closed_at": "2025-03-13", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "jan-elastic"}
{"issue_number": 124653, "issue_title": "Configure max number of allocations per node", "issue_body": "Currently, when using semantic_text with an inference endpoint, Elasticsearch can scale up aggressively on ingest peaks, consuming a lot of resources. Ideally, users (me) should be able to configure a max # of allocations regardless of endpoint settings to prevent a laptop from becoming an airplane.", "created_at": "2025-03-12", "closed_at": null, "labels": [":ml", "Team:ML", "Feature:GenAI"], "State": "open", "Author": "dgieselaar"}
{"issue_number": 124649, "issue_title": "ES|QL Full Text Functions benchmarking", "issue_body": "Create benchmarks that can be used for stress testing full text functions. They should cover both observability and search use cases.", "created_at": "2025-03-12", "closed_at": "2025-03-21", "labels": ["Team:Search Relevance", ":Search Relevance/Search"], "State": "closed", "Author": "carlosdelest"}
{"issue_number": 124648, "issue_title": "[CI] GoogleCloudStorageBlobContainerStatsTests testResumableWrite failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6950 / concurrent-search-tests\nelasticsearch-pull-request #62095 / part-1\nelasticsearch-pull-request #62094 / part-1\nelasticsearch-pull-request #62049 / part-1\n\nReproduction Line:\n./gradlew \":modules:repository-gcs:test\" --tests \"org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobContainerStatsTests.testResumableWrite\" -Dtests.seed=E949297FEE50A8CC -Dtests.jvm.argline=\"-Des.concurrent_search=true\" -Dtests.locale=ku-Latn-TR -Dtests.timezone=SystemV/CST6CDT -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 4 failures in test testResumableWrite (1.8% fail rate in 224 executions)\n[main] 3 failures in step part-1 (3.0% fail rate in 101 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (3.0% fail rate in 100 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-12", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124647, "issue_title": "[CI] MixedClusterEsqlSpecIT test {string.LucenePushdownMultipleIndices SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6948 / 8.13.4_bwc\nelasticsearch-periodic #6941 / 8.14.3_bwc\nelasticsearch-periodic #6941 / 8.13.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.13.4#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {string.LucenePushdownMultipleOr SYNC}\" -Dtests.seed=1BA307CA600A8223 -Dtests.bwc=true -Dtests.locale=en-GU -Dtests.timezone=Australia/LHI -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:39741], URI [/_query?pretty=true&error_trace=true], status line [HTTP/1.1 400 Bad Request]\n\u00bfeerror\u00bfjroot_cause\ufffd\u00bfdtypeqparsing_exceptionfreasonx*line 2:25: token recognition error at: ':'kstack_tracey\n<org.elasticsearch.xpack.esql.parser.ParsingException: line 2:25: token recognition error at: ':'\n\tat org.elasticsearch.xpack.esql.parser.EsqlParser$1.syntaxError(EsqlParser.java:109)\n\tat org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\n\tat org.antlr.v4.runtime.Lexer.notifyListeners(Lexer.java:364)\n\tat org.antlr.v4.runtime.Lexer.nextToken(Lexer.java:144)\n\tat org.elasticsearch.xpack.esql.parser.EsqlParser$ParametrizedTokenSource.nextToken(EsqlParser.java:135)\n\tat org.antlr.v4.runtime.BufferedTokenStream.fetch(BufferedTokenStream.java:169)\n\tat org.antlr.v4.runtime.BufferedTokenStream.sync(BufferedTokenStream.java:152)\n\tat org.antlr.v4.runtime.BufferedTokenStream.consume(BufferedTokenS\n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step 8.13.4_bwc\n[8.x] 3 failures in test test {string.LucenePushdownMultipleIndices SYNC} (3.1% fail rate in 98 executions)\n[8.x] 2 failures in step 8.13.4_bwc (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-12", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124646, "issue_title": "[CI] MixedClusterEsqlSpecIT test {string.LucenePushdownMultipleOr SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6948 / 8.13.4_bwc\nelasticsearch-periodic #6941 / 8.11.4_bwc\nelasticsearch-periodic #6941 / 8.13.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.13.4#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {string.LucenePushdownMultipleOr SYNC}\" -Dtests.seed=1BA307CA600A8223 -Dtests.bwc=true -Dtests.locale=en-GU -Dtests.timezone=Australia/LHI -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:39741], URI [/_query?pretty=true&error_trace=true], status line [HTTP/1.1 400 Bad Request]\n\u00bfeerror\u00bfjroot_cause\ufffd\u00bfdtypeqparsing_exceptionfreasonx*line 2:25: token recognition error at: ':'kstack_tracey\n<org.elasticsearch.xpack.esql.parser.ParsingException: line 2:25: token recognition error at: ':'\n\tat org.elasticsearch.xpack.esql.parser.EsqlParser$1.syntaxError(EsqlParser.java:109)\n\tat org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\n\tat org.antlr.v4.runtime.Lexer.notifyListeners(Lexer.java:364)\n\tat org.antlr.v4.runtime.Lexer.nextToken(Lexer.java:144)\n\tat org.elasticsearch.xpack.esql.parser.EsqlParser$ParametrizedTokenSource.nextToken(EsqlParser.java:135)\n\tat org.antlr.v4.runtime.BufferedTokenStream.fetch(BufferedTokenStream.java:169)\n\tat org.antlr.v4.runtime.BufferedTokenStream.sync(BufferedTokenStream.java:152)\n\tat org.antlr.v4.runtime.BufferedTokenStream.consume(BufferedTokenS\n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step 8.13.4_bwc\n[8.x] 3 failures in test test {string.LucenePushdownMultipleOr SYNC} (3.1% fail rate in 98 executions)\n[8.x] 2 failures in step 8.13.4_bwc (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-12", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124645, "issue_title": "[CI] MixedClusterEsqlSpecIT test {string.LucenePushdownMixAndOr SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6948 / 8.12.2_bwc\nelasticsearch-periodic #6941 / 8.11.4_bwc\nelasticsearch-periodic #6941 / 8.12.2_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.12.2#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {string.LucenePushdownOr SYNC}\" -Dtests.seed=5482DA9E61C48CA2 -Dtests.bwc=true -Dtests.locale=ar-MA -Dtests.timezone=Africa/Ndjamena -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:40997], URI [/_query?pretty=true&error_trace=true], status line [HTTP/1.1 400 Bad Request]\n---\nerror:\n  root_cause:\n  - type: \"parsing_exception\"\n    reason: \"line 2:25: token recognition error at: ':'\"\n    stack_trace: \"org.elasticsearch.xpack.esql.parser.ParsingException: line 2:25:\\\n      \\ token recognition error at: ':'\\n\\tat org.elasticsearch.xpack.esql.parser.EsqlParser$1.syntaxError(EsqlParser.java:109)\\n\\\n      \\tat org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\\n\\\n      \\tat org.antlr.v4.runtime.Lexer.notifyListeners(Lexer.java:364)\\n\\tat org.antlr.v4.runtime.Lexer.nextToken(Lexer.java:144)\\n\\\n      \\tat org.elasticsearch.xpack.esql.parser.EsqlParser$ParametrizedTokenSource.nextToken(EsqlParser.java:135)\\n\\\n      \\tat org.antlr.v4.runtime.BufferedTokenStream.fetch(BufferedTokenStream.java:169)\\n\\\n      \\tat org.antlr.v4.runtime.BufferedTokenStream.sync(BufferedTokenS\n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step 8.12.2_bwc\n[8.x] 3 failures in test test {string.LucenePushdownMixAndOr SYNC} (3.1% fail rate in 97 executions)\n[8.x] 2 failures in step 8.12.2_bwc (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-12", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124644, "issue_title": "[CI] MixedClusterEsqlSpecIT test {string.LucenePushdownOr SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6948 / 8.12.2_bwc\nelasticsearch-periodic #6941 / 8.11.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.12.2#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {string.LucenePushdownOr SYNC}\" -Dtests.seed=5482DA9E61C48CA2 -Dtests.bwc=true -Dtests.locale=ar-MA -Dtests.timezone=Africa/Ndjamena -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:40997], URI [/_query?pretty=true&error_trace=true], status line [HTTP/1.1 400 Bad Request]\n---\nerror:\n  root_cause:\n  - type: \"parsing_exception\"\n    reason: \"line 2:25: token recognition error at: ':'\"\n    stack_trace: \"org.elasticsearch.xpack.esql.parser.ParsingException: line 2:25:\\\n      \\ token recognition error at: ':'\\n\\tat org.elasticsearch.xpack.esql.parser.EsqlParser$1.syntaxError(EsqlParser.java:109)\\n\\\n      \\tat org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\\n\\\n      \\tat org.antlr.v4.runtime.Lexer.notifyListeners(Lexer.java:364)\\n\\tat org.antlr.v4.runtime.Lexer.nextToken(Lexer.java:144)\\n\\\n      \\tat org.elasticsearch.xpack.esql.parser.EsqlParser$ParametrizedTokenSource.nextToken(EsqlParser.java:135)\\n\\\n      \\tat org.antlr.v4.runtime.BufferedTokenStream.fetch(BufferedTokenStream.java:169)\\n\\\n      \\tat org.antlr.v4.runtime.BufferedTokenStream.sync(BufferedTokenS\n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 failures in test test {string.LucenePushdownOr SYNC} (2.1% fail rate in 97 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-12", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124643, "issue_title": "[CI] MixedClusterEsqlSpecIT test {string.LucenePushdownMixOrAnd SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6948 / 8.11.4_bwc\nelasticsearch-periodic #6941 / 8.14.3_bwc\nelasticsearch-periodic #6941 / 8.11.4_bwc\nelasticsearch-periodic #6941 / 8.12.2_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.11.4#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {string.LucenePushdownMultipleAnd SYNC}\" -Dtests.seed=25A509DC24C046BA -Dtests.bwc=true -Dtests.locale=smn -Dtests.timezone=CNT -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:45137], URI [/_query?format=yaml&pretty=true&error_trace=true], status line [HTTP/1.1 400 Bad Request]\n---\nerror:\n  root_cause:\n  - type: \"parsing_exception\"\n    reason: \"line 1:15: mismatched input 'metadata' expecting {<EOF>, PIPE, COMMA,\\\n      \\ OPENING_BRACKET}\"\n    stack_trace: \"org.elasticsearch.xpack.esql.parser.ParsingException: line 1:15:\\\n      \\ mismatched input 'metadata' expecting {<EOF>, PIPE, COMMA, OPENING_BRACKET}\\n\\\n      \\tat org.elasticsearch.xpack.esql.parser.EsqlParser$1.syntaxError(EsqlParser.java:109)\\n\\\n      \\tat org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\\n\\\n      \\tat org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:544)\\n\\tat\\\n      \\ org.antlr.v4.runtime.DefaultErrorStrategy.reportInputMismatch(DefaultErrorStrategy.java:327)\\n\\\n      \\tat org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:139)\\n\\\n      \n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step 8.11.4_bwc\n[8.x] 4 failures in test test {string.LucenePushdownMixOrAnd SYNC} (4.2% fail rate in 96 executions)\n[8.x] 2 failures in step 8.11.4_bwc (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-12", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124642, "issue_title": "[CI] MixedClusterEsqlSpecIT test {string.LucenePushdownMultipleAnd SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6948 / 8.12.2_bwc\nelasticsearch-periodic #6948 / 8.11.4_bwc\nelasticsearch-periodic #6941 / 8.11.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.12.2#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {string.LucenePushdownOr SYNC}\" -Dtests.seed=5482DA9E61C48CA2 -Dtests.bwc=true -Dtests.locale=ar-MA -Dtests.timezone=Africa/Ndjamena -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:40997], URI [/_query?pretty=true&error_trace=true], status line [HTTP/1.1 400 Bad Request]\n---\nerror:\n  root_cause:\n  - type: \"parsing_exception\"\n    reason: \"line 2:25: token recognition error at: ':'\"\n    stack_trace: \"org.elasticsearch.xpack.esql.parser.ParsingException: line 2:25:\\\n      \\ token recognition error at: ':'\\n\\tat org.elasticsearch.xpack.esql.parser.EsqlParser$1.syntaxError(EsqlParser.java:109)\\n\\\n      \\tat org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)\\n\\\n      \\tat org.antlr.v4.runtime.Lexer.notifyListeners(Lexer.java:364)\\n\\tat org.antlr.v4.runtime.Lexer.nextToken(Lexer.java:144)\\n\\\n      \\tat org.elasticsearch.xpack.esql.parser.EsqlParser$ParametrizedTokenSource.nextToken(EsqlParser.java:135)\\n\\\n      \\tat org.antlr.v4.runtime.BufferedTokenStream.fetch(BufferedTokenStream.java:169)\\n\\\n      \\tat org.antlr.v4.runtime.BufferedTokenStream.sync(BufferedTokenS\n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in test test {string.LucenePushdownMultipleAnd SYNC}\n[8.x] 2 consecutive failures in step 8.11.4_bwc\n[8.x] 3 failures in test test {string.LucenePushdownMultipleAnd SYNC} (3.1% fail rate in 97 executions)\n[8.x] 2 failures in step 8.11.4_bwc (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-12", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124633, "issue_title": "`GET /_license/feature_usage` returns only node-local information", "issue_body": "A license is a cluster-wide concept, but today the GET /_license/feature_usage API returns only details about the licensed features used by the node handling the request. Thus if the caller wants to know about the features used by the whole cluster they must query this API on every node separately and then manually aggregate the results.\nThis is rather confusing, and is inconsistent with most other APIs regarding cluster-wide concepts which do the work needed to build a cluster-wide response themselves.\nCould we make this API more like other cluster-level APIs?", "created_at": "2025-03-12", "closed_at": "2025-03-31", "labels": [">bug", ":Security/License", "Team:Security"], "State": "closed", "Author": "DaveCTurner"}
{"issue_number": 124632, "issue_title": "Adjust retriever's (rrf) `rank_window` requirements with pagination.", "issue_body": "Description\nRight now, for pagination to work at all and be consistent, we require gathering all the search results that will be ranked in total. Meaning rank_window must be larger than from+size and we then rank the set.\nI wonder if we can improve this. It seems there is some performance to be gained. It gets tricky with RRF as its possible that we see a document later in the rank window that wasn't present before in the early pages, thus boosting it and reordering previous pages and subsequent pages.\nSo, this won't be simple, but I think we can get through the ordering weirdness by faking the ordering in later pages to keep things consistent (e.g. pretend we have seen pages before and recognize we are incorrectly reordering)", "created_at": "2025-03-12", "closed_at": null, "labels": [">enhancement", ":Search Relevance/Ranking", "Team:Search Relevance"], "State": "open", "Author": "benwtrent"}
{"issue_number": 124617, "issue_title": "[CI] InferenceTrialLicenseIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6943 / concurrent-search-tests\nelasticsearch-pull-request #61756 / part-2\nelasticsearch-intake #19608 / part2\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 failures in class org.elasticsearch.xpack.inference.InferenceTrialLicenseIT (0.4% fail rate in 855 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-21", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124615, "issue_title": "[CI] RepositoryGcsClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6959 / rhel-8_platform-support-unix\nelasticsearch-pull-request #61149 / part-1\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 2 failures in class org.elasticsearch.repositories.gcs.RepositoryGcsClientYamlTestSuiteIT (0.2% fail rate in 813 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-14", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124614, "issue_title": "[CI] MixedClusterEsqlSpecIT test {string.EndsWithLucenePushdownIgnoreMultivalues SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6962 / 8.12.2_bwc\nelasticsearch-periodic #6962 / 8.13.4_bwc\nelasticsearch-periodic #6955 / 8.12.2_bwc\nelasticsearch-periodic #6948 / 8.11.4_bwc\nelasticsearch-periodic #6941 / 8.12.2_bwc\nelasticsearch-periodic #6941 / 8.13.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.12.2#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {string.EndsWithLucenePushdownIgnoreMultivalues SYNC}\" -Dtests.seed=FFE6CCC62EEA52E8 -Dtests.bwc=true -Dtests.locale=es-CU -Dtests.timezone=Asia/Makassar -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Unexpected warning: Line -1:-1: evaluation of [] failed, treating result as null. Only first 20 failures recorded.\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step 8.12.2_bwc\n[8.x] 6 failures in test test {string.EndsWithLucenePushdownIgnoreMultivalues SYNC} (3.6% fail rate in 166 executions)\n[8.x] 3 failures in step 8.12.2_bwc (75.0% fail rate in 4 executions)\n[8.x] 2 failures in step 8.13.4_bwc (50.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": "2025-03-12", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124612, "issue_title": "[CI] DateUtilsTests testTimezoneIds failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7049 / corretto11_java-matrix\nelasticsearch-periodic #7049 / zulu8_java-matrix\nelasticsearch-periodic #7049 / zulu11_java-matrix\nelasticsearch-periodic #7049 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7049 / openjdk23_java-matrix\nelasticsearch-periodic #7042 / openjdk23_java-matrix\nelasticsearch-periodic #7042 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7042 / corretto11_java-matrix\nelasticsearch-periodic #7042 / zulu11_java-matrix\nelasticsearch-periodic #7042 / zulu8_java-matrix\n\nReproduction Line:\n./gradlew ':server:test' --tests \"org.elasticsearch.common.time.DateUtilsTests.testTimezoneIds\" -Dtests.seed=9769C9DAD3A9EE4D -Dtests.locale=en-AU -Dtests.timezone=America/Halifax -Druntime.java=11\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: WET\nExpected: <0>\n     but: was <3600000>\n\nIssue Reasons:\n\n[7.17] 5 consecutive failures in test testTimezoneIds\n[7.17] 21 consecutive failures in step corretto11_java-matrix\n[7.17] 22 consecutive failures in step zulu8_java-matrix\n[7.17] 21 consecutive failures in step zulu11_java-matrix\n[7.17] 22 consecutive failures in step adoptopenjdk11_java-matrix\n[7.17] 21 consecutive failures in step openjdk23_java-matrix\n[7.17] 107 failures in test testTimezoneIds (11.3% fail rate in 947 executions)\n[7.17] 21 failures in step corretto11_java-matrix (100.0% fail rate in 21 executions)\n[7.17] 22 failures in step zulu8_java-matrix (100.0% fail rate in 22 executions)\n[7.17] 21 failures in step zulu11_java-matrix (100.0% fail rate in 21 executions)\n[7.17] 22 failures in step adoptopenjdk11_java-matrix (100.0% fail rate in 22 executions)\n[7.17] 21 failures in step openjdk23_java-matrix (100.0% fail rate in 21 executions)\n[7.17] 22 failures in pipeline elasticsearch-periodic (100.0% fail rate in 22 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124609, "issue_title": "[CI] CartesianCentroidCalculatorTests testAddDifferentDimensionalType failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19894 / part1\nelasticsearch-periodic #6901 / openjdk23_entitlements_false_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.lucene.spatial.CartesianCentroidCalculatorTests.testAddDifferentDimensionalType\" -Dtests.seed=EC8561C75D1FDB46 -Dtests.locale=ii-Yiii-CN -Dtests.timezone=Asia/Srednekolymsk -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: Centroid (x:a numeric value within <9.51623423922472E28> of <9.516234239224721E34>, y:a numeric value within <1.0E-9> of <-3.555324192502472E7>, w:a numeric value within <9.804795289396622E29> of <9.804795289396622E35>)\n     but: \n\tY value <-3.555324192502471E7> differed by <6.450580596923828E-9> more than delta <1.0E-9>\n\nIssue Reasons:\n\n[main] 2 failures in test testAddDifferentDimensionalType (0.5% fail rate in 434 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-12", "closed_at": null, "labels": [":Analytics/Geo", ">test-failure", "Team:Analytics", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124608, "issue_title": "ESQL: Encapsulate Categorize instanceof checks inside aggs & rules", "issue_body": "Description\nCode dedicated to Categorize has made its way into Aggregate & replaced rules such as (ReplaceAggregateAggExpressionWithEval or ReplaceAggregateNestedExpressionWithEval).  While some of it is marked with TODO, this needs to extracted into a central place (to better manage it) or even better, make it work with the existing rules either by breaking down categorize into existing primitives (e.g. Aware interfaces) or extracting these if missing.\nFrom the logical plan perspective, Categorize is just another aggregate function - special handling is typically an indicator of wrong abstraction (which causes the rules to 'misfire').", "created_at": "2025-03-12", "closed_at": "2025-04-11", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "costin"}
{"issue_number": 124603, "issue_title": "[CI] FileAccessTreeTests testDuplicateExclusivePaths failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6984 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6984 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6977 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6977 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6969 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6969 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6964 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6964 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6957 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6957 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":libs:entitlement:test\" --tests \"org.elasticsearch.entitlement.runtime.policy.FileAccessTreeTests.testDuplicateExclusivePaths\" -Dtests.seed=69933420B0F4A869 -Dtests.locale=jgo-Latn-CM -Dtests.timezone=Asia/Seoul -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: \"Path [/a/b] is already exclusive to [component1][module1], cannot add exclusive access for [component2][module1]\"\n     but: was \"Path [C:\\\\a\\\\b] is already exclusive to [component1][module1], cannot add exclusive access for [component2][module1]\"\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in test testDuplicateExclusivePaths\n[8.x] 9 consecutive failures in step windows-2019_checkpart1_platform-support-windows\n[8.x] 9 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[8.x] 18 failures in test testDuplicateExclusivePaths (5.2% fail rate in 346 executions)\n[8.x] 9 failures in step windows-2019_checkpart1_platform-support-windows (100.0% fail rate in 9 executions)\n[8.x] 9 failures in step windows-2022_checkpart1_platform-support-windows (100.0% fail rate in 9 executions)\n[8.x] 9 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 9 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-11", "closed_at": "2025-03-13", "labels": [">test-failure", "Team:Core/Infra", "needs:risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124602, "issue_title": "ES|QL: named_parameter support for FROM ?indexpattern", "issue_body": "Description\nAllow a named_parameter to be set in the index pattern position of the FROM\nMotivation\nWhen my data is partitioned into streams / index patterns\nAnd I'm visualizing ES|QL panels on a dashboard\nI need a named_parameter for the FROM ?indexpattern part of my queries\nSo I can have 1 dashboard that has a control (named_paramater) with static values of my various index patterns\nAnd not have to duplicate the dashboard a bunch of times introducing a maintenance headache", "created_at": "2025-03-11", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL", ":Analytics/Compute Engine"], "State": "open", "Author": "ghudgins"}
{"issue_number": 124575, "issue_title": "[CI] CoreWithMultipleProjectsClientYamlTestSuiteIT test {yaml=data_stream/150_tsdb/created the data stream} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19862 / part2\nelasticsearch-pull-request #61777 / part-2\nelasticsearch-pull-request #61735 / part-2\nelasticsearch-pull-request #61578 / part-2\nelasticsearch-pull-request #61224 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:qa:multi-project:core-rest-tests-with-multiple-projects:yamlRestTest\" --tests \"org.elasticsearch.multiproject.test.CoreWithMultipleProjectsClientYamlTestSuiteIT.test {yaml=data_stream/150_tsdb/created the data stream}\" -Dtests.seed=3667756CA22BBFD3 -Dtests.locale=sq-AL -Dtests.timezone=Africa/Bangui -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [data_stream/150_tsdb:111]: \nExpected: \"2021-04-29T00:00:00.000Z\"\n     but: was \"2025-03-11T16:08:51.000Z\"\n\nIssue Reasons:\n\n[main] 5 failures in test test {yaml=data_stream/150_tsdb/created the data stream} (0.8% fail rate in 617 executions)\n[main] 4 failures in step part-2 (2.1% fail rate in 192 executions)\n[main] 4 failures in pipeline elasticsearch-pull-request (2.1% fail rate in 192 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-11", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124571, "issue_title": "[CI] ValuesTests testGroupingAggregate {TestCase=<<no alt geo_shape>s> #2} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19857 / part3\nelasticsearch-pull-request #61614 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.expression.function.aggregate.ValuesTests.testGroupingAggregate {TestCase=<<no alt geo_shape>s> #2}\" -Dtests.seed=9ED6B334BDF60196 -Dtests.locale=vai -Dtests.timezone=Europe/Lisbon -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.OutOfMemoryError: Java heap space\n\nIssue Reasons:\n\n[main] 2 failures in test testGroupingAggregate {TestCase=<s> #2} (0.7% fail rate in 276 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-11", "closed_at": "2025-03-12", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124568, "issue_title": "ESQL: Pushdown Like query where possible", "issue_body": "Description\nSimilar to RLike or StartsWith, Like query can be pushed down to Lucene using a WildcardQuery, which we're already doing for SQL.", "created_at": "2025-03-11", "closed_at": "2025-04-08", "labels": [">bug", ">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "costin"}
{"issue_number": 124567, "issue_title": "semantic_text is not recognizable as such in field_caps", "issue_body": "Description\nWhen querying _field_caps, semantic_text fields are returned as a text field type. The intention is that these fields should \"just be text fields\", but there are differences, such as the multi_match query not working for semantic_text fields, or semantic_text not being queryable cross-cluster. Getting the index mappings directly is suggested as an alternative but this is very bad for performance (because of the payload size) and does not work cross-cluster.\nEither semantic_text should be recognizable as such in _field_caps or the feature gap needs to be closed.\nUse cases\nFor knowledge bases in the Obs AI Assistant, we leverage search connector indices. The user types in a prompt, and then we want to use the prompt to query these indices. For that to work we need to understand what fields should be queried as text. We can do this by calling _field_caps on those indices with type: text. However because we don't understand what fields are semantic_text we cannot use all text queries. This currently means that we have to create match queries for each text field instead of creating a multi_match query. There are probably other queries as well that do not work on semantic_text fields. On a case-by-case basis we can work around this but generally we need the capability to determine upfront what kind of queries can be executed and which cannot in order to prevent internal errors.", "created_at": "2025-03-11", "closed_at": null, "labels": [">enhancement", "Team:SearchOrg", ":SearchOrg/Relevance", ":Search Relevance/Search"], "State": "open", "Author": "dgieselaar"}
{"issue_number": 124562, "issue_title": "Elasticsearch search engine suppressed rest errors: No analyzer configured for field posttitle", "issue_body": "On a very superficial glance, it looks like this should be a user error, since perhaps the query included an invalid posttitle, instead of a server error.\nStack trace:\nFailed to execute phase [query], all shards failed; shardFailures {[xnNu_cvARS-NlPAhJp00ag][news_s2][0]: org.elasticsearch.transport.RemoteTransportException: [es-es-search-77fcf49649-db9sj][100.66.117.169:9300][indices:data/read/search[phase/query]] \ncaused by: org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query] \ncaused by: java.lang.UnsupportedOperationException: No analyzer configured for field posttitle^2 }{[xnNu_cvARS-NlPAhJp00ag][news_s2][1]: org.elasticsearch.transport.RemoteTransportException: [es-es-search-77fcf49649-db9sj][100.66.117.169:9300][indices:data/read/search[phase/query]] \ncaused by: org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query] \ncaused by: java.lang.UnsupportedOperationException: No analyzer configured for field posttitle^2 }{[xnNu_cvARS-NlPAhJp00ag][news_s2][2]: org.elasticsearch.transport.RemoteTransportException: [es-es-search-77fcf49649-db9sj][100.66.117.169:9300][indices:data/read/search[phase/query]] \ncaused by: org.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query] \ncaused by: java.lang.UnsupportedOperationException: No analyzer configured for field posttitle^2 } \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:638) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:323) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:683) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:422) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:276) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:54) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:593) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1776) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1509) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1643) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1618) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:44) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:45) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.lambda$maybeWrapListenerForStackTrace$2(SearchService.java:559) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$DelegatingResponseActionListener.acceptException(ActionListenerImplementations.java:188) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$DelegatingResponseActionListener.onFailure(ActionListenerImplementations.java:193) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable.onFailure(ActionRunnable.java:152) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:29) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27) \nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) \nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) \nat java.base/java.lang.Thread.run(Thread.java:1575) \ncaused by: org.elasticsearch.ElasticsearchException$1: No analyzer configured for field posttitle^2 \nat org.elasticsearch.server@9.1.0/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:725) \nat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:321) ... 26 more \ncaused by: java.lang.UnsupportedOperationException: No analyzer configured for field posttitle^2\n", "created_at": "2025-03-11", "closed_at": "2025-03-12", "labels": ["Team:Search Relevance", ":Search Relevance/Search"], "State": "closed", "Author": "GalLalouche"}
{"issue_number": 124552, "issue_title": "[ILM] Adding a \"description\" Field for Policy Explanation", "issue_body": "Description\nTask Description:\nThe current ILM implementation lacks the ability to add a description to a policy, making it difficult to understand its context. This is particularly critical during testing, where policy parameters may change several times a day, or when managing a cluster with a large number of policies.\nExamples of scenarios where a description would be useful:\n\nDisabling data deletion \u2013 When working with indices restored from a snapshot, deletion may need to be temporarily disabled. Providing a reason for the change helps prevent accidental re-enabling.\nConfiguring parameters for a new data source \u2013 Documenting tested parameters and the date of changes simplifies the selection of optimal values.\nDocumenting policy changes for data retention \u2013 Analysts can specify the criteria used to determine the current settings.\nPreserving customer retention requirements \u2013 Storing data retention requirements within ILM prevents unintentional reductions in retention periods and potential data loss without prior customer approval.\nStoring links to external documentation \u2013 If ILM policy descriptions are maintained in an external system (e.g., Confluence, Wiki), the description field can store a reference for quick access.\n\nProposed Solution:\nAdd a string field description to the ILM policy structure. The description should be accessible via the API and visible in the Kibana UI (e.g., in the ILM management section) for easy viewing and editing.", "created_at": "2025-03-11", "closed_at": null, "labels": [">enhancement", ":Data Management/ILM+SLM", "Team:Data Management"], "State": "open", "Author": "Harmlos"}
{"issue_number": 124533, "issue_title": "Inconsistent Highlighting Behavior with exists Query in Elasticsearch 8.5 vs 8.14", "issue_body": "Elasticsearch Version\n8.5\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nLinux 5.15.0-113-generic #123~20.04.1-Ubuntu SUTC 2024 x86_64 x86_64 x86_64 GNU/Linux\nProblem Description\nI am encountering an issue with the highlighting feature in Elasticsearch when using the exists query syntax. Specifically, I have noticed inconsistent behavior between Elasticsearch versions 8.5 and 8.14. When I include the exists query in the request body, the highlighting results differ between these two versions.\nI would like to know if this discrepancy is due to a bug that has been fixed in a later version, and if so, which version addresses this issue. Any guidance on resolving this inconsistency would be greatly appreciated.\nSteps to Reproduce\nI create same index in both 8.5 and 8.14 like this:\n{\n    \"mappings\": {\n        \"properties\": {\n            \"deleted_at\": {\n                \"type\": \"date\"\n            },\n            \"customized_description\": {\n                \"properties\": {\n                    \"internvl_ft\": {\n                        \"type\": \"text\",\n                    }\n                }\n            }\n        }\n    }\n}\n\nAnd my query body like this:\n{\n    \"query\": {\n        \"bool\": {\n            \"must_not\": [\n                {\n                    \"match\": {\n                        \"customized_description.internvl_ft\": {\n                            \"query\": \"pig\"\n                        }\n                    }\n                },\n                {\n                    \"exists\": {\n                        \"field\": \"deleted_at\"\n                    }\n                }\n            ],\n            \"must\": [\n                {\n                    \"match\": {\n                        \"customized_description.internvl_ft\": {\n                            \"query\": \"dog\"\n                        }\n                    }\n                }\n            ]\n        }\n    },\n    \"highlight\": {\n        \"require_field_match\": true,\n        \"fields\": {\n            \"customized_description.internvl_ft\": {\n                \"number_of_fragments\": 0,\n                \"post_tags\": [\n                    \"\\\"</b>\\\"\"\n                ],\n                \"pre_tags\": [\n                    \"\\\"<b __toBeReplaced__>\\\"\"\n                ]\n            }\n        }\n    },\n    \"size\": 2,\n}\n\nwith 8.14 version , it worked very well with response like:\n        \"hits\": [\n            {\n                \"_index\": \"test-index\",\n                \"_id\": \"test_id\",\n                \"_score\": null,\n                \"_source\": {\n                    \"customized_description\": {\n                        \"internvl_ft\": \"this is a picture about a black dog\"\n                    }\n                },\n                \"highlight\": {\n                    \"customized_description.internvl_ft\": [\n                        \"this is a picture about a black \\\"<b __toBeReplaced__>\\\"dog\\\"</b>\\\"\"\n                    ]\n                }\n            }\n        ]\n\nHowever, with 8.5 , its response does not contain any highlight information,\nif I drop the part of query:\n                {\n                    \"exists\": {\n                        \"field\": \"deleted_at\"\n                    }\n                }\n\nthe 8.5 will response with highlight\nLogs (if relevant)\nNo response", "created_at": "2025-03-11", "closed_at": null, "labels": [">bug", ":Search Relevance/Highlighting", "feedback_needed", "priority:normal", "Team:Search Relevance"], "State": "open", "Author": "sxh-lsc"}
{"issue_number": 124526, "issue_title": "[CI] InternalDistributionBwcSetupPluginFuncTest class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6911 / openjdk17_checkpart1_java-matrix\nelasticsearch-periodic #6911 / openjdk17_checkpart1_java-matrix\nelasticsearch-periodic #6911 / openjdk17_checkpart1_java-matrix\nelasticsearch-intake #19321 / part1\nelasticsearch-intake #19321 / part1\nelasticsearch-intake #19321 / part1\nelasticsearch-periodic #6771 / openjdk17_checkpart1_java-matrix\nelasticsearch-periodic #6771 / openjdk17_checkpart1_java-matrix\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit6781519215085789358/cloned with arguments [:distribution:bwc:minor:buildBwcLinuxAarch64Tar, -DtestRemoteRepo=/tmp/junit5102176338214989393/remote/.git, -Dbwc.remote=origin, -Dbwc.dist.version=8.4.0-SNAPSHOT, --full-stacktrace, -Dtest.external=true]\n\nOutput:\n> Task :buildSrc:compileJava NO-SOURCE\n> Task :buildSrc:compileGroovy NO-SOURCE\n> Task :buildSrc:processResources\n> Task :buildSrc:classes\n> Task :buildSrc:jar\n=======================================\nElasticsearch Build Hamster says Hello!\n  Gradle Version        : 8.13\n  OS Info               : Linux 5.15.0-1075-gcp (amd64)\n  Runtime JDK Version   : 17.0.2+8-86 (Oracle, 17.0.2+8-86)\n  Runtime java.home     : /opt/buildkite-agent/.java/openjdk17\n  Gradle JDK Version    : 17.0.2+8-86 (Oracle)\n  Gradle java.home      : /usr/java/openjdk17\n  Random Testing Seed   : FDFE4580DA9C70E5\n  In FIPS 140 mode      : false\n==========================\n[truncated]\n\nIssue Reasons:\n\n[8.17] 2 consecutive failures in step openjdk17_checkpart1_java-matrix\n[8.17] 3 failures in class supports #platform aarch distributions (4.5% fail rate in 67 executions)\n[8.17] 2 failures in class builds distribution from branches via archives extractedAssemble (3.0% fail rate in 67 executions)\n[8.17] 3 failures in class org.elasticsearch.gradle.internal.InternalDistributionBwcSetupPluginFuncTest (4.5% fail rate in 67 executions)\n[8.17] 2 failures in step openjdk17_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[8.17] 2 failures in pipeline elasticsearch-periodic (66.7% fail rate in 3 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-10", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124518, "issue_title": "[CI] CoreWithMultipleProjectsClientYamlTestSuiteIT test {yaml=data_stream/190_failure_store_redirection/Redirect ingest failure in data stream to failure store} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19801 / part2\nelasticsearch-pull-request #61735 / part-2\nelasticsearch-pull-request #61578 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:qa:multi-project:core-rest-tests-with-multiple-projects:yamlRestTest\" --tests \"org.elasticsearch.multiproject.test.CoreWithMultipleProjectsClientYamlTestSuiteIT.test {yaml=data_stream/190_failure_store_redirection/Redirect ingest failure in data stream to failure store}\" -Dtests.seed=3AAF702E6F6733A1 -Dtests.locale=pt-LU -Dtests.timezone=America/North_Dakota/Center -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [data_stream/190_failure_store_redirection:118]: expected [2xx] status code but api [search] returned [503 Service Unavailable] [{\"error\":{\"root_cause\":[{\"type\":\"no_shard_available_action_exception\",\"reason\":\"[test-cluster-1][127.0.0.1:46031][indices:data/read/search[phase/query]]\",\"stack_trace\":\"org.elasticsearch.action.NoShardAvailableActionException: [test-cluster-1][127.0.0.1:46031][indices:data/read/search[phase/query]]\\n\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\".ds-logs-foobar-2025.03.10-000001\",\"node\":\"SeJ1sjdDR72s36qeMZPF1A\",\"reason\":{\"type\":\"no_shard_available_action_exception\",\"reason\":\"[test-cluster-1][127.0.0.1:46031][indices:data/read/search[phase/query]]\",\"stack_trace\":\"org.elasticsearch.action.NoShardAvailableActionException: [test-cluster-1][127.0.0.1:46031][indices:data/read/search[phase/query]]\\n\"}}],\"stack_trace\":\"Failed to execute\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test test {yaml=data_stream/190_failure_store_redirection/Redirect ingest failure in data stream to failure store} (1.7% fail rate in 172 executions)\n[main] 2 failures in step part-2 (3.1% fail rate in 65 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (3.1% fail rate in 65 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-10", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126049, "issue_title": "[Watcher] Add ServiceNow to Actions", "issue_body": "Describe the feature:\nAdd ServiceNow ITSM connector to watcher actions\n\nDescribe a specific use case for the feature:\nWe want to leverage all ServiceNow ITSM Connector in our watchers. It seems a bit frustrating to not have same connector capabilities in Watcher.", "created_at": "2025-03-10", "closed_at": null, "labels": [":Data Management/Watcher", "Team:Data Management"], "State": "open", "Author": "Erikg346"}
{"issue_number": 124499, "issue_title": "Vector index merge time regression in 8.16.0 onwards, with MGLRU enabled in Linux kernel", "issue_body": "Elasticsearch Version\n8.16.0+\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nLinux kernel 6.3+\nProblem Description\nStarting from 8.16.0, with MGLRU enabled in Linux kernel (cat /sys/kernel/mm/lru_gen/enabled returns 0x0007), and Linux kernel version 6.3+, vector index merge process might take a very long time to complete. This applies to non-quantized vector format like in example below. Note that default vector type is quantized (int8_hnsw) since version 8.14.\n        \"titleVector\" : {\n          \"type\" : \"dense_vector\",\n          \"dims\" : 768,\n          \"index\" : true,\n          \"similarity\" : \"dot_product\",\n          \"index_options\" : {\n            \"type\" : \"hnsw\", <--- HERE\n            \"m\" : 16,\n            \"ef_construction\" : 100\n          }\n        },\n\nThe most characteristic symptom is the Lucene merge thread is constantly calculating vector dot product.\n(note: below outputs for ES 8.17.2 and Linux kernel 6.8)\n$ ./jdk/bin/jstack -l -e $(./jdk/bin/jps | grep Elasticsearch | awk '{print $1}') | grep \"Lucene Merge Thread\" -A35\n\"elasticsearch[<REDACTED>][[vectors][0]: Lucene Merge Thread #0]\" #85 [14473] daemon prio=5 os_prio=0 cpu=2086890.49ms elapsed=9886.33s allocated=11887M defined_classes=212 tid=0x00007f865c0188f0 nid=14473 runnable  [0x00007f86f4afc000]\n   java.lang.Thread.State: RUNNABLE\n        at org.apache.lucene.internal.vectorization.PanamaVectorUtilSupport.dotProductBody(org.apache.lucene.core@9.12.0/PanamaVectorUtilSupport.java:122)\n        at org.apache.lucene.internal.vectorization.PanamaVectorUtilSupport.dotProduct(org.apache.lucene.core@9.12.0/PanamaVectorUtilSupport.java:102)\n        at org.apache.lucene.util.VectorUtil.dotProduct(org.apache.lucene.core@9.12.0/VectorUtil.java:66)\n        at org.apache.lucene.index.VectorSimilarityFunction$2.compare(org.apache.lucene.core@9.12.0/VectorSimilarityFunction.java:55)\n        at org.apache.lucene.codecs.hnsw.DefaultFlatVectorScorer$FloatScoringSupplier$1.score(org.apache.lucene.core@9.12.0/DefaultFlatVectorScorer.java:149)\n        at org.apache.lucene.util.hnsw.HnswGraphSearcher.searchLevel(org.apache.lucene.core@9.12.0/HnswGraphSearcher.java:237)\n        at org.apache.lucene.util.hnsw.HnswGraphBuilder.addGraphNode(org.apache.lucene.core@9.12.0/HnswGraphBuilder.java:265)\n        at org.apache.lucene.util.hnsw.HnswConcurrentMergeBuilder$ConcurrentMergeWorker.addGraphNode(org.apache.lucene.core@9.12.0/HnswConcurrentMergeBuilder.java:200)\n        at org.apache.lucene.util.hnsw.HnswGraphBuilder.addVectors(org.apache.lucene.core@9.12.0/HnswGraphBuilder.java:197)\n        at org.apache.lucene.util.hnsw.HnswConcurrentMergeBuilder$ConcurrentMergeWorker.run(org.apache.lucene.core@9.12.0/HnswConcurrentMergeBuilder.java:180)\n        at org.apache.lucene.util.hnsw.HnswConcurrentMergeBuilder.lambda$build$0(org.apache.lucene.core@9.12.0/HnswConcurrentMergeBuilder.java:86)\n        at org.apache.lucene.util.hnsw.HnswConcurrentMergeBuilder$$Lambda/0x00007f86a06496a8.call(org.apache.lucene.core@9.12.0/Unknown Source)\n        at java.util.concurrent.FutureTask.run(java.base@23/FutureTask.java:317)\n        at org.apache.lucene.search.TaskExecutor$TaskGroup$1.run(org.apache.lucene.core@9.12.0/TaskExecutor.java:120)\n        at org.apache.lucene.search.TaskExecutor$TaskGroup.invokeAll(org.apache.lucene.core@9.12.0/TaskExecutor.java:176)\n        at org.apache.lucene.search.TaskExecutor.invokeAll(org.apache.lucene.core@9.12.0/TaskExecutor.java:84)\n        at org.apache.lucene.util.hnsw.HnswConcurrentMergeBuilder.build(org.apache.lucene.core@9.12.0/HnswConcurrentMergeBuilder.java:90)\n        at org.apache.lucene.util.hnsw.IncrementalHnswGraphMerger.merge(org.apache.lucene.core@9.12.0/IncrementalHnswGraphMerger.java:147)\n        at org.apache.lucene.codecs.lucene99.Lucene99HnswVectorsWriter.mergeOneField(org.apache.lucene.core@9.12.0/Lucene99HnswVectorsWriter.java:377)\n        at org.apache.lucene.codecs.perfield.PerFieldKnnVectorsFormat$FieldsWriter.mergeOneField(org.apache.lucene.core@9.12.0/PerFieldKnnVectorsFormat.java:121)\n        at org.apache.lucene.codecs.KnnVectorsWriter.merge(org.apache.lucene.core@9.12.0/KnnVectorsWriter.java:106)\n        at org.apache.lucene.index.SegmentMerger.mergeVectorValues(org.apache.lucene.core@9.12.0/SegmentMerger.java:271)\n        at org.apache.lucene.index.SegmentMerger$$Lambda/0x00007f86a0638000.merge(org.apache.lucene.core@9.12.0/Unknown Source)\n        at org.apache.lucene.index.SegmentMerger.mergeWithLogging(org.apache.lucene.core@9.12.0/SegmentMerger.java:314)\n        at org.apache.lucene.index.SegmentMerger.merge(org.apache.lucene.core@9.12.0/SegmentMerger.java:158)\n        at org.apache.lucene.index.IndexWriter.mergeMiddle(org.apache.lucene.core@9.12.0/IndexWriter.java:5292)\n        at org.apache.lucene.index.IndexWriter.merge(org.apache.lucene.core@9.12.0/IndexWriter.java:4758)\n        at org.apache.lucene.index.IndexWriter$IndexWriterMergeSource.merge(org.apache.lucene.core@9.12.0/IndexWriter.java:6581)\n        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(org.apache.lucene.core@9.12.0/ConcurrentMergeScheduler.java:660)\n        at org.elasticsearch.index.engine.ElasticsearchConcurrentMergeScheduler.doMerge(org.elasticsearch.server@8.17.2/ElasticsearchConcurrentMergeScheduler.java:103)\n        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(org.apache.lucene.core@9.12.0/ConcurrentMergeScheduler.java:721)\n\n   Locked ownable synchronizers:\n        - None\n\nHot threads show high I/O wait, notice other=88.1%:\n$ curl -u <REDACTED> \"http://localhost:9200/_nodes/hot_threads?threads=10000\" -s | grep \"\\[vectors\\]\\[0\\]: Lucene Merge Thread #0\" -A25\n   100.0% [cpu=11.9%, other=88.1%] (500ms out of 500ms) cpu usage by thread 'elasticsearch[ip-172-31-32-115][[vectors][0]: Lucene Merge Thread #0]'\n     10/10 snapshots sharing following 31 elements\n       app/org.apache.lucene.core@9.12.0/org.apache.lucene.internal.vectorization.PanamaVectorUtilSupport.dotProductBody(PanamaVectorUtilSupport.java:122)\n       app/org.apache.lucene.core@9.12.0/org.apache.lucene.internal.vectorization.PanamaVectorUtilSupport.dotProduct(PanamaVectorUtilSupport.java:102)\n       app/org.apache.lucene.core@9.12.0/org.apache.lucene.util.VectorUtil.dotProduct(VectorUtil.java:66)\n       app/org.apache.lucene.core@9.12.0/org.apache.lucene.index.VectorSimilarityFunction$2.compare(VectorSimilarityFunction.java:55)\n       app/org.apache.lucene.core@9.12.0/org.apache.lucene.codecs.hnsw.DefaultFlatVectorScorer$FloatScoringSupplier$1.score(DefaultFlatVectorScorer.java:149)\n       app/org.apache.lucene.core@9.12.0/org.apache.lucene.util.hnsw.HnswGraphSearcher.searchLevel(HnswGraphSearcher.java:237)\n       app/org.apache.lucene.core@9.12.0/org.apache.lucene.util.hnsw.HnswGraphBuilder.addGraphNode(HnswGraphBuilder.java:265)\n       app/org.apache.lucene.core@9.12.0/org.apache.lucene.util.hnsw.HnswConcurrentMergeBuilder$ConcurrentMergeWorker.addGraphNode(HnswConcurrentMergeBuilder.java:200)\n       app/org.apache.lucene.core@9.12.0/org.apache.lucene.util.hnsw.HnswGraphBuilder.addVectors(HnswGraphBuilder.java:197)\n[..]\n\nFrom OS perspective, high level of major page faults...\n$ sar -B 1 5\nLinux 6.8.0-1021-aws (<REDACTED>)         03/10/25        _x86_64_        (4 CPU)\n\n13:30:01     pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff\n13:30:02     77240.00     60.00  19313.00  19310.00  25420.00  25408.00      0.00  50816.00    200.00\n13:30:03     77640.00      0.00  19410.00  19410.00     11.00      0.00      0.00      0.00      0.00\n13:30:04     78244.00      0.00  19561.00  19561.00  25419.00  25408.00      0.00  50816.00    200.00\n13:30:05     78756.00      0.00  19689.00  19689.00  25420.00  25408.00      0.00  50816.00    200.00\n13:30:06     78344.00      0.00  19586.00  19586.00  25418.00  25408.00      0.00  50816.00    200.00\nAverage:     78044.80     12.00  19511.80  19511.20  20337.60  20326.40      0.00  40652.80    200.00\n\n... and I/O wait, see wa column:\n(note: that's on a reproduction system that has nothing else to do, just the merge, on busy systems CPU I/O wait might be \"hidden\")\n$ vmstat -a -SM 1 5\nprocs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----\n r  b   swpd   free  inact active   si   so    bi    bo   in   cs us sy id wa st\n 2  1      0    331   8646   6168    0    0  6662   656   96   96  3  2 82 13  0\n 0  2      0    264   8715   6169    0    0 71296     0 20083 35919  1  5 51 43  0\n 0  2      0    287   8690   6169    0    0 75572     0 21292 38060  1  5 51 43  0\n 0  2      0    311   8659   6169    0    0 69932     0 19752 35268  2  4 51 43  0\n 0  2      0    350   8632   6169    0    0 74724     8 21119 37623  2  5 51 42  0\n\n... and I/O PSI metrics:\n$ cat /proc/pressure/io\nsome avg10=54.40 avg60=51.46 avg300=51.83 total=15287830871\nfull avg10=54.39 avg60=51.41 avg300=51.79 total=15251110144\n\nThe exact level of major page faults will depend on the system. The above was seen in a system with 2 concurrent Lucene merge threads, with a NVMe SSD disk with 100 us read latency (r_await). With higher read latency, major page faults might be proportionally lower.\n$ iostat -xdz 1\n[..]\nDevice            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util\nnvme0n1       19402.00  77612.00     0.00   0.00    0.09     4.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    1.73  98.40\n\n\nDevice            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util\nnvme0n1       19681.00  78720.00     0.00   0.00    0.09     4.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    1.75  98.30\n[..]\n\nThe regression is a combination of:\n\nLucene using MADV_RANDOM madvise for VEC files\nElasticsearch not overriding this starting from #110159\nChanged semantics of MADV_RANDOM in Linux kernel with MGLRU, specifically after torvalds/linux@8788f67\n\nSteps to Reproduce\nThe following steps reproduce the problem reliably on hosts with 4 or 8 CPU cores and 16 GiB of RAM, and Intel processors supporting AVX-512 extension. The problem might be present elsewhere, but that's how the repros were run. The data is based on SO Vector Rally track which creates a single vectors index with 2 shards. This specific payload uses hnsw vector index type which is not the default since 8.14.0.\n# make sure you have 6.3+ Linux kernel\nuname -a\n\n# make sure MGLRU is enabled (should return 0x0007)\ncat /sys/kernel/mm/lru_gen/enabled\n\n# make sure AVX-512 extensions are available\ngrep avx512 /proc/cpuinfo\n\n# make sure you have 16 GiB of memory\ngrep MemTotal /proc/meminfo\n\n# for fancy download\nsudo apt-get update\nsudo apt install aria2\n\n# download (607 MiB) and unpack Elasticsearch version 8.17.2\naria2c -x 4 https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.17.2-linux-x86_64.tar.gz\ntar zxf elasticsearch-8.17.2-linux-x86_64.tar.gz\ncd elasticsearch-8.17.2\n\n# download Lucene 9.12.0 with modified logging\nmv lib/lucene-core-9.12.0.jar lib/lucene-core-9.12.0.jar.orig\nwget https://storage.googleapis.com/so-vector-test-public/lucene-core-9.12.0.jar -O lib/lucene-core-9.12.0.jar\n\n# configure Elasticsearch user/password\n./bin/elasticsearch-users useradd test -p test123 -r superuser\n\n# set heap size to 4 GiB\necho \"-Xms4g\" >> config/jvm.options\necho \"-Xmx4g\" >> config/jvm.options\n\n# set force merge thread pool size to 2\necho \"thread_pool.force_merge.size: 2\" >> config/elasticsearch.yml\n\n# download the SO Vector Rally track data with \"hnsw\" vector index type ingested into ES (31 GiB) and untar it\naria2c -x 4 https://storage.googleapis.com/so-vector-test-public/8.17.2-data.tar\ntar -xf 8.17.2-data.tar\n\n# start tmux session\ntmux\n\n# start Elasticsearch\n./bin/elasticsearch\n\n# wait for this log line:\n# [2025-03-10T10:12:57,968][INFO ][o.e.c.r.a.AllocationService] [<REDACTED>] current.health=\"GREEN\" message=\"Cluster health status changed from [RED] to [GREEN] (reason: [shards started [[vectors][0]]]).\" previous.health=\"RED\" reason=\"shards started [[vectors][0]]\"\n\n# --- in a new window\n\n# list indices\ncurl -u test:test123 \"http://localhost:9200/_cat/indices?v\"\n\n# --- example output ---\n# health status index   uuid                   pri rep docs.count docs.deleted store.size pri.store.size dataset.size\n# green  open   vectors zJfxtEMfR5-V8o84Fsr2-w   2   0    2000000            0     30.7gb         30.7gb       30.7gb\n\n# initiate force merge of the \"vectors\" index\ncurl -u test:test123 -X POST \"http://localhost:9200/vectors/_forcemerge?max_num_segments=1&wait_for_completion=false\"\n\n# --- example output ---\n# {\"task\":\"KbsRAY4bScCt_8EcwpO1bw:212\"}\n\nLogs (if relevant)\n~10 minutes after force merge initiation, the graph build process starts. Here, each 1000-vector chunk is processed in around a second:\n[2025-03-10T10:47:17,579][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] addVectors [0 2048]\n[2025-03-10T10:47:17,672][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 0 in 92/92 ms\n[2025-03-10T10:47:17,869][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] addVectors [0 2048]\n[2025-03-10T10:47:18,098][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 0 in 228/228 ms\n[2025-03-10T10:47:19,121][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 1000 in 1449/1541 ms\n[2025-03-10T10:47:20,290][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 2000 in 1168/2710 ms\n[2025-03-10T10:47:20,346][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] addVectors [2048 4096]\n[2025-03-10T10:47:21,435][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 3000 in 1089/1089 ms\n[2025-03-10T10:47:22,613][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 4000 in 1178/2267 ms\n\nBut later the process degrades, and each chunk can take way more time:\n[2025-03-10T11:15:22,990][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] addVectors [659456 661504]\n[2025-03-10T11:15:27,159][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] addVectors [591872 593920]\n[2025-03-10T11:15:30,313][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 592000 in 3154/3154 ms\n[2025-03-10T11:15:36,239][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 660000 in 13249/13249 ms\n[2025-03-10T11:15:54,574][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 593000 in 24260/27414 ms\n[2025-03-10T11:15:59,629][INFO ][o.a.l.u.h.HnswGraphBuilder] [<REDACTED>] built 661000 in 23389/36639 ms\n\n(note the process ends at 1M vectors in each shard)\nWorkaround\nDisable MGLRU:\nsudo sh -c 'echo 0 > /sys/kernel/mm/lru_gen/enabled'\n", "created_at": "2025-03-10", "closed_at": null, "labels": [">bug", ":Performance", "Team:Performance", ":Search Relevance/Vectors", "priority:high", "Team:Search Relevance"], "State": "open", "Author": "gbanasiak"}
{"issue_number": 124497, "issue_title": "[CI] MixedClusterDownsampleRestIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19773 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #61065 / 8.19.0_bwc-snapshots\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 2 failures in class org.elasticsearch.xpack.downsample.MixedClusterDownsampleRestIT (0.3% fail rate in 663 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-10", "closed_at": "2025-03-11", "labels": [">test-failure", ":StorageEngine/Downsampling", "low-risk", "Team:StorageEngine"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124496, "issue_title": "[CI] FieldExtractorIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19773 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #61461 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #61461 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #61457 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #61065 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #60850 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #60850 / 9.0.0_bwc-snapshots\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 7 failures in class org.elasticsearch.xpack.esql.qa.mixed.FieldExtractorIT (0.8% fail rate in 895 executions)\n[main] 4 failures in step 9.0.0_bwc-snapshots (1.0% fail rate in 387 executions)\n[main] 3 failures in step 8.19.0_bwc-snapshots (0.8% fail rate in 385 executions)\n[main] 4 failures in pipeline elasticsearch-pull-request (1.3% fail rate in 304 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-10", "closed_at": "2025-03-10", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124490, "issue_title": "[CI] JwtWithOidcAuthIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7684 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7657 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7650 / almalinux-8-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7615 / almalinux-8-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7559 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #7538 / almalinux-8-aarch64_checkpart2_platform-support-arm\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 6 failures in class org.elasticsearch.xpack.security.authc.jwt.JwtWithOidcAuthIT (1.2% fail rate in 519 executions)\n[9.0] 3 failures in step almalinux-8-aarch64_checkpart2_platform-support-arm (16.7% fail rate in 18 executions)\n[9.0] 3 failures in step ubuntu-2004-aarch64_checkpart2_platform-support-arm (15.0% fail rate in 20 executions)\n[9.0] 6 failures in pipeline elasticsearch-periodic-platform-support (27.3% fail rate in 22 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-10", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124466, "issue_title": "VerifyError while booting Elasticsearch with JDK24 and APM enabled", "issue_body": "The SNAPSHOT images for 8.18, 8.19 and 9.0 started to fail booting after we bumped the JDK version to 24.\nThis was happening when APM was enabled and configured to talk to an APM server via HTTPS (e.g. in our cloud deployments).\nFixed by #124304", "created_at": "2025-03-10", "closed_at": "2025-03-10", "labels": ["Team:Core/Infra", "v9.0.0", "v8.18.0", "v8.19.0", ":Core/Infra/Entitlements"], "State": "closed", "Author": "ldematte"}
{"issue_number": 124457, "issue_title": "[CI] DiscoveryEc2KeystoreSessionCredentialsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6923 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #6905 / ubuntu-1804_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 2 failures in class org.elasticsearch.discovery.ec2.DiscoveryEc2KeystoreSessionCredentialsIT (1.7% fail rate in 117 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-10", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124454, "issue_title": "[CI] SmokeTestIngestDisabledClientYamlTestSuiteIT test {yaml=ingest_mustache/10_ingest_disabled/Test bulk api that contains a single index call with pipeline id fails when node.ingest is set to false} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6901 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6830 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":qa:smoke-test-ingest-disabled:yamlRestTest\" --tests \"org.elasticsearch.smoketest.SmokeTestIngestDisabledClientYamlTestSuiteIT\" -Dtests.method=\"test {yaml=ingest_mustache/10_ingest_disabled/Test bulk api that contains a single index call with pipeline id fails when node.ingest is set to false}\" -Dtests.seed=4646EF21FEF15A55 -Dtests.locale=ps-Arab-AF -Dtests.timezone=Asia/Baghdad -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [GET], host [http://127.0.0.1:40791], URI [_cluster/health?wait_for_events=languid], status line [HTTP/1.1 408 Request Timeout]\n{\"cluster_name\":\"yamlRestTest\",\"status\":\"green\",\"timed_out\":true,\"number_of_nodes\":1,\"number_of_data_nodes\":1,\"active_primary_shards\":0,\"active_shards\":0,\"relocating_shards\":0,\"initializing_shards\":0,\"unassigned_shards\":0,\"unassigned_primary_shards\":0,\"delayed_unassigned_shards\":0,\"number_of_pending_tasks\":157,\"number_of_in_flight_fetch\":0,\"task_max_waiting_in_queue_millis\":34067,\"active_shards_percent_as_number\":100.0}\n\nIssue Reasons:\n\n[main] 2 failures in test test {yaml=ingest_mustache/10_ingest_disabled/Test bulk api that contains a single index call with pipeline id fails when node.ingest is set to false} (0.4% fail rate in 454 executions)\n[main] 2 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (20.0% fail rate in 10 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-09", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124449, "issue_title": "[CI] InferenceCrudIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6892 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #6892 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.xpack.inference.InferenceCrudIT (1.6% fail rate in 122 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-09", "closed_at": "2025-03-13", "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124448, "issue_title": "[CI] EntitlementsAllowedNonModularIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6894 / ubuntu-2404_platform-support-unix\nelasticsearch-pull-request #61470 / part-1-entitlements\nelasticsearch-pull-request #61470 / part-1\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 failures in class org.elasticsearch.entitlement.qa.EntitlementsAllowedNonModularIT (2.5% fail rate in 122 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-09", "closed_at": "2025-03-09", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124447, "issue_title": "[CI] IndexStatsIT testFilterCacheStats failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6887 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-pull-request #60929 / part-1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.indices.stats.IndexStatsIT.testFilterCacheStats\" -Dtests.seed=6D428E2B759773A9 -Dtests.locale=lkt-Latn-US -Dtests.timezone=America/Mexico_City -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <1L>\n     but: was <-1L>\n\nIssue Reasons:\n\n[main] 2 failures in test testFilterCacheStats (0.4% fail rate in 506 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-09", "closed_at": null, "labels": [">test-failure", ":Distributed Indexing/Distributed", "low-risk", "Team:Distributed Indexing"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124440, "issue_title": "[CI] ClassificationIT testStopAndRestart failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6876 / openjdk17_checkpart4_java-fips-matrix\nelasticsearch-periodic #6834 / openjdk17_checkpart4_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:native-multi-node-tests:javaRestTest\" --tests \"org.elasticsearch.xpack.ml.integration.ClassificationIT.testStopAndRestart\" -Dtests.seed=E0A6B536E3E3AED2 -Dtests.locale=bo-CN -Dtests.timezone=Asia/Tehran -Druntime.java=17 -Dtests.fips.enabled=true\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Stats were: {\"id\":\"classification_stop_and_restart\",\"state\":\"started\",\"progress\":[{\"phase\":\"reindexing\",\"progress_percent\":100},{\"phase\":\"loading_data\",\"progress_percent\":100},{\"phase\":\"feature_selection\",\"progress_percent\":100},{\"phase\":\"coarse_parameter_search\",\"progress_percent\":100},{\"phase\":\"fine_tuning_parameters\",\"progress_percent\":100},{\"phase\":\"final_training\",\"progress_percent\":100},{\"phase\":\"writing_results\",\"progress_percent\":100},{\"phase\":\"inference\",\"progress_percent\":0}],\"data_counts\":{\"training_docs_count\":350,\"test_docs_count\":0,\"skipped_docs_count\":0},\"memory_usage\":{\"timestamp\":1741499543362,\"peak_usage_bytes\":75948,\"status\":\"ok\"},\"analysis_stats\":{\"classification_stats\":{\"timestamp\":1741499543362,\"iteration\":18,\"hyperparameters\":{\"class_assignment_objective\":\"maximize_minimum_recall\",\"alpha\":2.151715174504274,\"downsample_factor\":0.26208524553128787,\"eta\":0.8325084985174382,\"eta_growth_rate_per_tree\":1.4663259254105783,\"feature_bag_fraction\"\n[truncated]\n\nIssue Reasons:\n\n[8.17] 2 failures in test testStopAndRestart (1.0% fail rate in 192 executions)\n[8.17] 2 failures in pipeline elasticsearch-periodic (28.6% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-09", "closed_at": "2025-04-07", "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124439, "issue_title": "[CI] TimeSeriesLifecycleActionsIT testHistoryIsWrittenWithSuccess failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6875 / rhel-7_platform-support-unix\nelasticsearch-periodic-platform-support #6875 / almalinux-8_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:qa:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.ilm.TimeSeriesLifecycleActionsIT.testHistoryIsWrittenWithSuccess\" -Dtests.seed=F8B8F9B5E5364D69 -Dtests.locale=pt-TL -Dtests.timezone=America/Kralendijk -Druntime.java=23\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [GET], host [http://[::1]:37085], URI [.ds-ilm-history-7-2025.03.09-000001/_lifecycle/explain], status line [HTTP/1.1 404 Not Found]\n{\"error\":{\"root_cause\":[{\"type\":\"index_not_found_exception\",\"reason\":\"no such index [.ds-ilm-history-7-2025.03.09-000001]\",\"index_uuid\":\"_na_\",\"resource.type\":\"index_or_alias\",\"resource.id\":\".ds-ilm-history-7-2025.03.09-000001\",\"index\":\".ds-ilm-history-7-2025.03.09-000001\"}],\"type\":\"index_not_found_exception\",\"reason\":\"no such index [.ds-ilm-history-7-2025.03.09-000001]\",\"index_uuid\":\"_na_\",\"resource.type\":\"index_or_alias\",\"resource.id\":\".ds-ilm-history-7-2025.03.09-000001\",\"index\":\".ds-ilm-history-7-2025.03.09-000001\"},\"status\":404}\n\nIssue Reasons:\n\n[8.16] 2 consecutive failures in test testHistoryIsWrittenWithSuccess\n[8.16] 2 failures in test testHistoryIsWrittenWithSuccess (2.1% fail rate in 94 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-09", "closed_at": "2025-03-10", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124438, "issue_title": "[CI] SecureHdfsRepositoryAnalysisRestIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6964 / ubuntu-2204_platform-support-unix\nelasticsearch-periodic #6871 / concurrent-search-tests\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.repositories.blobstore.testkit.analyze.SecureHdfsRepositoryAnalysisRestIT (0.5% fail rate in 429 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-08", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124437, "issue_title": "[CI] FileAccessTreeTests testDuplicateExclusivePaths failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6941 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6941 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6930 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6930 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6923 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6923 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":libs:entitlement:test\" --tests \"org.elasticsearch.entitlement.runtime.policy.FileAccessTreeTests.testDuplicateExclusivePaths\" -Dtests.seed=EAC1BAB1F950AEBE -Dtests.locale=ce-Cyrl-RU -Dtests.timezone=Asia/Almaty -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: \"Path [/a/b] is already exclusive to [component1][module1], cannot add exclusive access for [component2][module1]\"\n     but: was \"Path [C:\\\\a\\\\b] is already exclusive to [component1][module1], cannot add exclusive access for [component2][module1]\"\n\nIssue Reasons:\n\n[8.18] 3 consecutive failures in step windows-2019_checkpart1_platform-support-windows\n[8.18] 3 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[8.18] 6 failures in test testDuplicateExclusivePaths (4.3% fail rate in 138 executions)\n[8.18] 3 failures in step windows-2019_checkpart1_platform-support-windows (75.0% fail rate in 4 executions)\n[8.18] 3 failures in step windows-2022_checkpart1_platform-support-windows (75.0% fail rate in 4 executions)\n[8.18] 3 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-08", "closed_at": "2025-03-10", "labels": [">test-failure", "Team:Core/Infra", "low-risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124422, "issue_title": "[CI] HdfsRepositoryAnalysisRestIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6887 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #6873 / almalinux-9_platform-support-unix\nelasticsearch-periodic #6810 / single-processor-node-tests\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 failures in class org.elasticsearch.repositories.blobstore.testkit.analyze.HdfsRepositoryAnalysisRestIT (0.6% fail rate in 540 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (18.2% fail rate in 11 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-08", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124421, "issue_title": "[CI] InferencePermissionsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6942 / ubuntu-2404-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #6917 / rhel-7_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.xpack.inference.InferencePermissionsIT (1.5% fail rate in 135 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-08", "closed_at": "2025-03-13", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124420, "issue_title": "[CI] PolicyManagerTests testFilesEntitlementsWithExclusive failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6985 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6978 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6970 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6970 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6965 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6951 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6943 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6932 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6925 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-pull-request #61684 / part-1\n\nReproduction Line:\ngradlew \":libs:entitlement:test\" --tests \"org.elasticsearch.entitlement.runtime.policy.PolicyManagerTests.testFilesEntitlementsWithExclusive\" -Dtests.seed=D4500143087F811E -Dtests.locale=nb-SJ -Dtests.timezone=Asia/Macau -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: (a string containing \"Path [/base/test] is already exclusive\" and a string containing \"[plugin1][test.module1]\" and a string containing \"[plugin2][test.module2]\" and a string containing \"cannot add exclusive access\")\n     but: a string containing \"Path [/base/test] is already exclusive\" was \"Path [C:\\base\\test] is already exclusive to [plugin1][test.module1], cannot add exclusive access for [plugin2][test.module2]\"\n\nIssue Reasons:\n\n[9.0] 9 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[9.0] 12 failures in test testFilesEntitlementsWithExclusive (2.5% fail rate in 482 executions)\n[9.0] 9 failures in step windows-2022_checkpart1_platform-support-windows (56.3% fail rate in 16 executions)\n[9.0] 3 failures in step part-1 (5.4% fail rate in 56 executions)\n[9.0] 8 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 16 executions)\n[9.0] 3 failures in pipeline elasticsearch-pull-request (5.5% fail rate in 55 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-08", "closed_at": null, "labels": [">test-failure", "Team:Core/Infra", "low-risk", ":Core/Infra/Entitlements"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124405, "issue_title": "ES|QL - Completion command", "issue_body": "Tracked in #123043\nThe completion command will be used to execute a completion through an LLM using ES}QL.\nCommand grammar\n| COMPLETION <prompt> WITH <inferenceId> (AS <targetField>)\n\nwhere\n\n\n\nparam\nrequired\ndescription\n\n\n\n\nprompt\nrequired\nProvides the prompt to be executed for the row.The prompt can be built from a mix a constant and field values.\n\n\ninferenceId\nrequired\nEndpoint used to do the completion(can be optional when we will have a default LLM in EIS).\n\n\ntargetField\noptionaldefault: completion\nName of the result column.\n\n\n\nUsage example:\nRow by row\nFROM search-movies\n| WHERE match(plot, \"Gandalf the grey\")\n| EVAL prompt= CONCAT(\n      \"Extract movie genre:\\n\",\n       \"<title>\", title, \"</title>\",\n       \"<actors>\", MV_CONCAT(actors, \",\"), \"</actors\">,\n       \"<plot>\", plot, \"</plot\"\n    )\n| COMPLETION prompt WITH \"openai-completion\" AS genre\n| DROP prompt\n\nAggregated rows:\nFROM business-news\n| WHERE industry:technology AND date:today\n| EVAL company_data = CONCAT(\n        \"<title>\", title, \"</title>\",\n        \"<summary>\", summary, \"</summary\">\n        \"<article>\", title, \"</article\"\n    )\n| STATS company_data = VALUES(company_data) BY company\n| EVAL prompt=CONCAT(\n        Summarize important news for the copmany\\n\",\n        \"<company>\", company, \"</company>\\n\",\n        MV_CONCAT(company_data, \"\\n\")\n    )\n| COMPLETION prompt WITH \"openai-completion\" AS company_news\n\nDevelopment\n\n Grammar and logical plan (#126319)\n Logical plan analysis (#126677)\n Logical plan optimization (#126763)\n Physical plan and mapping ((#126766)\n CompletionOperator (based on an aync operator)\n End to end tests\n Add telemetry\n Doc\n Tech preview (available in non-snapshot builds)\n", "created_at": "2025-03-08", "closed_at": null, "labels": [">feature", "Meta", "ES|QL-ui", ":SearchOrg/Relevance", "priority:normal", "Team:Search Relevance", "v9.0.0"], "State": "open", "Author": "afoucret"}
{"issue_number": 124398, "issue_title": "[CI] FullClusterRestartArchivedSettingsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6858 / 8.2.3_bwc\nelasticsearch-pull-request #61211 / 8.18.0_bwc-snapshots\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 2 failures in class org.elasticsearch.upgrades.FullClusterRestartArchivedSettingsIT (0.9% fail rate in 221 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-08", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124397, "issue_title": "[CI] RepositoryS3RestReloadCredentialsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6863 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #6719 / rhel-8_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 2 failures in class org.elasticsearch.repositories.s3.RepositoryS3RestReloadCredentialsIT (0.3% fail rate in 688 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic-platform-support (10.5% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-08", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124395, "issue_title": "ESQL: planning perf improvements over many fields", "issue_body": "Description\nWe've noticed that planning shows up in the profiler when dealing with huge mappings (10k-100k+ fields).\nOverall the goal is to add conditional and prevent code for execution on such large number of objects by avoid iteration in the first place.\nThis meta issue contains a list of (potential) improvements to apply to improve performance in this scenario broken down in two main buckets:\nAvoiding execution\n\n\n rules working on expressions should perform basic assertion to check whether the logic has to be applied or not, such as checking the size of the collection or attributes.\n\n\n avoid creating new AttributeMap/Set by making the collection immutable again so it can be safely passed around\n(wrap the add/removeIf/delete methods through an utility class so they can be passed only for newly created\nobjects).\n#125938\n\n\n avoid collection copying unless needed\nNode#transformChildren and QueryPlan#doTransformExpression create a new Array based on the size of\nthe children all the time. This should be done lazy and potentially different (clone()).\n#124424\n\n\n double check array sorting - Analyzer#278/279\n#125417\n\n\n ProjectAwayColumns always creates an output set clone - 44/83/84\n#126610\n\n\nOptimized execution of existing code\n\n\n LogicalVerifier#verify\n\n\n PruneColumns\n\n\n PropagateUnmappedFields\n\n\n PropagateEvalFoldables\n\n\n  stop using super inside TypedAttribute/NamedExpression/Attribute/FieldAttribute equals\n\n\nCurrently the equals method delegate to their parent which helps with code but also causes suboptimal equality since the children of the node are compared before the attributes. Better to compare all the node properties first and delegate to the collection as a last result.\n\n\n use collection hashing before performing attributes equality\nto avoid comparing large collections, use a hash comparison first before iterating over the collection\n\n\n optimize Node#forEachProperty\nprop != children && children.contains(prop) == false && typeToken.isInstance(prop) -->\nprop != children && typeToken.isInstance(prop) && children.contains(prop) == false\n#124424\n\n\n look in removing/replacing children.contains(prop) inside Node#forEachProperty\nA (linkedhashSet) set would work better and preserve order however it would prevent a child to appear more than once. This can be an issue in projection with duplicate fields (keep a,a,a).\n\n\n optimize NameId#hashCode to avoid array boxing (use Long.hashCode(id) instead) #124424\n\n\n  replace Java stream api with regular for-loop\n\n\nThough brief, stream(), collect(), reduce() & co are slower than their equivalent foreach and pollute the stack trace. They have an edge in parallel processing which, depending on the data size, could yield better results however that's not the case here.", "created_at": "2025-03-08", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "costin"}
{"issue_number": 124393, "issue_title": "[CI] JdbcCatalogIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6892 / ubuntu-2004-aarch64_checkpart4_platform-support-arm\nelasticsearch-periodic-platform-support #6857 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #6755 / opensuse-leap-15_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 3 failures in class org.elasticsearch.xpack.sql.qa.multi_cluster_with_security.JdbcCatalogIT (0.4% fail rate in 753 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (16.7% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124391, "issue_title": "ES|QL queries should honor cancel requests even while there are aggregators or other tasks pending", "issue_body": "Elasticsearch Version\n8.17.1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nn/a\nProblem Description\nDuring an investigation into 100% cpu usage on frozen nodes because of a long running ES|QL query we discovered that we couldn't cancel this query as it was waiting for an aggregator to complete it's process.\nAny particular subtask to the query shouldn't stop it from being cancelled.\nSteps to Reproduce\nThis is hard to reproduce, but we saw it manifest in a large cluster (116 data nodes) where there was an ES|QL query that spanned across slow data (like searchable snapshots) on a month's worth of network firewall data and made use of the VALUES aggregation. The query was running for about 5 hours with many spanned compute tasks and the only way to cancel it was to restart the nodes running it.\nLogs (if relevant)\nNo response", "created_at": "2025-03-07", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "TheRiffRafi"}
{"issue_number": 124390, "issue_title": "`exceeds the [index.highlight.max_analyzed_offset] limit` errors don't show the correct document `_id`", "issue_body": "Elasticsearch Version\n8.17.3\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nECH\nProblem Description\nExceptions related to exceeding the defined index.highlight.max_analyzed_offset on an index don't return the correct document _id, which makes it difficult to find the offending document. For example:\n\"failures\": [\n  {\n    \"shard\": 0,\n    \"index\": \"someindex\",\n    \"node\": \"zGYM2bHHSBuXWUzTNXqliQ\",\n    \"reason\": {\n      \"type\": \"illegal_argument_exception\",\n      \"reason\": \"The length [12] of field [field] in doc[0]/index[someindex] exceeds the [index.highlight.max_analyzed_offset] limit [1]. To avoid this error, set the query parameter [max_analyzed_offset] to a value less than index setting [1] and this will tolerate long field values by truncating them.\"\n    }\n  }\n]\nThe offending document has an _id of 12345 but the error may lead one to think the _id is 0.\nSteps to Reproduce\nDELETE someindex\n\nPUT someindex\n{\n  \"settings\": {\n    \"index.highlight.max_analyzed_offset\": 1\n  }\n}\n\nPUT someindex/_doc/12345\n{\n    \"field\" : \"Hello World!\"\n}\n\nGET /_search\n{\n  \"query\": {\n    \"match\": { \"field\": \"hello\" }\n  },\n  \"highlight\": {\n    \"fields\": {\n      \"field\": {}\n    }\n  }\n}\nLogs (if relevant)\nNo response", "created_at": "2025-03-07", "closed_at": null, "labels": [">bug", ":Search Relevance/Highlighting", "priority:normal", "Team:Search Relevance"], "State": "open", "Author": "n0othing"}
{"issue_number": 124389, "issue_title": "[CI] DiscoveryEc2AvailabilityZoneAttributeImdsV2IT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6859 / rocky-8_platform-support-unix\nelasticsearch-pull-request #60485 / part-1\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 2 failures in class org.elasticsearch.discovery.ec2.DiscoveryEc2AvailabilityZoneAttributeImdsV2IT (0.3% fail rate in 655 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": "2025-03-10", "labels": [">test-failure", ":Distributed Coordination/Discovery-Plugins", "needs:risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124388, "issue_title": "[CI] NodeEnvironmentTests testIndexCompatibilityChecks failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6852 / openjdk24_entitlements_true_checkpart1_java-matrix\nelasticsearch-pull-request #61424 / checkpart1_release-tests\nelasticsearch-pull-request #61213 / part-1\nelasticsearch-pull-request #61096 / part-1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.env.NodeEnvironmentTests.testIndexCompatibilityChecks\" -Dtests.seed=14F69652DC3A5F7C -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=eu -Dtests.timezone=Pacific/Johnston -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: (a string containing \"Cannot start this node\" and a string containing \"it holds metadata for indices with version [4.29.21]\" and a string containing \"Revert this node to version [8.19.0]\")\n     but: a string containing \"Revert this node to version [8.19.0]\" was \"Cannot start this node because it holds metadata for indices with version [4.29.21] with which this node of version [9.1.0] is incompatible. Revert this node to version [9.0.51] and delete any indices with versions earlier than [8.0.0] before upgrading to version [9.1.0]. If all such indices have already been deleted, revert this node to version [9.0.51] and wait for it to join the cluster to clean up any older indices from its metadata.\"\n\nIssue Reasons:\n\n[main] 4 failures in test testIndexCompatibilityChecks (1.6% fail rate in 244 executions)\n[main] 2 failures in step part-1 (1.7% fail rate in 118 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (2.6% fail rate in 116 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124385, "issue_title": "[CI] SemanticInferenceMetadataFieldsRecoveryTests testSnapshotRecovery {p0=false p1=false} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6878 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #6878 / oraclelinux-7_platform-support-unix\nelasticsearch-periodic #6871 / openjdk17_checkpart2_java-matrix\nelasticsearch-periodic #6871 / openjdk17_checkpart2_java-fips-matrix\nelasticsearch-periodic #6871 / openjdk21_checkpart2_java-matrix\nelasticsearch-periodic-platform-support #6878 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-pull-request #61498 / part-2\nelasticsearch-pull-request #61486 / part-2-windows\nelasticsearch-pull-request #61478 / part-2\nelasticsearch-periodic #6864 / concurrent-search-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.mapper.SemanticInferenceMetadataFieldsRecoveryTests.testSnapshotRecovery {p0=false p1=true}\" -Dtests.seed=B9603DA6C4BC43CD -Dtests.locale=kln-KE -Dtests.timezone=Etc/GMT+5 -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Error when comparing xContent.\n             _inference_fields: \n                      semantic_1: \n                         inference: \n                              chunks: \n                            semantic_1: \n                                       0: \n                                embeddings: \n                                           0: expected Double [0.061877843] but was Double [0.061877847]\n                                           1: same [0.39140058]\n                                           2: same [0.862135]\n                                           3: same [0.20376408]\n                                           4: same [0.26110643]\n                                           5: same [0.41861713]\n                                           6: same [0.26080924]\n                                           7: same [0.019912839]\n                                           8: same [0.9802829]\n                                           9: expected \n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in test testSnapshotRecovery {p0=false p1=false}\n[8.x] 2 consecutive failures in step rhel-9_platform-support-unix\n[8.x] 2 consecutive failures in step rocky-9_platform-support-unix\n[8.x] 18 failures in test testSnapshotRecovery {p0=false p1=false} (13.3% fail rate in 135 executions)\n[8.x] 2 failures in step rhel-9_platform-support-unix (50.0% fail rate in 4 executions)\n[8.x] 2 failures in step part-2 (14.3% fail rate in 14 executions)\n[8.x] 2 failures in step rocky-9_platform-support-unix (66.7% fail rate in 3 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 4 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic (75.0% fail rate in 4 executions)\n[8.x] 3 failures in pipeline elasticsearch-pull-request (25.0% fail rate in 12 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": "2025-04-15", "labels": [">test-failure", "low-risk", ":SearchOrg/Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124384, "issue_title": "[CI] SemanticInferenceMetadataFieldsRecoveryTests testSnapshotRecovery {p0=true p1=false} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6878 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #6878 / oraclelinux-7_platform-support-unix\nelasticsearch-intake #19724 / part2\nelasticsearch-periodic #6871 / openjdk17_checkpart2_java-matrix\nelasticsearch-periodic #6871 / openjdk17_checkpart2_java-fips-matrix\nelasticsearch-periodic #6871 / openjdk21_checkpart2_java-matrix\nelasticsearch-periodic-platform-support #6878 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-pull-request #61498 / part-2\nelasticsearch-pull-request #61486 / part-2-windows\nelasticsearch-pull-request #61478 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.mapper.SemanticInferenceMetadataFieldsRecoveryTests.testSnapshotRecovery {p0=false p1=true}\" -Dtests.seed=B9603DA6C4BC43CD -Dtests.locale=kln-KE -Dtests.timezone=Etc/GMT+5 -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Error when comparing xContent.\n             _inference_fields: \n                      semantic_1: \n                         inference: \n                              chunks: \n                            semantic_1: \n                                       0: \n                                embeddings: \n                                           0: expected Double [0.061877843] but was Double [0.061877847]\n                                           1: same [0.39140058]\n                                           2: same [0.862135]\n                                           3: same [0.20376408]\n                                           4: same [0.26110643]\n                                           5: same [0.41861713]\n                                           6: same [0.26080924]\n                                           7: same [0.019912839]\n                                           8: same [0.9802829]\n                                           9: expected \n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in test testSnapshotRecovery {p0=true p1=false}\n[8.x] 2 consecutive failures in step rhel-9_platform-support-unix\n[8.x] 2 consecutive failures in step rocky-9_platform-support-unix\n[8.x] 19 failures in test testSnapshotRecovery {p0=true p1=false} (14.0% fail rate in 136 executions)\n[8.x] 2 failures in step rhel-9_platform-support-unix (50.0% fail rate in 4 executions)\n[8.x] 2 failures in step part-2 (14.3% fail rate in 14 executions)\n[8.x] 2 failures in step rocky-9_platform-support-unix (66.7% fail rate in 3 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 4 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic (75.0% fail rate in 4 executions)\n[8.x] 3 failures in pipeline elasticsearch-pull-request (25.0% fail rate in 12 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": "2025-04-15", "labels": [">test-failure", "low-risk", ":SearchOrg/Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124383, "issue_title": "[CI] SemanticInferenceMetadataFieldsRecoveryTests testSnapshotRecovery {p0=false p1=true} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6878 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #6878 / oraclelinux-7_platform-support-unix\nelasticsearch-periodic #6871 / openjdk17_checkpart2_java-matrix\nelasticsearch-periodic #6871 / openjdk17_checkpart2_java-fips-matrix\nelasticsearch-periodic #6871 / openjdk21_checkpart2_java-matrix\nelasticsearch-periodic-platform-support #6878 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-pull-request #61498 / part-2\nelasticsearch-pull-request #61486 / part-2-windows\nelasticsearch-pull-request #61478 / part-2\nelasticsearch-periodic #6864 / concurrent-search-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.mapper.SemanticInferenceMetadataFieldsRecoveryTests.testSnapshotRecovery {p0=false p1=true}\" -Dtests.seed=B9603DA6C4BC43CD -Dtests.locale=kln-KE -Dtests.timezone=Etc/GMT+5 -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Error when comparing xContent.\n             _inference_fields: \n                      semantic_1: \n                         inference: \n                              chunks: \n                            semantic_1: \n                                       0: \n                                embeddings: \n                                           0: expected Double [0.061877843] but was Double [0.061877847]\n                                           1: same [0.39140058]\n                                           2: same [0.862135]\n                                           3: same [0.20376408]\n                                           4: same [0.26110643]\n                                           5: same [0.41861713]\n                                           6: same [0.26080924]\n                                           7: same [0.019912839]\n                                           8: same [0.9802829]\n                                           9: expected \n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in test testSnapshotRecovery {p0=false p1=true}\n[8.x] 2 consecutive failures in step rhel-9_platform-support-unix\n[8.x] 2 consecutive failures in step rocky-9_platform-support-unix\n[8.x] 18 failures in test testSnapshotRecovery {p0=false p1=true} (13.3% fail rate in 135 executions)\n[8.x] 2 failures in step rhel-9_platform-support-unix (50.0% fail rate in 4 executions)\n[8.x] 2 failures in step part-2 (14.3% fail rate in 14 executions)\n[8.x] 2 failures in step rocky-9_platform-support-unix (66.7% fail rate in 3 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 4 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic (75.0% fail rate in 4 executions)\n[8.x] 3 failures in pipeline elasticsearch-pull-request (25.0% fail rate in 12 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": "2025-04-15", "labels": [">test-failure", "low-risk", ":SearchOrg/Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124369, "issue_title": "Enable native synthetic source for keyword fields with normalizers", "issue_body": "Currently normalizer being present on a keyword field leads to the field using fallback synthetic source and therefore to a significant increase in storage space usage. The reason for that is that normalizer changes the original value of the field and resulting synthetic source will be normalizer as well. As a result it is not possible to perform a reindex using a different normalizer (it will double/triple/etc normalize).\nThat being said the conclusion in the team is that the price paid in storage is significant and may not always justify the potential problem. For some customers it can be completely acceptable to have normalized synthetic source and they are currently blocked.\nSee elastic/sdh-elasticsearch#8807.", "created_at": "2025-03-07", "closed_at": null, "labels": [">enhancement", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "open", "Author": "lkts"}
{"issue_number": 124341, "issue_title": "[CI] ClassificationHousePricingIT testFeatureImportanceValues failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21913 / part4\nelasticsearch-pull-request #67718 / part-4\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:native-multi-node-tests:javaRestTest\" --tests \"org.elasticsearch.xpack.ml.integration.ClassificationHousePricingIT.testFeatureImportanceValues\" -Dtests.seed=103CFC095CB4F9DF -Dtests.locale=en-CM -Dtests.timezone=Europe/Vaduz -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: is <true>\n     but: was <false>\n\nIssue Reasons:\n\n[main] 2 failures in test testFeatureImportanceValues (0.5% fail rate in 433 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124338, "issue_title": "[CI] FeatureUpgradeApiIT testCreatingSystemIndex failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7035 / ubuntu-2404-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6967 / ubuntu-2404-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":qa:system-indices:javaRestTest\" --tests \"org.elasticsearch.system.indices.FeatureUpgradeApiIT.testCreatingSystemIndex\" -Dtests.seed=CF1E04AD8C11B7F9 -Dtests.locale=frr-DE -Dtests.timezone=Canada/Newfoundland -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:33029], URI [/_features/_reset], status line [HTTP/1.1 429 Too Many Requests]\n{\"error\":{\"root_cause\":[{\"type\":\"process_cluster_event_timeout_exception\",\"reason\":\"failed to process cluster event (ml-set-reset-mode) within 30s\",\"suppressed\":[{\"type\":\"process_cluster_event_timeout_exception\",\"reason\":\"failed to process cluster event (transform-set-reset-mode) within 30s\"}]}],\"type\":\"process_cluster_event_timeout_exception\",\"reason\":\"failed to process cluster event (ml-set-reset-mode) within 30s\",\"suppressed\":[{\"type\":\"process_cluster_event_timeout_exception\",\"reason\":\"failed to process cluster event (transform-set-reset-mode) within 30s\"}]},\"status\":429}\n\nIssue Reasons:\n\n[main] 2 failures in test testCreatingSystemIndex (0.4% fail rate in 560 executions)\n[main] 2 failures in step ubuntu-2404-aarch64_checkpart1_platform-support-arm (20.0% fail rate in 10 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124337, "issue_title": "ES|QL Rerank Command", "issue_body": "Tracked in #123043\nThe RERANK command will be used to reorder the the result from a first pass query using a semantic reranker.\nUsage example:\nFROM movies METADATA _score\n  | WHERE QSTR(\"star wars\")\n  | RERANK \"star wars\" ON title, overview=SUBSTRING(overview, 0, 100), actors WITH rerankerInferenceId\n\nDevelopment\nDone:\n\n Initial PR - Introducing the rerank command\n Add implicit SORT / LIMIT after the RERANK command\n Licensing: no need since the licensing is enforced by the model upload\n CI fixes (#126320, #126322)\n\nWIP:\nFollow-ups tasks\n\n\n #126603\n\n\n Scoring behavior\n\n Fulltext functions after a rerank\n Should we add the score automatically (#123074 (comment))?\n\n\n\n Add implicit LIMIT before the RERANK command\n\n\n Check if we need to move inference id resolution elsewhere (premaper) convo\n\n\n Rerank fields should be optional (use all fields from previous step if not provided\n\n\nTech debt\n\n Use the ModelRegistry service for inference resolution\n Can we parallelized inference and index resolution (see comment #123074 (review))\n Can we avoid copying the fuill page to build the inference request (#123074 (comment))?\n Check RerankOperatorTests.testSimpleCircuitBreaking (muted tests because flaky)\n Call the createRerankInferenceEndpoint as part of CSV tests dataset main. (#123074 (comment))\n", "created_at": "2025-03-07", "closed_at": null, "labels": [">feature", ">enhancement", "Meta", "ES|QL-ui", "priority:high", "Team:Search Relevance", ":Search Relevance/Search", "v9.1.0"], "State": "open", "Author": "afoucret"}
{"issue_number": 124330, "issue_title": "[CI] ValuesTests testGroupingAggregate {TestCase=<<no alt geo_shape>s>} failing", "issue_body": "Build Scans:\n(9.0)\n\nelasticsearch-periodic-platform-support #6846 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #6786 / oraclelinux-9_platform-support-unix\n\n(main)\n\nelasticsearch-intake #19857 / part3\nelasticsearch-pull-request #61614 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.expression.function.aggregate.ValuesTests.testGroupingAggregate {TestCase=<<no alt geo_shape>s>}\" -Dtests.seed=94CED618DAEC14A8 -Dtests.locale=jgo-CM -Dtests.timezone=Pacific/Truk -Druntime.java=24\n\nApplicable branches:\nmain, 9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.OutOfMemoryError: Java heap space\n\nIssue Reasons:\n\n[9.0] 2 failures in test testGroupingAggregate {TestCase=<s>} (0.7% fail rate in 267 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (25.0% fail rate in 8 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": "2025-03-12", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124315, "issue_title": "[CI] MlWithSecurityIT test {yaml=ml/3rd_party_deployment/Test start and stop multiple deployments} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7318 / openjdk17_checkpart4_java-fips-matrix\nelasticsearch-periodic #7283 / openjdk17_checkpart4_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:ml-with-security:yamlRestTest\" --tests \"org.elasticsearch.smoketest.MlWithSecurityIT.test {yaml=ml/3rd_party_deployment/Test start and stop multiple deployments}\" -Dtests.seed=36C1F9B1BBB9F987 -Dtests.locale=shi-Tfng-MA -Dtests.timezone=Europe/Bucharest -Druntime.java=17 -Dtests.fips.enabled=true\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [ml/3rd_party_deployment:633]: expected [2xx] status code but api [ml.infer_trained_model] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"timeout [10s] waiting for inference result\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: timeout [10s] waiting for inference result\\n\\tat org.elasticsearch.ml@8.18.0-SNAPSHOT/org.elasticsearch.xpack.ml.inference.deployment.AbstractPyTorchAction.onTimeout(AbstractPyTorchAction.java:68)\\n\\tat org.elasticsearch.server@8.18.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:977)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)\\n\"}],\"type\":\"status_exception\",\"reason\":\"timeout [10s] waiting for infere\n[truncated]\n\nIssue Reasons:\n\n[8.18] 2 failures in test test {yaml=ml/3rd_party_deployment/Test start and stop multiple deployments} (1.5% fail rate in 137 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic (40.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124314, "issue_title": "ESQL: unexpected Unknown column [@timestamp] when using the metrics-only rate aggregation function", "issue_body": "Description\nfrom employees | sort rate(languages)\nresults in\n                \"reason\": \"Found 1 problem\\nline 1:23: Unknown column [@timestamp]\",\n                \"stack_trace\": \"org.elasticsearch.xpack.esql.VerificationException: Found 1 problem\nline 1:23: Unknown column [@timestamp]\nat org.elasticsearch.xpack.esql.analysis.Analyzer.verify(Analyzer.java:203)\nat org.elasticsearch.xpack.esql.analysis.Analyzer.analyze(Analyzer.java:197)\n\nSame goes for from employees | stats rate(languages). All these errors shouldn't have happened, instead an error like \"the rate aggregate[rate(languages)] can only be used within the metrics command\" should have been thrown.", "created_at": "2025-03-07", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "astefan"}
{"issue_number": 124311, "issue_title": "ESQL: Verifier failure to catch aggregation functions outside STATS command", "issue_body": "Description\nIn theory, the Verifier should prevent queries that use aggregation functions to be used outside an aggregation \"context\", meaning the stats command. For example, from employees | eval x = min(languages) returns a 400 error message\nline 1:27: aggregate function [min(languages)] not allowed outside STATS command\n\nWhile from employees | where min(languages) > 2 returns a 500 error:\npath: /_query, params: {format=txt, error_trace=true}, status: 500 org.elasticsearch.xpack.esql.core.QlIllegalArgumentException: Unsupported expression [min(languages)]\n        at org.elasticsearch.xpack.esql.evaluator.EvalMapper.toEvaluator(EvalMapper.java:96)\n        at org.elasticsearch.xpack.esql.evaluator.EvalMapper$1.apply(EvalMapper.java:77)\n        at org.elasticsearch.xpack.esql.expression.predicate.operator.comparison.EsqlBinaryComparison.toEvaluator(EsqlBinaryComparison.java:227)\n        at org.elasticsearch.xpack.esql.evaluator.EvalMapper.toEvaluator(EvalMapper.java:74)\n        at org.elasticsearch.xpack.esql.planner.LocalExecutionPlanner.planFilter(LocalExecutionPlanner.java:700)\n\nThe failure to map the where command shouldn't happen, instead the behavior should be caught early on by the Verifier, just like the first scenario.", "created_at": "2025-03-07", "closed_at": "2025-03-21", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "astefan"}
{"issue_number": 124291, "issue_title": "[CI] MetricsApmIT testApmIntegration failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6836 / almalinux-9_platform-support-unix\nelasticsearch-pull-request #59805 / part-1\nelasticsearch-pull-request #59780 / part-1\nelasticsearch-pull-request #59780 / part-1\n\nReproduction Line:\n./gradlew \":test:external-modules:test-apm-integration:javaRestTest\" --tests \"org.elasticsearch.test.apmintegration.MetricsApmIT.testApmIntegration\" -Dtests.seed=A7396AAA6A124AA8 -Dtests.locale=ru-KZ -Dtests.timezone=Etc/GMT+6 -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred orchestrating test cluster.\n\nIssue Reasons:\n\n[9.0] 4 failures in test testApmIntegration (0.7% fail rate in 590 executions)\n[9.0] 3 failures in step part-1 (4.2% fail rate in 72 executions)\n[9.0] 2 failures in pipeline elasticsearch-pull-request (2.8% fail rate in 72 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124289, "issue_title": "[CI] SmokeTestMultiNodeClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6834 / rhel-7_platform-support-unix\nelasticsearch-periodic #6772 / openjdk21_checkpart1_java-matrix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 2 failures in class org.elasticsearch.smoketest.SmokeTestMultiNodeClientYamlTestSuiteIT (0.5% fail rate in 368 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-07", "closed_at": null, "labels": [">test-failure", "Team:StorageEngine", ":StorageEngine/Logs", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124288, "issue_title": "OptimizerExpressionRule should be conditional", "issue_body": "It seems that rules extending from OptimizerExpressionRule iterate over all logical plans and their expressions, applying rules to them. The performance penalty is noticeable with many fields in the target indices. I think rules extending OptimizerExpressionRule should be conditional, only iterating over expressions of plans that can be transformed. For example, CombineDisjunctions should only iterate over expressions of Filter.", "created_at": "2025-03-07", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "dnhatn"}
{"issue_number": 124284, "issue_title": "LogsdbIndexModeSettingsProvider generates unnecesary warnings for system indices", "issue_body": "When generating MappingHints, LogsdbIndexModeSettingsProvider calls IndicesService#createIndexMapperServiceForValidation with a dummy indexMetadata that takes the real index name but does not replicate all the actual index settings. This can creae conflicting IndexMetadata for system indices with fast_refresh=true but isSystem=false which leads to exception being thrown in IndexSettings.\nAn sample stacktrace is as the follows:\n[2025-03-06T14:31:20,750][WARN ][o.e.x.l.LogsdbIndexModeSettingsProvider] [es01] unable to create mapper service for index [.security-profile-8] java.lang.IllegalArgumentException: index.fast_refresh is allowed only for system indices\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.index.IndexSettings.<init>(IndexSettings.java:1064)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.indices.IndicesService.createIndexMapperServiceForValidation(IndicesService.java:855)\n\tat org.elasticsearch.xpack.logsdb.LogsdbIndexModeSettingsProvider.getMappingHints(LogsdbIndexModeSettingsProvider.java:250)\n\tat org.elasticsearch.xpack.logsdb.LogsdbIndexModeSettingsProvider.getAdditionalIndexSettings(LogsdbIndexModeSettingsProvider.java:115)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.cluster.metadata.MetadataCreateIndexService.aggregateIndexSettings(MetadataCreateIndexService.java:1086)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.cluster.metadata.MetadataCreateIndexService.applyCreateIndexRequestForSystemIndex(MetadataCreateIndexService.java:785)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.cluster.metadata.MetadataCreateIndexService.applyCreateIndexRequest(MetadataCreateIndexService.java:434)\n...\n\nRelates: #118968", "created_at": "2025-03-07", "closed_at": "2025-03-11", "labels": ["Team:StorageEngine", ":StorageEngine/Logs"], "State": "closed", "Author": "ywangd"}
{"issue_number": 124279, "issue_title": "[CI] FileSettingsServiceIT testErrorSaved failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6829 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6742 / almalinux-8-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.reservedstate.service.FileSettingsServiceIT.testErrorSaved\" -Dtests.seed=7829BBA35F7FC4F7 -Dtests.locale=fy -Dtests.timezone=Australia/Hobart -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[9.0] 2 failures in test testErrorSaved (0.5% fail rate in 372 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (16.7% fail rate in 12 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-06", "closed_at": "2025-03-17", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "medium-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124272, "issue_title": "[ML] When creating an inference endpoint check existing semantic text fields for usage", "issue_body": "The force parameter to the Delete Inference API allows a caller to delete an inference endpoint even if it is used by a semantic text field.\nA user could force delete an inference endpoint used in semantic then create another one with the same id that uses a completely difference model or a different task type entirely. Search or ingest against that semantic text field would then be broken in a hard to debug way.\nTo prevent this scenario, when an inference endpoint is created check for any semantic text fields that use the same inference Id. If the vital settings are equivalent (task type, embedding type, number of dimensions etc) then allow the creation otherwise prevent it.", "created_at": "2025-03-06", "closed_at": null, "labels": [">bug", ":ml", "Team:ML"], "State": "open", "Author": "davidkyle"}
{"issue_number": 124260, "issue_title": "HNSW additional heuristics", "issue_body": "Description\nThe original paper for HNSW defined 2 different heuristics for adding a node to other neighbours:\n\nNaive heuristic (Alg 3): Get the most promising candidates for the nodes\nHeuristic (Alg 4) :  Select the closest candidates to the target, only if it's not closer to an already selected candidate than to the target.\n\nAs part of the heuristic, there are two optional steps that can be done:\n\nExtend candidates with their neighbors\nKeep the closest candidates discarded in the previous step\n\nThese optional steps are not part of the current HNSW Lucene implementation.\nWe could implement these heuristics and measure their effectiveness on different datasets, so we can:\n\nImprove recall (taking into account query latency and index time impact)\nUnderstand whether it makes sense to provide additional index options for hnsw\nDynamically select index options, taking into account the graph distribution to ensure a good recall / latency balance is achieved\nImprove HNSW data structure effectiveness for clustered data / vector distributions that don't perform well with the current implementation\n", "created_at": "2025-03-06", "closed_at": null, "labels": [">enhancement", ":Search Relevance/Vectors", "Team:Search Relevance"], "State": "open", "Author": "carlosdelest"}
{"issue_number": 124252, "issue_title": "Add user to task description", "issue_body": "Currently, we copy headers such as X-Opaque-Id, X-elastic-product-origin, etc., when creating a new task. In ES|QL, we would like to add the user to these headers so that we can identify which users are running heavy queries. However, we need to discuss the safety and feasibility before implementing the change.\n\nHow sensitive is it to add the user to the task headers?\nWe don't store the user directly in ThreadContext but rather the authentication token. Therefore, we need to deserialize when accessing the user, which can be expensive for every task/query.\nShould we add the user to all tasks or just ES|QL root task?\nAn alternative is Kibana adding users when sending queries, and in Elasticsearch, we just add a new header for the user and copy it like the existing headers.\n\nI might be missing something obvious here.", "created_at": "2025-03-06", "closed_at": null, "labels": [":Core/Infra/Core", ":Security/Security", "Team:Core/Infra", "Team:Analytics", "Team:Security", ":Analytics/ES|QL"], "State": "open", "Author": "dnhatn"}
{"issue_number": 124242, "issue_title": "[CI] CliLenientIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6931 / sles-15_platform-support-unix\nelasticsearch-pull-request #61537 / part-3\nelasticsearch-periodic-platform-support #6857 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 3 failures in class org.elasticsearch.xpack.sql.qa.multi_node.CliLenientIT (0.8% fail rate in 400 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (18.2% fail rate in 11 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-06", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124227, "issue_title": "[CI] FieldCapabilitiesIT testRelocation failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19533 / part1\nelasticsearch-intake #19148 / part1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.search.fieldcaps.FieldCapabilitiesIT.testRelocation\" -Dtests.seed=BAB28790226049BF -Dtests.locale=bas -Dtests.timezone=Africa/Kigali -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: safeGet: listener was not completed within the timeout\n\nIssue Reasons:\n\n[main] 2 failures in test testRelocation (0.2% fail rate in 915 executions)\n[main] 2 failures in step part1 (1.9% fail rate in 107 executions)\n[main] 2 failures in pipeline elasticsearch-intake (1.9% fail rate in 107 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-06", "closed_at": "2025-03-19", "labels": [">test-failure", "low-risk", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124206, "issue_title": "[DOCS] Explain that date index name processor cannot be used for creation of data streams", "issue_body": "In docs/reference/ingestion-tools/enrich-processor/date-index-name-processor.md we should explain that date index name processor cannot be used to produce a data stream at destination. For instance we cannot add this processor to custom ingest pipeline of specific integration, as data stream creating will fail.", "created_at": "2025-03-06", "closed_at": null, "labels": [">docs", "Team:Docs"], "State": "open", "Author": "R0ky"}
{"issue_number": 124191, "issue_title": "[DOCS] Update CCS compatibility matrix for 9.0 and 8.18", "issue_body": "\n Update the table now housed here: https://docs-v3-preview.elastic.dev/elastic/docs-content/tree/main/solutions/search/cross-cluster-search#ccs-supported-configurations\n\nReference\nCheck out the 8.0 table for reference: https://www.elastic.co/guide/en/elasticsearch/reference/8.0/modules-cross-cluster-search.html#ccs-supported-configurations", "created_at": "2025-03-06", "closed_at": "2025-03-25", "labels": [">docs", "Team:Docs"], "State": "closed", "Author": "leemthompo"}
{"issue_number": 124185, "issue_title": "[CI] InferenceGetServicesIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6963 / rhel-7_platform-support-unix\nelasticsearch-periodic-platform-support #6806 / almalinux-8_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 2 failures in class org.elasticsearch.xpack.inference.InferenceGetServicesIT (0.3% fail rate in 770 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic-platform-support (10.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-06", "closed_at": "2025-03-13", "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124184, "issue_title": "[CI] FeatureUpgradeApiIT testGetFeatureUpgradedStatuses failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7091 / ubuntu-2404-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7063 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":qa:system-indices:javaRestTest\" --tests \"org.elasticsearch.system.indices.FeatureUpgradeApiIT.testGetFeatureUpgradedStatuses\" -Dtests.seed=E3A0E408407085E6 -Dtests.locale=lt-LT -Dtests.timezone=Pacific/Yap -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://127.0.0.1:41459], URI [/_features/_reset], status line [HTTP/1.1 429 Too Many Requests]\n{\"error\":{\"root_cause\":[{\"type\":\"process_cluster_event_timeout_exception\",\"reason\":\"failed to process cluster event (transform-set-reset-mode) within 30s\",\"timed_out\":true,\"header\":{\"X-Timed-Out\":\"?1\"},\"suppressed\":[{\"type\":\"process_cluster_event_timeout_exception\",\"reason\":\"failed to process cluster event (ml-set-reset-mode) within 30s\",\"timed_out\":true,\"header\":{\"X-Timed-Out\":\"?1\"}}]}],\"type\":\"process_cluster_event_timeout_exception\",\"reason\":\"failed to process cluster event (transform-set-reset-mode) within 30s\",\"timed_out\":true,\"header\":{\"X-Timed-Out\":\"?1\"},\"suppressed\":[{\"type\":\"process_cluster_event_timeout_exception\",\"reason\":\"failed to process cluster event (ml-set-reset-mode) within 30s\",\"timed_out\":true,\"header\":{\"X-Timed-Out\":\"?1\"}}]},\"status\":429}\n\nIssue Reasons:\n\n[main] 2 failures in test testGetFeatureUpgradedStatuses (0.9% fail rate in 230 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (40.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-06", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124183, "issue_title": "`failed to delete snapshots` exception message is unboundedly long", "issue_body": "In a recent outage in which a cluster state grew too large to fit into a single transport message, we discovered that most of the space was being taken up by a LifecycleExecutionState#stepInfo of the following form:\n{\"type\":\"repository_exception\",\"reason\":\"[found-snapshots] failed to delete snapshots [...6500 snapshot names elided...]\",\"caused_by\":{\"type\":\"i_o_exception\",\"reason\":\"Exception when listing blobs by prefix [null]\",\"caused_by\":{\"type\":\"sdk_client_exception\",\"reason\":\"Unable to execute HTTP request: Read timed out\",\"caused_by\":{\"type\":\"socket_timeout_exception\",\"reason\":\"Read timed out\"}}}}\nThe [...6500 snapshot names elided...] is about 750kiB. And because this error affected around 6500 indices this message was duplicated that many times in the cluster state, which added up to a little over 4.6GiB.\nIMO there's no real value in listing all the snapshot names in this message. Should we truncate it?\nRelates #124181", "created_at": "2025-03-06", "closed_at": "2025-03-07", "labels": [">bug", ":Distributed Coordination/Snapshot/Restore", "team-discuss", "Team:Distributed Coordination"], "State": "closed", "Author": "DaveCTurner"}
{"issue_number": 124181, "issue_title": "ILM `LifecycleExecutionState#stepInfo` adds unbounded data to cluster state", "issue_body": "In a recent outage in which a cluster state grew too large to fit into a single transport message, we discovered that most of the space was being taken up by a LifecycleExecutionState#stepInfo of the following form:\n{\"type\":\"repository_exception\",\"reason\":\"[found-snapshots] failed to delete snapshots [...6500 snapshot names elided...]\",\"caused_by\":{\"type\":\"i_o_exception\",\"reason\":\"Exception when listing blobs by prefix [null]\",\"caused_by\":{\"type\":\"sdk_client_exception\",\"reason\":\"Unable to execute HTTP request: Read timed out\",\"caused_by\":{\"type\":\"socket_timeout_exception\",\"reason\":\"Read timed out\"}}}}\nThe [...6500 snapshot names elided...] is about 750kiB. And because this error affected around 6500 indices this message was duplicated that many times in the cluster state, which added up to a little over 4.6GiB.\nNote that this is different from the problem that #84266 fixes, it's not stack traces taking all the space, it's just the top-level exception message itself.\nIt's certainly useful to have information about ILM errors stored somewhere for future investigation, but could it be somewhere else? If it has to be in the cluster state, could we put a length limit on it just to protect against such a pathological case?\nRelates #124183", "created_at": "2025-03-06", "closed_at": "2025-03-18", "labels": [">bug", ":Data Management/ILM+SLM", "Team:Data Management"], "State": "closed", "Author": "DaveCTurner"}
{"issue_number": 124168, "issue_title": "[CI] MlWithSecurityIT test {yaml=ml/start_data_frame_analytics/Test start classification analysis when the dependent variable is missing} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6802 / ubuntu-2204_platform-support-unix\nelasticsearch-intake #19229 / part4\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:ml-with-security:yamlRestTest\" --tests \"org.elasticsearch.smoketest.MlWithSecurityIT.test {yaml=ml/start_data_frame_analytics/Test start classification analysis when the dependent variable is missing}\" -Dtests.seed=784C09CF6D582B06 -Dtests.locale=en-SG -Dtests.timezone=America/Indiana/Vevay -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [ml/start_data_frame_analytics:242]: the error message was expected to match the provided regex but didn't\nExpected: no mappings could be found for field \\[missing\\]\n     but: was \"{root_cause=[{type=no_shard_available_action_exception, reason=null, stack_trace=org.elasticsearch.action.NoShardAvailableActionException\\n}], type=exception, reason=all shards failed, caused_by={type=search_phase_execution_exception, reason=all shards failed, phase=query, grouped=true, failed_shards=[{shard=0, index=.ml-stats-000001, node=null, reason={type=no_shard_available_action_exception, reason=null, stack_trace=org.elasticsearch.action.NoShardAvailableActionException\\n}}], stack_trace=Failed to execute phase [query], all shards failed; shardFailures {[_na_][.ml-stats-000001][0]: org.elasticsearch.action.NoShardAvailableActionException\\n}\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractS\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {yaml=ml/start_data_frame_analytics/Test start classification analysis when the dependent variable is missing} (0.3% fail rate in 578 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-06", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124167, "issue_title": "Dot-prefixed, hidden index not excluded when expand_wildcards=open,closed", "issue_body": "Elasticsearch Version\n8.17.3\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nDocker containers, both x86_64 and arm64\nProblem Description\nI realize that with the ability for users to create dot-prefixed indices going away in 9.x, this is perhaps not a huge concern, but it is happening.\nThis only appears to happen if your search pattern starts with a dot and includes a wildcard after the period, e.g. .my_*. If the index settings have \"hidden\": true, the index should not be searchable unless expand_wildcards is set to all or includes hidden. But this is not the case. The index is searchable, even though it is set to be hidden.\nThe really weird part is that the index is hidden if you search for the index with a wildcard first.\nHidden: GET /*_index/_search\nSearchable: GET /*_index/_search&expand_wildcards=all\nShould be hidden, but is searchable: GET /.my_*/_search\nMore in the steps to reproduce section\nSteps to Reproduce\nCreate Hidden Indices\nSimilarly named, but one has a dot prefix.\nPUT my_index\n{\"settings\": {\"index\": {\"hidden\": true}}}\nPUT .my_index\n{\"settings\": {\"index\": {\"hidden\": true}}}\n\nSample GETs\nGet *_index without expand_wildcards\nGET _cat/indices/*_index?v&h=health,status,index\n\nThe response is empty:\nhealth status index\n\nGet *_index with expand_wildcards=all\nGET _cat/indices/*_index?v&h=health,status,index&expand_wildcards=all\n\nThe response is as expected:\nhealth status index\ngreen  open   my_index\ngreen  open   .my_index\n\nGet .my_* without expand_wildcards\nNote that with the . prefix, this should only match .my_index, but without expand_wildcards=all, it should not return anything:\nGET _cat/indices/.my_*?v&h=health,status,index\n\nAnd yet, it does return .my_index:\nhealth status index\ngreen  open   .my_index\n\nGet .my_* with expand_wildcards\nGET _cat/indices/.my_*?v&h=health,status,index&expand_wildcards=all\n\nWith expand_wildcards=all it does show the hidden index, as expected.\nhealth status index\ngreen  open   .my_index\n\nGet *my* without expand_wildcards\nGET _cat/indices/*my*?v&h=health,status,index\n\nBecause the index/pattern does not start with a dot, and expand_wildcards is not set to show hidden indices, the result is empty:\nhealth status index\n\nGet *my* with expand_wildcards=all\nGET _cat/indices/*my*?v&h=health,status,index&expand_wildcards=all\n\nThe response shows the hidden indices because we told it to:\nhealth status index\ngreen  open   .my_index\ngreen  open   my_index\n\nTesting to ensure it isn't just the CAT API\nGET *_index/_settings\n\nThis yields an empty response:\n{}\n\nBut do the same with the dot prefixed wildcard:\nGET .my_*/_settings\n\nResult:\n{\n  \".my_index\": {\n    \"settings\": {\n      \"index\": {\n        \"routing\": {\n          \"allocation\": {\n            \"include\": {\n              \"_tier_preference\": \"data_content\"\n            }\n          }\n        },\n        \"hidden\": \"true\",\n        \"number_of_shards\": \"1\",\n        \"provided_name\": \".my_index\",\n        \"creation_date\": \"1741217352887\",\n        \"number_of_replicas\": \"1\",\n        \"uuid\": \"rqZiWo_WRG-aqBI97GvD8w\",\n        \"version\": {\n          \"created\": \"8521000\"\n        }\n      }\n    }\n  }\n}\n\nIt seems clear that this is behavior is not intended.\nLogs (if relevant)\nNo response", "created_at": "2025-03-06", "closed_at": null, "labels": [">bug", ":Core/Infra/Core", "Team:Core/Infra"], "State": "open", "Author": "untergeek"}
{"issue_number": 124165, "issue_title": "[CI] BlockMultiValuedTests testToMask {elementType=BOOLEAN nullAllowed=true} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6802 / almalinux-9_platform-support-unix\nelasticsearch-intake #19234 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:compute:test\" --tests \"org.elasticsearch.compute.data.BlockMultiValuedTests.testToMask {elementType=BOOLEAN nullAllowed=true}\" -Dtests.seed=C0B8440D07AFEBE1 -Dtests.locale=az-AZ -Dtests.timezone=America/Dawson -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <true>\n     but: was <false>\n\nIssue Reasons:\n\n[main] 2 failures in test testToMask {elementType=BOOLEAN nullAllowed=true} (0.3% fail rate in 582 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-10", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124164, "issue_title": "[CI] CoreWithMultipleProjectsClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7482 / concurrent-search-tests\nelasticsearch-pull-request #66075 / part-2\nelasticsearch-pull-request #65937 / part-2\nelasticsearch-pull-request #65927 / part-2\nelasticsearch-pull-request #65910 / part-2\nelasticsearch-pull-request #65891 / part-2\nelasticsearch-pull-request #65738 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:qa:multi-project:core-rest-tests-with-multiple-projects:yamlRestTest\" --tests \"org.elasticsearch.multiproject.test.CoreWithMultipleProjectsClientYamlTestSuiteIT\" -Dtests.method=\"test {yaml=indices.exists_alias/10_basic/Test indices.exists_alias}\" -Dtests.seed=44C4D1B130AF90E3 -Dtests.jvm.argline=\"-Des.concurrent_search=true\" -Dtests.locale=en-BE -Dtests.timezone=Antarctica/Mawson -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: Failure at [indices.exists_alias/10_basic:3]: Connection refused\n\nIssue Reasons:\n\n[main] 7 failures in class org.elasticsearch.multiproject.test.CoreWithMultipleProjectsClientYamlTestSuiteIT (0.8% fail rate in 830 executions)\n[main] 6 failures in step part-2 (2.0% fail rate in 298 executions)\n[main] 6 failures in pipeline elasticsearch-pull-request (2.0% fail rate in 298 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124160, "issue_title": "[CI] MLModelDeploymentFullClusterRestartIT testDeploymentSurvivesRestart {cluster=OLD} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6977 / 8.2.3_bwc\nelasticsearch-periodic #6977 / 8.1.3_bwc\nelasticsearch-pull-request #62480 / 8.2.3_bwc\nelasticsearch-pull-request #62480 / 8.1.3_bwc\nelasticsearch-pull-request #62480 / 8.0.1_bwc\nelasticsearch-periodic #6970 / 8.1.3_bwc\nelasticsearch-periodic #6970 / 8.0.1_bwc\nelasticsearch-periodic #6970 / 8.2.3_bwc\nelasticsearch-periodic #6963 / 8.2.3_bwc\nelasticsearch-periodic #6963 / 8.0.1_bwc\n\nReproduction Line:\n./gradlew \":x-pack:qa:full-cluster-restart:v8.2.3#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.restart.MLModelDeploymentFullClusterRestartIT\" -Dtests.method=\"testDeploymentSurvivesRestart {cluster=OLD}\" -Dtests.seed=17D71F132A4EA4B2 -Dtests.bwc=true -Dtests.locale=ar-KW -Dtests.timezone=Pacific/Midway -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:37305], URI [/_ml/trained_models/trained-model-full-cluster-restart/_infer], status line [HTTP/1.1 400 Bad Request]\n{\"error\":\"no handler found for uri [/_ml/trained_models/trained-model-full-cluster-restart/_infer] and method [POST]\"}\n\nIssue Reasons:\n\n[9.0] 8 consecutive failures in step 8.2.3_bwc\n[9.0] 8 consecutive failures in step 8.1.3_bwc\n[9.0] 7 consecutive failures in step 8.0.1_bwc\n[9.0] 23 failures in test testDeploymentSurvivesRestart {cluster=OLD} (5.3% fail rate in 432 executions)\n[9.0] 8 failures in step 8.2.3_bwc (100.0% fail rate in 8 executions)\n[9.0] 8 failures in step 8.1.3_bwc (100.0% fail rate in 8 executions)\n[9.0] 7 failures in step 8.0.1_bwc (100.0% fail rate in 7 executions)\n[9.0] 7 failures in pipeline elasticsearch-periodic (100.0% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124159, "issue_title": "[CI] FullClusterRestartIT testWatcherWithApiKey {cluster=UPGRADED} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6880 / openjdk21_8.16.6_java-matrix-bwc\nelasticsearch-pull-request #61322 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #61293 / 9.1.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":x-pack:qa:full-cluster-restart:v8.16.6#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.restart.FullClusterRestartIT\" -Dtests.method=\"testWatcherWithApiKey {cluster=UPGRADED}\" -Dtests.seed=24DA0A14101A2BCC -Dtests.bwc=true -Dtests.locale=sms-FI -Dtests.timezone=America/Anguilla -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: version increased: [true], executed: [false]\nExpected: is <true>\n     but: was <false>\n\nIssue Reasons:\n\n[main] 3 failures in test testWatcherWithApiKey {cluster=UPGRADED} (0.4% fail rate in 830 executions)\n[main] 2 failures in step 9.1.0_bwc-snapshots (1.9% fail rate in 106 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (2.1% fail rate in 95 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-04-09", "labels": [">test-failure", ":Security/Authentication", "Team:Security", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124150, "issue_title": "[Index Mappings] dynamic_templates support \"top-level\" unmatch/exclusion", "issue_body": "Description\nWith dynamic_templates, you can today define unmatch and path_unmatch, to exclusion specific matching conditions. However, these require that you set these values for each \"template\" you define. With Elastic adopting dynamic templates more commonly, I've found a use-case, which it'd be a quality-of-life improvement, if I could define these at a \"top-level\", and just had the field ignore by all templates.\nUse Case\nI have data enrichment for documents, this data gets added via Logstash, and the data is prefixed with the object name _temp., with the intent that the data is further processed by ingest pipelines, and then the _temp. base object gets removed.\nIn some scenarios, it's possible that the document will hit an ingest pipeline error before the _temp. data is handled, and then the pipeline \"exists\" processing. This today, with Elastic's dynamic templates causes all the _temp. data fields to get indexed as they match common naming schemes (ex: _temp.geo.location, gets picked up by the geo_location dynamic ECS template).\nThe \"brute force\" solution is to modify any dynamic templates and set unmatch. However, this isn't really \"scalable\" as if Elastic adds another dynamic template, it could match against that.\nIdeally, I'd like to be able to update the global@custom template (or whatever template), and just set a \"top-level\" unmatch, that'd automatically be applied to any dynamic templates that exist.", "created_at": "2025-03-05", "closed_at": null, "labels": [">enhancement", ":Search Foundations/Mapping", "Team:Search Foundations"], "State": "open", "Author": "BenB196"}
{"issue_number": 124145, "issue_title": "[ES|QL] restore better syntax error messages", "issue_body": "Description\n21845ad resulted in some negative changes to our syntax error messages.\nThe top priority is row var = 1 not in\n\nused to result in mismatched input '<EOF>' expecting '('\nbut now says mismatched input '<EOF>' expecting LP\n\n\n(the lexer lost the literal name for LP, so it just gives the symbolic name... this won't be obvious to a user).\nAlso, an incorrect command name generates an error with a missing element in the list\nfrom index | project \n\nused to result in mismatched input 'PROJECT' expecting {'dissect', 'drop', 'enrich', 'eval', 'grok', 'keep', 'limit', 'mv_expand', 'rename', 'sort', 'stats', 'where', 'lookup'}\nbut now says mismatched input 'PROJECT' expecting {, 'enrich', 'dissect', 'eval', 'grok', 'limit', 'sort', 'stats', 'where', 'lookup', 'mv_expand', 'drop', 'keep', 'rename'}\n\nCould we restore the original behavior in these cases? Particularly, the parentheses.", "created_at": "2025-03-05", "closed_at": "2025-03-15", "labels": ["Team:Analytics", ":Analytics/ES|QL", "ES|QL-ui"], "State": "closed", "Author": "drewdaemon"}
{"issue_number": 124141, "issue_title": "[CI] QueryPhaseTimeoutTests testScorerTimeoutTerms failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19479 / part1\nelasticsearch-periodic-platform-support #6780 / opensuse-leap-15_platform-support-unix\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.search.query.QueryPhaseTimeoutTests.testScorerTimeoutPoints\" -Dtests.seed=FC34D732AE5ADC5A -Dtests.locale=und -Dtests.timezone=Europe/Madrid -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<2048> but was:<2399>\n\nIssue Reasons:\n\n[main] 2 failures in test testScorerTimeoutTerms (0.9% fail rate in 213 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-05", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124140, "issue_title": "[CI] QueryPhaseTimeoutTests testScorerTimeoutPoints failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19479 / part1\nelasticsearch-periodic-platform-support #6780 / opensuse-leap-15_platform-support-unix\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.search.query.QueryPhaseTimeoutTests.testScorerTimeoutPoints\" -Dtests.seed=FC34D732AE5ADC5A -Dtests.locale=und -Dtests.timezone=Europe/Madrid -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<2048> but was:<2399>\n\nIssue Reasons:\n\n[main] 2 failures in test testScorerTimeoutPoints (0.9% fail rate in 213 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-10", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124136, "issue_title": "[DOCS] List of query arguments exceeds the page width", "issue_body": "On the docs/reference/query-languages/esql/esql-commands.md page, the list of arguments exceeds the page width:\n", "created_at": "2025-03-05", "closed_at": "2025-03-13", "labels": [">docs", "Team:Docs"], "State": "closed", "Author": "alaudazzi"}
{"issue_number": 124134, "issue_title": "[Transform] Add support for derivatives", "issue_body": "Similar to #51925, we should support derivative aggregations for when a user is processing count metrics", "created_at": "2025-03-05", "closed_at": null, "labels": [">enhancement", ":ml/Transform", "Team:ML", "v9.1.0"], "State": "open", "Author": "prwhelan"}
{"issue_number": 124132, "issue_title": "[CI] MatchOperatorIT testScoring_Zero_OutsideQuery failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19553 / part3\nelasticsearch-pull-request #61029 / part-3\nelasticsearch-pull-request #61024 / part-3\nelasticsearch-pull-request #61005 / part-3\nelasticsearch-intake #19528 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.plugin.MatchOperatorIT.testScoring_Zero_OutsideQuery\" -Dtests.seed=CA11CE97FDB6CD62 -Dtests.locale=ar-YE -Dtests.timezone=Asia/Yerevan -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <[[This is a brown fox, 0.0], [The quick brown fox jumps over the lazy dog, 0.0]]>\n     but: was <[[The quick brown fox jumps over the lazy dog, 0.0], [This is a brown fox, 0.0]]>\n\nIssue Reasons:\n\n[8.18] 3 consecutive failures in test testScoring_Zero_OutsideQuery\n[8.18] 2 consecutive failures in step part3\n[8.18] 2 consecutive failures in step part-3\n[8.18] 2 consecutive failures in pipeline elasticsearch-intake\n[8.18] 2 consecutive failures in pipeline elasticsearch-pull-request\n[8.18] 5 failures in test testScoring_Zero_OutsideQuery (55.6% fail rate in 9 executions)\n[8.18] 2 failures in step part3 (100.0% fail rate in 2 executions)\n[8.18] 3 failures in step part-3 (42.9% fail rate in 7 executions)\n[8.18] 2 failures in pipeline elasticsearch-intake (100.0% fail rate in 2 executions)\n[8.18] 3 failures in pipeline elasticsearch-pull-request (50.0% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-06", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124131, "issue_title": "Add deprecation exception for `.monitoring-*` indices", "issue_body": "When spinning up a new ES 9 cluster, the following log message shows up\nIndex [.monitoring-es-8-*] name begins with a dot (.), which is deprecated, and will not be allowed in a future Elasticsearch version.\n\nHistorically, the Stack Monitoring indices and data streams have had dot-prefixed names, and that will not change in Stack 9, so we should add an exception in the DotPrefixValidator class.\nThe exception should be for all .monitoring-* indices as Metricbeat can send data to 4 data streams, namely:\n\n.monitoring-es-8-mb\n.monitoring-logstash-8-mb\n.monitoring-kibana-8-mb\n.monitoring-beats-8-mb\n\nAnd potentially, Metricbeat 8 could send monitoring data from an old Enterprise Search 8 on ES 9 into .monitoring-ent-search-8-mb\nWe'll make sure to revisit this in time for Stack 10", "created_at": "2025-03-05", "closed_at": "2025-03-11", "labels": [":Data Management/Indices APIs", ">deprecation", "Team:Data Management", "v9.0.1"], "State": "closed", "Author": "consulthys"}
{"issue_number": 124126, "issue_title": "Auto_Increment field type", "issue_body": "Description\nBackground\nAs part of the kibana cases application, users want the ability to reference an auto incremented id value in a case. See the kibana issue. While there are ways to potentially implement this functionality at the kibana application layer, the ideal scenario would be to have an AUTO_INCREMENT field type available at the ES/Lucene level. This would provide users of the kibana application to easily and quickly implement features like this that live at the data layer where they belong.\nIt is well known that there are performance bottle necks that would be introduced by a feature such as this in elasticsearch's distributed architecture. Prior discussions around this functionality and asks for this are well documented across multiple discussion platforms:\n\nhttps://discuss.elastic.co/t/how-to-create-autoincremented-id-integer-in-elasticsearch/276108\nhttps://stackoverflow.com/questions/39363320/elasticsearch-auto-increment-integer-field-across-two-index\nhttps://www.reddit.com/r/elasticsearch/comments/1ckzkee/user_readable_auto_id/\nhttps://discuss.elastic.co/t/auto-generated-auto-incremented-document-id-in-numeric-form/187245\nhttps://discuss.elastic.co/t/identity-autonumber-ids/7973 => which noted this package: https://github.com/analog-nico/es-sequence\n\nGoal\nDiscuss/identify if there are potential paths forward for implementing this feature in Elasticsearch, even if it came with a warning that enabling this functionality would slow down ingest performance when enabled for a given index?", "created_at": "2025-03-05", "closed_at": null, "labels": [">feature", ":Distributed Indexing/Distributed", "Team:Distributed Indexing"], "State": "open", "Author": "michaelolo24"}
{"issue_number": 124116, "issue_title": "[CI] EsqlSpecIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6978 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #6965 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #6925 / almalinux-8-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #6925 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #6907 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #6879 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #6872 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic #6851 / single-processor-node-tests\nelasticsearch-pull-request #61211 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {date_nanos.Date nanos to long, index version SYNC}\" -Dtests.seed=4EA52875F3036CB -Dtests.locale=ms-MY -Dtests.timezone=Pacific/Fiji -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:45367], URI [/_query?pretty=true&error_trace=true], status line [HTTP/1.1 400 Bad Request]\nWarnings: [No limit defined, adding default limit of [1000]]\n---\nerror:\n  root_cause:\n  - type: \"verification_exception\"\n    reason: \"Found 1 problem\\nline 1:1: Unknown index [date_nanos]\"\n    stack_trace: \"org.elasticsearch.xpack.esql.VerificationException: Found 1 problem\\n\\\n      line 1:1: Unknown index [date_nanos]\\n\\tat org.elasticsearch.xpack.esql.analysis.Analyzer.verify(Analyzer.java:194)\\n\\\n      \\tat org.elasticsearch.xpack.esql.analysis.Analyzer.analyze(Analyzer.java:188)\\n\\\n      \\tat org.elasticsearch.xpack.esql.session.EsqlSession.lambda$analyzedPlan$7(EsqlSession.java:304)\\n\\\n      \\tat org.elasticsearch.xpack.esql.session.EsqlSession.analyzeAndMaybeRetry(EsqlSession.java:511)\\n\\\n      \\tat org.elasticsearch.xpack.esql.session.EsqlSession.lambda$analyzedPlan$16(EsqlSession.java:349)\\n\\\n      \\tat org.elas\n[truncated]\n\nIssue Reasons:\n\n[9.0] 9 failures in class org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT (1.7% fail rate in 516 executions)\n[9.0] 4 failures in step ubuntu-2404-aarch64_checkpart3_platform-support-arm (22.2% fail rate in 18 executions)\n[9.0] 2 failures in step rocky-9_platform-support-unix (12.5% fail rate in 16 executions)\n[9.0] 6 failures in pipeline elasticsearch-periodic-platform-support (33.3% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-12", "labels": [":Delivery/Build", ">test-failure", "Team:Analytics", "Team:Delivery", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124106, "issue_title": "[CI] MetricsApmIT testApmIntegration failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6803 / single-processor-node-tests\nelasticsearch-pull-request #59957 / part-1-windows\nelasticsearch-pull-request #59829 / part-1-windows\n\nReproduction Line:\n./gradlew \":test:external-modules:test-apm-integration:javaRestTest\" --tests \"org.elasticsearch.test.apmintegration.MetricsApmIT.testApmIntegration\" -Dtests.seed=32EED3E3A08D717F -Dtests.configure_test_clusters_with_one_processor=true -Dtests.locale=fr-BI -Dtests.timezone=Europe/Istanbul -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred orchestrating test cluster.\n\nIssue Reasons:\n\n[main] 3 failures in test testApmIntegration (0.4% fail rate in 759 executions)\n[main] 2 failures in step part-1-windows (40.0% fail rate in 5 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.8% fail rate in 259 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-05", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124104, "issue_title": "[CI] StoreRecoveryTests testAddIndices failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7118 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7104 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7097 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7090 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7083 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7076 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7069 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7062 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7055 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7048 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":server:test\" --tests \"org.elasticsearch.index.shard.StoreRecoveryTests.testAddIndices\" -Dtests.seed=82669B0473091E08 -Dtests.locale=bem -Dtests.timezone=America/North_Dakota/New_Salem -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<0.0> but was:<51.0>\n\nIssue Reasons:\n\n[9.0] 22 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[9.0] 22 failures in test testAddIndices (3.1% fail rate in 705 executions)\n[9.0] 22 failures in step windows-2022_checkpart1_platform-support-windows (100.0% fail rate in 22 executions)\n[9.0] 21 failures in pipeline elasticsearch-periodic-platform-support (95.5% fail rate in 22 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124103, "issue_title": "[CI] DocsClientYamlTestSuiteIT test {yaml=reference/cat/nodes/line_361} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6878 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6878 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-pull-request #61486 / part-1-windows\nelasticsearch-periodic-platform-support #6871 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6871 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-pull-request #61413 / part-1-windows\nelasticsearch-pull-request #61413 / part-1-windows\nelasticsearch-periodic-platform-support #6864 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6864 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6857 / windows-2019_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":docs:yamlRestTest\" --tests \"org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/cat/nodes/line_361}\" -Dtests.seed=245967704EFCFB2C -Dtests.locale=rn-BI -Dtests.timezone=ACT -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [reference/cat/nodes:15]: field [$body] was expected to match the provided regex but didn't\nExpected: ip        \\s+heap.percent \\s+ram.percent \\s+cpu \\s+load_1m \\s+load_5m \\s+load_15m \\s+node.role \\s+master \\s+name\\s* 127.0.0.1           \\s+\\d+ \\s+\\d+ \\s+\\d+    \\s+(\\d+\\.\\d+( \\s+\\d+\\.\\d+ \\s+(\\d+\\.\\d+)?)?)?                  \\s+.+       \\s+[*]      \\s+.+\\s*\n     but: was \"ip        heap.percent ram.percent cpu load_1m load_5m load_15m node.role   master name\\n127.0.0.1           59          39  -1                          cdfhilmrstw *      node-0\\n\"\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in test test {yaml=reference/cat/nodes/line_361}\n[8.x] 8 consecutive failures in step windows-2019_checkpart1_platform-support-windows\n[8.x] 9 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[8.x] 9 consecutive failures in step part-1-windows\n[8.x] 26 failures in test test {yaml=reference/cat/nodes/line_361} (6.5% fail rate in 401 executions)\n[8.x] 8 failures in step windows-2019_checkpart1_platform-support-windows (100.0% fail rate in 8 executions)\n[8.x] 9 failures in step windows-2022_checkpart1_platform-support-windows (100.0% fail rate in 9 executions)\n[8.x] 9 failures in step part-1-windows (100.0% fail rate in 9 executions)\n[8.x] 9 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 9 executions)\n[8.x] 5 failures in pipeline elasticsearch-pull-request (8.6% fail rate in 58 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-14", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124102, "issue_title": "[CI] AzureRepositoryMissingCredentialsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6801 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6801 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #6801 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6801 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6801 / rocky-8_platform-support-unix\nelasticsearch-periodic-platform-support #6794 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6794 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6794 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #6794 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6794 / rocky-8_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 5 consecutive failures in class org.elasticsearch.repositories.azure.AzureRepositoryMissingCredentialsIT\n[9.0] 2 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[9.0] 2 consecutive failures in step rhel-8_platform-support-unix\n[9.0] 2 consecutive failures in step almalinux-8_platform-support-unix\n[9.0] 2 consecutive failures in step oraclelinux-8_platform-support-unix\n[9.0] 2 consecutive failures in step rocky-8_platform-support-unix\n[9.0] 10 failures in class org.elasticsearch.repositories.azure.AzureRepositoryMissingCredentialsIT (10.8% fail rate in 93 executions)\n[9.0] 2 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (50.0% fail rate in 4 executions)\n[9.0] 2 failures in step rhel-8_platform-support-unix (50.0% fail rate in 4 executions)\n[9.0] 2 failures in step almalinux-8_platform-support-unix (50.0% fail rate in 4 executions)\n[9.0] 2 failures in step oraclelinux-8_platform-support-unix (50.0% fail rate in 4 executions)\n[9.0] 2 failures in step rocky-8_platform-support-unix (50.0% fail rate in 4 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-05", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "medium-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124100, "issue_title": "[CI] SharedClusterSnapshotRestoreIT testDataFileFailureDuringRestore failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6797 / java11_java-matrix\nelasticsearch-periodic #6678 / java8_java-matrix\n\nReproduction Line:\n./gradlew ':server:internalClusterTest' --tests \"org.elasticsearch.snapshots.SharedClusterSnapshotRestoreIT.testDataFileFailureDuringRestore\" -Dtests.seed=5F7C408D9666F568 -Dtests.locale=sr -Dtests.timezone=Africa/Monrovia -Druntime.java=11\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.Exception: Test abandoned because suite timeout was reached.\n\nIssue Reasons:\n\n[7.17] 2 failures in test testDataFileFailureDuringRestore (0.3% fail rate in 643 executions)\n[7.17] 2 failures in pipeline elasticsearch-periodic (11.8% fail rate in 17 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-07", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124079, "issue_title": ":x-pack:plugin:ml:qa:ml-with-security:yamlRestTest failing", "issue_body": "I got a failure of the entire suite in an intake run.\nBuild link: https://gradle-enterprise.elastic.co/s/yuwypuazmrshg\nThe relevant logs are:\n[2025-03-03T16:51:46,934][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [yamlRestTest-0] fatal error in thread [elasticsearch[yamlRestTest-0][ml_utility][T#1]], exiting\njava.lang.AssertionError: Used bytes: [-520] must be >= 0\n    at org.elasticsearch.common.breaker.ChildMemoryCircuitBreaker.addWithoutBreaking(ChildMemoryCircuitBreaker.java:207) ~[elasticsearch-9.1.0-SNAPSHOT.jar:?]\n    at org.elasticsearch.xpack.ml.inference.loadingservice.ModelLoadingService.lambda$loadModel$10(ModelLoadingService.java:490) ~[?:?]\n...\n\norg.elasticsearch.ResourceNotFoundException: Could not find trained model definition [a-classification-model]\n    at org.elasticsearch.xpack.ml.inference.persistence.TrainedModelProvider.lambda$getTrainedModelForInference$16(TrainedModelProvider.java:599) ~[?:?]\n...\n", "created_at": "2025-03-05", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "medium-risk"], "State": "open", "Author": "pxsalehi"}
{"issue_number": 124068, "issue_title": "Limit cluster state transport message sizes", "issue_body": "The internal:cluster/coordination/join/validate and internal:cluster/coordination/publish_state messages both carry a (compressed) representation of the whole cluster state, which can in theory be arbitrarily large. In practice there's a 2GiB limit which, if hit, will break the cluster, but even messages under the 2GiB limit can still be much larger than we should be allocating and sending over the transport layer in one go.\nI'm proposing we instead spill the cluster state representation to a temporary file on disk and send it out in chunks, bounding the size of the individual messages on the wire. The receiving node can also accumulate the data in a temporary file on disk and then deserialize it from there.\n\n\n\nsequenceDiagram\n    Master->>Peer: internal:cluster/coordination/publish_state request (first chunk)\n    note right of Peer: store chunk to temp file\n    loop with some amount of parallelism\n        Peer-->>Master: internal:cluster/coordination/publish_state/chunk request\n        note left of Master: read chunk from temp file\n        Master->>Peer: internal:cluster/coordination/publish_state/chunk response (next chunk)\n    end\n    note right of Peer: deserialize entire message from temp file\n    Peer->>Master: internal:cluster/coordination/publish_state response\n\n\n\n\n\n\n\n\n Loading\n\n\n\nWe would also likely need to do #80400 to avoid hitting an unnecessary timeout during this process.", "created_at": "2025-03-05", "closed_at": null, "labels": [">enhancement", ":Distributed Coordination/Cluster Coordination", "Team:Distributed Coordination"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 124067, "issue_title": "[CI] EsqlSpecIT test {date_nanos.Bucket Date nanos by 10 minutes ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6784 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic #6793 / openjdk17_checkpart3_java-fips-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {date_nanos.Bucket Date nanos by 10 minutes SYNC}\" -Dtests.seed=32602338E8C690EE -Dtests.locale=tok-001 -Dtests.timezone=America/St_Johns -Druntime.java=23\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 0:a list containing\nrow 0 column 0:0: expected \"4\" but was \"2\"\nrow 0 column 1:a list containing\nrow 0 column 1:0: expected \"2023-10-23T13:50:00.000Z\" but was \"2023-10-23T12:10:00.000Z\"\nrow 1 column 0:a list containing\nrow 1 column 0:0: expected \"1\" but was \"4\"\nrow 1 column 1:a list containing\nrow 1 column 1:0: expected \"2023-10-23T13:30:00.000Z\" but was \"2023-10-23T13:50:00.000Z\"\nrow 2 column 1:a list containing\nrow 2 column 1:0: expected \"2023-10-23T12:20:00.000Z\" but was \"2023-10-23T13:30:00.000Z\"\nrow 3 column 0:a list containing\nrow 3 column 0:0: expected \"2\" but was \"1\"\nrow 3 column 1:a list containing\nrow 3 column 1:0: expected \"2023-10-23T12:10:00.000Z\" but was \"2023-10-23T12:20:00.000Z\"\nActual:\nct:long | mn:date_nanos           \n2       | 2023-10-23T12:10:00.000Z\n4       | 2023-10-23T13:50:00.000Z\n1       | 2023-10-23T13:30:00.000Z\n1       | 2023-10-23T12:20:00.000Z\n\nExpected:\nct:long | mn:date_nanos           \n4       | 202\n[truncated]\n\nIssue Reasons:\n\n[8.18] 2 failures in test test {date_nanos.Bucket Date nanos by 10 minutes ASYNC} (1.5% fail rate in 134 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-04-04", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124066, "issue_title": "[CI] EsqlSpecIT test {date_nanos.Bucket Date nanos by 10 minutes SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6784 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic #6793 / openjdk17_checkpart3_java-fips-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {date_nanos.Bucket Date nanos by 10 minutes SYNC}\" -Dtests.seed=32602338E8C690EE -Dtests.locale=tok-001 -Dtests.timezone=America/St_Johns -Druntime.java=23\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 0:a list containing\nrow 0 column 0:0: expected \"4\" but was \"2\"\nrow 0 column 1:a list containing\nrow 0 column 1:0: expected \"2023-10-23T13:50:00.000Z\" but was \"2023-10-23T12:10:00.000Z\"\nrow 1 column 0:a list containing\nrow 1 column 0:0: expected \"1\" but was \"4\"\nrow 1 column 1:a list containing\nrow 1 column 1:0: expected \"2023-10-23T13:30:00.000Z\" but was \"2023-10-23T13:50:00.000Z\"\nrow 2 column 1:a list containing\nrow 2 column 1:0: expected \"2023-10-23T12:20:00.000Z\" but was \"2023-10-23T13:30:00.000Z\"\nrow 3 column 0:a list containing\nrow 3 column 0:0: expected \"2\" but was \"1\"\nrow 3 column 1:a list containing\nrow 3 column 1:0: expected \"2023-10-23T12:10:00.000Z\" but was \"2023-10-23T12:20:00.000Z\"\nActual:\nct:long | mn:date_nanos           \n2       | 2023-10-23T12:10:00.000Z\n4       | 2023-10-23T13:50:00.000Z\n1       | 2023-10-23T13:30:00.000Z\n1       | 2023-10-23T12:20:00.000Z\n\nExpected:\nct:long | mn:date_nanos           \n4       | 202\n[truncated]\n\nIssue Reasons:\n\n[8.18] 2 failures in test test {date_nanos.Bucket Date nanos by 10 minutes SYNC} (1.5% fail rate in 134 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-04-04", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124059, "issue_title": "[CI] GeoJdbcSqlSpecIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6957 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #6899 / oraclelinux-9_platform-support-unix\nelasticsearch-pull-request #61537 / part-3\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 3 failures in class org.elasticsearch.xpack.sql.qa.multi_node.GeoJdbcSqlSpecIT (0.8% fail rate in 367 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-05", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124058, "issue_title": "[CI] CliShowIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6957 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-pull-request #61537 / part-3\nelasticsearch-periodic-platform-support #6864 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #6835 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 4 failures in class org.elasticsearch.xpack.sql.qa.multi_node.CliShowIT (0.6% fail rate in 634 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (18.8% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124056, "issue_title": "[CI] JdbcDatabaseMetaDataIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6963 / sles-12_platform-support-unix\nelasticsearch-periodic #6849 / single-processor-node-tests\nelasticsearch-periodic-platform-support #6827 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #6815 / rocky-8_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 4 failures in class org.elasticsearch.xpack.sql.qa.multi_node.JdbcDatabaseMetaDataIT (0.5% fail rate in 730 executions)\n[8.18] 3 failures in pipeline elasticsearch-periodic-platform-support (15.8% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124055, "issue_title": "[CI] CrossClusterQueryWithPartialResultsIT testOneRemoteClusterPartial failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7829 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #7823 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.CrossClusterQueryWithPartialResultsIT.testOneRemoteClusterPartial\" -Dtests.seed=F1BF7C4E3CF6F71C -Dtests.locale=kab -Dtests.timezone=America/Goose_Bay -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 2 failures in test testOneRemoteClusterPartial (1.0% fail rate in 208 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": null, "labels": [">test-failure", ":Clients/Java Low Level REST Client", "Team:Analytics", "Team:Clients", ":Analytics/ES|QL", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124052, "issue_title": "[CI] CoreWithMultipleProjectsClientYamlTestSuiteIT test {yaml=search.vectors/41_knn_search_bbq_hnsw/Vector rescoring has same scoring as exact search for kNN section} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6789 / openjdk21_entitlements_true_checkpart2_java-matrix\nelasticsearch-pull-request #60458 / part-2\nelasticsearch-pull-request #60204 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:qa:multi-project:core-rest-tests-with-multiple-projects:yamlRestTest\" --tests \"org.elasticsearch.multiproject.test.CoreWithMultipleProjectsClientYamlTestSuiteIT\" -Dtests.method=\"test {yaml=search.vectors/41_knn_search_bbq_hnsw/Vector rescoring has same scoring as exact search for kNN section}\" -Dtests.seed=DF1DDE5C4B469CD5 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=ksf-Latn-CM -Dtests.timezone=Etc/GMT+3 -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [search.vectors/41_knn_search_bbq_hnsw:171]: \nExpected: <3>\n     but: was <2>\n\nIssue Reasons:\n\n[main] 3 failures in test test {yaml=search.vectors/41_knn_search_bbq_hnsw/Vector rescoring has same scoring as exact search for kNN section} (1.1% fail rate in 278 executions)\n[main] 2 failures in step part-2 (1.7% fail rate in 116 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.7% fail rate in 118 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": "2025-03-25", "labels": [">test-failure", ":Search Relevance/Vectors", "low-risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124051, "issue_title": "[CI] CustomDateFormatIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6924 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #6899 / almalinux-9_platform-support-unix\nelasticsearch-pull-request #61537 / part-3\nelasticsearch-periodic-platform-support #6845 / debian-12_platform-support-unix\nelasticsearch-periodic #6815 / release-tests\nelasticsearch-periodic-platform-support #6778 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 6 failures in class org.elasticsearch.xpack.sql.qa.multi_node.CustomDateFormatIT (0.8% fail rate in 769 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic-platform-support (21.1% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124049, "issue_title": "[CI] ClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6785 / graalvm-ce17_checkpart1_java-matrix\nelasticsearch-periodic #6764 / graalvm-ce17_checkrestcompat_java-matrix\n\nReproduction Line:\n./gradlew \":rest-api-spec:yamlRestTest\" --tests \"org.elasticsearch.test.rest.ClientYamlTestSuiteIT.test {yaml=search/390_doc_values_search/Test case insensitive term query on keyword field where only doc values are enabled}\" -Dtests.seed=F6F59FD6B974128E -Dtests.locale=jv-Latn-ID -Dtests.timezone=Canada/Eastern -Druntime.java=17\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: Failure at [search/390_doc_values_search:7]: Connection refused\n\nIssue Reasons:\n\n[8.17] 2 failures in class org.elasticsearch.test.rest.ClientYamlTestSuiteIT (1.3% fail rate in 151 executions)\n[8.17] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124046, "issue_title": "node: https://localhost:9200/, status: 401, [es/indices.exists] Expecting a response body, but none was sent", "issue_body": "Elasticsearch Version\n8.17.2\nInstalled Plugins\nNo response\nJava Version\n17\nOS Version\nwindows\u3001linux\nProblem Description\nCaused by: co.elastic.clients.transport.TransportException: node: https://localhost:9200/, status: 401, [es/indices.exists] Expecting a response body, but none was sent\nSteps to Reproduce\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\t<modelVersion>4.0.0</modelVersion>\n\t<parent>\n\t\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-starter-parent</artifactId>\n\t\t<version>3.4.3</version>\n\t\t<relativePath/> <!-- lookup parent from repository -->\n\t</parent>\n\t<groupId>com.example</groupId>\n\t<artifactId>demo</artifactId>\n\t<version>0.0.1-SNAPSHOT</version>\n\t<name>demo</name>\n\t<description>Demo project for Spring Boot</description>\n\t<url/>\n\t<licenses>\n\t\t<license/>\n\t</licenses>\n\t<developers>\n\t\t<developer/>\n\t</developers>\n\t<scm>\n\t\t<connection/>\n\t\t<developerConnection/>\n\t\t<tag/>\n\t\t<url/>\n\t</scm>\n\t<properties>\n\t\t<java.version>17</java.version>\n\t</properties>\n\t<dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-data-elasticsearch</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-configuration-processor</artifactId>\n\t\t\t<optional>true</optional>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.projectlombok</groupId>\n\t\t\t<artifactId>lombok</artifactId>\n\t\t\t<optional>true</optional>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-test</artifactId>\n\t\t\t<scope>test</scope>\n\t\t</dependency>\n\t</dependencies>\n\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n\t\t\t\t<artifactId>maven-compiler-plugin</artifactId>\n\t\t\t\t<configuration>\n\t\t\t\t\t<annotationProcessorPaths>\n\t\t\t\t\t\t<path>\n\t\t\t\t\t\t\t<groupId>org.projectlombok</groupId>\n\t\t\t\t\t\t\t<artifactId>lombok</artifactId>\n\t\t\t\t\t\t</path>\n\t\t\t\t\t\t<path>\n\t\t\t\t\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t\t\t\t\t<artifactId>spring-boot-configuration-processor</artifactId>\n\t\t\t\t\t\t</path>\n\t\t\t\t\t</annotationProcessorPaths>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\n\t\t\t\t<configuration>\n\t\t\t\t\t<excludes>\n\t\t\t\t\t\t<exclude>\n\t\t\t\t\t\t\t<groupId>org.projectlombok</groupId>\n\t\t\t\t\t\t\t<artifactId>lombok</artifactId>\n\t\t\t\t\t\t</exclude>\n\t\t\t\t\t</excludes>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n\n</project>\n\nspring:\n  application:\n    name: demo\n  elasticsearch:\n    uris: https://localhost:9200\n    username: elastic\n    password: abc123\npackage com.example.demo.elasticsearch;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.http.HttpHost;\nimport org.apache.http.conn.ssl.NoopHostnameVerifier;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.nio.conn.SchemeIOSessionStrategy;\nimport org.apache.http.nio.reactor.IOSession;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.apache.http.ssl.SSLContexts;\nimport org.elasticsearch.client.RestClientBuilder;\nimport org.springframework.boot.autoconfigure.elasticsearch.RestClientBuilderCustomizer;\nimport org.springframework.stereotype.Component;\n\nimport javax.net.ssl.KeyManager;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.security.*;\nimport java.security.cert.Certificate;\nimport java.security.cert.CertificateException;\nimport java.security.cert.CertificateFactory;\nimport java.security.cert.X509Certificate;\n\n@Slf4j\n@Component\npublic class RestClientBuilderCustomizerImpl implements RestClientBuilderCustomizer {\n    @Override\n    public void customize(RestClientBuilder builder) {\n        builder.setHttpClientConfigCallback(httpClientBuilder -> {\n            try {\n                return httpClientBuilder.setSSLContext(new SSLContextBuilder()\n                                .loadTrustMaterial(null, (x509Certificates, s) -> true).build())\n                        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE);\n            } catch (NoSuchAlgorithmException | KeyManagementException | KeyStoreException e) {\n                throw new RuntimeException(e);\n            }\n        });\n    }\n}\npackage com.example.demo.entity;\n\n\nimport lombok.Data;\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.elasticsearch.annotations.Document;\nimport org.springframework.data.elasticsearch.annotations.Field;\nimport org.springframework.data.elasticsearch.annotations.FieldType;\n\n/**\n * \u6587\u6863\u6570\u636e\u7d22\u5f15\u6587\u6863\n */\n@Data\n@Document(indexName = \"test\")\npublic class Test {\n    @Id\n    @Field(type = FieldType.Keyword)\n    private String id;\n\n    @Field(type = FieldType.Keyword)\n    private String title;\n\n    /**\n     * \u6587\u6863\u6807\u9898\n     */\n    @Field(type = FieldType.Text)\n    private String context;\n}\npackage com.example.demo.repository;\n\nimport com.example.demo.entity.Test;\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface DocRepository extends ElasticsearchRepository<Test, String> {\n\n}\n\n\n\ndemo (2).zip\nelasticsearch-kibana (2).zip\nWhy?\nLogs (if relevant)\nC:\\Users\\12001.jdks\\openjdk-22.0.1\\bin\\java.exe -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:2843,suspend=y,server=n -javaagent:C:\\Users\\12001\\AppData\\Local\\JetBrains\\IdeaIC2024.3\\captureAgent\\debugger-agent.jar -Dkotlinx.coroutines.debug.enable.creation.stack.trace=false -Ddebugger.agent.enable.coroutines=true -Dkotlinx.coroutines.debug.enable.flows.stack.trace=true -Dkotlinx.coroutines.debug.enable.mutable.state.flows.stack.trace=true -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath \"C:\\Users\\12001\\Downloads\\demo\\demo\\target\\classes;C:\\Users\\12001.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-data-elasticsearch\\3.4.3\\spring-boot-starter-data-elasticsearch-3.4.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\boot\\spring-boot-starter\\3.4.3\\spring-boot-starter-3.4.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\boot\\spring-boot\\3.4.3\\spring-boot-3.4.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\boot\\spring-boot-autoconfigure\\3.4.3\\spring-boot-autoconfigure-3.4.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-logging\\3.4.3\\spring-boot-starter-logging-3.4.3.jar;C:\\Users\\12001.m2\\repository\\ch\\qos\\logback\\logback-classic\\1.5.16\\logback-classic-1.5.16.jar;C:\\Users\\12001.m2\\repository\\ch\\qos\\logback\\logback-core\\1.5.16\\logback-core-1.5.16.jar;C:\\Users\\12001.m2\\repository\\org\\apache\\logging\\log4j\\log4j-to-slf4j\\2.24.3\\log4j-to-slf4j-2.24.3.jar;C:\\Users\\12001.m2\\repository\\org\\apache\\logging\\log4j\\log4j-api\\2.24.3\\log4j-api-2.24.3.jar;C:\\Users\\12001.m2\\repository\\org\\slf4j\\jul-to-slf4j\\2.0.16\\jul-to-slf4j-2.0.16.jar;C:\\Users\\12001.m2\\repository\\jakarta\\annotation\\jakarta.annotation-api\\2.1.1\\jakarta.annotation-api-2.1.1.jar;C:\\Users\\12001.m2\\repository\\org\\yaml\\snakeyaml\\2.3\\snakeyaml-2.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\data\\spring-data-elasticsearch\\5.4.3\\spring-data-elasticsearch-5.4.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\spring-context\\6.2.3\\spring-context-6.2.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\spring-tx\\6.2.3\\spring-tx-6.2.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\data\\spring-data-commons\\3.4.3\\spring-data-commons-3.4.3.jar;C:\\Users\\12001.m2\\repository\\co\\elastic\\clients\\elasticsearch-java\\8.15.5\\elasticsearch-java-8.15.5.jar;C:\\Users\\12001.m2\\repository\\org\\elasticsearch\\client\\elasticsearch-rest-client\\8.15.5\\elasticsearch-rest-client-8.15.5.jar;C:\\Users\\12001.m2\\repository\\org\\apache\\httpcomponents\\httpclient\\4.5.14\\httpclient-4.5.14.jar;C:\\Users\\12001.m2\\repository\\org\\apache\\httpcomponents\\httpcore\\4.4.16\\httpcore-4.4.16.jar;C:\\Users\\12001.m2\\repository\\org\\apache\\httpcomponents\\httpasyncclient\\4.1.5\\httpasyncclient-4.1.5.jar;C:\\Users\\12001.m2\\repository\\org\\apache\\httpcomponents\\httpcore-nio\\4.4.16\\httpcore-nio-4.4.16.jar;C:\\Users\\12001.m2\\repository\\commons-codec\\commons-codec\\1.17.2\\commons-codec-1.17.2.jar;C:\\Users\\12001.m2\\repository\\com\\google\\code\\findbugs\\jsr305\\3.0.2\\jsr305-3.0.2.jar;C:\\Users\\12001.m2\\repository\\jakarta\\json\\jakarta.json-api\\2.1.3\\jakarta.json-api-2.1.3.jar;C:\\Users\\12001.m2\\repository\\org\\eclipse\\parsson\\parsson\\1.0.5\\parsson-1.0.5.jar;C:\\Users\\12001.m2\\repository\\io\\opentelemetry\\opentelemetry-api\\1.43.0\\opentelemetry-api-1.43.0.jar;C:\\Users\\12001.m2\\repository\\io\\opentelemetry\\opentelemetry-context\\1.43.0\\opentelemetry-context-1.43.0.jar;C:\\Users\\12001.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.18.2\\jackson-core-2.18.2.jar;C:\\Users\\12001.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.18.2\\jackson-databind-2.18.2.jar;C:\\Users\\12001.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.18.2\\jackson-annotations-2.18.2.jar;C:\\Users\\12001.m2\\repository\\org\\slf4j\\slf4j-api\\2.0.16\\slf4j-api-2.0.16.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-json\\3.4.3\\spring-boot-starter-json-3.4.3.jar;C:\\Users\\12001.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jdk8\\2.18.2\\jackson-datatype-jdk8-2.18.2.jar;C:\\Users\\12001.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jsr310\\2.18.2\\jackson-datatype-jsr310-2.18.2.jar;C:\\Users\\12001.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-parameter-names\\2.18.2\\jackson-module-parameter-names-2.18.2.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-web\\3.4.3\\spring-boot-starter-web-3.4.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-tomcat\\3.4.3\\spring-boot-starter-tomcat-3.4.3.jar;C:\\Users\\12001.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-core\\10.1.36\\tomcat-embed-core-10.1.36.jar;C:\\Users\\12001.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-el\\10.1.36\\tomcat-embed-el-10.1.36.jar;C:\\Users\\12001.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-websocket\\10.1.36\\tomcat-embed-websocket-10.1.36.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\spring-web\\6.2.3\\spring-web-6.2.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\spring-beans\\6.2.3\\spring-beans-6.2.3.jar;C:\\Users\\12001.m2\\repository\\io\\micrometer\\micrometer-observation\\1.14.4\\micrometer-observation-1.14.4.jar;C:\\Users\\12001.m2\\repository\\io\\micrometer\\micrometer-commons\\1.14.4\\micrometer-commons-1.14.4.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\spring-webmvc\\6.2.3\\spring-webmvc-6.2.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\spring-aop\\6.2.3\\spring-aop-6.2.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\spring-expression\\6.2.3\\spring-expression-6.2.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\boot\\spring-boot-configuration-processor\\3.4.3\\spring-boot-configuration-processor-3.4.3.jar;C:\\Users\\12001.m2\\repository\\org\\projectlombok\\lombok\\1.18.36\\lombok-1.18.36.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\spring-core\\6.2.3\\spring-core-6.2.3.jar;C:\\Users\\12001.m2\\repository\\org\\springframework\\spring-jcl\\6.2.3\\spring-jcl-6.2.3.jar;C:\\Users\\12001\\AppData\\Local\\Programs\\IntelliJ IDEA Community Edition\\lib\\idea_rt.jar\" com.example.demo.DemoApplication\nConnected to the target VM, address: '127.0.0.1:2843', transport: 'socket'\n.   ____          _            __ _ _\n/\\ / ' __ _ () __  __ _ \\ \\ \\ \n( ( )__ | '_ | '| | ' / ` | \\ \\ \\ \n\\/  )| |)| | | | | || (| |  ) ) ) )\n'  || .__|| ||| |_, | / / / /\n=========||==============|/=////\n:: Spring Boot ::                (v3.4.3)\n2025-03-05T03:42:31.814+08:00  INFO 31860 --- [demo] [           main] com.example.demo.DemoApplication         : Starting DemoApplication using Java 22.0.1 with PID 31860 (C:\\Users\\12001\\Downloads\\demo\\demo\\target\\classes started by 12001 in C:\\Users\\12001\\Downloads\\demo\\demo)\n2025-03-05T03:42:31.817+08:00  INFO 31860 --- [demo] [           main] com.example.demo.DemoApplication         : No active profile set, falling back to 1 default profile: \"default\"\n2025-03-05T03:42:32.438+08:00  INFO 31860 --- [demo] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.\n2025-03-05T03:42:32.489+08:00  INFO 31860 --- [demo] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 46 ms. Found 1 Elasticsearch repository interface.\n2025-03-05T03:42:33.002+08:00  INFO 31860 --- [demo] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)\n2025-03-05T03:42:33.014+08:00  INFO 31860 --- [demo] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2025-03-05T03:42:33.015+08:00  INFO 31860 --- [demo] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.36]\n2025-03-05T03:42:33.080+08:00  INFO 31860 --- [demo] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2025-03-05T03:42:33.081+08:00  INFO 31860 --- [demo] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1226 ms\n2025-03-05T03:42:34.050+08:00  WARN 31860 --- [demo] [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'docRepository' defined in com.example.demo.repository.DocRepository defined in @EnableElasticsearchRepositories declared on ElasticsearchRepositoriesRegistrar.EnableElasticsearchRepositoriesConfiguration: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception\n2025-03-05T03:42:34.057+08:00  INFO 31860 --- [demo] [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2025-03-05T03:42:34.065+08:00  INFO 31860 --- [demo] [           main] .s.b.a.l.ConditionEvaluationReportLogger :\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2025-03-05T03:42:34.083+08:00 ERROR 31860 --- [demo] [           main] o.s.boot.SpringApplication               : Application run failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'docRepository' defined in com.example.demo.repository.DocRepository defined in @EnableElasticsearchRepositories declared on ElasticsearchRepositoriesRegistrar.EnableElasticsearchRepositoriesConfiguration: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1812) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:346) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1149) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1121) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1056) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987) ~[spring-context-6.2.3.jar:6.2.3]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627) ~[spring-context-6.2.3.jar:6.2.3]\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.4.3.jar:3.4.3]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752) ~[spring-boot-3.4.3.jar:3.4.3]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.4.3.jar:3.4.3]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.4.3.jar:3.4.3]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1361) ~[spring-boot-3.4.3.jar:3.4.3]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1350) ~[spring-boot-3.4.3.jar:3.4.3]\nat com.example.demo.DemoApplication.main(DemoApplication.java:10) ~[classes/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception\nat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:222) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.data.repository.core.support.RepositoryFactorySupport.lambda$instantiateClass$5(RepositoryFactorySupport.java:678) ~[spring-data-commons-3.4.3.jar:3.4.3]\nat java.base/java.util.Optional.map(Optional.java:260) ~[na:na]\nat org.springframework.data.repository.core.support.RepositoryFactorySupport.instantiateClass(RepositoryFactorySupport.java:678) ~[spring-data-commons-3.4.3.jar:3.4.3]\nat org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:643) ~[spring-data-commons-3.4.3.jar:3.4.3]\nat org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactory.getTargetRepository(ElasticsearchRepositoryFactory.java:80) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:386) ~[spring-data-commons-3.4.3.jar:3.4.3]\nat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$4(RepositoryFactoryBeanSupport.java:350) ~[spring-data-commons-3.4.3.jar:3.4.3]\nat org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.4.3.jar:3.4.3]\nat org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.4.3.jar:3.4.3]\nat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:356) ~[spring-data-commons-3.4.3.jar:3.4.3]\nat org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactoryBean.afterPropertiesSet(ElasticsearchRepositoryFactoryBean.java:69) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859) ~[spring-beans-6.2.3.jar:6.2.3]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808) ~[spring-beans-6.2.3.jar:6.2.3]\n... 18 common frames omitted\nCaused by: org.springframework.dao.DataAccessResourceFailureException: node: https://localhost:9200/, status: 401, [es/indices.exists] Expecting a response body, but none was sent\nat org.springframework.data.elasticsearch.client.elc.ElasticsearchExceptionTranslator.translateExceptionIfPossible(ElasticsearchExceptionTranslator.java:111) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat org.springframework.data.elasticsearch.client.elc.ElasticsearchExceptionTranslator.translateException(ElasticsearchExceptionTranslator.java:65) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat org.springframework.data.elasticsearch.client.elc.ChildTemplate.execute(ChildTemplate.java:73) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat org.springframework.data.elasticsearch.client.elc.IndicesTemplate.doExists(IndicesTemplate.java:179) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat org.springframework.data.elasticsearch.client.elc.IndicesTemplate.exists(IndicesTemplate.java:171) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository.createIndexAndMappingIfNeeded(SimpleElasticsearchRepository.java:93) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository.(SimpleElasticsearchRepository.java:87) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62) ~[na:na]\nat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502) ~[na:na]\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486) ~[na:na]\nat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:209) ~[spring-beans-6.2.3.jar:6.2.3]\n... 31 common frames omitted\nCaused by: java.lang.RuntimeException: node: https://localhost:9200/, status: 401, [es/indices.exists] Expecting a response body, but none was sent\nat org.springframework.data.elasticsearch.client.elc.ElasticsearchExceptionTranslator.translateException(ElasticsearchExceptionTranslator.java:64) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\n... 40 common frames omitted\nCaused by: co.elastic.clients.transport.TransportException: node: https://localhost:9200/, status: 401, [es/indices.exists] Expecting a response body, but none was sent\nat co.elastic.clients.transport.ElasticsearchTransportBase.getApiResponse(ElasticsearchTransportBase.java:330) ~[elasticsearch-java-8.15.5.jar:na]\nat co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:147) ~[elasticsearch-java-8.15.5.jar:na]\nat co.elastic.clients.elasticsearch.indices.ElasticsearchIndicesClient.exists(ElasticsearchIndicesClient.java:682) ~[elasticsearch-java-8.15.5.jar:na]\nat org.springframework.data.elasticsearch.client.elc.IndicesTemplate.lambda$doExists$2(IndicesTemplate.java:179) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\nat org.springframework.data.elasticsearch.client.elc.ChildTemplate.execute(ChildTemplate.java:71) ~[spring-data-elasticsearch-5.4.3.jar:5.4.3]\n... 39 common frames omitted\nDisconnected from the target VM, address: '127.0.0.1:2843', transport: 'socket'\nProcess finished with exit code 1\nspring-boot-starter-data-elasticsearch bug.\nusername\u3001password invalid\nRight:\npackage com.example.demo.elasticsearch;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.http.Header;\nimport org.apache.http.conn.ssl.NoopHostnameVerifier;\nimport org.apache.http.message.BasicHeader;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.elasticsearch.client.RestClientBuilder;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.autoconfigure.elasticsearch.RestClientBuilderCustomizer;\nimport org.springframework.stereotype.Component;\n\nimport java.security.KeyManagementException;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.text.MessageFormat;\nimport java.util.Base64;\nimport java.util.Collection;\nimport java.util.Collections;\n\n@Slf4j\n@Component\npublic class RestClientBuilderCustomizerImpl implements RestClientBuilderCustomizer {\n    @Value(\"${spring.elasticsearch.username}\")\n    private String username;\n\n    @Value(\"${spring.elasticsearch.password}\")\n    private String password;\n\n    @Override\n    public void customize(RestClientBuilder builder) {\n        builder.setHttpClientConfigCallback(httpClientBuilder -> {\n            try {\n                Collection<Header> headerCollection = Collections.singletonList(new BasicHeader(\"authorization\",\n                        MessageFormat.format(\"Basic {0}\",\n                                Base64.getEncoder().encodeToString(MessageFormat.format(\"{0}:{1}\",\n                                        username, password).getBytes()))));\n                httpClientBuilder.setDefaultHeaders(headerCollection);\n                return httpClientBuilder.setSSLContext(new SSLContextBuilder()\n                                .loadTrustMaterial(null, (x509Certificates, s) -> true).build())\n                        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE);\n            } catch (NoSuchAlgorithmException | KeyManagementException | KeyStoreException e) {\n                throw new RuntimeException(e);\n            }\n        });\n    }\n}\nSpring-data-elasticsearch Tips\nSpring-data-elasticsearch  examples Tips\nElasticsearch Tips", "created_at": "2025-03-04", "closed_at": "2025-03-05", "labels": [">bug", "needs:triage"], "State": "closed", "Author": "120011676"}
{"issue_number": 124040, "issue_title": "[DOCS] Update links for new docs URLs that are hardcoded and emitted by Elasticsearch", "issue_body": "Pursuant to #123928 created by @DaveCTurner:\n\n Update the all the links in server/src/main/resources/org/elasticsearch/common/reference-docs-links.txt to reflect the new URL paths for those pages post-docs migration.\n Update the base URL from the old https://www.elastic.co/guide/en/elasticsearch/reference/${MAJOR}.${MINOR}/ once the new base URL is confirmed\n\nThese links are emitted by Elasticsearch in various ways (typically logs and error responses) and need to be valid permalinks.\nWarningThe @UpdateForV9 marker essentially makes this a blocker for the 9.0 release.\n", "created_at": "2025-03-04", "closed_at": "2025-03-18", "labels": [">docs", "Team:Docs"], "State": "closed", "Author": "leemthompo"}
{"issue_number": 124006, "issue_title": "[CI] FileAccessTreeTests testDuplicatePrunedPaths failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6780 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-pull-request #60569 / part-1-windows\nelasticsearch-pull-request #60527 / part-1-windows\nelasticsearch-periodic-platform-support #6773 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6764 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":libs:entitlement:test\" --tests \"org.elasticsearch.entitlement.runtime.policy.FileAccessTreeTests.testDuplicatePrunedPaths\" -Dtests.seed=10CF3219AE697D7F -Dtests.locale=dyo -Dtests.timezone=Etc/GMT-0 -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<[/a, /b/c, b/c/d, e/f]> but was:<[/a, /a/b, /b/c, b/c/d, e/f]>\n\nIssue Reasons:\n\n[main] 3 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[main] 5 failures in test testDuplicatePrunedPaths (2.3% fail rate in 214 executions)\n[main] 3 failures in step windows-2022_checkpart1_platform-support-windows (100.0% fail rate in 3 executions)\n[main] 2 failures in step part-1-windows (66.7% fail rate in 3 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 3 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (2.1% fail rate in 97 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": "2025-04-11", "labels": [">test-failure", "Team:Core/Infra", "medium-risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 124004, "issue_title": "[CI] CreateFromDeploymentIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6915 / concurrent-search-tests\nelasticsearch-pull-request #61756 / part-2\nelasticsearch-periodic-platform-support #6830 / rhel-9_platform-support-unix\nelasticsearch-periodic #6817 / encryption-at-rest\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 4 failures in class org.elasticsearch.xpack.inference.CreateFromDeploymentIT (0.5% fail rate in 801 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (13.3% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 124002, "issue_title": "ESQL: TO_LOWER and TO_UPPER should keep multivalued fields", "issue_body": "Description\nESQL's TO_LOWER and TO_UPPER should process each value in a multivalued field - all functions withTO_ in the name do that except these. There isn't a real rule for this at the moment, but we should make one.", "created_at": "2025-03-04", "closed_at": "2025-03-13", "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "nik9000"}
{"issue_number": 123999, "issue_title": "[CI] IngestCommonClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6771 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6771 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6762 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6762 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6755 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6755 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6748 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6748 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6741 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6741 / windows-2022_checkrestcompat_platform-support-windows\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 17 consecutive failures in step windows-2019_checkrestcompat_platform-support-windows\n[8.x] 17 consecutive failures in step windows-2022_checkrestcompat_platform-support-windows\n[8.x] 34 failures in class org.elasticsearch.ingest.common.IngestCommonClientYamlTestSuiteIT (3.5% fail rate in 970 executions)\n[8.x] 17 failures in step windows-2019_checkrestcompat_platform-support-windows (100.0% fail rate in 17 executions)\n[8.x] 17 failures in step windows-2022_checkrestcompat_platform-support-windows (100.0% fail rate in 17 executions)\n[8.x] 17 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 17 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": "2025-03-04", "labels": [">test-failure", "Team:Core/Infra", "needs:risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123998, "issue_title": "Support audit ignore policy by request.name", "issue_body": "Description\nauditing filtering does not currently allow to filter by request.name, example here user wants to filter out request BulkItemRequest to reduce size of audit logs\n{\n  \"type\": \"audit\",\n  \"timestamp\": \"2025-01-01T01:23:45,678+0000\",\n  \"node.id\": \"G7bXq2vL9pZmT4KdYwNr5C\",\n  \"event.type\": \"transport\",\n  \"event.action\": \"access_granted\",\n  \"authentication.type\": \"REALM\",\n  \"user.name\": \"user_name\",\n  \"user.run_by.name\": \"user_name\",\n  \"user.realm\": \"realm_name\",\n  \"user.run_by.realm\": \"reserved\",\n  \"user.roles\": [\n    \"superuser\"\n  ],\n  \"origin.type\": \"rest\",\n  \"origin.address\": \"1.2.3.4:12345\",\n  \"request.id\": \"aP8XzY3kWmVqL7J9oT5Rb\",\n  \"action\": \"indices:data/write/delete\",\n  \"request.name\": \"BulkItemRequest\",\n  \"indices\": [\n    \"my-index\"\n  ],\n  \"x_forwarded_for\": \"127.0.0.1\"\n}\n", "created_at": "2025-03-04", "closed_at": null, "labels": [">enhancement", ":Security/Audit", "Team:Security"], "State": "open", "Author": "jguay"}
{"issue_number": 123995, "issue_title": "Support failing _bulk requests when all items fail", "issue_body": "Currently, when you send in a _bulk request, even if all items fail the _bulk response returns a 200 OK and lists all of the failed requests.\nConsider adding a flag to the _bulk API that propagates the error status code when all items fail.", "created_at": "2025-03-04", "closed_at": null, "labels": [":Distributed Indexing/CRUD", "Team:Distributed Indexing"], "State": "open", "Author": "kderusso"}
{"issue_number": 123983, "issue_title": "[ML] Support binary embeddings for Voyage AI", "issue_body": "Description\nSimilar to #121548 and #120751\nFor #111747", "created_at": "2025-03-04", "closed_at": null, "labels": [":ml", "Team:ML"], "State": "open", "Author": "davidkyle"}
{"issue_number": 123982, "issue_title": "[ML] Enable rollover on the .ml-inference-native-000002 index", "issue_body": "Description\n.ml-inference-native-000002 is the index where trained models for NLP are stored, the ELSER model is stored in this index when it is downloaded. The index has a hard coded limit max size of 50GB, once the index has grown to that size no more models can be added.\nhttps://github.com/elastic/elasticsearch/blob/main/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportPutTrainedModelAction.java#L218\nThe error message advises users to free space by deleting old models. It would be much better to enable rollover and create size based ILM policy on the index so that users are not forced to choose which models they can store and which they can't", "created_at": "2025-03-04", "closed_at": null, "labels": [">enhancement", ":ml", "Team:ML"], "State": "open", "Author": "davidkyle"}
{"issue_number": 123975, "issue_title": "[CI] DataStreamsClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6766 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6766 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-pull-request #60235 / rest-compatibility\nelasticsearch-periodic-platform-support #6743 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6736 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6729 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6729 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6722 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6715 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6715 / windows-2022_checkrestcompat_platform-support-windows\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 2 consecutive failures in step windows-2022_checkrestcompat_platform-support-windows\n[main] 15 failures in class org.elasticsearch.datastreams.DataStreamsClientYamlTestSuiteIT (1.7% fail rate in 882 executions)\n[main] 10 failures in step windows-2022_checkrestcompat_platform-support-windows (76.9% fail rate in 13 executions)\n[main] 4 failures in step windows-2022_checkpart1_platform-support-windows (66.7% fail rate in 6 executions)\n[main] 9 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 12 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": "2025-03-04", "labels": [">test-failure", "Team:Core/Infra", "needs:risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123967, "issue_title": "[ES|QL] _score is always 0 when DSL filter is being applied", "issue_body": "Elasticsearch Version\n8.18\nInstalled Plugins\nNo response\nJava Version\n23.0.2\nOS Version\n22.6.0 Darwin Kernel Version\nProblem Description\n_score is always 0 when DSL filter is being applied. This is extremely important for kibana as prefiltering is always added.\nSteps to Reproduce\nCheck this:\nPOST _query/async\n{\n  \"query\": \"FROM movies METADATA _score | WHERE Title: \\\"Shakespeare\\\" | sort _score DESC | KEEP Title, _score\",\n  \"locale\": \"en\",\n  \"include_ccs_metadata\": true,\n  \"filter\": {\n    \"bool\": {\n      \"must\": [],\n      \"filter\": [],\n      \"should\": [],\n      \"must_not\": []\n    }\n  }\n}\n\nThis returns:\n#! No limit defined, adding default limit of [1000]\n{\n  \"is_running\": false,\n  \"took\": 4,\n  \"is_partial\": false,\n  \"columns\": [\n    {\n      \"name\": \"Title\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"_score\",\n      \"type\": \"double\"\n    }\n  ],\n  \"values\": [\n    [\n      \"Shakespeare in Love\",\n      0\n    ],\n    [\n      \"Shakespeare in Love\",\n      0\n    ],\n    [\n      \"Shakespeare in Love\",\n      0\n    ]\n  ]\n}\n\nIf I remove the DSL:\nPOST _query/async\n{\n  \"query\": \"FROM movies METADATA _score | WHERE Title: \\\"Shakespeare\\\" | sort _score DESC | KEEP Title, _score\",\n  \"locale\": \"en\",\n  \"include_ccs_metadata\": true\n}\n\n#! No limit defined, adding default limit of [1000]\n{\n  \"is_running\": false,\n  \"took\": 4,\n  \"is_partial\": false,\n  \"columns\": [\n    {\n      \"name\": \"Title\",\n      \"type\": \"text\"\n    },\n    {\n      \"name\": \"_score\",\n      \"type\": \"double\"\n    }\n  ],\n  \"values\": [\n    [\n      \"Shakespeare in Love\",\n      7.960540771484375\n    ],\n    [\n      \"Shakespeare in Love\",\n      7.960540771484375\n    ],\n    [\n      \"Shakespeare in Love\",\n      7.960540771484375\n    ]\n  ]\n}\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-04", "closed_at": "2025-03-05", "labels": [">bug", "priority:high", "Team:Search Relevance", ":Search Relevance/Search"], "State": "closed", "Author": "stratoula"}
{"issue_number": 123956, "issue_title": "[CI] EsqlActionBreakerIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7399 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #7273 / windows-2022_checkpart3_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testEvalOverride\" -Dtests.seed=1DEA44A6C69FAA55 -Dtests.locale=blo-BJ -Dtests.timezone=Antarctica/Mawson -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s0\nExpected: <0L>\n     but: was <200L>\n\nIssue Reasons:\n\n[main] 2 failures in class org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT (0.2% fail rate in 956 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (11.8% fail rate in 17 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-04", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123944, "issue_title": "Error to install elasticsearch v8 or v7", "issue_body": "Hello everyone\nI have a problem trying to install elasticsearch v8 or v7\nI uninstalled elasticsearch and I erased all files belong to elasticsearch but when I try to install again I find the next error\n\nerror unpacking rpm package\n\n\nI don't have elasticsearch installed but I see this errors like if I have it installed\n\n\nI've tried install elasticsearch manually from rpm package and the result is the same\n\nWhat I can do to install elasticsearch again and it works properly ???\nplease any can help me to resolve this problem ??", "created_at": "2025-03-04", "closed_at": null, "labels": [":Delivery/Packaging", "Team:Delivery"], "State": "open", "Author": "b4lh4ck"}
{"issue_number": 123935, "issue_title": "[CI] ModelIdUniquenessIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6924 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #6778 / rhel-7_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.xpack.ml.integration.ModelIdUniquenessIT (0.3% fail rate in 767 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (10.5% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-03", "closed_at": "2025-03-13", "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123903, "issue_title": "Spatial ES|QL Grid Aggregations", "issue_body": "Description\nIn the Query DSL there is support for three types of grid:\n\ngeohash\ngeotile\ngeohex (based on Uber H3 grid)\n\nAll three allow for both search and aggregations:\n\nSearch for data intersecting a grid tile\nAggregate data by grid tile\n\nWe wish to implement this in ES|QL, and the simplest initial implementation would require support for scalar functions:\n\nST_GEOHASH(geom, precision)\nST_GEOTILE(geom, precision)\nST_GEOHEX(geom, precision)\n\nThese could be used in WHER predicates as well as in aggregations. For the WHERE predicates we would wish to push this down to the Lucene query where possible, perhaps by re-writing to ST_INTERSECTS as we do for ST_DISTANCE.\nFor the aggregations, we could use the scalar function directly, for example:\nFROM index\n| WHERE ST_INTERSECTS(location, TO_GEOSHAPE(\"POLYGON(...)\"))\n| STATS \n    count = COUNT_DISTINCT(location),\n    centroid = ST_CENTROID_AGG(location)\n      BY ST_GEOHASH(location, 4)\n| KEEP count, centroid\n\nWhich provides a count of geometries intersecting each tile as well as the centroid of all geometries in that tile.\nIf we wish to return the tile shape to the client, for example to draw it on a map, we could provide additional functions to convert the tile id into a geo_shape:\nFROM index\n| WHERE ST_INTERSECTS(location, TO_GEOSHAPE(\"POLYGON(...)\"))\n| EVAL geohash = ST_GEOHASH(location, 4)\n| STATS \n    count = COUNT_DISTINCT(location),\n    centroid = ST_CENTROID_AGG(location)\n      BY ST_GEOHASH(location, 4)\n| EVAL tile = ST_GEOHASH_BOUNDARY(geohash)\n| KEEP count, centroid, tile\n", "created_at": "2025-03-03", "closed_at": null, "labels": [">enhancement", ":Analytics/Geo", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "craigtaverner"}
{"issue_number": 123895, "issue_title": "[CI] JdbcMetadataIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6934 / concurrent-search-tests\nelasticsearch-periodic-platform-support #6942 / ubuntu-2404-aarch64_checkpart4_platform-support-arm\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.xpack.sql.qa.multi_cluster_with_security.JdbcMetadataIT (1.5% fail rate in 131 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-03", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123893, "issue_title": "Batched rollover requests hoard heap space", "issue_body": "A master node OOMed because a large number of rollover requests (586 to be precise) were batched into one cluster state update task. When we process all the batched rollover requests, we add a RolloverResult for every request to a list. The issue is that every RolloverResult contains a field for the resulting cluster state, meaning we're holding on to all of those intermediate cluster state objects until the whole batch is finished. From the looks of it, we don't actually need the intermediate cluster states, so we should be able to refactor this to avoid keeping references to the intermediate ones and only return the final one.\nThis specific occurrence was seen on v8.17.2, but it probably goes back to when rollover became batched.", "created_at": "2025-03-03", "closed_at": "2025-03-06", "labels": [">bug", ":Data Management/Indices APIs", "Team:Data Management"], "State": "closed", "Author": "nielsbauman"}
{"issue_number": 123892, "issue_title": "[CI] HeapAttackIT testSortByManyLongsSuccess failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6759 / single-processor-node-tests\nelasticsearch-periodic #6745 / single-processor-node-tests\n\nReproduction Line:\n./gradlew \":test:external-modules:test-esql-heap-attack:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.heap_attack.HeapAttackIT.testEnrichExplosionManyMatches\" -Dtests.seed=25F269D7FF8C8AC1 -Dtests.configure_test_clusters_with_one_processor=true -Dtests.locale=cv-RU -Dtests.timezone=America/Cayenne -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.net.ConnectException: Connection refused\n\nIssue Reasons:\n\n[8.x] 2 failures in test testSortByManyLongsSuccess (2.0% fail rate in 101 executions)\n[8.x] 2 failures in step single-processor-node-tests (50.0% fail rate in 4 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-03", "closed_at": "2025-03-11", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123891, "issue_title": "[Ingest Pipeline] Remove processor can be significantly slower than other processors", "issue_body": "Elasticsearch Version\n8.17.1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nContainer\nProblem Description\nI noticed while debugging a slow ingest pipeline, that a single processor (remove), was ~5-10x slower than the rest of the processors in the pipeline. It seems to happen when with the more fields you tell it to remove.\nI'm reporting this as a bug, because I can write a script processor that is significantly faster at removing these fields.\nSteps to Reproduce\n\nCreate an ingest pipeline that does something.\nAdd a remove processor to the pipeline\nHave the remove processor remove some number of fields.\n\nIn my scenario, some docs have some of the fields, but are also missing some.\nMake sure to set ignore_missing: true\nIt seems that duration scales with the number of fields in the processor.\n\n\nObserve that the remove processor becomes the slowest processor in the pipeline.\n\nHere is the pipeline I'm using (note it is use-case specific)\n\nOriginal Pipeline\nPUT _ingest/pipeline/ip-api-v1\n{\n  \"description\": \"Pipeline for processing ip-api enrichment\",\n  \"version\": 1,\n  \"processors\": [\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_client_geo_org_to_as_org_name\",\n        \"field\": \"_temp.client.geo.org\",\n        \"target_field\": \"client.as.organization.name\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_client_geo_iso_to_code\",\n        \"field\": \"_temp.client.geo.continent_iso_code\",\n        \"target_field\": \"client.geo.continent_code\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.client.geo.lat\",\n        \"target_field\": \"client.geo.location.lat\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_client_geo_lat\",\n        \"if\": \"ctx?._temp?.client?.geo?.lat != null && ctx?._temp?.client?.geo?.lat != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.client.geo.lon\",\n        \"target_field\": \"client.geo.location.lon\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_client_geo_lon\",\n        \"if\": \"ctx?._temp?.client?.geo?.lon != null && ctx?._temp?.client?.geo?.lon != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_destination_geo_org_to_as_org_name\",\n        \"field\": \"_temp.destination.geo.org\",\n        \"target_field\": \"destination.as.organization.name\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_destination_geo_iso_to_code\",\n        \"field\": \"_temp.destination.geo.continent_iso_code\",\n        \"target_field\": \"destination.geo.continent_code\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.destination.geo.lat\",\n        \"target_field\": \"destination.geo.location.lat\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_destination_geo_lat\",\n        \"if\": \"ctx?._temp?.destination?.geo?.lat != null && ctx?._temp?.destination?.geo?.lat != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.destination.geo.lon\",\n        \"target_field\": \"destination.geo.location.lon\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_destination_geo_lon\",\n        \"if\": \"ctx?._temp?.destination?.geo?.lon != null && ctx?._temp?.destination?.geo?.lon != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_host_geo_org_to_as_org_name\",\n        \"field\": \"_temp.host.geo.org\",\n        \"target_field\": \"host.as.organization.name\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_host_geo_iso_to_code\",\n        \"field\": \"_temp.host.geo.continent_iso_code\",\n        \"target_field\": \"host.geo.continent_code\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.host.geo.lat\",\n        \"target_field\": \"host.geo.location.lat\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_host_geo_lat\",\n        \"if\": \"ctx?._temp?.host?.geo?.lat != null && ctx?._temp?.host?.geo?.lat != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.host.geo.lon\",\n        \"target_field\": \"host.geo.location.lon\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_host_geo_lon\",\n        \"if\": \"ctx?._temp?.host?.geo?.lon != null && ctx?._temp?.host?.geo?.lon != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_observer_geo_org_to_as_org_name\",\n        \"field\": \"_temp.observer.geo.org\",\n        \"target_field\": \"observer.as.organization.name\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_observer_geo_iso_to_code\",\n        \"field\": \"_temp.observer.geo.continent_iso_code\",\n        \"target_field\": \"observer.geo.continent_code\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.observer.geo.lat\",\n        \"target_field\": \"observer.geo.location.lat\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_observer_geo_lat\",\n        \"if\": \"ctx?._temp?.observer?.geo?.lat != null && ctx?._temp?.observer?.geo?.lat != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.observer.geo.lon\",\n        \"target_field\": \"observer.geo.location.lon\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_observer_geo_lon\",\n        \"if\": \"ctx?._temp?.observer?.geo?.lon != null && ctx?._temp?.observer?.geo?.lon != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_server_geo_org_to_as_org_name\",\n        \"field\": \"_temp.server.geo.org\",\n        \"target_field\": \"server.as.organization.name\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_server_geo_iso_to_code\",\n        \"field\": \"_temp.server.geo.continent_iso_code\",\n        \"target_field\": \"server.geo.continent_code\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.server.geo.lat\",\n        \"target_field\": \"server.geo.location.lat\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_server_geo_lat\",\n        \"if\": \"ctx?._temp?.server?.geo?.lat != null && ctx?._temp?.server?.geo?.lat != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.server.geo.lon\",\n        \"target_field\": \"server.geo.location.lon\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_server_geo_lon\",\n        \"if\": \"ctx?._temp?.server?.geo?.lon != null && ctx?._temp?.server?.geo?.lon != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_source_geo_org_to_as_org_name\",\n        \"field\": \"_temp.source.geo.org\",\n        \"target_field\": \"source.as.organization.name\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_source_geo_iso_to_code\",\n        \"field\": \"_temp.source.geo.continent_iso_code\",\n        \"target_field\": \"source.geo.continent_code\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.source.geo.lat\",\n        \"target_field\": \"source.geo.location.lat\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_source_geo_lat\",\n        \"if\": \"ctx?._temp?.source?.geo?.lat != null && ctx?._temp?.source?.geo?.lat != 0\"\n      }\n    },\n    {\n      \"rename\": {\n        \"field\": \"_temp.source.geo.lon\",\n        \"target_field\": \"source.geo.location.lon\",\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_rename_source_geo_lon\",\n        \"if\": \"ctx?._temp?.source?.geo?.lon != null && ctx?._temp?.source?.geo?.lon != 0\"\n      }\n    },\n    {\n      \"remove\": {\n        \"ignore_missing\": true,\n        \"tag\": \"ip_api_remove_temp_geo_fields\",\n        \"field\": [\n          \"_temp.client.geo.lon\",\n          \"_temp.client.geo.lat\",\n          \"_temp.destination.geo.lon\",\n          \"_temp.destination.geo.lat\",\n          \"_temp.host.geo.lon\",\n          \"_temp.host.geo.lat\",\n          \"_temp.observer.geo.lon\",\n          \"_temp.observer.geo.lat\",\n          \"_temp.server.geo.lon\",\n          \"_temp.server.geo.lat\",\n          \"_temp.source.geo.lon\",\n          \"_temp.source.geo.lat\"\n        ]\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_client_geo\",\n        \"field\": \"_temp.client.geo\",\n        \"target_field\": \"client.geo\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_destination_geo\",\n        \"field\": \"_temp.destination.geo\",\n        \"target_field\": \"destination.geo\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_host_geo\",\n        \"field\": \"_temp.host.geo\",\n        \"target_field\": \"host.geo\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_observer_geo\",\n        \"field\": \"_temp.observer.geo\",\n        \"target_field\": \"observer.geo\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_server_geo\",\n        \"field\": \"_temp.server.geo\",\n        \"target_field\": \"server.geo\"\n      }\n    },\n    {\n      \"rename\": {\n        \"ignore_missing\": true,\n        \"override\": true,\n        \"tag\": \"ip_api_set_source_geo\",\n        \"field\": \"_temp.source.geo\",\n        \"target_field\": \"source.geo\"\n      }\n    },\n    {\n      \"remove\": {\n        \"ignore_missing\": true,\n        \"tag\": \"ip_api_remove_temp\",\n        \"field\": \"_temp\"\n      }\n    }\n  ],\n  \"on_failure\": [\n    {\n      \"append\": {\n        \"tag\": \"ip_api_set_error_message_on_failure\",\n        \"field\": \"error.message\",\n        \"value\": [\n          \"{{{ _ingest.on_failure_message }}}\"\n        ]\n      }\n    },\n    {\n      \"remove\": {\n        \"ignore_missing\": true,\n        \"tag\": \"ip_api_remove__temp_on_failure\",\n        \"field\": \"_temp\"\n      }\n    }\n  ]\n}\n\nI ended up rewriting the whole pipeline to a script processor, making the entire pipeline ~3.5x faster.\n\nNew Pipeline\nPUT _ingest/pipeline/ip-api\n{\n  \"description\": \"Pipeline for processing ip-api enrichment\",\n  \"version\": 1,\n  \"processors\": [\n    {\n      \"script\": {\n        \"source\": \"// client\\r\\ndef client_geo = ctx._temp?.client?.geo;\\r\\n\\r\\nif (client_geo != null) {\\r\\n  ctx.client = ctx.client ?: [:];\\r\\n  ctx.client.geo = ctx.client.geo ?: [:];\\r\\n  if (client_geo.org != null) {\\r\\n    ctx.client.as = ctx.client.as ?: [:];\\r\\n    ctx.client.as.organization = ctx.client.as.organization ?: [:];\\r\\n    ctx.client.as.organization.name = client_geo.org;\\r\\n    client_geo.remove('org');\\r\\n  }\\r\\n  if (client_geo.continent_iso_code != null) {\\r\\n    ctx.client.geo.continent_code = client_geo.continent_iso_code;\\r\\n    client_geo.remove('continent_iso_code');\\r\\n  }\\r\\n  if (client_geo.lat != null) {\\r\\n    ctx.client.geo.location = ctx.client.geo.location ?: [:];\\r\\n    ctx.client.geo.location.lat = client_geo.lat;\\r\\n    client_geo.remove('lat');\\r\\n  }\\r\\n  if (client_geo.lon != null) {\\r\\n    ctx.client.geo.location = ctx.client.geo.location ?: [:];\\r\\n    ctx.client.geo.location.lon = client_geo.lon;\\r\\n    client_geo.remove('lon');\\r\\n  }\\r\\n\\r\\n  for (entry in client_geo.entrySet()) {\\r\\n    ctx.client.geo[entry.getKey()] = entry.getValue();\\r\\n  }\\r\\n}\\r\\n\\r\\n// destination\\r\\ndef destination_geo = ctx._temp?.destination?.geo;\\r\\n\\r\\nif (destination_geo != null) {\\r\\n  ctx.destination = ctx.destination ?: [:];\\r\\n  ctx.destination.geo = ctx.destination.geo ?: [:];\\r\\n  if (destination_geo.org != null) {\\r\\n    ctx.destination.as = ctx.destination.as ?: [:];\\r\\n    ctx.destination.as.organization = ctx.destination.as.organization ?: [:];\\r\\n    ctx.destination.as.organization.name = destination_geo.org;\\r\\n    destination_geo.remove('org');\\r\\n  }\\r\\n  if (destination_geo.continent_iso_code != null) {\\r\\n    ctx.destination.geo.continent_code = destination_geo.continent_iso_code;\\r\\n    destination_geo.remove('continent_iso_code');\\r\\n  }\\r\\n  if (destination_geo.lat != null) {\\r\\n    ctx.destination.geo.location = ctx.destination.geo.location ?: [:];\\r\\n    ctx.destination.geo.location.lat = destination_geo.lat;\\r\\n    destination_geo.remove('lat');\\r\\n  }\\r\\n  if (destination_geo.lon != null) {\\r\\n    ctx.destination.geo.location = ctx.destination.geo.location ?: [:];\\r\\n    ctx.destination.geo.location.lon = destination_geo.lon;\\r\\n    destination_geo.remove('lon');\\r\\n  }\\r\\n\\r\\n  for (entry in destination_geo.entrySet()) {\\r\\n    ctx.destination.geo[entry.getKey()] = entry.getValue();\\r\\n  }\\r\\n}\\r\\n\\r\\n// host\\r\\ndef host_geo = ctx._temp?.host?.geo;\\r\\n\\r\\nif (host_geo != null) {\\r\\n  ctx.host = ctx.host ?: [:];\\r\\n  ctx.host.geo = ctx.host.geo ?: [:];\\r\\n  if (host_geo.org != null) {\\r\\n    ctx.host.as = ctx.host.as ?: [:];\\r\\n    ctx.host.as.organization = ctx.host.as.organization ?: [:];\\r\\n    ctx.host.as.organization.name = host_geo.org;\\r\\n    host_geo.remove('org');\\r\\n  }\\r\\n  if (host_geo.continent_iso_code != null) {\\r\\n    ctx.host.geo.continent_code = host_geo.continent_iso_code;\\r\\n    host_geo.remove('continent_iso_code');\\r\\n  }\\r\\n  if (host_geo.lat != null) {\\r\\n    ctx.host.geo.location = ctx.host.geo.location ?: [:];\\r\\n    ctx.host.geo.location.lat = host_geo.lat;\\r\\n    host_geo.remove('lat');\\r\\n  }\\r\\n  if (host_geo.lon != null) {\\r\\n    ctx.host.geo.location = ctx.host.geo.location ?: [:];\\r\\n    ctx.host.geo.location.lon = host_geo.lon;\\r\\n    host_geo.remove('lon');\\r\\n  }\\r\\n\\r\\n  for (entry in host_geo.entrySet()) {\\r\\n    ctx.host.geo[entry.getKey()] = entry.getValue();\\r\\n  }\\r\\n}\\r\\n\\r\\n// observer\\r\\ndef observer_geo = ctx._temp?.observer?.geo;\\r\\n\\r\\nif (observer_geo != null) {\\r\\n  ctx.observer = ctx.observer ?: [:];\\r\\n  ctx.observer.geo = ctx.observer.geo ?: [:];\\r\\n  if (observer_geo.org != null) {\\r\\n    ctx.observer.as = ctx.observer.as ?: [:];\\r\\n    ctx.observer.as.organization = ctx.observer.as.organization ?: [:];\\r\\n    ctx.observer.as.organization.name = observer_geo.org;\\r\\n    observer_geo.remove('org');\\r\\n  }\\r\\n  if (observer_geo.continent_iso_code != null) {\\r\\n    ctx.observer.geo.continent_code = observer_geo.continent_iso_code;\\r\\n    observer_geo.remove('continent_iso_code');\\r\\n  }\\r\\n  if (observer_geo.lat != null) {\\r\\n    ctx.observer.geo.location = ctx.observer.geo.location ?: [:];\\r\\n    ctx.observer.geo.location.lat = observer_geo.lat;\\r\\n    observer_geo.remove('lat');\\r\\n  }\\r\\n  if (observer_geo.lon != null) {\\r\\n    ctx.observer.geo.location = ctx.observer.geo.location ?: [:];\\r\\n    ctx.observer.geo.location.lon = observer_geo.lon;\\r\\n    observer_geo.remove('lon');\\r\\n  }\\r\\n\\r\\n  for (entry in observer_geo.entrySet()) {\\r\\n    ctx.observer.geo[entry.getKey()] = entry.getValue();\\r\\n  }\\r\\n}\\r\\n\\r\\n// server\\r\\ndef server_geo = ctx._temp?.server?.geo;\\r\\n\\r\\nif (server_geo != null) {\\r\\n  ctx.server = ctx.server ?: [:];\\r\\n  ctx.server.geo = ctx.server.geo ?: [:];\\r\\n  if (server_geo.org != null) {\\r\\n    ctx.server.as = ctx.server.as ?: [:];\\r\\n    ctx.server.as.organization = ctx.server.as.organization ?: [:];\\r\\n    ctx.server.as.organization.name = server_geo.org;\\r\\n    server_geo.remove('org');\\r\\n  }\\r\\n  if (server_geo.continent_iso_code != null) {\\r\\n    ctx.server.geo.continent_code = server_geo.continent_iso_code;\\r\\n    server_geo.remove('continent_iso_code');\\r\\n  }\\r\\n  if (server_geo.lat != null) {\\r\\n    ctx.server.geo.location = ctx.server.geo.location ?: [:];\\r\\n    ctx.server.geo.location.lat = server_geo.lat;\\r\\n    server_geo.remove('lat');\\r\\n  }\\r\\n  if (server_geo.lon != null) {\\r\\n    ctx.server.geo.location = ctx.server.geo.location ?: [:];\\r\\n    ctx.server.geo.location.lon = server_geo.lon;\\r\\n    server_geo.remove('lon');\\r\\n  }\\r\\n\\r\\n  for (entry in server_geo.entrySet()) {\\r\\n    ctx.server.geo[entry.getKey()] = entry.getValue();\\r\\n  }\\r\\n}\\r\\n\\r\\n// source\\r\\ndef source_geo = ctx._temp?.source?.geo;\\r\\n\\r\\nif (source_geo != null) {\\r\\n  ctx.source = ctx.source ?: [:];\\r\\n  ctx.source.geo = ctx.source.geo ?: [:];\\r\\n  if (source_geo.org != null) {\\r\\n    ctx.source.as = ctx.source.as ?: [:];\\r\\n    ctx.source.as.organization = ctx.source.as.organization ?: [:];\\r\\n    ctx.source.as.organization.name = source_geo.org;\\r\\n    source_geo.remove('org');\\r\\n  }\\r\\n  if (source_geo.continent_iso_code != null) {\\r\\n    ctx.source.geo.continent_code = source_geo.continent_iso_code;\\r\\n    source_geo.remove('continent_iso_code');\\r\\n  }\\r\\n  if (source_geo.lat != null) {\\r\\n    ctx.source.geo.location = ctx.source.geo.location ?: [:];\\r\\n    ctx.source.geo.location.lat = source_geo.lat;\\r\\n    source_geo.remove('lat');\\r\\n  }\\r\\n  if (source_geo.lon != null) {\\r\\n    ctx.source.geo.location = ctx.source.geo.location ?: [:];\\r\\n    ctx.source.geo.location.lon = source_geo.lon;\\r\\n    source_geo.remove('lon');\\r\\n  }\\r\\n\\r\\n  for (entry in source_geo.entrySet()) {\\r\\n    ctx.source.geo[entry.getKey()] = entry.getValue();\\r\\n  }\\r\\n}\\r\\n\\r\\nctx.remove('_temp');\\r\\n\",\n        \"tag\": \"ip_api_remap_script_processor\"\n      }\n    }\n  ],\n  \"on_failure\": [\n    {\n      \"append\": {\n        \"tag\": \"ip_api_set_error_message_on_failure\",\n        \"field\": \"error.message\",\n        \"value\": [\n          \"{{{ _ingest.on_failure_message }}}\"\n        ]\n      }\n    },\n    {\n      \"remove\": {\n        \"ignore_missing\": true,\n        \"tag\": \"ip_api_remove__temp_on_failure\",\n        \"field\": \"_temp\"\n      }\n    }\n  ]\n}\n\nLogs (if relevant)\nI've attached a CSV of the pipeline metrics I was using, the remove:ip_api_remove_temp_geo_fields, shows a time of ~5000 ms, while the majority of other processors hover around ~500ms.\npipeline_processor_metrics.csv", "created_at": "2025-03-03", "closed_at": "2025-03-24", "labels": [">bug", ":Data Management/Ingest Node", "Team:Data Management"], "State": "closed", "Author": "BenB196"}
{"issue_number": 123872, "issue_title": "Heavy heap usage from security-related automatons", "issue_body": "Investigating a master-node OOME in 8.17 I discovered over 1.2GiB of heap (out of an available 2GiB) consumed by just under 600 stored thread contexts:\n\n(NB sorting by retained heap so the 580 instances off the top of this screenshot are each responsible for retaining at least 2241696B)\nIt's basically all in the _authz_info transient header:\nClass Name                                                                                              | Shallow Heap | Retained Heap\n---------------------------------------------------------------------------------------------------------------------------------------\norg.elasticsearch.common.util.concurrent.ThreadContext$ThreadContextStruct @ 0x9bace400                 |           40 |     2,491,944\n|- transientHeaders java.util.HashMap @ 0x9bace4e8                                                      |           48 |     2,491,712\n|  |- table java.util.HashMap$Node[8] @ 0x9bace518                                                      |           48 |     2,491,648\n|  |  |- [6] java.util.HashMap$Node @ 0x9bace568                                                        |           32 |     2,422,632\n|  |  |  |- value org.elasticsearch.xpack.security.authz.RBACEngine$RBACAuthorizationInfo @ 0x9bace588  |           24 |     2,422,600\n|  |  |  |- key java.lang.String @ 0x8e1d16b0  _authz_info                                              |           24 |            56\n|  |  |  |- <class> class java.util.HashMap$Node @ 0x89dc8d98 System Class                              |            8 |            32\n|  |  |  '- Total: 3 entries                                                                            |              |              \n|  |  |- [1] java.util.HashMap$Node @ 0x94ea3f98                                                        |           32 |           272\n|  |  |- [2] java.util.HashMap$Node @ 0x94ea3f78                                                        |           32 |            32\n|  |  |- [7] java.util.HashMap$Node @ 0x9bace548                                                        |           32 |            32\n|  |  |- class java.util.HashMap$Node[] @ 0x89dc8e20                                                    |            0 |             0\n|  |  '- Total: 5 entries                                                                               |              |              \n|  |- <class> class java.util.HashMap @ 0x8690be10 System Class                                         |           40 |            80\n|  |- entrySet java.util.HashMap$EntrySet @ 0x94ea40a8                                                  |           16 |            16\n|  '- Total: 3 entries                                                                                  |              |              \n|- <class> class org.elasticsearch.common.util.concurrent.ThreadContext$ThreadContextStruct @ 0x8a5f3d50|           16 |         1,376\n|- requestHeaders java.util.HashMap @ 0x9bace428                                                        |           48 |           192\n|- responseHeaders java.util.Collections$EmptyMap @ 0x89d2e040                                          |           24 |            24\n'- Total: 4 entries                                                                                     |              |              \n---------------------------------------------------------------------------------------------------------------------------------------\n\nThe bulk of this looks to relate to the kibana-.kibana application privilege with over 3k patterns and many hundreds of kiB burned on the transitions in the associated automaton.\nClass Name                                                                                                                               | Shallow Heap | Retained Heap\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------\norg.elasticsearch.xpack.security.authz.RBACEngine$RBACAuthorizationInfo @ 0x9bace588                                                     |           24 |     2,422,600\n|- <class> class org.elasticsearch.xpack.security.authz.RBACEngine$RBACAuthorizationInfo @ 0x8fc46db8                                    |            8 |            32\n|- info java.util.Collections$SingletonMap @ 0x94ea3f10                                                                                  |           40 |            40\n|- authenticatedUserAuthorizationInfo org.elasticsearch.xpack.security.authz.RBACEngine$RBACAuthorizationInfo @ 0x94ea3f38               |           24 |            64\n|- role org.elasticsearch.xpack.core.security.authz.permission.SimpleRole @ 0x9bace5a0                                                   |           48 |     2,421,984\n|  |- <class> class org.elasticsearch.xpack.core.security.authz.permission.SimpleRole @ 0x8b10fa10                                       |           16 |           104\n|  |- workflowsRestriction org.elasticsearch.xpack.core.security.authz.restriction.WorkflowsRestriction @ 0x8c395e30                     |           24 |            24\n|  |- runAs org.elasticsearch.xpack.core.security.authz.permission.RunAsPermission @ 0x94ea0df8                                          |           24 |           224\n|  |- remoteIndicesPermission org.elasticsearch.xpack.core.security.authz.permission.RemoteIndicesPermission @ 0x94ea0ed8                |           16 |        12,232\n|  |- remoteClusterPermissions org.elasticsearch.xpack.core.security.authz.permission.RemoteClusterPermissions @ 0x94ea3ea0              |           16 |            96\n|  |- hasPrivilegesCacheReference java.util.concurrent.atomic.AtomicReference @ 0x94ea3f00                                               |           16 |            16\n|  |- names java.lang.String[9] @ 0x9bace5d0                                                                                             |           56 |           488\n|  |- cluster org.elasticsearch.xpack.core.security.authz.permission.ClusterPermission @ 0x9bace608                                      |           24 |        21,112\n|  |- indices org.elasticsearch.xpack.core.security.authz.permission.IndicesPermission @ 0x9bad3880                                      |           32 |        68,632\n|  |- application org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission @ 0x9bae2800                              |           16 |     2,388,256\n|  |  |- <class> class org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission @ 0x8b10db38                         |           16 |           792\n|  |  |- permissions java.util.ImmutableCollections$ListN @ 0x9bae2810                                                                   |           24 |     2,388,240\n|  |  |  |- <class> class java.util.ImmutableCollections$ListN @ 0x89dca118 System Class                                                 |            8 |            32\n|  |  |  |- elements java.lang.Object[9] @ 0x9bae2828                                                                                    |           56 |     2,388,216\n|  |  |  |  |- class java.lang.Object[] @ 0x910517b0                                                                                     |            0 |             0\n|  |  |  |  |- [8] org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x9bae2860             |           32 |       234,944\n|  |  |  |  |- [7] org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x9bb1bd58             |           32 |         1,744\n|  |  |  |  |- [6] org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x9bb1c5a8             |           32 |            88\n|  |  |  |  |- [5] org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x9bb1c780             |           32 |       109,280\n|  |  |  |  |- [4] org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x9bb44ae8             |           32 |       916,608\n|  |  |  |  |- [3] org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x9bb89b78             |           32 |         2,856\n|  |  |  |  |- [2] org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x9bb8a6e0             |           32 |         2,168\n|  |  |  |  |- [1] org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x9bb8af58             |           32 |       219,672\n|  |  |  |  |- [0] org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x9bbc7118             |           32 |       899,976\n|  |  |  |  |  |- <class> class org.elasticsearch.xpack.core.security.authz.permission.ApplicationPermission$PermissionEntry @ 0x8b00fe80|            8 |            40\n|  |  |  |  |  |- application org.elasticsearch.xpack.core.security.support.Automatons$1 @ 0x94ea02e8                                    |           24 |         2,080\n|  |  |  |  |  |  |- <class> class org.elasticsearch.xpack.core.security.support.Automatons$1 @ 0x8aeb4948                               |            0 |             0\n|  |  |  |  |  |  |- val$runAutomaton org.apache.lucene.util.automaton.CharacterRunAutomaton @ 0x94ea0300                                |           40 |         2,000\n|  |  |  |  |  |  |- val$toString java.lang.String @ 0x94ea0ad0  kibana-.kibana                                                          |           24 |            56\n|  |  |  |  |  |  '- Total: 3 entries                                                                                                    |              |              \n|  |  |  |  |  |- resourceNames java.util.HashSet @ 0x94ea0b08                                                                           |           16 |           320\n|  |  |  |  |  |- resourceAutomaton org.apache.lucene.util.automaton.Automaton @ 0x94ea0bd8                                              |           48 |           544\n|  |  |  |  |  |- privilege org.elasticsearch.xpack.core.security.authz.privilege.ApplicationPrivilege @ 0x9bbc7138                      |           32 |       897,000\n|  |  |  |  |  |  |- <class> class org.elasticsearch.xpack.core.security.authz.privilege.ApplicationPrivilege @ 0x8b01aa60               |           24 |         4,312\n|  |  |  |  |  |  |- application java.lang.String @ 0x96f28dc0  kibana-.kibana                                                           |           24 |            56\n|  |  |  |  |  |  |- automaton org.apache.lucene.util.automaton.Automaton @ 0x98343500                                                   |           48 |        84,792\n|  |  |  |  |  |  |- name java.util.HashSet @ 0x9bbc7158                                                                                 |           16 |           248\n|  |  |  |  |  |  |- predicate org.elasticsearch.xpack.core.security.support.Automatons$1 @ 0x9bbc7218                                   |           24 |       884,616\n|  |  |  |  |  |  |- patterns java.lang.String[3008] @ 0x9bbc79c8                                                                        |       12,048 |        12,048\n|  |  |  |  |  |  '- Total: 6 entries                                                                                                    |              |              \n|  |  |  |  |  '- Total: 5 entries                                                                                                       |              |              \n|  |  |  |  '- Total: 10 entries                                                                                                         |              |              \n|  |  |  '- Total: 2 entries                                                                                                             |              |              \n|  |  '- Total: 2 entries                                                                                                                |              |              \n|  '- Total: 10 entries                                                                                                                  |              |              \n'- Total: 4 entries                                                                                                                      |              |              \n------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nThis sure seems like something with room for improvement. Could we for instance share these automata across contexts better? Does it really make sense to build an automaton for matching such a large pattern list (where none of the patterns includes any wildcards) rather than say using HashSet#contains. Do we really need such a large pattern list anyway?\nEven if we can't obviously optimize this right away, a bigger problem IMO is that we are not tracking this memory usage anywhere so it's invisible and there's no backpressure or load-shedding or autoscaling if it gets too much.", "created_at": "2025-03-03", "closed_at": null, "labels": [">bug", ":Security/Security", "Team:Security"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 123871, "issue_title": "500 error in multi match query for field without position data", "issue_body": "Elasticsearch Version\n8.x / 9.x\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nUsing the mapping and analyzers described in the Steps to Reproduce section returns a 500 status code:\n{\n    \"error\": {\n        \"root_cause\": [\n            {\n                \"type\": \"illegal_state_exception\",\n                \"reason\": \"field \\\"content.joined\\\" was indexed without position data; cannot run MultiPhraseQuery (phrase=content.joined:\\\"(hello helloworld) world\\\")\",\n                \"stack_trace\": \"org.elasticsearch.ElasticsearchException$1: field \\\"content.joined\\\" was indexed without position data; cannot run MultiPhraseQuery (phrase=content.joined:\\\"(hello helloworld) world\\\")\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:725)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:167)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:707)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:639)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.build(RestResponse.java:202)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:161)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:122)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:54)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.rest.action.RestCancellableNodeClient$1.onFailure(RestCancellableNodeClient.java:97)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:78)\\n\n    },\n    \"status\": 500\n}\nThis is unexpected, as this should be a 400 status code instead.\nRemoving the bigram analyzer from the mapping below results in a 400 when doing the same query.\nSteps to Reproduce\nPUT test-multi-match\n{\n    \"mappings\": {\n      \"properties\": {\n        \"content\": {\n          \"type\": \"text\",\n          \"fields\": {\n            \"joined\": {\n              \"type\": \"text\",\n              \"index_options\": \"freqs\",\n              \"search_analyzer\": \"q_text_bigram\"\n            }\n          }\n        }\n      }\n    },\n    \"settings\": {\n        \"analysis\": {\n          \"filter\": {\n            \"bigram_joiner_unigrams\": {\n              \"max_shingle_size\": \"2\",\n              \"token_separator\": \"\",\n              \"output_unigrams\": \"true\",\n              \"type\": \"shingle\"\n            }\n          },\n          \"analyzer\": {          \n            \"q_text_bigram\": {\n              \"filter\": [\n                \"bigram_joiner_unigrams\"\n              ],\n              \"type\": \"custom\",\n              \"tokenizer\": \"standard\"\n            }    \n          }\n        }\n      }    \n    }\n}\n\nPUT test-multi-match/_doc/1\n{\n  \"content\": \"hello world\"\n}\n\nReturns a 500 status code when executing:\nGET test-multi-match/_search?error_trace=true\n{\n  \"query\": {\n    \"multi_match\": {\n      \"query\": \"hello world\",\n      \"type\": \"phrase\",\n      \"fields\": [\"content.joined\"]\n    }\n  }\n}\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-03", "closed_at": null, "labels": [">bug", ":Search Foundations/Mapping", "priority:high", "Team:Search Foundations"], "State": "open", "Author": "carlosdelest"}
{"issue_number": 123853, "issue_title": "[CI] SecondaryAuthActionsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6942 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #6885 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #6845 / sles-12_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 3 failures in class org.elasticsearch.secondary.auth.actions.SecondaryAuthActionsIT (0.6% fail rate in 490 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (23.1% fail rate in 13 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-03", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123846, "issue_title": "[CI] QueryableReservedRolesIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6963 / almalinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #6863 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #6834 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #6827 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #6815 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #6815 / almalinux-9_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 6 failures in class org.elasticsearch.xpack.security.QueryableReservedRolesIT (0.9% fail rate in 687 executions)\n[8.18] 2 failures in step almalinux-9_platform-support-unix (10.5% fail rate in 19 executions)\n[8.18] 5 failures in pipeline elasticsearch-periodic-platform-support (26.3% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-03", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123844, "issue_title": "[CI] ClassificationIT testWithOnlyTrainingRowsAndTrainingPercentIsHundred failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6885 / openjdk17_checkpart4_java-matrix\nelasticsearch-periodic #6794 / openjdk17_checkpart4_java-fips-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:native-multi-node-tests:javaRestTest\" --tests \"org.elasticsearch.xpack.ml.integration.ClassificationIT.testWithOnlyTrainingRowsAndTrainingPercentIsHundred\" -Dtests.seed=685E10DD60FE3265 -Dtests.locale=fr-BL -Dtests.timezone=Asia/Singapore -Druntime.java=17\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Stats were: {\"id\":\"classification_only_training_data_and_training_percent_is_100\",\"state\":\"started\",\"progress\":[{\"phase\":\"reindexing\",\"progress_percent\":100},{\"phase\":\"loading_data\",\"progress_percent\":100},{\"phase\":\"feature_selection\",\"progress_percent\":100},{\"phase\":\"coarse_parameter_search\",\"progress_percent\":87},{\"phase\":\"fine_tuning_parameters\",\"progress_percent\":0},{\"phase\":\"final_training\",\"progress_percent\":0},{\"phase\":\"writing_results\",\"progress_percent\":0},{\"phase\":\"inference\",\"progress_percent\":0}],\"data_counts\":{\"training_docs_count\":300,\"test_docs_count\":0,\"skipped_docs_count\":0},\"memory_usage\":{\"timestamp\":1741525954640,\"peak_usage_bytes\":32324,\"status\":\"ok\"},\"node\":{\"id\":\"JgorkFYsTeSRF6jUoUGBSg\",\"name\":\"javaRestTest-2\",\"ephemeral_id\":\"WCEKbHWCRH2LdwAvD9aNlQ\",\"transport_address\":\"127.0.0.1:41241\",\"attributes\":{\"testattr\":\"test\",\"ml.allocated_processors\":\"32\",\"ml.max_jvm_size\":\"536870912\",\"ml.config_version\":\"12.0.0\",\"ml.machine_memory\":\"1266042101\n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 failures in test testWithOnlyTrainingRowsAndTrainingPercentIsHundred (0.4% fail rate in 542 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (14.3% fail rate in 14 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-03", "closed_at": "2025-04-07", "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123843, "issue_title": "[CI] ClassificationIT testWithOnlyTrainingRowsAndTrainingPercentIsFifty_DependentVariableIsInteger failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6841 / openjdk17_checkpart4_java-fips-matrix\nelasticsearch-periodic #6750 / openjdk17_checkpart4_java-matrix\nelasticsearch-periodic #6722 / openjdk21_checkpart4_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:native-multi-node-tests:javaRestTest\" --tests \"org.elasticsearch.xpack.ml.integration.ClassificationIT.testWithOnlyTrainingRowsAndTrainingPercentIsFifty_DependentVariableIsInteger\" -Dtests.seed=28AB328EDCC20E90 -Dtests.locale=sn-ZW -Dtests.timezone=America/Buenos_Aires -Druntime.java=17 -Dtests.fips.enabled=true\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Stats were: {\"id\":\"classification_training_percent_is_50_integer\",\"state\":\"started\",\"progress\":[{\"phase\":\"reindexing\",\"progress_percent\":100},{\"phase\":\"loading_data\",\"progress_percent\":100},{\"phase\":\"feature_selection\",\"progress_percent\":100},{\"phase\":\"coarse_parameter_search\",\"progress_percent\":89},{\"phase\":\"fine_tuning_parameters\",\"progress_percent\":0},{\"phase\":\"final_training\",\"progress_percent\":0},{\"phase\":\"writing_results\",\"progress_percent\":0},{\"phase\":\"inference\",\"progress_percent\":0}],\"data_counts\":{\"training_docs_count\":150,\"test_docs_count\":0,\"skipped_docs_count\":0},\"memory_usage\":{\"timestamp\":1741355681802,\"peak_usage_bytes\":19264,\"status\":\"ok\"},\"node\":{\"id\":\"OP3iVjfVTyOpRBGudA3Q0g\",\"name\":\"javaRestTest-2\",\"ephemeral_id\":\"bQglAw5XTemVuA-y4K57Yg\",\"transport_address\":\"127.0.0.1:33633\",\"attributes\":{\"ml.allocated_processors\":\"32\",\"xpack.installed\":\"true\",\"transform.config_version\":\"10.0.0\",\"testattr\":\"test\",\"ml.allocated_processors_double\":\"32.0\",\"ml.m\n[truncated]\n\nIssue Reasons:\n\n[8.17] 3 failures in test testWithOnlyTrainingRowsAndTrainingPercentIsFifty_DependentVariableIsInteger (0.6% fail rate in 527 executions)\n[8.17] 3 failures in pipeline elasticsearch-periodic (16.7% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-03", "closed_at": "2025-04-07", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123834, "issue_title": "[CI] JdbcDocFrozenCsvSpecIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6842 / single-processor-node-tests\nelasticsearch-periodic-platform-support #6733 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #6712 / rhel-8_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 3 failures in class org.elasticsearch.xpack.sql.qa.single_node.JdbcDocFrozenCsvSpecIT (0.5% fail rate in 645 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic-platform-support (11.1% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-13", "labels": [">test-failure", ":Data Management/Indices APIs", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123833, "issue_title": "[CI] InferenceGetModelsWithElasticInferenceServiceIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6958 / rocky-8_platform-support-unix\nelasticsearch-periodic-platform-support #6817 / sles-15_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 2 failures in class org.elasticsearch.xpack.inference.InferenceGetModelsWithElasticInferenceServiceIT (0.4% fail rate in 555 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (11.1% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-13", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123832, "issue_title": "[CI] EsqlActionBreakerIT testProjectWhere failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6744 / openjdk21_checkpart3_java-matrix\nelasticsearch-periodic #6737 / single-processor-node-tests\nelasticsearch-periodic #6730 / openjdk22_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #6719 / almalinux-8-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic #6723 / concurrent-search-tests\nelasticsearch-periodic #6723 / single-processor-node-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testDefaultTruncationSizeSetting\" -Dtests.seed=F268B0FC98EAF54D -Dtests.locale=ar-LB -Dtests.timezone=Pacific/Wake -Druntime.java=21\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s3\nExpected: <0L>\n     but: was <64L>\n\nIssue Reasons:\n\n[8.18] 2 consecutive failures in step single-processor-node-tests\n[8.18] 6 failures in test testProjectWhere (8.0% fail rate in 75 executions)\n[8.18] 2 failures in step single-processor-node-tests (100.0% fail rate in 2 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123831, "issue_title": "[CI] EsqlActionBreakerIT testStringLength failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6744 / openjdk21_checkpart3_java-matrix\nelasticsearch-periodic #6737 / single-processor-node-tests\nelasticsearch-periodic #6730 / openjdk22_checkpart3_java-matrix\nelasticsearch-periodic #6723 / concurrent-search-tests\nelasticsearch-periodic #6723 / single-processor-node-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testDefaultTruncationSizeSetting\" -Dtests.seed=F268B0FC98EAF54D -Dtests.locale=ar-LB -Dtests.timezone=Pacific/Wake -Druntime.java=21\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s3\nExpected: <0L>\n     but: was <64L>\n\nIssue Reasons:\n\n[8.18] 2 consecutive failures in step single-processor-node-tests\n[8.18] 5 failures in test testStringLength (6.7% fail rate in 75 executions)\n[8.18] 2 failures in step single-processor-node-tests (100.0% fail rate in 2 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123830, "issue_title": "[CI] EsqlActionBreakerIT testFromStatsGroupingAvgWithAliases failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6744 / openjdk21_checkpart3_java-matrix\nelasticsearch-periodic #6737 / single-processor-node-tests\nelasticsearch-periodic #6730 / openjdk22_checkpart3_java-matrix\nelasticsearch-periodic #6723 / concurrent-search-tests\nelasticsearch-periodic #6723 / single-processor-node-tests\nelasticsearch-periodic-platform-support #6705 / almalinux-9_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testDefaultTruncationSizeSetting\" -Dtests.seed=F268B0FC98EAF54D -Dtests.locale=ar-LB -Dtests.timezone=Pacific/Wake -Druntime.java=21\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s3\nExpected: <0L>\n     but: was <64L>\n\nIssue Reasons:\n\n[8.18] 2 consecutive failures in step single-processor-node-tests\n[8.18] 6 failures in test testFromStatsGroupingAvgWithAliases (5.9% fail rate in 101 executions)\n[8.18] 2 failures in step single-processor-node-tests (66.7% fail rate in 3 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic (80.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123817, "issue_title": "[CI] GeoJdbcCsvSpecIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6748 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #6706 / sles-15_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.xpack.sql.qa.multi_node.GeoJdbcCsvSpecIT (1.2% fail rate in 171 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (28.6% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123816, "issue_title": "[CI] MockDenseInferenceServiceIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6794 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #6756 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #6665 / rocky-9_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 3 failures in class org.elasticsearch.xpack.inference.MockDenseInferenceServiceIT (0.5% fail rate in 564 executions)\n[9.0] 2 failures in step ubuntu-2004_platform-support-unix (13.3% fail rate in 15 executions)\n[9.0] 3 failures in pipeline elasticsearch-periodic-platform-support (15.8% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-13", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123815, "issue_title": "[CI] RestEsqlIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6965 / rocky-9_platform-support-unix\nelasticsearch-pull-request #61211 / part-3\nelasticsearch-periodic-platform-support #6808 / sles-15_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 3 failures in class org.elasticsearch.xpack.esql.qa.single_node.RestEsqlIT (0.5% fail rate in 627 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (10.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-12", "labels": [":Delivery/Build", ">test-failure", "Team:Analytics", "Team:Delivery", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123814, "issue_title": "[CI] CrossClusterSearchUnavailableClusterIT testSkipUnavailableDependsOnSeeds failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6738 / openjdk17_checkpart1_java-fips-matrix\nelasticsearch-periodic #6703 / openjdk17_checkpart1_java-fips-matrix\n\nReproduction Line:\n./gradlew \":qa:ccs-unavailable-clusters:javaRestTest\" --tests \"org.elasticsearch.search.CrossClusterSearchUnavailableClusterIT.testSkipUnavailableDependsOnSeeds\" -Dtests.seed=8621B408D6E00BB2 -Dtests.locale=is-Latn-IS -Dtests.timezone=America/Montserrat -Druntime.java=17 -Dtests.fips.enabled=true\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: resource was not cleaned up before it was garbage-collected.\nRecent access records: \n#1:\n\tin [elasticsearch[node0][transport_worker][T#12]][testSearchSkipUnavailable]\n\torg.elasticsearch.transport.OutboundHandler.lambda$sendResponse$1(OutboundHandler.java:158)\n\torg.elasticsearch.core.IOUtils.close(IOUtils.java:71)\n\torg.elasticsearch.core.IOUtils.close(IOUtils.java:87)\n\torg.elasticsearch.core.IOUtils.close(IOUtils.java:63)\n\torg.elasticsearch.core.Releasables.close(Releasables.java:73)\n\torg.elasticsearch.core.Releasables.close(Releasables.java:41)\n\torg.elasticsearch.core.Releasables$3.close(Releasables.java:129)\n\torg.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:217)\n\torg.elasticsearch.transport.OutboundHandler$1.onResponse(OutboundHandler.java:257)\n\torg.elasticsearch.transport.OutboundHandler$1.onResponse(OutboundHandler.java:253)\n\torg.elasticsearch.transport.netty4.Netty4Utils.lambda$addLis\n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 failures in test testSkipUnavailableDependsOnSeeds (1.3% fail rate in 159 executions)\n[8.x] 2 failures in step openjdk17_checkpart1_java-fips-matrix (33.3% fail rate in 6 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (33.3% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-14", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123811, "issue_title": "[CI] EsqlActionBreakerIT testProjectRenameEval failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6722 / almalinux-8-aarch64_checkpart3_platform-support-arm\nelasticsearch-pull-request #59993 / part-3-windows\nelasticsearch-pull-request #59994 / part-3-entitlements\nelasticsearch-pull-request #59876 / part-3\nelasticsearch-periodic-platform-support #6625 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testFromStatsGroupingByDate\" -Dtests.seed=DC08795E8BED48F -Dtests.locale=es-GQ -Dtests.timezone=SystemV/YST9 -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s2\nExpected: <0L>\n     but: was <32L>\n\nIssue Reasons:\n\n[main] 5 failures in test testProjectRenameEval (0.7% fail rate in 678 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (14.3% fail rate in 14 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (1.3% fail rate in 230 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123810, "issue_title": "[CI] EsqlActionBreakerIT testFromStatsEvalWithPragma failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6722 / almalinux-8-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic #6726 / openjdk21_entitlements_true_checkpart3_java-matrix\nelasticsearch-pull-request #59993 / part-3-windows\nelasticsearch-pull-request #59994 / part-3-entitlements\nelasticsearch-periodic-platform-support #6625 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testFromStatsGroupingByDate\" -Dtests.seed=DC08795E8BED48F -Dtests.locale=es-GQ -Dtests.timezone=SystemV/YST9 -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s2\nExpected: <0L>\n     but: was <32L>\n\nIssue Reasons:\n\n[main] 5 failures in test testFromStatsEvalWithPragma (0.7% fail rate in 671 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (14.3% fail rate in 14 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.9% fail rate in 229 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123809, "issue_title": "[CI] EsqlActionBreakerIT testDefaultTruncationSizeSetting failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6744 / openjdk21_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #6719 / rocky-8_platform-support-unix\nelasticsearch-periodic #6730 / openjdk22_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #6719 / almalinux-8-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic #6723 / concurrent-search-tests\nelasticsearch-periodic #6723 / single-processor-node-tests\nelasticsearch-periodic-platform-support #6705 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic #6716 / openjdk17_checkpart3_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testDefaultTruncationSizeSetting\" -Dtests.seed=F268B0FC98EAF54D -Dtests.locale=ar-LB -Dtests.timezone=Pacific/Wake -Druntime.java=21\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s3\nExpected: <0L>\n     but: was <64L>\n\nIssue Reasons:\n\n[8.18] 8 failures in test testDefaultTruncationSizeSetting (7.2% fail rate in 111 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic (80.0% fail rate in 5 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123808, "issue_title": "[CI] EsqlActionBreakerIT testFromStatsGroupingByDate failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6722 / almalinux-8-aarch64_checkpart3_platform-support-arm\nelasticsearch-pull-request #59994 / part-3-entitlements\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testFromStatsGroupingByDate\" -Dtests.seed=DC08795E8BED48F -Dtests.locale=es-GQ -Dtests.timezone=SystemV/YST9 -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s2\nExpected: <0L>\n     but: was <32L>\n\nIssue Reasons:\n\n[main] 2 failures in test testFromStatsGroupingByDate (2.1% fail rate in 97 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123807, "issue_title": "[CI] DocsClientYamlTestSuiteIT test {yaml=reference/rest-api/security/invalidate-tokens/line_205} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6799 / almalinux-9_platform-support-unix\nelasticsearch-periodic #6730 / concurrent-search-tests\n\nReproduction Line:\n./gradlew \":docs:yamlRestTest\" --tests \"org.elasticsearch.smoketest.DocsClientYamlTestSuiteIT.test {yaml=reference/rest-api/security/invalidate-tokens/line_205}\" -Dtests.seed=8565691547317BEB -Dtests.locale=is-Latn-IS -Dtests.timezone=America/Glace_Bay -Druntime.java=23\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [reference/rest-api/security/invalidate-tokens:137]: expected [2xx] status code but api [raw[method=DELETE path=_security/oauth2/token]] returned [404 Not Found] [{\"error\":{\"root_cause\":[{\"type\":\"index_not_found_exception\",\"reason\":\"no such index [.security-tokens]\",\"resource.type\":\"index_or_alias\",\"resource.id\":\".security-tokens\",\"index_uuid\":\"_na_\",\"index\":\".security-tokens\",\"stack_trace\":\"[.security-tokens] org.elasticsearch.index.IndexNotFoundException: no such index [.security-tokens]\\n\\tat org.elasticsearch.server@8.18.0-SNAPSHOT/org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.notFoundException(IndexNameExpressionResolver.java:673)\\n\\tat org.elasticsearch.server@8.18.0-SNAPSHOT/org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.ensureAliasOrIndexExists(IndexNameExpressionResolver.java:1308)\\n\\tat org.elasticsearch.server@8.18.0-SNAPSHOT/org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.resolveExpressions\n[truncated]\n\nIssue Reasons:\n\n[8.18] 2 failures in test test {yaml=reference/rest-api/security/invalidate-tokens/line_205} (0.4% fail rate in 464 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-02", "closed_at": "2025-04-15", "labels": [">test-failure", ":Security/Security", "Team:Security", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123806, "issue_title": "[CI] MockSparseInferenceServiceIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6943 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #6836 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #6836 / almalinux-8_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 3 failures in class org.elasticsearch.xpack.inference.MockSparseInferenceServiceIT (0.8% fail rate in 395 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (14.3% fail rate in 14 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-13", "labels": [">test-failure", ":ml", "Team:ML", "medium-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123805, "issue_title": "[CI] HeapAttackIT testFetchTooManyMvLongs failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6724 / concurrent-search-tests\nelasticsearch-periodic-platform-support #6616 / debian-11_platform-support-unix\n\nReproduction Line:\n./gradlew \":test:external-modules:test-esql-heap-attack:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.heap_attack.HeapAttackIT.testHugeConcat\" -Dtests.seed=FA1A265012D38730 -Dtests.jvm.argline=\"-Des.concurrent_search=true\" -Dtests.locale=es-EC -Dtests.timezone=SystemV/PST8 -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.TestCouldNotBeSkippedException: Test could not be skipped due to other failures\n\nIssue Reasons:\n\n[8.x] 2 failures in test testFetchTooManyMvLongs (0.4% fail rate in 549 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-11", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123804, "issue_title": "[CI] HeapAttackIT testManyEval failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6724 / concurrent-search-tests\nelasticsearch-periodic-platform-support #6657 / rhel-7_platform-support-unix\n\nReproduction Line:\n./gradlew \":test:external-modules:test-esql-heap-attack:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.heap_attack.HeapAttackIT.testHugeConcat\" -Dtests.seed=FA1A265012D38730 -Dtests.jvm.argline=\"-Des.concurrent_search=true\" -Dtests.locale=es-EC -Dtests.timezone=SystemV/PST8 -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.TestCouldNotBeSkippedException: Test could not be skipped due to other failures\n\nIssue Reasons:\n\n[8.x] 2 failures in test testManyEval (0.6% fail rate in 313 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-11", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123803, "issue_title": "[CI] SmokeTestIngestWithAllDepsClientYamlTestSuiteIT test {yaml=ingest/80_ingest_simulate/Test ignored_fields} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6715 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6701 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":qa:smoke-test-ingest-with-all-dependencies:yamlRestTest\" --tests \"org.elasticsearch.smoketest.SmokeTestIngestWithAllDepsClientYamlTestSuiteIT.test {yaml=ingest/80_ingest_simulate/Test ignored_fields}\" -Dtests.seed=138FFE1D4C6BD53E -Dtests.locale=en-CX -Dtests.timezone=Asia/Bangkok -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [GET], host [http://[::1]:46011], URI [_cluster/health?wait_for_events=languid], status line [HTTP/1.1 408 Request Timeout]\n{\"cluster_name\":\"yamlRestTest\",\"status\":\"green\",\"timed_out\":true,\"number_of_nodes\":1,\"number_of_data_nodes\":1,\"active_primary_shards\":0,\"active_shards\":0,\"relocating_shards\":0,\"initializing_shards\":0,\"unassigned_shards\":0,\"unassigned_primary_shards\":0,\"delayed_unassigned_shards\":0,\"number_of_pending_tasks\":163,\"number_of_in_flight_fetch\":0,\"task_max_waiting_in_queue_millis\":34413,\"active_shards_percent_as_number\":100.0}\n\nIssue Reasons:\n\n[main] 2 failures in test test {yaml=ingest/80_ingest_simulate/Test ignored_fields} (1.8% fail rate in 111 executions)\n[main] 2 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (50.0% fail rate in 4 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123800, "issue_title": "[CI] OperatorPrivilegesIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6942 / almalinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #6931 / rhel-9_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.xpack.security.operator.OperatorPrivilegesIT (1.6% fail rate in 129 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123799, "issue_title": "[CI] GeoIpReindexedIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6768 / openjdk21_8.19.0_java-fips-matrix-bwc\nelasticsearch-pull-request #60232 / 8.19.0_bwc-snapshots\nelasticsearch-intake #19191 / 8.19.0_bwc-snapshots\nelasticsearch-periodic #6719 / openjdk23_8.19.0_java-matrix-bwc\nelasticsearch-pull-request #59825 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #59774 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #59249 / 8.19.0_bwc-snapshots\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 7 failures in class org.elasticsearch.ingest.geoip.GeoIpReindexedIT (1.2% fail rate in 570 executions)\n[main] 5 failures in step 8.19.0_bwc-snapshots (1.0% fail rate in 498 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (11.1% fail rate in 18 executions)\n[main] 4 failures in pipeline elasticsearch-pull-request (1.0% fail rate in 384 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-03", "labels": [">test-failure", ":Data Management/Ingest Node", "Team:Data Management", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123798, "issue_title": "[CI] JdbcFrozenCsvSpecIT test {frozen.testPercentileFrozen} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6702 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6617 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic-platform-support #6561 / ubuntu-2404_platform-support-unix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:qa:server:single-node:javaRestTest' --tests \"org.elasticsearch.xpack.sql.qa.single_node.JdbcFrozenCsvSpecIT\" -Dtests.method=\"test {frozen.testCountFromFrozen}\" -Dtests.seed=399DDAE0C1182C00 -Dtests.locale=sr-ME -Dtests.timezone=Asia/Almaty -Druntime.java=22\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.sql.SQLException: Server sent bad type [x_content_parse_exception]. Original type was [[-1:112] [sql/query] failed to parse field [time_zone]]. [org.elasticsearch.xcontent.XContentParseException: [-1:112] [sql/query] failed to parse field [time_zone]\n\tat org.elasticsearch.xcontent.ObjectParser.throwFailedToParse(ObjectParser.java:609)\n\tat org.elasticsearch.xcontent.ObjectParser.parseValue(ObjectParser.java:604)\n\tat org.elasticsearch.xcontent.ObjectParser.parseSub(ObjectParser.java:652)\n\tat org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:320)\n\tat org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:260)\n\tat org.elasticsearch.xcontent.ObjectParser.apply(ObjectParser.java:393)\n\tat org.elasticsearch.xpack.sql.action.SqlQueryRequest.fromXContent(SqlQueryRequest.java:335)\n\tat org.elasticsearch.xpack.sql.plugin.RestSqlQueryAction.prepareRequest(RestSqlQueryAction.java:51)\n\tat org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:86)\n\tat org.\n[truncated]\n\nIssue Reasons:\n\n[7.17] 3 failures in test test {frozen.testPercentileFrozen} (0.4% fail rate in 833 executions)\n[7.17] 3 failures in pipeline elasticsearch-periodic-platform-support (13.6% fail rate in 22 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": null, "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123797, "issue_title": "[CI] JdbcFrozenCsvSpecIT test {frozen.testKurtosisAndSkewnessNoGroup} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6702 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6617 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic-platform-support #6561 / ubuntu-2404_platform-support-unix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:qa:server:single-node:javaRestTest' --tests \"org.elasticsearch.xpack.sql.qa.single_node.JdbcFrozenCsvSpecIT\" -Dtests.method=\"test {frozen.testCountFromFrozen}\" -Dtests.seed=399DDAE0C1182C00 -Dtests.locale=sr-ME -Dtests.timezone=Asia/Almaty -Druntime.java=22\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.sql.SQLException: Server sent bad type [x_content_parse_exception]. Original type was [[-1:112] [sql/query] failed to parse field [time_zone]]. [org.elasticsearch.xcontent.XContentParseException: [-1:112] [sql/query] failed to parse field [time_zone]\n\tat org.elasticsearch.xcontent.ObjectParser.throwFailedToParse(ObjectParser.java:609)\n\tat org.elasticsearch.xcontent.ObjectParser.parseValue(ObjectParser.java:604)\n\tat org.elasticsearch.xcontent.ObjectParser.parseSub(ObjectParser.java:652)\n\tat org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:320)\n\tat org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:260)\n\tat org.elasticsearch.xcontent.ObjectParser.apply(ObjectParser.java:393)\n\tat org.elasticsearch.xpack.sql.action.SqlQueryRequest.fromXContent(SqlQueryRequest.java:335)\n\tat org.elasticsearch.xpack.sql.plugin.RestSqlQueryAction.prepareRequest(RestSqlQueryAction.java:51)\n\tat org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:86)\n\tat org.\n[truncated]\n\nIssue Reasons:\n\n[7.17] 3 failures in test test {frozen.testKurtosisAndSkewnessNoGroup} (0.4% fail rate in 833 executions)\n[7.17] 3 failures in pipeline elasticsearch-periodic-platform-support (13.6% fail rate in 22 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": null, "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123796, "issue_title": "[CI] JdbcFrozenCsvSpecIT test {frozen.testColumnFromFrozen} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6702 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6617 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic-platform-support #6561 / ubuntu-2404_platform-support-unix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:qa:server:single-node:javaRestTest' --tests \"org.elasticsearch.xpack.sql.qa.single_node.JdbcFrozenCsvSpecIT\" -Dtests.method=\"test {frozen.testCountFromFrozen}\" -Dtests.seed=399DDAE0C1182C00 -Dtests.locale=sr-ME -Dtests.timezone=Asia/Almaty -Druntime.java=22\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.sql.SQLException: Server sent bad type [x_content_parse_exception]. Original type was [[-1:112] [sql/query] failed to parse field [time_zone]]. [org.elasticsearch.xcontent.XContentParseException: [-1:112] [sql/query] failed to parse field [time_zone]\n\tat org.elasticsearch.xcontent.ObjectParser.throwFailedToParse(ObjectParser.java:609)\n\tat org.elasticsearch.xcontent.ObjectParser.parseValue(ObjectParser.java:604)\n\tat org.elasticsearch.xcontent.ObjectParser.parseSub(ObjectParser.java:652)\n\tat org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:320)\n\tat org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:260)\n\tat org.elasticsearch.xcontent.ObjectParser.apply(ObjectParser.java:393)\n\tat org.elasticsearch.xpack.sql.action.SqlQueryRequest.fromXContent(SqlQueryRequest.java:335)\n\tat org.elasticsearch.xpack.sql.plugin.RestSqlQueryAction.prepareRequest(RestSqlQueryAction.java:51)\n\tat org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:86)\n\tat org.\n[truncated]\n\nIssue Reasons:\n\n[7.17] 3 failures in test test {frozen.testColumnFromFrozen} (0.4% fail rate in 833 executions)\n[7.17] 3 failures in pipeline elasticsearch-periodic-platform-support (13.6% fail rate in 22 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": null, "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123795, "issue_title": "[CI] JdbcFrozenCsvSpecIT test {frozen.testCountFromFrozen} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6702 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6617 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic-platform-support #6561 / ubuntu-2404_platform-support-unix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:qa:server:single-node:javaRestTest' --tests \"org.elasticsearch.xpack.sql.qa.single_node.JdbcFrozenCsvSpecIT\" -Dtests.method=\"test {frozen.testCountFromFrozen}\" -Dtests.seed=399DDAE0C1182C00 -Dtests.locale=sr-ME -Dtests.timezone=Asia/Almaty -Druntime.java=22\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.sql.SQLException: Server sent bad type [x_content_parse_exception]. Original type was [[-1:112] [sql/query] failed to parse field [time_zone]]. [org.elasticsearch.xcontent.XContentParseException: [-1:112] [sql/query] failed to parse field [time_zone]\n\tat org.elasticsearch.xcontent.ObjectParser.throwFailedToParse(ObjectParser.java:609)\n\tat org.elasticsearch.xcontent.ObjectParser.parseValue(ObjectParser.java:604)\n\tat org.elasticsearch.xcontent.ObjectParser.parseSub(ObjectParser.java:652)\n\tat org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:320)\n\tat org.elasticsearch.xcontent.ObjectParser.parse(ObjectParser.java:260)\n\tat org.elasticsearch.xcontent.ObjectParser.apply(ObjectParser.java:393)\n\tat org.elasticsearch.xpack.sql.action.SqlQueryRequest.fromXContent(SqlQueryRequest.java:335)\n\tat org.elasticsearch.xpack.sql.plugin.RestSqlQueryAction.prepareRequest(RestSqlQueryAction.java:51)\n\tat org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:86)\n\tat org.\n[truncated]\n\nIssue Reasons:\n\n[7.17] 3 failures in test test {frozen.testCountFromFrozen} (0.4% fail rate in 833 executions)\n[7.17] 3 failures in pipeline elasticsearch-periodic-platform-support (13.6% fail rate in 22 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": null, "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123794, "issue_title": "[CI] RestSqlIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6964 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #6885 / ubuntu-2004-aarch64_checkpart4_platform-support-arm\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.xpack.sql.qa.multi_cluster_with_security.RestSqlIT (0.5% fail rate in 422 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (18.2% fail rate in 11 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123793, "issue_title": "[CI] JdbcShowTablesIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6941 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #6930 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #6891 / oraclelinux-7_platform-support-unix\nelasticsearch-periodic-platform-support #6784 / rhel-9_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 4 failures in class org.elasticsearch.xpack.sql.qa.multi_node.JdbcShowTablesIT (0.5% fail rate in 776 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123792, "issue_title": "[CI] EsqlActionBreakerIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6766 / openjdk21_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #6748 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic-platform-support #6741 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic #6745 / graalvm-ce17_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #6727 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic-platform-support #6720 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic #6717 / single-processor-node-tests\nelasticsearch-periodic-platform-support #6706 / almalinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #6706 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic-platform-support #6706 / ubuntu-2204_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testFromLimit\" -Dtests.seed=BDE8613DC0824EEC -Dtests.locale=kln-Latn-KE -Dtests.timezone=America/Blanc-Sablon -Druntime.java=21\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s1\nExpected: <0L>\n     but: was <32L>\n\nIssue Reasons:\n\n[8.x] 11 failures in class org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT (5.1% fail rate in 217 executions)\n[8.x] 3 failures in step ubuntu-1804_platform-support-unix (50.0% fail rate in 6 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic (33.3% fail rate in 9 executions)\n[8.x] 5 failures in pipeline elasticsearch-periodic-platform-support (71.4% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123791, "issue_title": "[CI] EsqlActionBreakerIT testDropAllColumns failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6712 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-pull-request #59876 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testOverlappingIndexPatterns\" -Dtests.seed=C983A8FD725A9114 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=af-NA -Dtests.timezone=Asia/Seoul -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: unexpected exception type thrown; expected:<org.elasticsearch.xpack.esql.VerificationException> but was:<java.lang.AssertionError>\n\nIssue Reasons:\n\n[main] 2 failures in test testDropAllColumns (1.1% fail rate in 178 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123790, "issue_title": "[CI] EsqlActionBreakerIT testFromLimit failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6712 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #6625 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testOverlappingIndexPatterns\" -Dtests.seed=C983A8FD725A9114 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=af-NA -Dtests.timezone=Asia/Seoul -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: unexpected exception type thrown; expected:<org.elasticsearch.xpack.esql.VerificationException> but was:<java.lang.AssertionError>\n\nIssue Reasons:\n\n[main] 2 failures in test testFromLimit (0.3% fail rate in 577 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123789, "issue_title": "[CI] EsqlActionBreakerIT testOverlappingIndexPatterns failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6712 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #6625 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionBreakerIT.testOverlappingIndexPatterns\" -Dtests.seed=C983A8FD725A9114 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=af-NA -Dtests.timezone=Asia/Seoul -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: unexpected exception type thrown; expected:<org.elasticsearch.xpack.esql.VerificationException> but was:<java.lang.AssertionError>\n\nIssue Reasons:\n\n[main] 2 failures in test testOverlappingIndexPatterns (0.3% fail rate in 578 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-01", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123780, "issue_title": "[CI] InferenceBasicLicenseIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6942 / encryption-at-rest\nelasticsearch-periodic-platform-support #6958 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #6801 / rocky-9_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 3 failures in class org.elasticsearch.xpack.inference.InferenceBasicLicenseIT (0.5% fail rate in 621 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (10.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-13", "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123773, "issue_title": "[CI] FrozenSearchableSnapshotsIntegTests testCreateAndRestorePartialSearchableSnapshot failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19146 / part2\nelasticsearch-intake #18891 / part2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:searchable-snapshots:internalClusterTest\" --tests \"org.elasticsearch.xpack.searchablesnapshots.FrozenSearchableSnapshotsIntegTests.testCreateAndRestorePartialSearchableSnapshot\" -Dtests.seed=2CDF29528A255FC4 -Dtests.locale=hu-Latn-HU -Dtests.timezone=ROK -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Searchable snapshot directory does not support the operation [createOutput(corrupted_gTNu35_ERpCZ9TsjuuE44w, IOContext[context=DEFAULT, mergeInfo=null, flushInfo=null, readAdvice=RANDOM])], current directory files: _c.cfe,_c.cfs,_c.si,_c_h.fnm,_c_h_Asserting_0.dvd,_c_h_Asserting_0.dvm,_m.cfe,_m.cfs,_m.si,_m_8.fnm,_m_8_Asserting_0.dvd,_m_8_Asserting_0.dvm,_t.cfe,_t.cfs,_t.si,segments_4\n\nIssue Reasons:\n\n[main] 2 failures in test testCreateAndRestorePartialSearchableSnapshot (0.4% fail rate in 464 executions)\n[main] 2 failures in step part2 (3.8% fail rate in 53 executions)\n[main] 2 failures in pipeline elasticsearch-intake (3.8% fail rate in 53 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": null, "labels": [">test-failure", ":Distributed Indexing/Distributed", "low-risk", "Team:Distributed Indexing"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123769, "issue_title": "[CI] DataStreamLifecycleDownsampleDisruptionIT testDataStreamLifecycleDownsampleRollingRestart failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7350 / windows-2022_checkpart2_platform-support-windows\nelasticsearch-periodic-platform-support #7350 / ubuntu-2404-aarch64_checkpart2_platform-support-arm\nelasticsearch-pull-request #65324 / part-2\n\nReproduction Line:\ngradlew \":x-pack:plugin:downsample:internalClusterTest\" --tests \"org.elasticsearch.xpack.downsample.DataStreamLifecycleDownsampleDisruptionIT.testDataStreamLifecycleDownsampleRollingRestart\" -Dtests.seed=EA337873B547979F -Dtests.locale=bs-BA -Dtests.timezone=US/Alaska -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: safeGet: listener was completed exceptionally\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test testDataStreamLifecycleDownsampleRollingRestart\n[main] 3 failures in test testDataStreamLifecycleDownsampleRollingRestart (1.7% fail rate in 177 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-04-14", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123747, "issue_title": "Mystery NPE on search Cannot invoke \\\"java.lang.Long.longValue()\\\" because \\\"value\\\" is null", "issue_body": "Elasticsearch Version\ncurrent\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nHave seen a mystery NPE in some server logs. Haven't been able to fully indicate the cause. Likely we need to first improve the \"guess root cause\" logic & logging.\nSteps to Reproduce\nN/A\nLogs (if relevant)\n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearchAsyncAction.java:638) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:323) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseDone(AbstractSearchAsyncAction.java:683) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.onShardFailure(AbstractSearchAsyncAction.java:422) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:276) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:54) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleException(SearchTransportService.java:593) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleException(TransportService.java:1776) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleException(TransportService.java:1509) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:1643) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1618) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:44) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ChannelActionListener.onFailure(ChannelActionListener.java:45) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.lambda$maybeWrapListenerForStackTrace$2(SearchService.java:559) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$DelegatingResponseActionListener.acceptException(ActionListenerImplementations.java:188) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$DelegatingResponseActionListener.onFailure(ActionListenerImplementations.java:193) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable.onFailure(ActionRunnable.java:152) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:29) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27) \n at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) \n at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) \n at java.base/java.lang.Thread.run(Thread.java:1575) \nCaused by: org.elasticsearch.ElasticsearchException$1: Cannot invoke \\\"java.lang.Long.longValue()\\\" because \\\"value\\\" is null \n at org.elasticsearch.server@9.1.0/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:725) \n at org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:321) \n ... 26 more \nCaused by: java.lang.NullPointerException: Cannot invoke \\\"java.lang.Long.longValue()\\\" because \\\"value\\\" is null \n", "created_at": "2025-02-28", "closed_at": null, "labels": [">bug", "priority:high", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "benwtrent"}
{"issue_number": 123745, "issue_title": "Correct response code for \"inference canceled as process is stopping\" failures", "issue_body": "Elasticsearch Version\nany\nInstalled Plugins\nany\nJava Version\nbundled\nOS Version\nany\nProblem Description\nWhen making an inference request, its possible that its cancelled due to the process stopping. This likely shouldn't bubble up as a internal server error.\nThis is possible in a _search request. It seems if its being stopped, that was triggered by the user, and it wasn't a crash. Indicating its a user configuration problem and thus we should return an error indicating as much.\nIt seems to me that the PyTorchResult should indicate the exception type (or status code) and that needs to be bubbled up to the user.\nSteps to Reproduce\nna\nLogs (if relevant)\norg.elasticsearch.ElasticsearchStatusException: Error in inference process: [inference canceled as process is stopping]  \n at org.elasticsearch.xpack.ml.inference.deployment.AbstractPyTorchAction.onFailure(AbstractPyTorchAction.java:120)  \n at org.elasticsearch.xpack.ml.inference.deployment.InferencePyTorchAction.processResult(InferencePyTorchAction.java:181)  \n at org.elasticsearch.xpack.ml.inference.deployment.InferencePyTorchAction.lambda$doRun$3(InferencePyTorchAction.java:150)  \n at org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:257)  \n at org.elasticsearch.xpack.ml.inference.pytorch.process.PyTorchResultProcessor.lambda$notifyAndClearPendingResults$3(PyTorchResultProcessor.java:148)  \n at java.util.concurrent.ConcurrentHashMap.forEach(ConcurrentHashMap.java:1608)  \n at org.elasticsearch.xpack.ml.inference.pytorch.process.PyTorchResultProcessor.notifyAndClearPendingResults(PyTorchResultProcessor.java:147)  \n at org.elasticsearch.xpack.ml.inference.pytorch.process.PyTorchResultProcessor.process(PyTorchResultProcessor.java:135)  \n at org.elasticsearch.xpack.ml.inference.deployment.DeploymentManager.lambda$startDeployment$2(DeploymentManager.java:180)  \n at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:977)  \n at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)  \n at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)  \n at java.lang.Thread.run(Thread.java:1575)  \n", "created_at": "2025-02-28", "closed_at": "2025-03-24", "labels": [">bug", ":ml", ":SearchOrg/Relevance"], "State": "closed", "Author": "benwtrent"}
{"issue_number": 123731, "issue_title": "ShardBulkInferenceActionFilter requests that are rejected by InferenceWaitForAllocation should bubble up http code", "issue_body": "Elasticsearch Version\ncurrent\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nShardBulkInferenceActionFilter should bubble up any ElasticsearchStatusException status provided by its underlying actions. An example of this is: InferenceWaitForAllocation, which will throw a 429, but ShardBulkInferenceActionFilter seemingly unwraps/rewraps to be a 500 instead of a 429\nSteps to Reproduce\nN/A\nLogs (if relevant)\norg.elasticsearch.ElasticsearchException: Exception when running inference id [.elser-2-elasticsearch] on field [text]\n  at org.elasticsearch.xpack.inference.action.filter.ShardBulkInferenceActionFilter$AsyncBulkShardInferenceAction$2.onResponse(ShardBulkInferenceActionFilter.java:323)\n  at org.elasticsearch.xpack.inference.action.filter.ShardBulkInferenceActionFilter$AsyncBulkShardInferenceAction$2.onResponse(ShardBulkInferenceActionFilter.java:310)\n  at org.elasticsearch.xpack.inference.chunking.EmbeddingRequestChunker.sendFinalResponse(EmbeddingRequestChunker.java:191)\n  at org.elasticsearch.xpack.inference.chunking.EmbeddingRequestChunker$DebatchingListener.onFailure(EmbeddingRequestChunker.java:177)\n  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64)\n  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75)\n  at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32)\n  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64)\n  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75)\n  at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32)\n  at org.elasticsearch.action.ActionListenerImplementations$RunAfterActionListener.onFailure(ActionListenerImplementations.java:307)\n  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64)\n  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75)\n  at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32)\n  at org.elasticsearch.action.support.ContextPreservingActionListener.onFailure(ContextPreservingActionListener.java:40)\n  at org.elasticsearch.tasks.TaskManager$1.onFailure(TaskManager.java:215)\n  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64)\n  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75)\n  at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32)\n  at org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onFailure(ActionListenerImplementations.java:346)\n  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64)\n  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75)\n  at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32)\n  at org.elasticsearch.action.support.ContextPreservingActionListener.onFailure(ContextPreservingActionListener.java:40)\n  at org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64)\n  at org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75)\n  at org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32)\n  at org.elasticsearch.xpack.ml.inference.InferenceWaitForAllocation.waitForAssignment(InferenceWaitForAllocation.java:89)\n  at org.elasticsearch.xpack.ml.action.TransportInternalInferModelAction.inferAgainstAllocatedModel(TransportInternalInferModelAction.java:285)\n  at org.elasticsearch.xpack.ml.action.TransportInternalInferModelAction.doInfer(TransportInternalInferModelAction.java:188)\n  at org.elasticsearch.xpack.ml.action.TransportInternalInferModelAction.doExecute(TransportInternalInferModelAction.java:142)\n  at org.elasticsearch.xpack.ml.action.TransportInternalInferModelAction.doExecute(TransportInternalInferModelAction.java:66)\n  at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:135)\n  at org.elasticsearch.action.support.ActionFilter$Simple.apply(ActionFilter.java:54)\n  at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n  at co.elastic.elasticsearch.metering.activitytracking.ActivityTrackerActionFilter.apply(ActivityTrackerActionFilter.java:54)\n  at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n  at org.elasticsearch.action.support.ActionFilter$Simple.apply(ActionFilter.java:54)\n  at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n  at org.elasticsearch.action.support.MappedActionFilters$MappedFilterChain.proceed(MappedActionFilters.java:71)\n  at org.elasticsearch.action.support.MappedActionFilters.apply(MappedActionFilters.java:49)\n  at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n  at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$applyInternal$4(SecurityActionFilter.java:182)\n  at org.elasticsearch.action.ActionListenerImplementations$DelegatingFailureActionListener.onResponse(ActionListenerImplementations.java:219)\n  at org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$8(AuthorizationService.java:462)\n  at org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(AuthorizationService.java:1033)\n  at org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(AuthorizationService.java:999)\n  at org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n  at org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$9(AuthorizationService.java:476)\n  at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:247)\n  at org.elasticsearch.xpack.security.authz.RBACEngine.authorizeClusterAction(RBACEngine.java:206)\n  at org.elasticsearch.xpack.security.authz.AuthorizationService.authorizeAction(AuthorizationService.java:466)\n  at org.elasticsearch.xpack.security.authz.AuthorizationService.maybeAuthorizeRunAs(AuthorizationService.java:442)\n  at org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorize$3(AuthorizationService.java:329)\n  at org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:257)\n  at org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n  at org.elasticsearch.xpack.security.authz.RBACEngine.lambda$resolveAuthorizationInfo$0(RBACEngine.java:171)\n  at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:247)\n  at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRoles$4(CompositeRolesStore.java:202)\n  at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:247)\n  at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRole(CompositeRolesStore.java:210)\n  at org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRoles(CompositeRolesStore.java:195)\n  at org.elasticsearch.xpack.security.authz.RBACEngine.resolveAuthorizationInfo(RBACEngine.java:167)\n  at org.elasticsearch.xpack.security.authz.AuthorizationService.authorize(AuthorizationService.java:345)\n  at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$applyInternal$5(SecurityActionFilter.java:178)\n  at org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:247)\n  at org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:97)\n  at org.elasticsearch.xpack.security.authc.AuthenticatorChain.authenticate(AuthenticatorChain.java:93)\n  at org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:264)\n  at org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:173)\n  at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.applyInternal(SecurityActionFilter.java:174)\n  at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$apply$1(SecurityActionFilter.java:115)\n  at org.elasticsearch.xpack.core.security.SecurityContext.executeAsInternalUser(SecurityContext.java:170)\n  at org.elasticsearch.xpack.security.authz.AuthorizationUtils.switchUserBasedOnActionOriginAndExecute(AuthorizationUtils.java:168)\n  at org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.apply(SecurityActionFilter.java:111)\n  at org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n  at org.elasticsearch.action.support.TransportAction.handleExecution(TransportAction.java:96)\n  at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:59)\n  at org.elasticsearch.tasks.TaskManager.registerAndExecute(TaskManager.java:197)\n  at org.elasticsearch.client.internal.node.NodeClient.executeLocally(NodeClient.java:106)\n  at org.elasticsearch.client.internal.node.NodeClient.doExecute(NodeClient.java:84)\n  at org.elasticsearch.client.internal.support.AbstractClient.execute(AbstractClient.java:140)\n  at org.elasticsearch.client.internal.FilterClient.doExecute(FilterClient.java:56)\n  at org.elasticsearch.client.internal.OriginSettingClient.doExecute(OriginSettingClient.java:44)\n  at org.elasticsearch.client.internal.support.AbstractClient.execute(AbstractClient.java:140)\n  at org.elasticsearch.xpack.inference.services.elasticsearch.ElasticsearchInternalService$BatchIterator.executeRequest(ElasticsearchInternalService.java:1123)\n  at org.elasticsearch.xpack.inference.services.elasticsearch.ElasticsearchInternalService$BatchIterator.inferBatch(ElasticsearchInternalService.java:1093)\n  at org.elasticsearch.xpack.inference.services.elasticsearch.ElasticsearchInternalService$BatchIterator.lambda$inferBatch$1(ElasticsearchInternalService.java:1097)\n  at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:977)\n  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n  at java.lang.Thread.run(Thread.java:1575)\nCaused by: org.elasticsearch.ElasticsearchStatusException: Rejected inference request waiting for an allocation of deployment [.elser-2-elasticsearch]. Too many pending requests\n  at org.elasticsearch.xpack.ml.inference.InferenceWaitForAllocation.waitForAssignment(InferenceWaitForAllocation.java:93)\n  ... 64 more\n", "created_at": "2025-02-28", "closed_at": "2025-03-11", "labels": [">bug", ":SearchOrg/Relevance", "priority:normal", ":Search Relevance/Search"], "State": "closed", "Author": "benwtrent"}
{"issue_number": 123729, "issue_title": "Index creation requests should return 400 on analyzer dictionary missing", "issue_body": "Elasticsearch Version\nany\nInstalled Plugins\nany\nJava Version\nbundled\nOS Version\nany\nProblem Description\nWhen attempting to create an index with an analyzer that references a dictionary file (or any file) that isn't present on the system, it should return a bad request.\nSteps to Reproduce\nTry to create an index with hunspell analyzer referencing any locale.\nLogs (if relevant)\nNo response", "created_at": "2025-02-28", "closed_at": "2025-03-05", "labels": [">bug", "Team:Search Relevance", ":Search Relevance/Search"], "State": "closed", "Author": "benwtrent"}
{"issue_number": 123727, "issue_title": "[CI] RcsCcsCommonYamlTestSuiteIT test {p0=search.vectors/41_knn_search_bbq_hnsw/Test knn search} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19112 / part1\nelasticsearch-intake #18990 / part1\n\nReproduction Line:\n./gradlew \":qa:ccs-common-rest:yamlRestTest\" --tests \"org.elasticsearch.test.rest.yaml.RcsCcsCommonYamlTestSuiteIT\" -Dtests.method=\"test {p0=search.vectors/41_knn_search_bbq_hnsw/Test knn search}\" -Dtests.seed=CAF96654C8BA0FD7 -Dtests.locale=so-ET -Dtests.timezone=Europe/Brussels -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [search.vectors/41_knn_search_bbq_hnsw:105]: \nExpected: \"3\"\n     but: was \"2\"\n\nIssue Reasons:\n\n[main] 2 failures in test test {p0=search.vectors/41_knn_search_bbq_hnsw/Test knn search} (0.7% fail rate in 269 executions)\n[main] 2 failures in step part1 (5.9% fail rate in 34 executions)\n[main] 2 failures in pipeline elasticsearch-intake (5.9% fail rate in 34 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-27", "labels": [">test-failure", ":Search Relevance/Vectors", "low-risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123726, "issue_title": "[ML] Inconsistent document count in .inference and .secrets-inference", "issue_body": "Elasticsearch Version\nany\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nWhen creating an inference endpoint the configuration is stored in the .inference system index and any secrets such as an API in .secrets-inference If writing only one of those writes is successful and the other fails then the endpoint creation is failed but the successfully written document is not clean up.\nSteps to Reproduce\nIt is difficult to engineer a reproduction. It's helpful if the .inference and .secrets-inference indices are located on different nodes and one of the nodes is disconnected as happened in this example:\nFailed to store inference endpoint [X] index: [.secrets-inference] bulk failure message [org.elasticsearch.transport.RemoteTransportException: [es-es-index-8477bb8765-8zbn2][100.64.103.20:9300][indices:data/write/bulk[s][p]]]\n\nLogs (if relevant)\nFailed to store inference endpoint [X] index: [.secrets-inference] bulk failure message [org.elasticsearch.transport.RemoteTransportException: [es-es-index-8477bb8765-8zbn2][100.64.103.20:9300][indices:data/write/bulk[s][p]]]\n", "created_at": "2025-02-28", "closed_at": null, "labels": [">bug", ":ml", "Team:ML"], "State": "open", "Author": "davidkyle"}
{"issue_number": 123725, "issue_title": "[CI] SqlProtocolIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6905 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #6898 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #6863 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #6784 / oraclelinux-9_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 4 failures in class org.elasticsearch.xpack.sql.qa.multi_node.SqlProtocolIT (0.7% fail rate in 610 executions)\n[8.18] 2 failures in step rhel-9_platform-support-unix (15.4% fail rate in 13 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic-platform-support (25.0% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123723, "issue_title": "[CI] OldRepositoryAccessIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6685 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #6685 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.oldrepos.OldRepositoryAccessIT (0.2% fail rate in 1000 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-03", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123722, "issue_title": "[CI] OldMappingsIT testStandardTokenFilter failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6685 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #6685 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":x-pack:qa:repository-old-versions:javaRestTestAfterRestart#6_0_0\" --tests \"org.elasticsearch.oldrepos.OldMappingsIT.testStandardTokenFilter\" -Dtests.seed=ECF1B51573ABF69A -Dtests.locale=ps-Arab-AF -Dtests.timezone=Pacific/Rarotonga -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a collection with size <1>\n     but: collection size was <0>\n\nIssue Reasons:\n\n[8.x] 2 failures in test testStandardTokenFilter (0.2% fail rate in 1000 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-14", "labels": [">test-failure", "medium-risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123721, "issue_title": "[CI] CrossClusterAsyncQueryIT testSuccessfulPathways failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6697 / concurrent-search-tests\nelasticsearch-periodic-platform-support #6648 / sles-15_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.CrossClusterAsyncQueryIT.testAsyncQueriesWithLimit0\" -Dtests.seed=400DB4231EF1C473 -Dtests.jvm.argline=\"-Des.concurrent_search=true\" -Dtests.locale=su-Latn-ID -Dtests.timezone=EAT -Druntime.java=23\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: timeout waiting for query response\n\nIssue Reasons:\n\n[9.0] 2 failures in test testSuccessfulPathways (1.2% fail rate in 164 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-14", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123717, "issue_title": "[ES|QL] export metadata fields as JSON", "issue_body": "Description\nCan we scrape https://github.com/elastic/elasticsearch/blob/main/x-pack/plugin/esql-core/src/main/java/org/elasticsearch/xpack/esql/core/expression/MetadataAttribute.java#L43-L58 and publish it for Kibana? That way the autocomplete will always stay up-to-date.", "created_at": "2025-02-28", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL", "ES|QL-ui"], "State": "open", "Author": "drewdaemon"}
{"issue_number": 123715, "issue_title": "[CI] AsyncSearchActionIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22016 / part2\nelasticsearch-periodic-platform-support #7721 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7721 / ubuntu-2204_platform-support-unix\nelasticsearch-periodic-platform-support #7721 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7721 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #7721 / debian-12_platform-support-unix\nelasticsearch-pull-request #68446 / part-2-windows\nelasticsearch-pull-request #68446 / part-2\nelasticsearch-pull-request #68444 / part-2\nelasticsearch-intake #22012 / part2\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 6 consecutive failures in class org.elasticsearch.xpack.search.AsyncSearchActionIT\n[main] 3 consecutive failures in step part2\n[main] 2 consecutive failures in step oraclelinux-8_platform-support-unix\n[main] 2 consecutive failures in step oraclelinux-9_platform-support-unix\n[main] 2 consecutive failures in step debian-12_platform-support-unix\n[main] 4 consecutive failures in step part-2\n[main] 2 consecutive failures in step openjdk24_entitlements_true_checkpart2_java-matrix\n[main] 3 consecutive failures in pipeline elasticsearch-intake\n[main] 4 consecutive failures in pipeline elasticsearch-pull-request\n[main] 44 failures in class org.elasticsearch.xpack.search.AsyncSearchActionIT (9.1% fail rate in 481 executions)\n[main] 4 failures in step part2 (6.6% fail rate in 61 executions)\n[main] 2 failures in step oraclelinux-8_platform-support-unix (28.6% fail rate in 7 executions)\n[main] 2 failures in step oraclelinux-9_platform-support-unix (25.0% fail rate in 8 executions)\n[main] 2 failures in step debian-12_platform-support-unix (25.0% fail rate in 8 executions)\n[main] 17 failures in step part-2 (8.3% fail rate in 206 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123708, "issue_title": "[CI] SearchWithMinCompatibleSearchNodeIT testMinVersionAsOldVersion failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6692 / 7.1.1_bwc\nelasticsearch-periodic #6600 / 7.4.2_bwc\n\nReproduction Line:\n./gradlew ':qa:mixed-cluster:v7.1.1#mixedClusterTest' -Dtests.class=\"org.elasticsearch.backwards.SearchWithMinCompatibleSearchNodeIT\" -Dtests.method=\"testMinVersionAsNewVersion\" -Dtests.seed=AD85B72E90072786 -Dtests.bwc=true -Dtests.locale=ru -Dtests.timezone=Asia/Chongqing -Druntime.java=22\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\n\nIssue Reasons:\n\n[7.17] 2 failures in test testMinVersionAsOldVersion (0.7% fail rate in 268 executions)\n[7.17] 2 failures in pipeline elasticsearch-periodic (13.3% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-14", "labels": [">test-failure", "low-risk", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123707, "issue_title": "[CI] SearchWithMinCompatibleSearchNodeIT testCcsMinimizeRoundtripsIsFalse failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6692 / 7.1.1_bwc\nelasticsearch-periodic #6600 / 7.4.2_bwc\n\nReproduction Line:\n./gradlew ':qa:mixed-cluster:v7.1.1#mixedClusterTest' -Dtests.class=\"org.elasticsearch.backwards.SearchWithMinCompatibleSearchNodeIT\" -Dtests.method=\"testMinVersionAsNewVersion\" -Dtests.seed=AD85B72E90072786 -Dtests.bwc=true -Dtests.locale=ru -Dtests.timezone=Asia/Chongqing -Druntime.java=22\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\n\nIssue Reasons:\n\n[7.17] 2 failures in test testCcsMinimizeRoundtripsIsFalse (0.7% fail rate in 268 executions)\n[7.17] 2 failures in pipeline elasticsearch-periodic (13.3% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-14", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123706, "issue_title": "[CI] SearchWithMinCompatibleSearchNodeIT testPointInTimeRequirement failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6692 / 7.1.1_bwc\nelasticsearch-periodic #6600 / 7.4.2_bwc\n\nReproduction Line:\n./gradlew ':qa:mixed-cluster:v7.1.1#mixedClusterTest' -Dtests.class=\"org.elasticsearch.backwards.SearchWithMinCompatibleSearchNodeIT\" -Dtests.method=\"testMinVersionAsNewVersion\" -Dtests.seed=AD85B72E90072786 -Dtests.bwc=true -Dtests.locale=ru -Dtests.timezone=Asia/Chongqing -Druntime.java=22\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\n\nIssue Reasons:\n\n[7.17] 2 failures in test testPointInTimeRequirement (0.7% fail rate in 267 executions)\n[7.17] 2 failures in pipeline elasticsearch-periodic (13.3% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-14", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123705, "issue_title": "[CI] SearchWithMinCompatibleSearchNodeIT testMinVersionAsNewVersion failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6692 / 7.1.1_bwc\nelasticsearch-periodic #6600 / 7.4.2_bwc\n\nReproduction Line:\n./gradlew ':qa:mixed-cluster:v7.1.1#mixedClusterTest' -Dtests.class=\"org.elasticsearch.backwards.SearchWithMinCompatibleSearchNodeIT\" -Dtests.method=\"testMinVersionAsNewVersion\" -Dtests.seed=AD85B72E90072786 -Dtests.bwc=true -Dtests.locale=ru -Dtests.timezone=Asia/Chongqing -Druntime.java=22\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\n\nIssue Reasons:\n\n[7.17] 2 failures in test testMinVersionAsNewVersion (0.7% fail rate in 267 executions)\n[7.17] 2 failures in pipeline elasticsearch-periodic (13.3% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-14", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123704, "issue_title": "[CI] MixedClusterClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7817 / 8.16.6_bwc\nelasticsearch-periodic #7811 / 8.16.6_bwc\nelasticsearch-periodic #7805 / 8.16.6_bwc\nelasticsearch-periodic #7799 / 8.16.6_bwc\nelasticsearch-periodic #7793 / 8.16.6_bwc\nelasticsearch-periodic #7787 / 8.16.6_bwc\nelasticsearch-periodic #7781 / 8.16.6_bwc\nelasticsearch-periodic #7775 / 8.16.6_bwc\nelasticsearch-periodic #7769 / 8.16.6_bwc\nelasticsearch-periodic #7757 / 8.16.6_bwc\n\nReproduction Line:\n./gradlew \":qa:mixed-cluster:v8.16.6#mixedClusterTest\" -Dtests.class=\"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=index/92_metrics_auto_subobjects/Root with metrics}\" -Dtests.seed=F9D16830EDE97D3A -Dtests.bwc=true -Dtests.locale=ms-ID -Dtests.timezone=Greenwich -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [index/92_metrics_auto_subobjects:75]: expected [2xx] status code but api [indices.put_index_template] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"composable template [test] template after composition is invalid\",\"stack_trace\":\"org.elasticsearch.ElasticsearchException$1: composable template [test] template after composition is invalid\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:707)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:635)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.build(RestResponse.java:201)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:160)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch\n[truncated]\n\nIssue Reasons:\n\n[8.x] 9 consecutive failures in step 8.16.6_bwc\n[8.x] 19 failures in class org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT (1.9% fail rate in 982 executions)\n[8.x] 19 failures in step 8.16.6_bwc (95.0% fail rate in 20 executions)\n[8.x] 19 failures in pipeline elasticsearch-periodic (95.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": null, "labels": [":Search Foundations/Mapping", ">test-failure", "needs:risk", "Team:Search Foundations"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123687, "issue_title": "ESQL: Allow _size metadata field", "issue_body": "Description\nHi,\nwe would love to use _size metadata field in our ES|QL queries.\nI asked at discuss.elastic.co and it appears only certain metadata fields are supported.\n\nWe use Elastic solely for observability and are being flodded with a ton of data. We need to investigate what traces/transactions/span are the largest.\nExample query summing size of all traces with the same name per service:\nFROM .ds-traces-apm-default-2025.02.18-007935\n| EVAL traceName=CASE(parent.id IS NULL, transaction.name, null) \n| STATS traceSize=SUM(_size), traceName=MAX(traceName) BY trace.id, service.name, service.environment \n| EVAL traceName=CASE(traceName IS NOT NULL, traceName, trace.id) \n| STATS sumTraceSizeMiB=TO_DOUBLE(SUM(traceSize))/(1024*1024) by traceName, service.name, service.environment \n| SORT sumTraceSizeMiB DESC \n| LIMIT 30 \n", "created_at": "2025-02-28", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "jindrichpilar-kosik"}
{"issue_number": 123684, "issue_title": "[CI] JdbcCsvSpecIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6933 / release-tests\nelasticsearch-periodic-platform-support #6949 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #6941 / ubuntu-2004-aarch64_checkpart4_platform-support-arm\nelasticsearch-periodic-platform-support #6863 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #6834 / oraclelinux-9_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.18] 5 failures in class org.elasticsearch.xpack.sql.qa.multi_cluster_with_security.JdbcCsvSpecIT (0.9% fail rate in 565 executions)\n[8.18] 2 failures in step oraclelinux-9_platform-support-unix (15.4% fail rate in 13 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic-platform-support (26.7% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123683, "issue_title": "[CI] DefaultEndPointsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6966 / rocky-9_platform-support-unix\nelasticsearch-pull-request #61756 / part-2\nelasticsearch-periodic-platform-support #6866 / sles-15_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 failures in class org.elasticsearch.xpack.inference.DefaultEndPointsIT (0.4% fail rate in 711 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (14.3% fail rate in 14 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123682, "issue_title": "[CI] DotPrefixClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6743 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6736 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6729 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6715 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6708 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6701 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6694 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6687 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #6680 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-pull-request #59774 / rest-compatibility\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 9 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[main] 10 failures in class org.elasticsearch.validation.DotPrefixClientYamlTestSuiteIT (1.6% fail rate in 635 executions)\n[main] 9 failures in step windows-2022_checkpart1_platform-support-windows (100.0% fail rate in 9 executions)\n[main] 9 failures in pipeline elasticsearch-periodic-platform-support (90.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Core/Infra", "low-risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123681, "issue_title": "[CI] RepositoryHdfsClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6925 / ubuntu-2204_platform-support-unix\nelasticsearch-periodic-platform-support #6872 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #6829 / almalinux-9_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 3 failures in class org.elasticsearch.repositories.hdfs.RepositoryHdfsClientYamlTestSuiteIT (0.4% fail rate in 716 executions)\n[9.0] 3 failures in pipeline elasticsearch-periodic-platform-support (23.1% fail rate in 13 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123680, "issue_title": "[CI] IndexRecoveryIT testSourceThrottling failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7754 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #7700 / ubuntu-2004_platform-support-unix\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.indices.recovery.IndexRecoveryIT.testSourceThrottling\" -Dtests.seed=3D95CEA74C3BAD11 -Dtests.locale=es-PR -Dtests.timezone=Australia/Lindeman -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Throttling should be =0 for 'node_t1'\nExpected: <0L>\n     but: was <305L>\n\nIssue Reasons:\n\n[8.18] 2 failures in test testSourceThrottling (0.6% fail rate in 335 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": null, "labels": [">test-failure", ":Distributed Indexing/Recovery", "low-risk", "Team:Distributed Indexing"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123679, "issue_title": "[CI] SecureHdfsSearchableSnapshotsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6808 / ubuntu-2004-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic-platform-support #6686 / debian-12_platform-support-unix\nelasticsearch-periodic #6669 / encryption-at-rest\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 3 failures in class org.elasticsearch.xpack.searchablesnapshots.hdfs.SecureHdfsSearchableSnapshotsIT (0.5% fail rate in 618 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (9.1% fail rate in 22 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-28", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123661, "issue_title": "malformed CreateIndexRequest should return 400s", "issue_body": "Elasticsearch Version\nmain\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nWhen attempting to create an index, its possible to get a server error by some casting failures.\nWe should verify values and return bad request error code\nSteps to Reproduce\nPUT bad_aliases\n{\n  \"aliases\": \"I am a bad alias, yo\"\n}\n\nLogs (if relevant)\nNo response", "created_at": "2025-02-27", "closed_at": "2025-03-06", "labels": [">bug", ":Core/Infra/Core", "Team:Core/Infra"], "State": "closed", "Author": "benwtrent"}
{"issue_number": 123657, "issue_title": "[CI] PolicyManagerTests testFilesEntitlementsWithExclusive failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6673 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-pull-request #59261 / part-1\nelasticsearch-pull-request #59261 / part-1-entitlements\n\nReproduction Line:\ngradlew \":libs:entitlement:test\" --tests \"org.elasticsearch.entitlement.runtime.policy.PolicyManagerTests.testFilesEntitlementsWithExclusive\" -Dtests.seed=4BF1819C7510CB99 -Dtests.locale=kln -Dtests.timezone=Asia/Hovd -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 3 failures in test testFilesEntitlementsWithExclusive (2.0% fail rate in 151 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-27", "closed_at": "2025-03-03", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "medium-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123655, "issue_title": "[CI] IngestCommonClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6762 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6762 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6755 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6755 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6748 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6748 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6741 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6741 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6734 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6734 / windows-2022_checkrestcompat_platform-support-windows\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 18 consecutive failures in step windows-2019_checkrestcompat_platform-support-windows\n[8.x] 18 consecutive failures in step windows-2022_checkrestcompat_platform-support-windows\n[8.x] 36 failures in class org.elasticsearch.ingest.common.IngestCommonClientYamlTestSuiteIT (3.7% fail rate in 978 executions)\n[8.x] 18 failures in step windows-2019_checkrestcompat_platform-support-windows (100.0% fail rate in 18 executions)\n[8.x] 18 failures in step windows-2022_checkrestcompat_platform-support-windows (100.0% fail rate in 18 executions)\n[8.x] 18 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-27", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Core/Infra", "low-risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123632, "issue_title": "[ML] Model allocator attempts to locate model on nodes with insufficient memory", "issue_body": "When attempting to start a model, it fails because the attempt is being made on a node that does not have sufficient memory.\nIn one instance a user had 2x 16 gb ML nodes. One node had nearly all it's memory consumed and another node had no models deployed to it. ML attempt to deploy the model on the node that had very little memory left instead of locating the deployment on the ML node with sufficient memory.", "created_at": "2025-02-27", "closed_at": null, "labels": [">bug", ":ml", "Team:ML"], "State": "open", "Author": "jonathan-buttner"}
{"issue_number": 123617, "issue_title": "[CI] CliSelectIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6957 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #6942 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #6899 / almalinux-9_platform-support-unix\nelasticsearch-pull-request #61537 / part-3\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 4 failures in class org.elasticsearch.xpack.sql.qa.multi_node.CliSelectIT (1.1% fail rate in 356 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (30.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-27", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123611, "issue_title": "[CI] DataStreamsClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6763 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6756 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6749 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6742 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6735 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6728 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6721 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6714 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6707 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6700 / windows-2022_checkrestcompat_platform-support-windows\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 19 consecutive failures in step windows-2022_checkrestcompat_platform-support-windows\n[9.0] 19 failures in class org.elasticsearch.datastreams.DataStreamsClientYamlTestSuiteIT (2.4% fail rate in 788 executions)\n[9.0] 19 failures in step windows-2022_checkrestcompat_platform-support-windows (100.0% fail rate in 19 executions)\n[9.0] 19 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-27", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Core/Infra", "low-risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123568, "issue_title": "[CI] CancellableTasksIT testChildrenTasksCancelledOnTimeout failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6864 / openjdk17_checkpart1_java-fips-matrix\nelasticsearch-intake #19636 / part1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.action.admin.cluster.node.tasks.CancellableTasksIT.testChildrenTasksCancelledOnTimeout\" -Dtests.seed=56C2B893A3224A7D -Dtests.locale=jmc -Dtests.timezone=Chile/Continental -Druntime.java=17 -Dtests.fips.enabled=true\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: All incoming requests on node [node_t1] should have finished. Expected 0 bytes for requests in-flight but got 287 bytes; pending tasks [[{\n  \"node\" : \"node_t1\",\n  \"id\" : 45,\n  \"type\" : \"transport\",\n  \"action\" : \"internal::test_action\",\n  \"description\" : \"id=56\",\n  \"start_time\" : \"2025-03-08T14:04:11.507Z\",\n  \"start_time_in_millis\" : 1741442651507,\n  \"running_time\" : \"1.1m\",\n  \"running_time_in_nanos\" : 66558960350,\n  \"cancellable\" : true,\n  \"cancelled\" : false,\n  \"parent_task_id\" : \"2axWlDZdRWSCpxDPW7FnKg:23\",\n  \"headers\" : { }\n},{\n  \"node\" : \"node_t1\",\n  \"id\" : 14,\n  \"type\" : \"persistent\",\n  \"action\" : \"health-node[c]\",\n  \"status\" : {\n    \"state\" : \"STARTED\"\n  },\n  \"description\" : \"id=health-node\",\n  \"start_time\" : \"2025-03-08T14:04:10.175Z\",\n  \"start_time_in_millis\" : 1741442650175,\n  \"running_time\" : \"1.1m\",\n  \"running_time_in_nanos\" : 67891057689,\n  \"cancellable\" : true,\n  \"cancelled\" : false,\n  \"parent_task_id\" : \"cluster:1\",\n  \"headers\" : { }\n}]]\n\nIssue Reasons:\n\n[8.x] 2 failures in test testChildrenTasksCancelledOnTimeout (1.5% fail rate in 134 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-27", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123560, "issue_title": "[CI] SemanticMatchIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6965 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #6893 / ubuntu-2204_platform-support-unix\nelasticsearch-pull-request #61211 / part-3\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 3 failures in class org.elasticsearch.xpack.esql.qa.single_node.SemanticMatchIT (0.6% fail rate in 475 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (12.5% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-26", "closed_at": "2025-03-13", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123559, "issue_title": "[CI] CustomElandModelIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6933 / rocky-9_platform-support-unix\nelasticsearch-pull-request #61756 / part-2\nelasticsearch-periodic-platform-support #6901 / rocky-8_platform-support-unix\nelasticsearch-periodic-platform-support #6894 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #6830 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #6795 / ubuntu-2204_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 6 failures in class org.elasticsearch.xpack.inference.CustomElandModelIT (0.6% fail rate in 987 executions)\n[main] 5 failures in pipeline elasticsearch-periodic-platform-support (27.8% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-26", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", ":ml", "Team:ML", "Team:Delivery", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123556, "issue_title": "[CI] CoordinatedInferenceIngestIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6918 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #6801 / ubuntu-2004-aarch64_checkpart4_platform-support-arm\n\nReproduction Line:\nundefined\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[9.0] 2 failures in class org.elasticsearch.xpack.ml.integration.CoordinatedInferenceIngestIT (0.4% fail rate in 467 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (13.3% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-26", "closed_at": "2025-03-13", "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123540, "issue_title": "[DOC] Add content: Clarification and Additional Guidance for \"Create a Data View\" Documentation", "issue_body": "\nCurrent Documentation Excerpt (Item 6)\n\nClick Show advanced settings to:\n\nDisplay hidden and system indices.\nSpecify your own data view name. For example, enter your Elasticsearch index alias name.\nCreate a data view - Docs\n\n\nRequested Enhancements\n\n\nClarify the Custom Data View ID\n\nThe phrase \"Specify your own data view name\" appears to refer to the custom data view ID.\nIt would be helpful to explicitly state that this option allows users to define a custom data view ID, emphasizing that it is more than just a display name\u2014it serves as the unique identifier for the data view.\n\n\n\nSaved Objects Considerations\n\nAvoiding Duplication Issues:\nCustomers have experienced scenarios where duplicate data views, each linked to different visualizations, cause confusion. If one of these duplicates is removed without realizing its association with saved objects, the linked visualizations may break.\nEase of Recovery:\nUsing a memorable custom ID allows users to quickly recreate the data view and restore the association with visualizations and dashboards, as long as the custom ID is consistently referenced.\nSpace-Specific Constraints:\nThe documentation should note that the same custom ID cannot be used across different spaces. For example, if a user creates a data view with the custom ID cisco-asa in one space, they must choose a different ID (e.g., cisco-asa-<space>) for another space to avoid conflicts.\n\n\n\nSummary\nPlease update the \"Create a Data View\" documentation to:\n\nExplicitly mention that \"Specify your own data view name\" refers to defining a custom data view ID.\nInclude guidance on the benefits of using a custom ID from a saved objects perspective\u2014such as avoiding duplication issues and facilitating recovery.\nClarify the constraint regarding the use of custom IDs across different spaces.\n", "created_at": "2025-02-26", "closed_at": null, "labels": [">enhancement", ">docs", "Team:Docs"], "State": "open", "Author": "itsjustshortj"}
{"issue_number": 123495, "issue_title": "[CI] IngestCommonClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6664 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6664 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6657 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6657 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6651 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6651 / windows-2019_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6644 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6644 / windows-2019_checkrestcompat_platform-support-windows\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in class org.elasticsearch.ingest.common.IngestCommonClientYamlTestSuiteIT\n[8.x] 4 consecutive failures in step windows-2019_checkrestcompat_platform-support-windows\n[8.x] 4 consecutive failures in step windows-2022_checkrestcompat_platform-support-windows\n[8.x] 8 failures in class org.elasticsearch.ingest.common.IngestCommonClientYamlTestSuiteIT (4.0% fail rate in 201 executions)\n[8.x] 4 failures in step windows-2019_checkrestcompat_platform-support-windows (100.0% fail rate in 4 executions)\n[8.x] 4 failures in step windows-2022_checkrestcompat_platform-support-windows (100.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-26", "closed_at": "2025-02-26", "labels": [">test-failure", ":Data Management/Ingest Node", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123456, "issue_title": "[CI] QueryableReservedRolesIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6673 / rocky-8_platform-support-unix\nelasticsearch-periodic-platform-support #6632 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6625 / almalinux-8_platform-support-unix\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 failures in class org.elasticsearch.xpack.security.QueryableReservedRolesIT (0.8% fail rate in 372 executions)\n[main] 2 failures in step almalinux-8_platform-support-unix (40.0% fail rate in 5 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-platform-support (42.9% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-26", "closed_at": "2025-02-27", "labels": [">test-failure", ":Security/Security", "Team:Security", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123454, "issue_title": "[CI] RollupIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6632 / rhel-8_platform-support-unix\nelasticsearch-pull-request #58855 / part-5\nelasticsearch-pull-request #58852 / part-5\nelasticsearch-pull-request #58801 / part-5\nelasticsearch-pull-request #58798 / part-5\nelasticsearch-pull-request #58790 / part-5\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 6 failures in class org.elasticsearch.multi_node.RollupIT (0.9% fail rate in 668 executions)\n[main] 5 failures in step part-5 (2.7% fail rate in 183 executions)\n[main] 5 failures in pipeline elasticsearch-pull-request (2.7% fail rate in 187 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-26", "closed_at": "2025-02-26", "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123451, "issue_title": "[CI] CrossClusterQueryWithPartialResultsIT testOneRemoteClusterPartial failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6632 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #6569 / almalinux-8-aarch64_checkpart3_platform-support-arm\nelasticsearch-intake #18541 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.CrossClusterQueryWithPartialResultsIT.testOneRemoteClusterPartial\" -Dtests.seed=9379329E74F537E7 -Dtests.locale=en-VI -Dtests.timezone=Etc/GMT-4 -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 3 failures in test testOneRemoteClusterPartial (0.3% fail rate in 918 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (11.8% fail rate in 17 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-26", "closed_at": "2025-03-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123450, "issue_title": "[CI] IPSyntheticSourceNativeArrayIntegrationTests testSynthesizeEmptyArray failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6668 / release-tests\nelasticsearch-periodic #6662 / release-tests\nelasticsearch-periodic #6655 / release-tests\nelasticsearch-periodic #6648 / release-tests\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.IPSyntheticSourceNativeArrayIntegrationTests.testSynthesizeArrayRandom\" -Dtests.seed=C245918E159AA8E9 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=teo-Latn-UG -Dtests.timezone=Europe/Bucharest -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable with items [\"_id\", \"_ignored_source\"] in any order\n     but: not matched: \"_recovery_source\"\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in step release-tests\n[8.x] 4 failures in test testSynthesizeEmptyArray (2.9% fail rate in 140 executions)\n[8.x] 4 failures in step release-tests (100.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-26", "closed_at": "2025-02-26", "labels": [">test-failure", "Team:StorageEngine", ":StorageEngine/Mapping", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123437, "issue_title": "[CI] DockerTests test151MachineDependentHeapWithSizeOverride failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #6343 / rhel-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6343 / oraclelinux-8_packaging-tests-unix\nelasticsearch-periodic-packaging #6343 / rocky-8_packaging-tests-unix\nelasticsearch-pull-request #59489 / ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-periodic-packaging #6336 / rocky-8_packaging-tests-unix\nelasticsearch-periodic-packaging #6336 / almalinux-8_packaging-tests-unix\nelasticsearch-pull-request #59343 / rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-periodic-packaging #6329 / rhel-8_packaging-tests-unix\nelasticsearch-periodic-packaging #6329 / almalinux-9_packaging-tests-unix\nelasticsearch-periodic-packaging #6329 / rocky-8_packaging-tests-unix\n\nReproduction Line:\nnull\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failed to check whether Elasticsearch had started. This could be because authentication isn't working properly. Check the container logs\n\nIssue Reasons:\n\n[9.0] 11 failures in test test151MachineDependentHeapWithSizeOverride (5.8% fail rate in 189 executions)\n[9.0] 2 failures in step rhel-9_packaging-tests-unix (66.7% fail rate in 3 executions)\n[9.0] 3 failures in step rocky-8_packaging-tests-unix (100.0% fail rate in 3 executions)\n[9.0] 3 failures in pipeline elasticsearch-periodic-packaging (75.0% fail rate in 4 executions)\n[9.0] 2 failures in pipeline elasticsearch-pull-request (11.1% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-26", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123432, "issue_title": "[CI] HeapAttackIT testLookupExplosionNoFetch failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6766 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-pull-request #59795 / part-1\n\nReproduction Line:\n./gradlew \":test:external-modules:test-esql-heap-attack:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.heap_attack.HeapAttackIT.testLookupExplosionNoFetch\" -Dtests.seed=B6380225CF313F5E -Dtests.locale=en-KI -Dtests.timezone=America/Los_Angeles -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:34875], URI [/_query?error_trace=], status line [HTTP/1.1 429 Too Many Requests]\nWarnings: [No limit defined, adding default limit of [1000]]\n{\"error\":{\"root_cause\":[{\"type\":\"circuit_breaking_exception\",\"reason\":\"[request] Data too large, data for [serialize lookup join response] would be [348652480/332.5mb], which is larger than the limit of [322122547/307.1mb]; for more information, see https://www.elastic.co/guide/en/elasticsearch/reference/master/circuit-breaker-errors.html\",\"bytes_wanted\":348652480,\"bytes_limit\":322122547,\"durability\":\"TRANSIENT\",\"stack_trace\":\"org.elasticsearch.common.breaker.CircuitBreakingException: [request] Data too large, data for [serialize lookup join response] would be [348652480/332.5mb], which is larger than the limit of [322122547/307.1mb]; for more information, see https://www.elastic.co/guide/en/elasticsearch/reference/master/circuit-breaker-errors.html\\n\\tat org.elasticsea\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test testLookupExplosionNoFetch (0.3% fail rate in 611 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-03-11", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "medium-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123430, "issue_title": "ClassCastException in EsqlFunctionRegistry", "issue_body": "I encountered a ClassCastException within LinkedHashMap used by ESQL.\n Caused by:\t\n  java.lang.ClassCastException: class java.util.LinkedHashMap$Entry cannot be cast to class java.util.HashMap$TreeNode (java.util.LinkedHashMap$Entry and java.util.HashMap$TreeNode are in module java.base of loader 'bootstrap')\t\n      at java.base/java.util.HashMap$TreeNode.moveRootToFront(HashMap.java:1995)\t\n      at java.base/java.util.HashMap$TreeNode.treeify(HashMap.java:2111)\t\n      at java.base/java.util.HashMap.treeifyBin(HashMap.java:779)\t\n      at java.base/java.util.HashMap.putVal(HashMap.java:651)\t\n      at java.base/java.util.HashMap.put(HashMap.java:619)\t\n      at org.elasticsearch.xpack.esql.expression.function.EsqlFunctionRegistry.buildDataTypesForStringLiteralConversion(EsqlFunctionRegistry.java:718)\t\n      at org.elasticsearch.xpack.esql.expression.function.EsqlFunctionRegistry.<init>(EsqlFunctionRegistry.java:234)\n\nSee https://gradle-enterprise.elastic.co/s/fwqg4ibahnj4s/console-log/task/:x-pack:plugin:esql:internalClusterTest?page=1\nI wonder if this is due to concurrent modification?", "created_at": "2025-02-25", "closed_at": "2025-02-27", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "rjernst"}
{"issue_number": 123429, "issue_title": "RuleQuery Builder: NullPointerException in doRewrite()", "issue_body": "Seems like we need a check to make sure the MultiGetItemResponse succeeded and getResponse() doesn't return null.\nFull stack trace:\njava.lang.NullPointerException: Cannot invoke \"org.elasticsearch.action.get.GetResponse.isExists()\" because \"getResponse\" is null\n\tat org.elasticsearch.application@9.1.0/org.elasticsearch.xpack.application.rules.RuleQueryBuilder.lambda$doRewrite$1(RuleQueryBuilder.java:257)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:257)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:203)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:197)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:336)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:97)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.get.TransportMultiGetAction.doExecute(TransportMultiGetAction.java:104)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.get.TransportMultiGetAction.doExecute(TransportMultiGetAction.java:37)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:135)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ActionFilter$Simple.apply(ActionFilter.java:54)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n\tat org.elasticsearch.metering@9.1.0/co.elastic.elasticsearch.metering.activitytracking.ActivityTrackerActionFilter.apply(ActivityTrackerActionFilter.java:54)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.MappedActionFilters$MappedFilterChain.proceed(MappedActionFilters.java:71)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.MappedActionFilters.apply(MappedActionFilters.java:49)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ActionFilter$Simple.apply(ActionFilter.java:54)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$applyInternal$4(SecurityActionFilter.java:182)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$DelegatingFailureActionListener.onResponse(ActionListenerImplementations.java:219)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:640)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.FieldAndDocumentLevelSecurityRequestInterceptor.intercept(FieldAndDocumentLevelSecurityRequestInterceptor.java:79)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.ValidateRequestInterceptor.intercept(ValidateRequestInterceptor.java:20)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:638)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.FieldAndDocumentLevelSecurityRequestInterceptor.intercept(FieldAndDocumentLevelSecurityRequestInterceptor.java:79)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.SearchRequestInterceptor.intercept(SearchRequestInterceptor.java:20)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:638)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.FieldAndDocumentLevelSecurityRequestInterceptor.intercept(FieldAndDocumentLevelSecurityRequestInterceptor.java:79)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.UpdateRequestInterceptor.intercept(UpdateRequestInterceptor.java:27)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:638)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.BulkShardRequestInterceptor.intercept(BulkShardRequestInterceptor.java:85)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:638)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.FieldAndDocumentLevelSecurityRequestInterceptor.intercept(FieldAndDocumentLevelSecurityRequestInterceptor.java:79)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.ShardSearchRequestInterceptor.intercept(ShardSearchRequestInterceptor.java:23)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:638)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.ResizeRequestInterceptor.intercept(ResizeRequestInterceptor.java:105)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:638)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.SearchRequestCacheDisablingInterceptor.intercept(SearchRequestCacheDisablingInterceptor.java:53)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:638)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.DlsFlsLicenseRequestInterceptor.intercept(DlsFlsLicenseRequestInterceptor.java:106)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:638)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$1.onResponse(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.interceptor.IndicesAliasesRequestInterceptor.intercept(IndicesAliasesRequestInterceptor.java:127)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.runRequestInterceptors(AuthorizationService.java:634)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.handleIndexActionAuthorizationResult(AuthorizationService.java:619)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorizeAction$13(AuthorizationService.java:517)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(AuthorizationService.java:1033)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService$AuthorizationResultListener.onResponse(AuthorizationService.java:999)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine.authorizeIndexAction(RBACEngine.java:336)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.authorizeAction(AuthorizationService.java:510)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.maybeAuthorizeRunAs(AuthorizationService.java:442)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.lambda$authorize$3(AuthorizationService.java:329)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:257)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine.lambda$resolveAuthorizationInfo$0(RBACEngine.java:171)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:247)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.lambda$getRoles$4(CompositeRolesStore.java:202)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:247)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRole(CompositeRolesStore.java:210)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.store.CompositeRolesStore.getRoles(CompositeRolesStore.java:195)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.RBACEngine.resolveAuthorizationInfo(RBACEngine.java:167)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationService.authorize(AuthorizationService.java:345)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$applyInternal$5(SecurityActionFilter.java:178)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:247)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:97)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authc.AuthenticatorChain.authenticate(AuthenticatorChain.java:93)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:264)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authc.AuthenticationService.authenticate(AuthenticationService.java:173)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.applyInternal(SecurityActionFilter.java:174)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.lambda$apply$1(SecurityActionFilter.java:115)\n\tat org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.security.SecurityContext.executeAsInternalUser(SecurityContext.java:170)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.authz.AuthorizationUtils.switchUserBasedOnActionOriginAndExecute(AuthorizationUtils.java:168)\n\tat org.elasticsearch.security@9.1.0/org.elasticsearch.xpack.security.action.filter.SecurityActionFilter.apply(SecurityActionFilter.java:111)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.TransportAction$RequestFilterChain.proceed(TransportAction.java:132)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.TransportAction.handleExecution(TransportAction.java:96)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:59)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.tasks.TaskManager.registerAndExecute(TaskManager.java:197)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.client.internal.node.NodeClient.executeLocally(NodeClient.java:106)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.client.internal.node.NodeClient.doExecute(NodeClient.java:84)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.client.internal.support.AbstractClient.execute(AbstractClient.java:140)\n\tat org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.ClientHelper.lambda$executeAsyncWithOrigin$3(ClientHelper.java:238)\n\tat org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.ClientHelper.executeAsyncWithOrigin(ClientHelper.java:223)\n\tat org.elasticsearch.xcore@9.1.0/org.elasticsearch.xpack.core.ClientHelper.executeAsyncWithOrigin(ClientHelper.java:238)\n\tat org.elasticsearch.application@9.1.0/org.elasticsearch.xpack.application.rules.RuleQueryBuilder.lambda$doRewrite$2(RuleQueryBuilder.java:241)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.index.query.QueryRewriteContext.executeAsyncActions(QueryRewriteContext.java:343)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.index.query.Rewriteable.rewriteAndFetch(Rewriteable.java:103)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.index.query.Rewriteable.lambda$rewriteAndFetch$0(Rewriteable.java:104)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:247)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.index.query.QueryRewriteContext$1.onResponse(QueryRewriteContext.java:328)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.retriever.CompoundRetrieverBuilder$1.onResponse(CompoundRetrieverBuilder.java:185)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.retriever.CompoundRetrieverBuilder$1.onResponse(CompoundRetrieverBuilder.java:149)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:203)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:197)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:336)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:97)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListener.respondAndRelease(ActionListener.java:375)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.TransportMultiSearchAction$1.finish(TransportMultiSearchAction.java:186)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.TransportMultiSearchAction$1.handleResponse(TransportMultiSearchAction.java:181)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.TransportMultiSearchAction$1.onResponse(TransportMultiSearchAction.java:166)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.TransportMultiSearchAction$1.onResponse(TransportMultiSearchAction.java:163)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$RunAfterActionListener.onResponse(ActionListenerImplementations.java:298)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.SubscribableListener$SuccessResult.complete(SubscribableListener.java:387)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.SubscribableListener.tryComplete(SubscribableListener.java:307)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.SubscribableListener.setResult(SubscribableListener.java:336)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.SubscribableListener.onResponse(SubscribableListener.java:250)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$SafeMappedActionListener.onResponse(ActionListenerImplementations.java:131)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:203)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:197)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:336)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:97)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.TransportSearchAction$SearchResponseActionListener.onResponse(TransportSearchAction.java:1961)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.TransportSearchAction$SearchResponseActionListener.onResponse(TransportSearchAction.java:1894)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerImplementations$RunAfterActionListener.onResponse(ActionListenerImplementations.java:298)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListener.respondAndRelease(ActionListener.java:375)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.sendSearchResponse(AbstractSearchAsyncAction.java:626)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.FetchLookupFieldsPhase.run(FetchLookupFieldsPhase.java:83)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.executePhase(AbstractSearchAsyncAction.java:374)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:368)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.ExpandSearchPhase.onPhaseDone(ExpandSearchPhase.java:174)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.ExpandSearchPhase.run(ExpandSearchPhase.java:59)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.executePhase(AbstractSearchAsyncAction.java:374)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.AbstractSearchAsyncAction.executeNextPhase(AbstractSearchAsyncAction.java:368)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.FetchSearchPhase.moveToNextPhase(FetchSearchPhase.java:281)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.FetchSearchPhase.lambda$innerRunFetch$3(FetchSearchPhase.java:154)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.CountedCollector.countDown(CountedCollector.java:41)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.ArraySearchPhaseResults.consumeResult(ArraySearchPhaseResults.java:48)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.CountedCollector.onResult(CountedCollector.java:49)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.FetchSearchPhase$2.innerOnResponse(FetchSearchPhase.java:232)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.FetchSearchPhase$2.innerOnResponse(FetchSearchPhase.java:227)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.SearchActionListener.onResponse(SearchActionListener.java:34)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.SearchActionListener.onResponse(SearchActionListener.java:19)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListenerResponseHandler.handleResponse(ActionListenerResponseHandler.java:49)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.search.SearchTransportService$ConnectionCountingHandler.handleResponse(SearchTransportService.java:587)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$UnregisterChildTransportResponseHandler.handleResponse(TransportService.java:1767)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleResponse(TransportService.java:1499)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$DirectResponseChannel.processResponse(TransportService.java:1596)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:1570)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.transport.TaskTransportChannel.sendResponse(TaskTransportChannel.java:35)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ChannelActionListener.onResponse(ChannelActionListener.java:33)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.support.ChannelActionListener.onResponse(ChannelActionListener.java:20)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService$2.onResponse(SearchService.java:1306)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionListener.respondAndRelease(ActionListener.java:375)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1575)\n", "created_at": "2025-02-25", "closed_at": "2025-03-03", "labels": [">bug", "Team:SearchOrg", ":SearchOrg/Relevance"], "State": "closed", "Author": "jordan-powers"}
{"issue_number": 123425, "issue_title": "[CI] SpatialEnvelopeVisitorTests testVisitGeoPointsWrapping failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6659 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #6639 / ubuntu-2004_platform-support-unix\n\nReproduction Line:\n./gradlew \":libs:geo:test\" --tests \"org.elasticsearch.geometry.utils.SpatialEnvelopeVisitorTests.testVisitGeoPointsWrapping\" -Dtests.seed=51D2DB4B0E94FA99 -Dtests.locale=sr-Latn-XK -Dtests.timezone=Asia/Ust-Nera -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: 24: POINT (-3.6947266019517255E-14 62.942431963774254)\nExpected: a value less than or equal to <-3.6947266019517255E-14>\n     but: <0.0> was greater than <-3.6947266019517255E-14>\n\nIssue Reasons:\n\n[main] 2 failures in test testVisitGeoPointsWrapping (1.2% fail rate in 173 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": null, "labels": [":Analytics/Geo", ">test-failure", "Team:Analytics", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123423, "issue_title": "[CI] KeywordSyntheticSourceNativeArrayIntegrationTests testSynthesizeArray failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6668 / release-tests\nelasticsearch-periodic #6662 / release-tests\nelasticsearch-periodic #6655 / release-tests\nelasticsearch-periodic #6648 / release-tests\nelasticsearch-periodic #6529 / release-tests\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.KeywordSyntheticSourceNativeArrayIntegrationTests.testSynthesizeArray\" -Dtests.seed=C245918E159AA8E9 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=th-Thai-TH -Dtests.timezone=America/Atka -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable with items [\"_id\", \"_ignored_source\"] in any order\n     but: not matched: \"_recovery_source\"\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in step release-tests\n[8.x] 5 failures in test testSynthesizeArray (0.5% fail rate in 927 executions)\n[8.x] 5 failures in step release-tests (27.8% fail rate in 18 executions)\n[8.x] 5 failures in pipeline elasticsearch-periodic (23.8% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-26", "labels": [">test-failure", "low-risk", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123422, "issue_title": "[CI] KeywordSyntheticSourceNativeArrayIntegrationTests testSynthesizeArrayIgnoreAbove failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6668 / release-tests\nelasticsearch-periodic #6662 / release-tests\nelasticsearch-periodic #6655 / release-tests\nelasticsearch-periodic #6648 / release-tests\nelasticsearch-periodic #6529 / release-tests\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.KeywordSyntheticSourceNativeArrayIntegrationTests.testSynthesizeArray\" -Dtests.seed=C245918E159AA8E9 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=th-Thai-TH -Dtests.timezone=America/Atka -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable with items [\"_id\", \"_ignored_source\"] in any order\n     but: not matched: \"_recovery_source\"\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in step release-tests\n[8.x] 5 failures in test testSynthesizeArrayIgnoreAbove (0.5% fail rate in 927 executions)\n[8.x] 5 failures in step release-tests (27.8% fail rate in 18 executions)\n[8.x] 5 failures in pipeline elasticsearch-periodic (23.8% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-26", "labels": [">test-failure", "Team:StorageEngine", ":StorageEngine/Mapping", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123421, "issue_title": "[CI] KeywordSyntheticSourceNativeArrayIntegrationTests testSynthesizeArrayRandom failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6668 / release-tests\nelasticsearch-periodic #6662 / release-tests\nelasticsearch-periodic #6655 / release-tests\nelasticsearch-periodic #6648 / release-tests\nelasticsearch-periodic #6529 / release-tests\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.KeywordSyntheticSourceNativeArrayIntegrationTests.testSynthesizeArray\" -Dtests.seed=C245918E159AA8E9 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=th-Thai-TH -Dtests.timezone=America/Atka -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable with items [\"_id\", \"_ignored_source\"] in any order\n     but: not matched: \"_recovery_source\"\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in step release-tests\n[8.x] 5 failures in test testSynthesizeArrayRandom (0.5% fail rate in 927 executions)\n[8.x] 5 failures in step release-tests (27.8% fail rate in 18 executions)\n[8.x] 5 failures in pipeline elasticsearch-periodic (23.8% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-26", "labels": [">test-failure", "low-risk", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123420, "issue_title": "[CI] KeywordSyntheticSourceNativeArrayIntegrationTests testSynthesizeEmptyArray failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6668 / release-tests\nelasticsearch-periodic #6662 / release-tests\nelasticsearch-periodic #6655 / release-tests\nelasticsearch-periodic #6648 / release-tests\nelasticsearch-periodic #6529 / release-tests\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.KeywordSyntheticSourceNativeArrayIntegrationTests.testSynthesizeArray\" -Dtests.seed=C245918E159AA8E9 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=th-Thai-TH -Dtests.timezone=America/Atka -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable with items [\"_id\", \"_ignored_source\"] in any order\n     but: not matched: \"_recovery_source\"\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in step release-tests\n[8.x] 5 failures in test testSynthesizeEmptyArray (0.5% fail rate in 927 executions)\n[8.x] 5 failures in step release-tests (27.8% fail rate in 18 executions)\n[8.x] 5 failures in pipeline elasticsearch-periodic (23.8% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-26", "labels": [">test-failure", "Team:StorageEngine", ":StorageEngine/Mapping", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123419, "issue_title": "[CI] IPSyntheticSourceNativeArrayIntegrationTests testSynthesizeArrayIgnoreMalformed failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6668 / release-tests\nelasticsearch-periodic #6662 / release-tests\nelasticsearch-periodic #6655 / release-tests\nelasticsearch-periodic #6648 / release-tests\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.IPSyntheticSourceNativeArrayIntegrationTests.testSynthesizeArrayRandom\" -Dtests.seed=C245918E159AA8E9 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=teo-Latn-UG -Dtests.timezone=Europe/Bucharest -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable with items [\"_id\", \"_ignored_source\"] in any order\n     but: not matched: \"_recovery_source\"\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in step release-tests\n[8.x] 4 failures in test testSynthesizeArrayIgnoreMalformed (2.9% fail rate in 140 executions)\n[8.x] 4 failures in step release-tests (100.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-26", "labels": [">test-failure", "Team:StorageEngine", ":StorageEngine/Mapping", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123418, "issue_title": "[CI] IPSyntheticSourceNativeArrayIntegrationTests testSynthesizeArrayRandom failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6668 / release-tests\nelasticsearch-periodic #6662 / release-tests\nelasticsearch-periodic #6655 / release-tests\nelasticsearch-periodic #6648 / release-tests\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.IPSyntheticSourceNativeArrayIntegrationTests.testSynthesizeArrayRandom\" -Dtests.seed=C245918E159AA8E9 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=teo-Latn-UG -Dtests.timezone=Europe/Bucharest -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable with items [\"_id\", \"_ignored_source\"] in any order\n     but: not matched: \"_recovery_source\"\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in step release-tests\n[8.x] 4 failures in test testSynthesizeArrayRandom (2.9% fail rate in 140 executions)\n[8.x] 4 failures in step release-tests (100.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-26", "labels": [">test-failure", "Team:StorageEngine", ":StorageEngine/Mapping", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123417, "issue_title": "[CI] IPSyntheticSourceNativeArrayIntegrationTests testSynthesizeArray failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6668 / release-tests\nelasticsearch-periodic #6662 / release-tests\nelasticsearch-periodic #6655 / release-tests\nelasticsearch-periodic #6648 / release-tests\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.IPSyntheticSourceNativeArrayIntegrationTests.testSynthesizeArrayRandom\" -Dtests.seed=C245918E159AA8E9 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=teo-Latn-UG -Dtests.timezone=Europe/Bucharest -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable with items [\"_id\", \"_ignored_source\"] in any order\n     but: not matched: \"_recovery_source\"\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in step release-tests\n[8.x] 4 failures in test testSynthesizeArray (2.9% fail rate in 140 executions)\n[8.x] 4 failures in step release-tests (100.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-26", "labels": [">test-failure", "low-risk", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123416, "issue_title": "[CI] DataStreamsClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #6659 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6646 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6639 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6632 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-periodic-platform-support #6625 / windows-2022_checkrestcompat_platform-support-windows\nelasticsearch-pull-request #59081 / part-1\nelasticsearch-pull-request #59081 / rest-compatibility\nelasticsearch-pull-request #59025 / rest-compatibility\nelasticsearch-pull-request #58984 / part-1\nelasticsearch-pull-request #58984 / rest-compatibility\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 5 consecutive failures in step windows-2022_checkrestcompat_platform-support-windows\n[main] 10 failures in class org.elasticsearch.datastreams.DataStreamsClientYamlTestSuiteIT (1.2% fail rate in 853 executions)\n[main] 5 failures in step windows-2022_checkrestcompat_platform-support-windows (62.5% fail rate in 8 executions)\n[main] 2 failures in step part-1 (1.1% fail rate in 186 executions)\n[main] 3 failures in step rest-compatibility (1.4% fail rate in 218 executions)\n[main] 5 failures in pipeline elasticsearch-periodic-platform-support (55.6% fail rate in 9 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (1.4% fail rate in 222 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-26", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123404, "issue_title": "[ML] Serverless Trained Models do not move to smaller hosts", "issue_body": "There is a known limitation in Serverless environments where the ML node is larger than it needs to be to run the current model allocations and threads.\nWhen ML Trained Model allocations are removed, if any model remains running on the host, then Serverless will retain the last host regardless of its size.\nFor example:\n\nIf you deploy a model with 30 allocations\nThen you deploy a model with 1 allocation\nServerless will autoscale up to a 32 GB host to hold the 2 models with 31 cumulative allocations\nIf you then delete the model with 30 allocations\nServerless will retain the 32 GB host to hold the 1 model with 1 allocation\n\nIn this scenario, ideally, Serverless would spin up a smaller host and relocate the 1 model with 1 allocation to that host, releasing the 32GB host and reducing costs.\nWorkaround\nIn order for Serverless to release the resources, models must be stopped or scaled down to 0 for ~30 minutes to ~1 hour.  Serverless will detect that no ML nodes are needed and remove the ML nodes. The models can then be restarted or scaled back up, and Serverless will choose a more appropriate host size.", "created_at": "2025-02-25", "closed_at": "2025-04-17", "labels": [">bug", ":ml", "Team:ML", "rca-action"], "State": "closed", "Author": "prwhelan"}
{"issue_number": 123399, "issue_title": "Support get tasks and hot_threads API from remote clusters", "issue_body": "The tasks and hot_threads APIs are critical for debugging slow search or ES|QL requests. However, with CCS, we need direct access to remote clusters to retrieve tasks or hot_threads. In many cases, we don't have access to these remote clusters except for the admin. Also, if a _search or ES|QL request hits many remote clusters, we need to manually retrieve tasks and hot_threads from each cluster individually.\nShould we support getting the tasks and hot_threads from remote clusters?", "created_at": "2025-02-25", "closed_at": null, "labels": [":Distributed Coordination/Task Management", ":Security/Authorization", "Team:Analytics", "Team:Security", ":Analytics/ES|QL", "Team:Distributed Coordination"], "State": "open", "Author": "dnhatn"}
{"issue_number": 123391, "issue_title": "ES|QL: Simple RRF with no score customization", "issue_body": "Part of #123389\nWe want to expose an RRF command that in the beginning has no customization options, it's just RRF:\nfrom search-movies metadata _score, _id, _index\n| fork ( where semantic_title:\"Shakespeare\" | sort _score)\n          ( where title:\"Shakespeare\" | sort _score)\n| rrf\n| keep title, _score\n\nTasks:\n\n#123396\n#125225\nbetter error messages for metadata attributes #123396 (comment)\ncheck if we can have unexecutable queries since the RRF planning contains a SORT https://github.com/elastic/elasticsearch/pull/123396/files#r1985082165 - we might need to add an extra LIMIT in the RRF planning (we can just LIMIT to the max number of elements that can come from FORK which we should know if we sum the LIMIT from each FORK branch)\n", "created_at": "2025-02-25", "closed_at": null, "labels": [">feature", "priority:high", "Team:Search Relevance", ":Search Relevance/Search", "v9.1.0"], "State": "open", "Author": "ioanatia"}
{"issue_number": 123389, "issue_title": "ES|QL RRF Command", "issue_body": "tracked in #123043\nRRF is a method for combining multiple result sets with different scoring functions into a single result set.\nIn ES|QL RRF will be used in combination with FORK.\nHere is an example of how RRF can be used to combine lexical and semantic search results:\nfrom search-movies metadata _score\n| fork ( where semantic_title:\"Shakespeare\" | sort _score desc )\n       ( where title:\"Shakespeare\" | sort _score desc )\n| rrf\n| keep title, _score\n\nConceptual execution\nThe RRF command will be split into 3 parts:\n\nRrfScoreEval which will receive a discriminator column (_fork by default) and will iterate through the rows assigning a new _score equal to 1 + (rank_constant + order(row)):\n\nrank_constant will default to 60, but we could allow this to be customizable\norder(row) indicates the position of the row in the row subset - _fork is used to determine the row subset\n\n\nA deduplication step which will:\n\nfor the same document, it will compute sum the scores and deduplicate the rows\n\n\nFinally a sort step where we can order by the new scores\n\nDevelopment\nWe will evolve the RRF command to allow more flexibility in how the scoring function gets computed.\n\n#123391 (just | RRF)\nsupport customization of the rank_constant\nsupport weighted RRF (either by specifying weights for each fork branch or through a general customization of the ranking function)\nsupport customization of the ranking function\n\nAdditional work that we should be tracking separately but including it here for now:\n\nevolve the dedup step into its own command\nexpose the row order as a feature of ES|QL\n", "created_at": "2025-02-25", "closed_at": null, "labels": ["Meta", "ES|QL-ui", "priority:high", "Team:Search Relevance", ":Search Relevance/Search", "v9.1.0"], "State": "open", "Author": "ioanatia"}
{"issue_number": 123380, "issue_title": "[CI] PackageUpgradeTests test21CheckUpgradedVersion failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #6319 / rocky-8_7.15.2_packaging-tests-upgrade\nelasticsearch-periodic-packaging #6235 / ubuntu-2004_7.14.2_packaging-tests-upgrade\n\nReproduction Line:\nnull\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: Request failed:\nHTTP/1.1 408 Request Timeout\n{\n  \"cluster_name\" : \"elasticsearch\",\n  \"status\" : \"yellow\",\n  \"timed_out\" : true,\n  \"number_of_nodes\" : 1,\n  \"number_of_data_nodes\" : 1,\n  \"active_primary_shards\" : 4,\n  \"active_shards\" : 4,\n  \"relocating_shards\" : 0,\n  \"initializing_shards\" : 0,\n  \"unassigned_shards\" : 1,\n  \"delayed_unassigned_shards\" : 0,\n  \"number_of_pending_tasks\" : 0,\n  \"number_of_in_flight_fetch\" : 0,\n  \"task_max_waiting_in_queue_millis\" : 0,\n  \"active_shards_percent_as_number\" : 80.0\n}\n\n\nIssue Reasons:\n\n[7.17] 2 failures in test test21CheckUpgradedVersion (0.4% fail rate in 565 executions)\n[7.17] 2 failures in pipeline elasticsearch-periodic-packaging (15.4% fail rate in 13 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123376, "issue_title": "Remove test usages of `DataStream#getDefaultBackingIndexName`", "issue_body": "We've already seen several test failures that were caused by (integration) test usages of DataStream#getDefaultBackingIndexName. The danger is that when a test runs around midnight, the test cluster might create a data stream backing index using day X and the test that calls getDefaultBackingIndexName uses day X + 1 because it executed a few milliseconds later. That causes the test to look for a backing index that will never exist.\nThe solution is straightforward: retrieve the list of backing indices from the data stream and extract the backing index name from that list.\nIntegration tests\n\n elasticsearch.modules.data-streams.internalClusterTest  (19 usages found)\n elasticsearch.x-pack.plugin.ilm.internalClusterTest  (2 usages found) #124319\n elasticsearch.x-pack.plugin.ilm.qa.multi-node.javaRestTest  (10 usages found) #124319\n elasticsearch.x-pack.plugin.logsdb.javaRestTest  (3 usages found)\n elasticsearch.x-pack.plugin.logsdb.qa.with-basic.javaRestTest\n\nUnit tests\nUnit tests do not fail that often because they are much faster, but it would be good to check that this method is not used multiple times in a unit test or it is replaced by the getDefaultBackingIndexName that uses the provided timestamp\n\n elasticsearch.modules.data-streams.test  (50 usages found)\n elasticsearch.server.test  (106 usages found)\n elasticsearch.x-pack.plugin.ccr.qa.multi-cluster.test  (3 usages found)\n elasticsearch.x-pack.plugin.ccr.test  (19 usages found)\n  elasticsearch.x-pack.plugin.core.test  (3 usages found)\n elasticsearch.x-pack.plugin.logsdb.test  (18 usages found)\n elasticsearch.x-pack.plugin.ml.test  (1 usage found)\n elasticsearch.x-pack.plugin.security.test  (8 usages found)\n\nNot all the usages above are incorrect. But this can be used to track the progress.", "created_at": "2025-02-25", "closed_at": null, "labels": [">test", ":Data Management/Data streams", "Team:Data Management"], "State": "open", "Author": "nielsbauman"}
{"issue_number": 123375, "issue_title": "[CI] FullClusterRestartIT testGeoIpDatabaseConfigurations {cluster=OLD} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6686 / 8.15.5_bwc\nelasticsearch-periodic #6679 / 8.15.5_bwc\nelasticsearch-periodic #6672 / 8.15.5_bwc\nelasticsearch-periodic #6665 / 8.15.5_bwc\nelasticsearch-periodic #6658 / 8.15.5_bwc\nelasticsearch-periodic #6651 / 8.15.5_bwc\nelasticsearch-periodic #6644 / 8.15.5_bwc\nelasticsearch-periodic #6637 / 8.15.5_bwc\nelasticsearch-periodic #6630 / 8.15.5_bwc\nelasticsearch-periodic #6623 / 8.15.5_bwc\n\nReproduction Line:\n./gradlew \":modules:ingest-geoip:qa:full-cluster-restart:v8.15.5#bwcTest\" -Dtests.class=\"org.elasticsearch.ingest.geoip.FullClusterRestartIT\" -Dtests.method=\"testGeoIpDatabaseConfigurations {cluster=UPGRADED}\" -Dtests.seed=C5B21F27950EBDDB -Dtests.bwc=true -Dtests.locale=uz-UZ -Dtests.timezone=Etc/Greenwich -Druntime.java=23\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a collection with size <1>\n     but: collection size was <0>\n\nIssue Reasons:\n\n[8.16] 10 consecutive failures in step 8.15.5_bwc\n[8.16] 10 failures in test testGeoIpDatabaseConfigurations {cluster=OLD} (11.2% fail rate in 89 executions)\n[8.16] 10 failures in step 8.15.5_bwc (100.0% fail rate in 10 executions)\n[8.16] 10 failures in pipeline elasticsearch-periodic (100.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-27", "labels": [">test-failure", ":Data Management/Ingest Node", "Team:Data Management", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123374, "issue_title": "[CI] FullClusterRestartIT testGeoIpDatabaseConfigurations {cluster=UPGRADED} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6686 / 8.15.5_bwc\nelasticsearch-periodic #6679 / 8.15.5_bwc\nelasticsearch-periodic #6672 / 8.15.5_bwc\nelasticsearch-periodic #6665 / 8.15.5_bwc\nelasticsearch-periodic #6658 / 8.15.5_bwc\nelasticsearch-periodic #6651 / 8.15.5_bwc\nelasticsearch-periodic #6644 / 8.15.5_bwc\nelasticsearch-periodic #6637 / 8.15.5_bwc\nelasticsearch-periodic #6630 / 8.15.5_bwc\nelasticsearch-periodic #6623 / 8.15.5_bwc\n\nReproduction Line:\n./gradlew \":modules:ingest-geoip:qa:full-cluster-restart:v8.15.5#bwcTest\" -Dtests.class=\"org.elasticsearch.ingest.geoip.FullClusterRestartIT\" -Dtests.method=\"testGeoIpDatabaseConfigurations {cluster=UPGRADED}\" -Dtests.seed=C5B21F27950EBDDB -Dtests.bwc=true -Dtests.locale=uz-UZ -Dtests.timezone=Etc/Greenwich -Druntime.java=23\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a collection with size <1>\n     but: collection size was <0>\n\nIssue Reasons:\n\n[8.16] 10 consecutive failures in step 8.15.5_bwc\n[8.16] 10 failures in test testGeoIpDatabaseConfigurations {cluster=UPGRADED} (11.2% fail rate in 89 executions)\n[8.16] 10 failures in step 8.15.5_bwc (100.0% fail rate in 10 executions)\n[8.16] 10 failures in pipeline elasticsearch-periodic (100.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-02-27", "labels": [">test-failure", ":Data Management/Ingest Node", "Team:Data Management", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123372, "issue_title": "Property merging in component template fails on subobjects:false", "issue_body": "Elasticsearch Version\nmain\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nmacOS Catalina\nProblem Description\nWhen using subobjects: false in a component template and adding a field into the same object via dotted field name, an error is thrown even though valid mappings can be built and are built correctly when using two separate component templates\nSteps to Reproduce\nPUT _component_template/broken_template\n{\n  \"template\": {\n    \"mappings\": {\n      \"properties\": {\n        \"foo\": {\n          \"type\": \"object\",\n          \"subobjects\": false\n        },\n        \"foo.bar\": {\n          \"type\": \"keyword\"\n        }\n      }\n    }\n  }\n\nfails with the [subobjects] parameter can't be updated for the object mapping [foo].\nHowever, defining foo and foo.bar in the exact same way in two component templates works correctly:\nPUT _component_template/working_template1\n{\n  \"template\": {\n    \"mappings\": {\n      \"properties\": {\n        \"foo\": {\n          \"type\": \"object\",\n          \"subobjects\": false\n        }\n      }\n    }\n  }\n}\n\nPUT _component_template/working_template2\n{\n  \"template\": {\n    \"mappings\": {\n      \"properties\": {\n        \"foo.bar\": {\n          \"type\": \"keyword\"\n        }\n      }\n    }\n  }\n}\n\nPUT _index_template/working_match\n{\n  \"index_patterns\": [\"mytest\"],\n  \"priority\": 1000,\n  \"composed_of\": [\n    \"working_template1\",\n    \"working_template2\"\n  ]\n}\n\nPUT mytest\n\nGET mytest\n\nAfter this mytest has the mappings:\n    \"mappings\": {\n      \"properties\": {\n        \"foo\": {\n          \"subobjects\": false,\n          \"properties\": {\n            \"bar\": {\n              \"type\": \"keyword\"\n            }\n          }\n        }\n      }\n    }\n\nI would expect the broken_template from above to result in the same mapping instead of failing with an error.\nLogs (if relevant)\nNo response", "created_at": "2025-02-25", "closed_at": "2025-03-17", "labels": [">bug", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "closed", "Author": "flash1293"}
{"issue_number": 123354, "issue_title": "Limit number of suppressed S3 deletion errors", "issue_body": "When issuing blob deletions to S3, there is no limit to the number of errors that we accumulate while deletions are ongoing. The combination of large snapshot clean ups which would issue many such calls, and all deletions and their retries failing e.g. due to some setup issue, could lead to a huge amount of memory usage and potentially OOMing the node. It is not clear how severe the same issue can be in other object stores, since it might depend a bit on the error responses that the SDK returns and how large it is, but theoretically this could still happen there too. We should limit the suppressed errors we keep while issuing deletes as I do not think there is any value in recording all of these in the exception (I'm not even sure they are preserved).", "created_at": "2025-02-25", "closed_at": "2025-03-03", "labels": [">bug", ":Distributed Coordination/Snapshot/Restore", "Team:Distributed Coordination"], "State": "closed", "Author": "pxsalehi"}
{"issue_number": 123347, "issue_title": "[CI] ClassificationIT testWithOnlyTrainingRowsAndTrainingPercentIsFifty_DependentVariableIsBoolean failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7044 / openjdk17_checkpart4_java-matrix\nelasticsearch-periodic #6995 / openjdk17_checkpart4_java-matrix\nelasticsearch-periodic #6995 / openjdk21_checkpart4_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:native-multi-node-tests:javaRestTest\" --tests \"org.elasticsearch.xpack.ml.integration.ClassificationIT.testWithOnlyTrainingRowsAndTrainingPercentIsFifty_DependentVariableIsBoolean\" -Dtests.seed=B63710B3BCE98353 -Dtests.locale=ar-JO -Dtests.timezone=PLT -Druntime.java=17\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Stats were: {\"id\":\"classification_training_percent_is_50_boolean\",\"state\":\"started\",\"progress\":[{\"phase\":\"reindexing\",\"progress_percent\":100},{\"phase\":\"loading_data\",\"progress_percent\":100},{\"phase\":\"feature_selection\",\"progress_percent\":100},{\"phase\":\"coarse_parameter_search\",\"progress_percent\":84},{\"phase\":\"fine_tuning_parameters\",\"progress_percent\":0},{\"phase\":\"final_training\",\"progress_percent\":0},{\"phase\":\"writing_results\",\"progress_percent\":0},{\"phase\":\"inference\",\"progress_percent\":0}],\"data_counts\":{\"training_docs_count\":150,\"test_docs_count\":0,\"skipped_docs_count\":0},\"memory_usage\":{\"timestamp\":1742187083709,\"peak_usage_bytes\":19250,\"status\":\"ok\"},\"node\":{\"id\":\"oWYFlkFmRJOijkenMn7bVw\",\"name\":\"javaRestTest-2\",\"ephemeral_id\":\"BeW-f7jETzqrtfM7ZUfZxw\",\"transport_address\":\"127.0.0.1:38575\",\"attributes\":{\"testattr\":\"test\",\"transform.config_version\":\"10.0.0\",\"xpack.installed\":\"true\",\"ml.allocated_processors\":\"32\",\"ml.max_jvm_size\":\"536870912\",\"ml.config_vers\n[truncated]\n\nIssue Reasons:\n\n[8.17] 3 failures in test testWithOnlyTrainingRowsAndTrainingPercentIsFifty_DependentVariableIsBoolean (1.3% fail rate in 223 executions)\n[8.17] 2 failures in step openjdk17_checkpart4_java-matrix (25.0% fail rate in 8 executions)\n[8.17] 2 failures in pipeline elasticsearch-periodic (25.0% fail rate in 8 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-04-07", "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123334, "issue_title": "[CI] CrossClusterAsyncQueryIT testStopQueryLocal failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #6697 / concurrent-search-tests\nelasticsearch-periodic-platform-support #6648 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #6613 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #6585 / oraclelinux-8_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.CrossClusterAsyncQueryIT.testAsyncQueriesWithLimit0\" -Dtests.seed=400DB4231EF1C473 -Dtests.jvm.argline=\"-Des.concurrent_search=true\" -Dtests.locale=su-Latn-ID -Dtests.timezone=EAT -Druntime.java=23\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: timeout waiting for query response\n\nIssue Reasons:\n\n[9.0] 4 failures in test testStopQueryLocal (0.8% fail rate in 487 executions)\n[9.0] 3 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-25", "closed_at": "2025-03-28", "labels": [">test-failure", "low-risk", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123297, "issue_title": "[CI] InternalBwcGitPluginFuncTest current repository can be cloned failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #19207 / part1\nelasticsearch-pull-request #59376 / part-1\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit14754703492038612765/cloned with arguments [createClone, --stacktrace, --full-stacktrace, -Dtest.external=true]\n\nOutput:\n> Task :buildSrc:compileJava NO-SOURCE\n> Task :buildSrc:compileGroovy NO-SOURCE\n> Task :buildSrc:processResources\n> Task :buildSrc:classes\n> Task :buildSrc:jar\n=======================================\nElasticsearch Build Hamster says Hello!\n  Gradle Version        : 8.12\n  OS Info               : Linux 5.15.0-1075-gcp (amd64)\n  JDK Version           : 17.0.2+8-86 (Oracle)\n  JAVA_HOME             : /usr/java/openjdk17\n  Random Testing Seed   : 3E620A943E038C10\n  In FIPS 140 mode      : false\n=======================================\n> Task :createClone FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':createClone'.\n> A problem occurred starting process 'command 'git''\n\n* Try:\n> Run with --info or --debug option to get more log o\n[truncated]\n\nIssue Reasons:\n\n[8.18] 2 failures in test current repository can be cloned (3.6% fail rate in 56 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-24", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 123269, "issue_title": "[CI] IndexDiskUsageAnalyzerTests testCompletionField failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #18732 / part1\nelasticsearch-periodic-platform-support #6583 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.action.admin.indices.diskusage.IndexDiskUsageAnalyzerTests.testCompletionField\" -Dtests.seed=DE66FA5B9B04A955 -Dtests.locale=so -Dtests.timezone=America/Toronto -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: field=suggest_2 type=inverted_index actual=26527 expected=28584\n\nIssue Reasons:\n\n[main] 2 failures in test testCompletionField (1.4% fail rate in 143 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-02-24", "closed_at": "2025-03-31", "labels": [":Search Foundations/Mapping", ">test-failure", "low-risk", "Team:Search Foundations"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 123252, "issue_title": "`TransportNodesStatsAction` should only get allocation stats for the requested nodes", "issue_body": "Today TransportNodesStatsAction will reach out to the master to retrieve allocation stats for every node in the cluster, and then discards any stats which do not relate to the nodes targetted by the stats request. We could slim this down massively so that e.g. GET _nodes/_local/stats only computes the allocation stats for the handling node in the first place.", "created_at": "2025-02-24", "closed_at": null, "labels": [">bug", ":Distributed Coordination/Allocation", "Team:Distributed Coordination"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 123250, "issue_title": "Upgrade assistand issue with low watermark marked as critical", "issue_body": "Elasticsearch Version\n7.17.25\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nUbuntu 20.04\nProblem Description\nUpgrade assistant have a critical issue with diskspace.\nDisk usage exceeds low watermark, which will prevent reindexing indices during upgrade. Get disk usage on all nodes below the value specified in cluster.routing.allocation.disk.watermark.low (nodes impacted: node1 \nI have 6 nodes, and only one is below the low watermark. According to support this is probably a bug since this would be true if all nodes where below watermark, but in this case only one node is.\nSteps to Reproduce\nHave one node that is below watermark\nLogs (if relevant)\nNo response", "created_at": "2025-02-24", "closed_at": null, "labels": [">bug", ":Distributed Indexing/Distributed", "Team:Distributed Indexing"], "State": "open", "Author": "cybertron-payex"}
{"issue_number": 123248, "issue_title": "`TransportGetAllocationStatsAction` should be cancellable", "issue_body": "TransportGetAllocationStatsAction is today not cancellable, but may involve doing nontrivial work on management threads. If that work relates to an API call that has already timed out then we should skip it.", "created_at": "2025-02-24", "closed_at": null, "labels": [">bug", ":Distributed Coordination/Allocation", "Team:Distributed Coordination"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 123247, "issue_title": "Avoid license checks on every call to `LicensedWriteLoadForecaster#getForecastedWriteLoad`", "issue_body": "In production the LicensedWriteLoadForecaster#hasValidLicense predicate calls XPackLicenseState#featureUsed which records the usage time of the feature in a ConcurrentHashMap. We call this in hot O(#shards) loops in various places, e.g. here:\n     4/10 snapshots sharing following 19 elements\n       java.base@23/java.util.concurrent.ConcurrentHashMap.put(ConcurrentHashMap.java:1007)\n       org.elasticsearch.xcore@8.17.0/org.elasticsearch.license.XPackLicenseState.featureUsed(XPackLicenseState.java:429)\n       org.elasticsearch.xcore@8.17.0/org.elasticsearch.license.LicensedFeature$Momentary.check(LicensedFeature.java:32)\n       org.elasticsearch.xpack.writeloadforecaster.WriteLoadForecasterPlugin.hasValidLicense(WriteLoadForecasterPlugin.java:44)\n       org.elasticsearch.xpack.writeloadforecaster.WriteLoadForecasterPlugin$$Lambda/0x00003f00017f2550.getAsBoolean(Unknown Source)\n       org.elasticsearch.xpack.writeloadforecaster.LicensedWriteLoadForecaster.getForecastedWriteLoad(LicensedWriteLoadForecaster.java:146)\n       app/org.elasticsearch.server@8.17.0/org.elasticsearch.cluster.routing.allocation.AllocationStatsService.stats(AllocationStatsService.java:65)\n       app/org.elasticsearch.server@8.17.0/org.elasticsearch.action.admin.cluster.allocation.TransportGetAllocationStatsAction.masterOperation(TransportGetAllocationStatsAction.java:94)\n\nThis is rather expensive at the best of times, and astronomically expensive when multiple threads are running such loops (because of all the contention on that one CHM lock). We don't need to enforce the license expiry so precisely, so we can surely relax this licence-validity check to a simple volatile read, refreshing the validity flag via some periodic background process.", "created_at": "2025-02-24", "closed_at": "2025-02-25", "labels": [">bug", ":Distributed Indexing/CRUD", "Team:Distributed Indexing"], "State": "closed", "Author": "DaveCTurner"}
{"issue_number": 123243, "issue_title": "`TransportMlMemoryAction` captures and retains `ClusterState` for an extended period", "issue_body": "This lambda ...\n\n\n\nelasticsearch/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/action/TransportMlMemoryAction.java\n\n\n        Lines 116 to 117\n      in\n      39601ed\n\n\n\n\n\n\n (l, trainedModelCacheInfoResponse) -> handleResponses( \n\n\n\n state, \n\n\n\n\n\n... captures the entire ClusterState from the point at which the action started running, and retains it all the way until after the completion of both the TransportNodesStatsAction and then the TrainedModelCacheInfoAction. Since both of those actions fan out to multiple nodes, they could take a long time (tens of seconds) to complete in an overloaded or otherwise faulty cluster. That's too long to retain a ClusterState, there's a good chance it'll be replaced by newer ClusterState instances in this time but we can't GC them while those actions are running. Moreover it appears that we only need a few select parts of the ClusterState in handleResponses()\nWe should instead extract and retain just those parts of the ClusterState that are needed to compute the final response.", "created_at": "2025-02-24", "closed_at": null, "labels": [">bug", ":ml", "Team:ML"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 123234, "issue_title": "Set Processor will change field type in _source field when use Mustache", "issue_body": "Elasticsearch Version\nall\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nlinux 4.18.0-348.7.1.el8_5.x86_64\nProblem Description\nwe found  this problem, when Mustache is used to refer to a field content, the Set Processor changes the field type in  the _source field\nSteps to Reproduce\n# test index\nPUT /test\n{\n  \"mappings\": {\n    \"properties\": {\n      \"status\": {\n        \"type\": \"integer\"\n      }\n    }\n  }\n}\n# test data\nPOST /test/_bulk\n{\"index\":{}}\n{\"status\":404}\n{\"index\":{}}\n{\"status\":500}\n\nGET test/_search\n# status's type is integer in _source\n    \"hits\": [\n      {\n        \"_index\": \"test\",\n        \"_type\": \"_doc\",\n        \"_id\": \"2ry5NpUBLvnTvXTp1F5z\",\n        \"_score\": 1,\n        \"_source\": {\n          \"status\": 404 \n        }\n      },\n      {\n        \"_index\": \"test\",\n        \"_type\": \"_doc\",\n        \"_id\": \"27y5NpUBLvnTvXTp1F5z\",\n        \"_score\": 1,\n        \"_source\": {\n          \"status\": 500\n        }\n      }\n    ]\n\n# add subfield\nPUT test/_mapping\n{\n  \"properties\": {\n    \"status\": {\n      \"type\": \"integer\",\n      \"fields\": {\n        \"keyword\": {\n          \"type\": \"keyword\"\n        }\n      }\n    }\n  }\n}\n\n# create set processor, use Mustache\nPUT _ingest/pipeline/copy_status_to_keyword\n{\n  \"description\": \"resets the value of status and subfields\",\n  \"processors\": [\n    {\n      \"set\": {\n        \"field\": \"status\",\n        \"value\": \"{{{status}}}\"\n      }\n    }\n  ]\n}\n\n# update data\nPOST test/_update_by_query?pipeline=copy_status_to_keyword\n{\n  \"query\": {\n    \"bool\": {\n      \"must_not\": {\n        \"exists\": {\n          \"field\": \"status.keyword\"\n        }\n      },\n      \"must\": {\n        \"exists\": {\n          \"field\": \"status\"\n        }\n      }\n    }\n  }\n}\n\n\nGET test/_search\n{\n  \"query\": {\n    \"exists\": {\n      \"field\": \"status.keyword\"\n    }\n  }\n}\n\n# results\n   \"hits\": [\n      {\n        \"_index\": \"test_set\",\n        \"_type\": \"_doc\",\n        \"_id\": \"G7zHNpUBLvnTvXTpVIC4\",\n        \"_score\": 1,\n        \"_source\": {\n          \"status\": \"404\" # status's type is changed ,being string\n        }\n      },\n      {\n        \"_index\": \"test_set\",\n        \"_type\": \"_doc\",\n        \"_id\": \"HLzHNpUBLvnTvXTpVIC4\",\n        \"_score\": 1,\n        \"_source\": {\n          \"status\": \"500\"\n        }\n      }\n    ]\nLogs (if relevant)\nNo response", "created_at": "2025-02-24", "closed_at": null, "labels": [">bug", ":Core/Infra/Scripting", "Team:Core/Infra"], "State": "open", "Author": "kin122"}
{"issue_number": 127304, "issue_title": "[CI] MultiClusterSpecIT test {fork.ForkWithDissect} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / 9.1.0_bwc\nelasticsearch-pull-request #69138 / 9.1.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-clusters:v9.1.0#newToOld\" -Dtests.class=\"org.elasticsearch.xpack.esql.ccq.MultiClusterSpecIT\" -Dtests.method=\"test {fork.ForkWithDissect}\" -Dtests.seed=BC62296BB7090E9F -Dtests.bwc=true -Dtests.locale=mai -Dtests.timezone=America/Santarem -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected more data but no more entries found after [2]\nData mismatch:\n\nActual:\n_fork:keyword | emp_no:integer | x:keyword | y:keyword | z:keyword | w:keyword\nfork1         | 10048          | Florian   | 10048     | Syrotiuk  | null     \nfork1         | 10081          | Zhongwei  | 10081     | Rosen     | null     \n\nExpected:\n_fork:keyword | emp_no:integer | x:keyword | y:keyword | z:keyword | w:keyword\nfork1         | 10048          | Florian   | 10048     | Syrotiuk  | null     \nfork1         | 10081          | Zhongwei  | 10081     | Rosen     | null     \nfork2         | 10048          | Syrotiuk  | 10048     | null      | Florian  \nfork2         | 10081          | Rosen     | 10081     | null      | Zhongwei \n\n\nIssue Reasons:\n\n[main] 2 failures in test test {fork.ForkWithDissect} (0.3% fail rate in 791 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-24", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127303, "issue_title": "[CI] MixedClusterEsqlSpecIT test {date.Convert with zones SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7817 / 8.11.4_bwc\nelasticsearch-periodic #7817 / 8.13.4_bwc\nelasticsearch-periodic #7811 / 8.12.2_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.11.4#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {date.Convert with zones SYNC}\" -Dtests.seed=1E85076A8B536680 -Dtests.bwc=true -Dtests.locale=za -Dtests.timezone=PST -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected an empty list\n0: <unexpected> but was \"Line 2:13: evaluation of [TO_DATETIME(str)] failed, treating result as null. Only first 20 failures recorded.\"\n1: <unexpected> but was \"Line 2:13: java.lang.IllegalArgumentException: failed to parse date field [2025-04-11T05:00:00+0400] with format [yyyy-MM-dd'T'HH:mm:ss.SSS'Z']\"\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in test test {date.Convert with zones SYNC}\n[8.x] 3 failures in test test {date.Convert with zones SYNC} (4.4% fail rate in 68 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-24", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127302, "issue_title": "[CI] CrossClusterAsyncSearchIT testCancelViaExpirationOnRemoteResultsWithMinimizeRoundtrips failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7838 / windows-2022_checkpart2_platform-support-windows\nelasticsearch-periodic-platform-support #7760 / ubuntu-2004_platform-support-unix\n\nReproduction Line:\ngradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.CrossClusterAsyncSearchIT.testClusterDetailsAfterSuccessfulCCS\" -Dtests.seed=9BE40DCC414000D9 -Dtests.locale=nnh-Latn-CM -Dtests.timezone=Africa/Johannesburg -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <0>\n     but: was <1>\n\nIssue Reasons:\n\n[8.18] 2 failures in test testCancelViaExpirationOnRemoteResultsWithMinimizeRoundtrips (0.4% fail rate in 471 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic-platform-support (14.3% fail rate in 14 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-24", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127300, "issue_title": "Analysis of ES 7.16 Memory Consumption: Multiple Factors Leading to Memory Surge and the Mystery of 9GB Memory Stuck in GC and Optimization Exploration", "issue_body": "The recent memory consumption of JVM is as follows:\n\nThe green area has optimized space for resident memory\nThe heap memory of ES is basically divided into segment memory Filter Cache\u3001Field Data Cache\u3001Bulk Queue\u3001Indexing Buffer\u3001Cluster State Buffer\u3001 The result set fetch consumed by various aggregation queries\n\u4e00\u3001Segment Memory\nThis memory is not used by GC and currently only occupies 500M\n2\u3001Filter Cache\nThis memory is also not used by GC, currently occupying less than 500M\n3\u3001Field Data Cache\nThis memory is also not used by GC and currently only occupies less than 700M. We manually cleaned it up\n4\u3001Bulk Queue Indexing Buffer\nBoth of these are system default values, 10%, and the usage will not be very large\nCluster State Buffer\nMy ES version is 7.16, and now it's this state buffer. I can't confirm how much I've used. Currently, the disk usage of my cold node is only 45%. When I increased the utilization of the cold disk, I found that the memory skyrocketed severely,\n\n7\u3001 Fetch of ultra large search aggregation result set\nI use scroll queries for everything, and I have also tried manually deleting all scorels without seeing a decrease in permanent memory\nAfter overall investigation, it is still due to the fact that the larger the amount of data, the higher the memory. Also, where did the 9 GB of memory that has been stuck in GC go? How to optimize the memory usage of this part?", "created_at": "2025-04-24", "closed_at": "2025-04-24", "labels": ["needs:triage"], "State": "closed", "Author": "zhang18668"}
{"issue_number": 127296, "issue_title": "[CI] MixedClusterClientYamlTestSuiteIT test {p0=indices.put_index_template/15_composition/Composable index templates that include subobjects: auto on arbitrary field} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7811 / 8.16.6_bwc\nelasticsearch-periodic #7805 / 8.16.6_bwc\nelasticsearch-periodic #7799 / 8.16.6_bwc\nelasticsearch-periodic #7793 / 8.16.6_bwc\nelasticsearch-periodic #7787 / 8.16.6_bwc\nelasticsearch-periodic #7781 / 8.16.6_bwc\nelasticsearch-periodic #7775 / 8.16.6_bwc\nelasticsearch-periodic #7769 / 8.16.6_bwc\nelasticsearch-periodic #7757 / 8.16.6_bwc\nelasticsearch-periodic #7751 / 8.16.6_bwc\n\nReproduction Line:\n./gradlew \":qa:mixed-cluster:v8.16.6#mixedClusterTest\" -Dtests.class=\"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=index/92_metrics_auto_subobjects/Metrics object indexing}\" -Dtests.seed=44E5483D8E6FCE36 -Dtests.bwc=true -Dtests.locale=sq-AL -Dtests.timezone=CTT -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [index/92_metrics_auto_subobjects:8]: expected [2xx] status code but api [indices.put_index_template] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"composable template [test] template after composition is invalid\",\"stack_trace\":\"org.elasticsearch.ElasticsearchException$1: composable template [test] template after composition is invalid\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:707)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:635)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.build(RestResponse.java:201)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:160)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.\n[truncated]\n\nIssue Reasons:\n\n[8.x] 8 consecutive failures in step 8.16.6_bwc\n[8.x] 20 failures in test test {p0=indices.put_index_template/15_composition/Composable index templates that include subobjects: auto on arbitrary field} (3.7% fail rate in 539 executions)\n[8.x] 20 failures in step 8.16.6_bwc (95.2% fail rate in 21 executions)\n[8.x] 20 failures in pipeline elasticsearch-periodic (95.2% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127295, "issue_title": "[CI] MixedClusterClientYamlTestSuiteIT test {p0=index/92_metrics_auto_subobjects/Metrics object indexing with synthetic source} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7811 / 8.16.6_bwc\nelasticsearch-periodic #7805 / 8.16.6_bwc\nelasticsearch-periodic #7799 / 8.16.6_bwc\nelasticsearch-periodic #7793 / 8.16.6_bwc\nelasticsearch-periodic #7787 / 8.16.6_bwc\nelasticsearch-periodic #7781 / 8.16.6_bwc\nelasticsearch-periodic #7775 / 8.16.6_bwc\nelasticsearch-periodic #7769 / 8.16.6_bwc\nelasticsearch-periodic #7757 / 8.16.6_bwc\nelasticsearch-periodic #7751 / 8.16.6_bwc\n\nReproduction Line:\n./gradlew \":qa:mixed-cluster:v8.16.6#mixedClusterTest\" -Dtests.class=\"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=index/92_metrics_auto_subobjects/Metrics object indexing}\" -Dtests.seed=44E5483D8E6FCE36 -Dtests.bwc=true -Dtests.locale=sq-AL -Dtests.timezone=CTT -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [index/92_metrics_auto_subobjects:8]: expected [2xx] status code but api [indices.put_index_template] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"composable template [test] template after composition is invalid\",\"stack_trace\":\"org.elasticsearch.ElasticsearchException$1: composable template [test] template after composition is invalid\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:707)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:635)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.build(RestResponse.java:201)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:160)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.\n[truncated]\n\nIssue Reasons:\n\n[8.x] 8 consecutive failures in step 8.16.6_bwc\n[8.x] 20 failures in test test {p0=index/92_metrics_auto_subobjects/Metrics object indexing with synthetic source} (3.7% fail rate in 539 executions)\n[8.x] 20 failures in step 8.16.6_bwc (95.2% fail rate in 21 executions)\n[8.x] 20 failures in pipeline elasticsearch-periodic (95.2% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127294, "issue_title": "[CI] MixedClusterClientYamlTestSuiteIT test {p0=indices.put_index_template/15_composition/Composable index templates that include subobjects: auto at root} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7811 / 8.16.6_bwc\nelasticsearch-periodic #7805 / 8.16.6_bwc\nelasticsearch-periodic #7799 / 8.16.6_bwc\nelasticsearch-periodic #7793 / 8.16.6_bwc\nelasticsearch-periodic #7787 / 8.16.6_bwc\nelasticsearch-periodic #7781 / 8.16.6_bwc\nelasticsearch-periodic #7775 / 8.16.6_bwc\nelasticsearch-periodic #7769 / 8.16.6_bwc\nelasticsearch-periodic #7757 / 8.16.6_bwc\nelasticsearch-periodic #7751 / 8.16.6_bwc\n\nReproduction Line:\n./gradlew \":qa:mixed-cluster:v8.16.6#mixedClusterTest\" -Dtests.class=\"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=index/92_metrics_auto_subobjects/Metrics object indexing}\" -Dtests.seed=44E5483D8E6FCE36 -Dtests.bwc=true -Dtests.locale=sq-AL -Dtests.timezone=CTT -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [index/92_metrics_auto_subobjects:8]: expected [2xx] status code but api [indices.put_index_template] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"composable template [test] template after composition is invalid\",\"stack_trace\":\"org.elasticsearch.ElasticsearchException$1: composable template [test] template after composition is invalid\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:707)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:635)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.build(RestResponse.java:201)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:160)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.\n[truncated]\n\nIssue Reasons:\n\n[8.x] 8 consecutive failures in step 8.16.6_bwc\n[8.x] 20 failures in test test {p0=indices.put_index_template/15_composition/Composable index templates that include subobjects: auto at root} (3.7% fail rate in 539 executions)\n[8.x] 20 failures in step 8.16.6_bwc (95.2% fail rate in 21 executions)\n[8.x] 20 failures in pipeline elasticsearch-periodic (95.2% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127293, "issue_title": "[CI] MixedClusterEsqlSpecIT test {date.Convert no zone SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7817 / 8.12.2_bwc\nelasticsearch-periodic #7811 / 8.12.2_bwc\nelasticsearch-periodic #7811 / 8.11.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.12.2#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {date.Convert no zone SYNC}\" -Dtests.seed=FDABB3A7BB5FDC41 -Dtests.bwc=true -Dtests.locale=nso-ZA -Dtests.timezone=America/Rankin_Inlet -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected an empty list\n0: <unexpected> but was \"Line 2:13: evaluation of [TO_DATETIME(str)] failed, treating result as null. Only first 20 failures recorded.\"\n1: <unexpected> but was \"Line 2:13: java.lang.IllegalArgumentException: failed to parse date field [2025-04-11T05:00:00.000] with format [yyyy-MM-dd'T'HH:mm:ss.SSS'Z']\"\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step 8.12.2_bwc\n[8.x] 3 failures in test test {date.Convert no zone SYNC} (4.5% fail rate in 66 executions)\n[8.x] 2 failures in step 8.12.2_bwc (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127292, "issue_title": "[CI] MixedClusterClientYamlTestSuiteIT test {p0=index/92_metrics_auto_subobjects/Metrics object indexing} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7811 / 8.16.6_bwc\nelasticsearch-periodic #7805 / 8.16.6_bwc\nelasticsearch-periodic #7799 / 8.16.6_bwc\nelasticsearch-periodic #7793 / 8.16.6_bwc\nelasticsearch-periodic #7787 / 8.16.6_bwc\nelasticsearch-periodic #7781 / 8.16.6_bwc\nelasticsearch-periodic #7775 / 8.16.6_bwc\nelasticsearch-periodic #7769 / 8.16.6_bwc\nelasticsearch-periodic #7757 / 8.16.6_bwc\nelasticsearch-periodic #7751 / 8.16.6_bwc\n\nReproduction Line:\n./gradlew \":qa:mixed-cluster:v8.16.6#mixedClusterTest\" -Dtests.class=\"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=index/92_metrics_auto_subobjects/Metrics object indexing}\" -Dtests.seed=44E5483D8E6FCE36 -Dtests.bwc=true -Dtests.locale=sq-AL -Dtests.timezone=CTT -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [index/92_metrics_auto_subobjects:8]: expected [2xx] status code but api [indices.put_index_template] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"composable template [test] template after composition is invalid\",\"stack_trace\":\"org.elasticsearch.ElasticsearchException$1: composable template [test] template after composition is invalid\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:707)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:635)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.build(RestResponse.java:201)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:160)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.\n[truncated]\n\nIssue Reasons:\n\n[8.x] 8 consecutive failures in step 8.16.6_bwc\n[8.x] 20 failures in test test {p0=index/92_metrics_auto_subobjects/Metrics object indexing} (3.7% fail rate in 539 executions)\n[8.x] 20 failures in step 8.16.6_bwc (95.2% fail rate in 21 executions)\n[8.x] 20 failures in pipeline elasticsearch-periodic (95.2% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127290, "issue_title": "[CI] HdfsTests class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7819 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7819 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7813 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_false_checkpart1_java-matrix\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 consecutive failures in class org.elasticsearch.repositories.hdfs.HdfsTests\n[main] 2 consecutive failures in step openjdk21_entitlements_true_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_checkpart1_java-fips-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_false_checkpart1_java-matrix\n[main] 6 failures in class org.elasticsearch.repositories.hdfs.HdfsTests (2.7% fail rate in 225 executions)\n[main] 2 failures in step openjdk21_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_checkpart1_java-fips-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test-failure", "Team:Data Management", ":Data Management/HDFS", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127289, "issue_title": "[CI] HdfsBlobStoreRepositoryTests class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7819 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7819 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7813 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_false_checkpart1_java-matrix\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 consecutive failures in class org.elasticsearch.repositories.hdfs.HdfsBlobStoreRepositoryTests\n[main] 2 consecutive failures in step openjdk21_entitlements_true_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_checkpart1_java-fips-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_false_checkpart1_java-matrix\n[main] 6 failures in class org.elasticsearch.repositories.hdfs.HdfsBlobStoreRepositoryTests (2.7% fail rate in 225 executions)\n[main] 2 failures in step openjdk21_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_checkpart1_java-fips-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "needs:risk", "Team:Distributed Coordination"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127288, "issue_title": "[CI] HdfsRepositoryTests class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7819 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7819 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7813 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_false_checkpart1_java-matrix\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 consecutive failures in class org.elasticsearch.repositories.hdfs.HdfsRepositoryTests\n[main] 2 consecutive failures in step openjdk21_entitlements_true_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_checkpart1_java-fips-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_false_checkpart1_java-matrix\n[main] 6 failures in class org.elasticsearch.repositories.hdfs.HdfsRepositoryTests (2.7% fail rate in 225 executions)\n[main] 2 failures in step openjdk21_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_checkpart1_java-fips-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "needs:risk", "Team:Distributed Coordination"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127287, "issue_title": "[CI] HdfsBlobStoreContainerTests class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7819 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7819 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7813 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_false_checkpart1_java-matrix\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 consecutive failures in class org.elasticsearch.repositories.hdfs.HdfsBlobStoreContainerTests\n[main] 2 consecutive failures in step openjdk21_entitlements_true_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_checkpart1_java-fips-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_false_checkpart1_java-matrix\n[main] 6 failures in class org.elasticsearch.repositories.hdfs.HdfsBlobStoreContainerTests (2.7% fail rate in 225 executions)\n[main] 2 failures in step openjdk21_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_checkpart1_java-fips-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "needs:risk", "Team:Distributed Coordination"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127286, "issue_title": "[CI] DiskThresholdDeciderIT testRestoreSnapshotAllocationDoesNotExceedWatermarkWithMultipleRestores failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7833 / rhel-9_platform-support-unix\nelasticsearch-intake #22199 / part1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.cluster.routing.allocation.decider.DiskThresholdDeciderIT.testRestoreSnapshotAllocationDoesNotExceedWatermarkWithMultipleRestores\" -Dtests.seed=D64F926D35B64CE4 -Dtests.locale=en-PH -Dtests.timezone=Canada/Newfoundland -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a collection with size <1>\n     but: collection size was <0>\n\nIssue Reasons:\n\n[8.x] 2 failures in test testRestoreSnapshotAllocationDoesNotExceedWatermarkWithMultipleRestores (4.0% fail rate in 50 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test-failure", ":Distributed Coordination/Allocation", "needs:risk", "Team:Distributed Coordination"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127284, "issue_title": "[ML] Improve how the inference API determines the elser model to use for endpoints", "issue_body": "When creating an inference endpoint to leverage ELSER, the inference API will determine which model variant to use. To do this it retrieves information about the ML nodes and checks that they're all on the same hardware and which architecture they are using. Based on that information we either use the x86_64 variant or the platform agnostic variant.\nThere are a couple shortcomings with this:\n\nIf no ML nodes have to started yet we won't be able to determine the appropriate architecture\nIf the architecture changes the model will crash\nIdeally the inference API would also handle choosing the right iteration version of the model (currently we use v2)\n\nIf the wrong model variant is chosen and it needs to be reevaluated, a workaround is to delete the inference endpoint (if it is the default inference endpoint that is ok too) and recreate it (in the case of the default endpoint it will automatically get recreated).", "created_at": "2025-04-23", "closed_at": null, "labels": [":ml", "Team:ML", "Feature:GenAI"], "State": "open", "Author": "jonathan-buttner"}
{"issue_number": 127279, "issue_title": "[CI] MultiClusterSpecIT test {fork.ForkWithStats} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22265 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #69145 / 9.1.0_bwc-snapshots\nelasticsearch-intake #22260 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #69138 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #69108 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #69099 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #68935 / 9.1.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-clusters:v9.1.0#newToOld\" -Dtests.class=\"org.elasticsearch.xpack.esql.ccq.MultiClusterSpecIT\" -Dtests.method=\"test {fork.ForkWithStats}\" -Dtests.seed=9370E2D75C42B527 -Dtests.bwc=true -Dtests.locale=en-CC -Dtests.timezone=Asia/Tashkent -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 4 column 2:a list containing\nrow 4 column 2:0: expected \"100\" but was \"0\"\nrow 4 column 3:a list containing\nrow 4 column 3:0: expected \"10100\" but was \"null\"\nrow 4 column 4:a list containing\nrow 4 column 4:0: expected \"10001\" but was \"null\"\nrow 5 column 2:a list containing\nrow 5 column 2:0: expected \"100\" but was \"0\"\nrow 5 column 3:a list containing\nrow 5 column 3:0: expected \"10001\" but was \"null\"\nActual:\n_fork:keyword | emp_no:integer | x:long | y:integer | z:integer\nfork1         | 10048          | null   | null      | null     \nfork1         | 10081          | null   | null      | null     \nfork2         | 10081          | null   | null      | null     \nfork2         | 10087          | null   | null      | null     \nfork3         | null           | 0      | null      | null     \nfork4         | null           | 0      | null      | null     \n\nExpected:\n_fork:keyword | emp_no:integer | x:long | y:integer | z:integer\nfork1         | 10048 \n[truncated]\n\nIssue Reasons:\n\n[main] 7 failures in test test {fork.ForkWithStats} (0.9% fail rate in 766 executions)\n[main] 7 failures in step 9.1.0_bwc-snapshots (4.6% fail rate in 152 executions)\n[main] 2 failures in pipeline elasticsearch-intake (4.9% fail rate in 41 executions)\n[main] 5 failures in pipeline elasticsearch-pull-request (4.5% fail rate in 112 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127272, "issue_title": "[CI] MultiClusterSpecIT test {fork.FiveFork} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22253 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #69118 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #69107 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #68916 / 8.19.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-clusters:v9.1.0#newToOld\" -Dtests.class=\"org.elasticsearch.xpack.esql.ccq.MultiClusterSpecIT\" -Dtests.method=\"test {fork.FiveFork}\" -Dtests.seed=C43D20A89C92C4FA -Dtests.bwc=true -Dtests.locale=en-CC -Dtests.timezone=Pacific/Majuro -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected more data but no more entries found after [3]\nData mismatch:\n\nActual:\n_fork:keyword | emp_no:integer\nfork1         | 10005         \nfork2         | 10004         \nfork3         | 10003         \n\nExpected:\n_fork:keyword | emp_no:integer\nfork1         | 10005         \nfork2         | 10004         \nfork3         | 10003         \nfork4         | 10002         \nfork5         | 10001         \n\n\nIssue Reasons:\n\n[main] 4 failures in test test {fork.FiveFork} (0.5% fail rate in 760 executions)\n[main] 3 failures in step 9.1.0_bwc-snapshots (2.0% fail rate in 148 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (2.7% fail rate in 112 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127268, "issue_title": "[CI] MultiClusterSpecIT test {fork.ForkWithMixOfCommands} failing", "issue_body": "Build Scans:\n\nelasticsearch-pull-request #69116 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #69110 / 9.1.0_bwc-snapshots\nelasticsearch-intake #22240 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #68935 / 9.1.0_bwc-snapshots\nelasticsearch-pull-request #68916 / 8.19.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-clusters:v9.1.0#newToOld\" -Dtests.class=\"org.elasticsearch.xpack.esql.ccq.MultiClusterSpecIT\" -Dtests.method=\"test {fork.ForkWithMixOfCommands}\" -Dtests.seed=84AB862A456C9E -Dtests.bwc=true -Dtests.locale=ru-UA -Dtests.timezone=Etc/GMT+2 -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected more data but no more entries found after [3]\nData mismatch:\nrow 2 column 2:a list containing\nrow 2 column 2:0: expected \"2\" but was \"0\"\nrow 2 column 3:a list containing\nrow 2 column 3:0: expected \"10081\" but was \"null\"\nrow 2 column 4:a list containing\nrow 2 column 4:0: expected \"10048\" but was \"null\"\nActual:\n_fork:keyword | emp_no:integer | x:keyword | y:keyword | z:keyword | a:keyword             \nfork1         | 10048          | Florian   | 10048     | Syrotiuk  | Florian 10048 Syrotiuk\nfork1         | 10081          | Zhongwei  | 10081     | Rosen     | Zhongwei 10081 Rosen  \nfork2         | null           | 0         | null      | null      | null                  \n\nExpected:\n_fork:keyword | emp_no:integer | x:keyword | y:keyword | z:keyword | a:keyword             \nfork1         | 10048          | Florian   | 10048     | Syrotiuk  | Florian 10048 Syrotiuk\nfork1         | 10081          | Zhongwei  | 10081     | Rosen     | Zhongwei 10081 Rosen  \n[truncated]\n\nIssue Reasons:\n\n[main] 5 failures in test test {fork.ForkWithMixOfCommands} (0.7% fail rate in 760 executions)\n[main] 4 failures in step 9.1.0_bwc-snapshots (2.7% fail rate in 146 executions)\n[main] 4 failures in pipeline elasticsearch-pull-request (3.6% fail rate in 112 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127263, "issue_title": "Enable doc value skippers on primary and secondary sort fields in favor of indexed data structures", "issue_body": "Currently there is a feature flag that controls whether doc value skippers are enabled on host.name and @timestamp fields in case of logsdb index mode and _tsid and @timestamp fields in case of times series index mode.\nInitially benchmark results showed that sometimes filtering on @timestamp field became significantly slower (upto 3 times). This is because the bkd tree (points) was swapped for doc values skipper and the default query logic doesn't always perform well if timestamp field is secondary index sort field. The feature flag has been temporarily disabled.\nThis issue is about figuring out how to improve filtering by timestamp when doc value skippers are enabled. The performance of filtering by timestamp will likely not be the same as when the bkd tree is enabled. There maybe ways to mitigate some of the performance drop.\nNote that replacing the bkd tree with doc value skippers is a trade off. By not storing the bkd tree, we reduce storage and indecing footprint in favor for slower timestamp filtering.\nTasks:\n\n Investigate special query logic for filtering by @timestamp for logsdb and time_series index modes. (when @timestamp field is always the secondary index sort). (#127263)\n Enable feature flag by default.\n Remove feature flag.\n", "created_at": "2025-04-23", "closed_at": null, "labels": ["Meta", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "open", "Author": "martijnvg"}
{"issue_number": 127262, "issue_title": "Time range causing empty result", "issue_body": "Elasticsearch Version\n9.1.0-SNAPSHOT\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nDarwin Kernel Version 24.3.0\nProblem Description\nIn my investigation of elastic/kibana#218953, I found that the ES server is giving different results in the 9.1.0-SNAPSHOT version compared to previous versions. See the \"Steps to reproduce\" section for a more thorough description.\nSteps to Reproduce\n\n\nEnter export ES_SNAPSHOT_MANIFEST=\"https://storage.googleapis.com/kibana-ci-es-snapshots-daily/9.1.0/archives/20250418-021642_492b0363/manifest.json\" into your command window\n\n\nEnter yarn es snapshot into the same command window\n\n\nEnter yarn start into another command window\n\n\nInstall Web Logs sample data\n\n\nNavigate to the dev console\n\n\nEnter the following query:\nGET kibana_sample_data_logs/_search\n{\n  \"size\": 0,\n  \"timeout\": \"1000ms\",\n  \"terminate_after\": 100000,\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {\n          \"bool\": {\n            \"filter\": [\n              {\n                \"range\": {\n                  \"timestamp\": {\n                    \"format\": \"strict_date_optional_time\",\n                    \"gte\": \"2025-04-16T14:45:41.953Z\",\n                    \"lte\": \"2025-04-23T14:45:41.953Z\"\n                  }\n                }\n              }\n            ]\n          }\n        }\n      ]\n    }\n  },\n  \"aggs\": {\n    \"filteredSuggestions\": {\n      \"filter\": {\n        \"prefix\": {\n          \"machine.os.keyword\": {\n            \"value\": \"w\",\n            \"case_insensitive\": true\n          }\n        }\n      },\n      \"aggs\": {\n        \"suggestions\": {\n          \"terms\": {\n            \"size\": 10,\n            \"field\": \"machine.os.keyword\",\n            \"shard_size\": 10,\n            \"order\": {\n              \"_count\": \"desc\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\n\n\nIn the 9.1.0-SNAPSHOT version, it returns an empty result:\n{\n  \"took\": 1,\n  \"timed_out\": false,\n  \"terminated_early\": false,\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"skipped\": 0,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": {\n      \"value\": 1608,\n      \"relation\": \"eq\"\n    },\n    \"max_score\": null,\n    \"hits\": []\n  },\n  \"aggregations\": {\n    \"filteredSuggestions\": {\n      \"doc_count\": 0,\n      \"suggestions\": {\n        \"doc_count_error_upper_bound\": 0,\n        \"sum_other_doc_count\": 0,\n        \"buckets\": []\n      }\n    }\n  }\n}\n\nBut when testing in 8.18 Kibana, it returns the expected filtered values:\n\n  \"took\": 4,\n  \"timed_out\": false,\n  \"terminated_early\": false,\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"skipped\": 0,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": {\n      \"value\": 1608,\n      \"relation\": \"eq\"\n    },\n    \"max_score\": null,\n    \"hits\": []\n  },\n  \"aggregations\": {\n    \"filteredSuggestions\": {\n      \"doc_count\": 956,\n      \"suggestions\": {\n        \"doc_count_error_upper_bound\": 0,\n        \"sum_other_doc_count\": 0,\n        \"buckets\": [\n          {\n            \"key\": \"win xp\",\n            \"doc_count\": 348\n          },\n          {\n            \"key\": \"win 7\",\n            \"doc_count\": 309\n          },\n          {\n            \"key\": \"win 8\",\n            \"doc_count\": 299\n          }\n        ]\n      }\n    }\n  }\n}\n\nHowever, when I remove the time range filter from the 9.1.0-SNAPSHOT query, I no longer get empty buckets:\n\n\nQuery:\nGET kibana_sample_data_logs/_search\n{\n  \"size\": 0,\n  \"timeout\": \"1000ms\",\n  \"terminate_after\": 100000,\n  \"query\": {\n    \"bool\": {\n      \"filter\": []\n    }\n  },\n  \"aggs\": {\n    \"filteredSuggestions\": {\n      \"filter\": {\n        \"prefix\": {\n          \"machine.os.keyword\": {\n            \"value\": \"w\",\n            \"case_insensitive\": true\n          }\n        }\n      },\n      \"aggs\": {\n        \"suggestions\": {\n          \"terms\": {\n            \"size\": 10,\n            \"field\": \"machine.os.keyword\",\n            \"shard_size\": 10,\n            \"order\": {\n              \"_count\": \"desc\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\n\n\nResult:\n{\n  \"took\": 2,\n  \"timed_out\": false,\n  \"terminated_early\": false,\n  \"_shards\": {\n    \"total\": 1,\n    \"successful\": 1,\n    \"skipped\": 0,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": {\n      \"value\": 10000,\n      \"relation\": \"gte\"\n    },\n    \"max_score\": null,\n    \"hits\": []\n  },\n  \"aggregations\": {\n    \"filteredSuggestions\": {\n      \"doc_count\": 8512,\n      \"suggestions\": {\n        \"doc_count_error_upper_bound\": 0,\n        \"sum_other_doc_count\": 0,\n        \"buckets\": [\n          {\n            \"key\": \"win xp\",\n            \"doc_count\": 2885\n          },\n          {\n            \"key\": \"win 7\",\n            \"doc_count\": 2814\n          },\n          {\n            \"key\": \"win 8\",\n            \"doc_count\": 2813\n          }\n        ]\n      }\n    }\n  }\n}\n\n\n\nLogs (if relevant)\nNo response", "created_at": "2025-04-23", "closed_at": "2025-04-23", "labels": [">bug", "blocker", ":Analytics/Aggregations", ":Search/Search", "Team:Search", "Team:Analytics"], "State": "closed", "Author": "Heenawter"}
{"issue_number": 127249, "issue_title": "LOOKUP JOIN on date_nanos fields finds zero matches", "issue_body": "As discovered during the work on testing a wider range of data types, even if the field in the main index and the lookup index both have the same type date_nanos, no matches are ever found.\nNote that the work on date_nanos implicit casting did partial support for LOOKUP JOIN, and that support needs to be completed when this bug is fixed, either as part of this bug-fix or in a followup PR.", "created_at": "2025-04-23", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "craigtaverner"}
{"issue_number": 127245, "issue_title": "[CI] FullClusterRestartSystemIndexCompatibilityIT testAsyncSearchIndexMigration {p0=8.18.0} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7828 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7786 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\n./gradlew \":qa:lucene-index-compatibility:javaRestTest\" --tests \"org.elasticsearch.lucene.FullClusterRestartSystemIndexCompatibilityIT\" -Dtests.method=\"testAsyncSearchIndexMigration {p0=9.0.1}\" -Dtests.seed=9B7E0B98F549A330 -Dtests.locale=kab -Dtests.timezone=America/Porto_Velho -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred orchestrating test cluster.\n\nIssue Reasons:\n\n[9.0] 2 failures in test testAsyncSearchIndexMigration {p0=8.18.0} (1.0% fail rate in 193 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (25.0% fail rate in 8 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127244, "issue_title": "[CI] FullClusterRestartSystemIndexCompatibilityIT testAsyncSearchIndexMigration {p0=9.0.1} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7828 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7786 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\n./gradlew \":qa:lucene-index-compatibility:javaRestTest\" --tests \"org.elasticsearch.lucene.FullClusterRestartSystemIndexCompatibilityIT\" -Dtests.method=\"testAsyncSearchIndexMigration {p0=9.0.1}\" -Dtests.seed=9B7E0B98F549A330 -Dtests.locale=kab -Dtests.timezone=America/Porto_Velho -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred orchestrating test cluster.\n\nIssue Reasons:\n\n[9.0] 2 failures in test testAsyncSearchIndexMigration {p0=9.0.1} (1.0% fail rate in 193 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (25.0% fail rate in 8 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127241, "issue_title": "[CI] SynonymsManagementAPIServiceIT testTooManySynonymsOnIndexTriggersWarning failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7807 / single-processor-node-tests\nelasticsearch-pull-request #68962 / part-1-windows\nelasticsearch-pull-request #68912 / part-1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.synonyms.SynonymsManagementAPIServiceIT.testTooManySynonymsOnIndexTriggersWarning\" -Dtests.seed=409133045E25FC6E -Dtests.configure_test_clusters_with_one_processor=true -Dtests.locale=ca-ES-VALENCIA -Dtests.timezone=Asia/Ashgabat -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: unexpected\n\nIssue Reasons:\n\n[main] 3 failures in test testTooManySynonymsOnIndexTriggersWarning (1.9% fail rate in 159 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (3.7% fail rate in 54 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": null, "labels": [":Search Relevance/Analysis", ">test-failure", "needs:risk", "Team:Search Relevance"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127236, "issue_title": "ESQL: columns lost with simple INLINESTATS query. EsqlSession.fieldNames test coverage needed", "issue_body": "Description\nFROM employees | INLINESTATS max_salary = MAX(salary) by languages\n\nresults in (only columns provided below)\nlanguages.byte |languages.long |languages.short|    salary     |  max_salary   |   languages   \n\nwhich is missing quite a big bunch of the initial columns. This shows a big lack of support (and testing coverage) in EsqlSession.fieldNames method.", "created_at": "2025-04-23", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "astefan"}
{"issue_number": 127212, "issue_title": "Remove dependency on waiting for master in cluster state API in tests", "issue_body": "Currently, several tests depend on the cluster state API to wait for a master node to be present in the cluster state - see this snippet in SpecificMasterNodesIT for example.\nTo allow TransportClusterStateAction to run on the local node (as part of #101805), we are removing the functionality of waiting for the master node. Therefore, we need to remove the dependency of these tests on that functionality. Addtionally, the cluster state API is not supposed to be used in production, meaning that these tests are the only real use case for waiting on the master node. We have different tools available in the test framework that allow us to wait for the master node.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test", "Team:Distributed Coordination", ":Distributed Coordination/Distributed"], "State": "open", "Author": "nielsbauman"}
{"issue_number": 127210, "issue_title": "[DOCS] Fix formatting issue in dense vector index options", "issue_body": "Description\nThe index_options properties formatting on this page is incorrect: the content is outside of the collapsible section, however, it should be inside. The bulleted list is also wrong. Let's fix these issues.", "created_at": "2025-04-23", "closed_at": "2025-04-23", "labels": [">docs", "Team:Docs"], "State": "closed", "Author": "szabosteve"}
{"issue_number": 127209, "issue_title": "ES|QL: Fix column references for FORK", "issue_body": "related #121950\nThe constant folding does not work correctly for FORK.\nThis is one symptom of how we carry and reuse the column references in FORK from the FORK sub plans.\nTake this example:\nFROM search-movies METADATA _id\n| FORK ( EVAL a = 1 | WHERE _id == \"1\" )\n       ( EVAL a = 2 | WHERE _id == \"2\" )\n| KEEP _id, _fork, a\n| WHERE a == 1\n\nThis should only return the results of the first FORK branch, but it ends up returning both.\nThe reason for this is because when constant folding is done at the level of the logical plan optimizer the condition | WHERE a == 1 becomes WHERE true. The reference for the a column is the one from the first FORK branch.\nWe should fix the output of FORK, such that we don't reuse the same columns references from the FORK branches.\nI assume STATS does something similar, but I haven't checked yet.", "created_at": "2025-04-23", "closed_at": null, "labels": [">bug", "priority:high", "Team:Search Relevance", ":Search Relevance/Search", "v9.1.0"], "State": "open", "Author": "ioanatia"}
{"issue_number": 127208, "issue_title": "ES|QL: tests for FORK's evaluation of field names used in field_caps resolve calls", "issue_body": "Description\nFollowing the improvements made to FORK, it is necessary for the field names used in field_caps calls the IndexResolver is performing to be correctly tested and covered for fork as well.\nThese tests should go in IndexResolverFieldNamesTests.\nAlso, a comment here would be appreciated. The fieldNames method is trying to avoid asking for all fields from field_caps for performance reasons and it's trying to be smart in what fields it actually needs. It would help code maintainers and contributors to understand why fork needs all the fields in all cases.", "created_at": "2025-04-23", "closed_at": null, "labels": [">test", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "astefan"}
{"issue_number": 127204, "issue_title": "[CI] SynonymsManagementAPIServiceIT testCreateTooManySynonymsUsingRuleUpdates failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7823 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7823 / ubuntu-2204_platform-support-unix\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.synonyms.SynonymsManagementAPIServiceIT.testCreateRuleWithMaxSynonyms\" -Dtests.seed=EE454F598FC7CDA -Dtests.locale=luo -Dtests.timezone=US/Mountain -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: unexpected\n\nIssue Reasons:\n\n[main] 2 failures in test testCreateTooManySynonymsUsingRuleUpdates (1.3% fail rate in 149 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": "2025-04-23", "labels": [":Search Relevance/Analysis", ">test-failure", "needs:risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127203, "issue_title": "[CI] SynonymsManagementAPIServiceIT testCreateRuleWithMaxSynonyms failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7823 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-pull-request #68912 / part-1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.synonyms.SynonymsManagementAPIServiceIT.testCreateRuleWithMaxSynonyms\" -Dtests.seed=EE454F598FC7CDA -Dtests.locale=luo -Dtests.timezone=US/Mountain -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: unexpected\n\nIssue Reasons:\n\n[main] 2 failures in test testCreateRuleWithMaxSynonyms (1.3% fail rate in 149 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": "2025-04-23", "labels": [":Search Relevance/Analysis", ">test-failure", "needs:risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127202, "issue_title": "[CI] SynonymsManagementAPIServiceIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7801 / openjdk24_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7823 / ubuntu-2204_platform-support-unix\nelasticsearch-periodic-platform-support #7823 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic #7795 / openjdk24_entitlements_false_checkpart1_java-matrix\nelasticsearch-pull-request #68912 / part-1\nelasticsearch-pull-request #68285 / part-1\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 consecutive failures in class org.elasticsearch.synonyms.SynonymsManagementAPIServiceIT\n[main] 6 failures in class org.elasticsearch.synonyms.SynonymsManagementAPIServiceIT (0.7% fail rate in 847 executions)\n[main] 2 failures in step part-1 (0.9% fail rate in 219 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (10.0% fail rate in 20 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.9% fail rate in 217 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-23", "closed_at": "2025-04-23", "labels": [":Search Relevance/Analysis", ">test-failure", "needs:risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127200, "issue_title": "[ES|QL] Aggregation on conversion functions may return wrong results", "issue_body": "It happens when the conversion functions reference multi/union typed fields that come from multiple indices, this happens to the other conversion functions too, not specific for ::date, ::date_nanos. Aggregation on single index with conversion functions work as expected.\nHere are the steps to reproduce this issue.\ncurl -u elastic:password -H \"Content-Type: application/json\" \"127.0.0.1:9200/test1\" -XPUT -d '{\n  \"mappings\": {\n        \"properties\": {\n          \"millis\": { \"type\": \"date\" },\n          \"nanos\": { \"type\": \"date_nanos\"},\n          \"num\": { \"type\": \"long\" }\n        }\n  }\n}'\n\ncurl -u elastic:password -H \"Content-Type: application/json\" \"127.0.0.1:9200/test2\" -XPUT -d '{\n  \"settings\": {\"index\": {\"mode\": \"lookup\"}},\n  \"mappings\": {\n        \"properties\": {\n          \"millis\": { \"type\": \"date_nanos\" },\n          \"nanos\": { \"type\": \"date\"},\n          \"num\": { \"type\": \"long\" }\n        }\n  }\n}'\n\ncurl -X PUT \"localhost:9200/test1/_bulk?refresh&pretty\" -H 'Content-Type: application/json' -d'\n{\"index\": {}}\n{\"millis\":\"2023-10-23T13:55:01.543Z\",\"nanos\":\"2023-10-23T13:55:01.543123456Z\",\"num\":1698069301543123456}\n{\"index\": {}}\n{\"millis\":\"2023-10-23T13:55:01.543Z\",\"nanos\":\"2023-10-23T12:55:01.543123456Z\",\"num\":1698069301543123456}\n{\"index\": {}}\n{\"millis\":\"1999-10-23T12:15:03.360Z\",\"nanos\":[\"2023-03-23T12:15:03.360103847Z\", \"2023-02-23T13:33:34.937193000Z\", \"2023-01-23T13:55:01.543123456Z\"],\"num\":0}\n'\n\ncurl -X PUT \"localhost:9200/test2/_bulk?refresh&pretty\" -H 'Content-Type: application/json' -d'\n{\"index\": {}}\n{\"millis\":\"2023-10-23T13:55:01.543123456Z\",\"nanos\":\"2023-10-23T13:55:01.543Z\",\"num\":1698069301543123456}\n{\"index\": {}}\n{\"millis\":\"1999-10-23T12:15:03.360103847Z\",\"nanos\":[\"2023-03-23T12:15:03.360Z\", \"2023-02-23T13:33:34.937Z\", \"2023-01-23T13:55:01.543Z\"],\"num\":0}\n'\n\n+ curl -u elastic:password -X POST 'localhost:9200/_query?format=txt&pretty' -H 'Content-Type: application/json' '-d\n{ \n  \"query\": \"from test* | stats count(millis::date)\"\n}\n'\ncount(millis::date)\n-------------------\n0                  ===> WRONG RESULTS\n+ curl -u elastic:password -X POST 'localhost:9200/_query?format=txt&pretty' -H 'Content-Type: application/json' '-d\n{ \n  \"query\": \"from test* | stats count(millis::date_nanos)\"\n}\n'\ncount(millis::date_nanos)\n-------------------------\n0                        ===> WRONG RESULTS\n+ curl -u elastic:password -X POST 'localhost:9200/_query?format=txt&pretty' -H 'Content-Type: application/json' '-d\n{\n  \"query\": \"from test1 | stats count(millis)\"\n}\n'\n count(millis) \n---------------\n3              \n+ curl -u elastic:password -X POST 'localhost:9200/_query?format=txt&pretty' -H 'Content-Type: application/json' '-d\n{\n  \"query\": \"from test1 | stats count(millis::date)\"\n}\n'\ncount(millis::date)\n-------------------\n3                  \n+ curl -u elastic:password -X POST 'localhost:9200/_query?format=txt&pretty' -H 'Content-Type: application/json' '-d\n{\n  \"query\": \"from test1 | stats count(millis::date_nanos)\"\n}\n'\ncount(millis::date_nanos)\n-------------------------\n3                        \n+ curl -u elastic:password -X POST 'localhost:9200/_query?format=txt&pretty' -H 'Content-Type: application/json' '-d\n{\n  \"query\": \"from test2 | stats count(millis)\"\n}\n'\n count(millis) \n---------------\n2              \n+ curl -u elastic:password -X POST 'localhost:9200/_query?format=txt&pretty' -H 'Content-Type: application/json' '-d\n{\n  \"query\": \"from test2 | stats count(millis::date)\"\n}\n'\ncount(millis::date)\n-------------------\n2                  \n+ curl -u elastic:password -X POST 'localhost:9200/_query?format=txt&pretty' -H 'Content-Type: application/json' '-d\n{\n  \"query\": \"from test2 | stats count(millis::date_nanos)\"\n}\n'\ncount(millis::date_nanos)\n-------------------------\n2   \n", "created_at": "2025-04-22", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "fang-xing-esql"}
{"issue_number": 127197, "issue_title": "ESQL: In main `<text_field> !=` will incorrectly match long strings", "issue_body": "Description\nIn main <text_field> != will incorrectly match strings longer than ignore_above.\nSee #126641 for me.", "created_at": "2025-04-22", "closed_at": "2025-04-23", "labels": [">bug", "blocker", "Team:Analytics", ":Analytics/ES|QL", "priority:high"], "State": "closed", "Author": "nik9000"}
{"issue_number": 127196, "issue_title": "[CI] ManyShardsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / openjdk21_entitlements_false_checkpart3_java-matrix\nelasticsearch-periodic #7819 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-periodic #7819 / openjdk21_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic #7813 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_false_checkpart3_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_true_checkpart3_java-matrix\nelasticsearch-pull-request #69061 / part-3\nelasticsearch-periodic #7807 / openjdk21_entitlements_false_checkpart3_java-matrix\nelasticsearch-periodic #7807 / openjdk21_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic #7807 / openjdk21_checkpart3_java-fips-matrix\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 5 consecutive failures in step openjdk21_entitlements_false_checkpart3_java-matrix\n[main] 5 consecutive failures in step openjdk21_checkpart3_java-fips-matrix\n[main] 5 consecutive failures in step openjdk21_entitlements_true_checkpart3_java-matrix\n[main] 18 failures in class org.elasticsearch.xpack.esql.action.ManyShardsIT (2.2% fail rate in 813 executions)\n[main] 5 failures in step openjdk21_entitlements_false_checkpart3_java-matrix (31.3% fail rate in 16 executions)\n[main] 5 failures in step openjdk21_checkpart3_java-fips-matrix (29.4% fail rate in 17 executions)\n[main] 5 failures in step openjdk21_entitlements_true_checkpart3_java-matrix (31.3% fail rate in 16 executions)\n[main] 3 failures in step part-3 (1.2% fail rate in 258 executions)\n[main] 5 failures in pipeline elasticsearch-periodic (27.8% fail rate in 18 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (1.2% fail rate in 259 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127195, "issue_title": "[CI] SynonymsManagementAPIServiceIT testUpdateRuleWithMaxSynonyms failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7795 / openjdk24_entitlements_false_checkpart1_java-matrix\nelasticsearch-pull-request #68912 / part-1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.synonyms.SynonymsManagementAPIServiceIT.testUpdateRuleWithMaxSynonyms\" -Dtests.seed=A80D8F1B8636FD3F -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=en-BS -Dtests.timezone=Australia/Sydney -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: unexpected\n\nIssue Reasons:\n\n[main] 2 failures in test testUpdateRuleWithMaxSynonyms (1.3% fail rate in 150 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": "2025-04-23", "labels": [":Search Relevance/Analysis", ">test-failure", "needs:risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127194, "issue_title": "[CI] PluginsServiceTests testCanCreateAClassLoader failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7807 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7807 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7807 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7807 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7807 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7801 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7801 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7801 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7801 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7801 / openjdk23_entitlements_true_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.plugins.PluginsServiceTests.testCanCreateAClassLoader\" -Dtests.seed=FE93A0A07AFDAFAC -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=he-IL -Dtests.timezone=Asia/Novosibirsk -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Expected exception AccessControlException but no exception was thrown\n\nIssue Reasons:\n\n[main] 15 consecutive failures in test testCanCreateAClassLoader\n[main] 3 consecutive failures in step openjdk23_entitlements_true_checkpart1_java-matrix\n[main] 3 consecutive failures in step openjdk21_checkpart1_java-fips-matrix\n[main] 3 consecutive failures in step openjdk21_entitlements_true_checkpart1_java-matrix\n[main] 3 consecutive failures in step openjdk21_entitlements_false_checkpart1_java-matrix\n[main] 3 consecutive failures in step openjdk23_entitlements_false_checkpart1_java-matrix\n[main] 3 consecutive failures in pipeline elasticsearch-periodic\n[main] 15 failures in test testCanCreateAClassLoader (75.0% fail rate in 20 executions)\n[main] 3 failures in step openjdk23_entitlements_true_checkpart1_java-matrix (75.0% fail rate in 4 executions)\n[main] 3 failures in step openjdk21_checkpart1_java-fips-matrix (75.0% fail rate in 4 executions)\n[main] 3 failures in step openjdk21_entitlements_true_checkpart1_java-matrix (75.0% fail rate in 4 executions)\n[main] 3 failures in step openjdk21_entitlements_false_checkpart1_java-matrix (75.0% fail rate in 4 executions)\n[main] 3 failures in step openjdk23_entitlements_false_checkpart1_java-matrix (75.0% fail rate in 4 executions)\n[main] 3 failures in pipeline elasticsearch-periodic (75.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": "2025-04-23", "labels": [":Core/Infra/Plugins", ">test-failure", "Team:Core/Infra", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127193, "issue_title": "[CI] SSLErrorMessageFileTests class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / openjdk21_checkpart4_java-fips-matrix\nelasticsearch-periodic #7819 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7819 / openjdk21_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7819 / openjdk23_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7819 / openjdk23_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_checkpart4_java-fips-matrix\nelasticsearch-periodic #7813 / openjdk23_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk23_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_true_checkpart4_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:test\" --tests \"org.elasticsearch.xpack.ssl.SSLErrorMessageFileTests.testMessageForTrustStoreOutsideConfigDir\" -Dtests.seed=9C2B8E215BC05C56 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=oc-Latn-FR -Dtests.timezone=America/Santiago -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a throwable with message of \"failed to load SSL configuration [xpack.security.transport.ssl] - cannot read configured [jks] keystore (as a truststore) [/this/path/is/outside/the/config/directory/file.error] because access to read the file is blocked; SSL resources should be placed in the [/dev/shm/bk/bk-agent-prod-gcp-1745470766670090531/elastic/elasticsearch-periodic/x-pack/plugin/security/build/testrun/test/temp/org.elasticsearch.xpack.ssl.SSLErrorMessageFileTests_9C2B8E215BC05C56-001/tempDir-005/config] directory\"\n     but: was <org.elasticsearch.ElasticsearchSecurityException: failed to load SSL configuration [xpack.security.transport.ssl] - cannot read configured [jks] keystore (as a truststore) [/this/path/is/outside/the/config/directory/file.error] because the file does not exist> at org.elasticsearch.xpack.core.ssl.SSLService.lambda$loadSslConfigurations$11(SSLService.java:622)\n\nIssue Reasons:\n\n[main] 5 consecutive failures in step openjdk21_checkpart4_java-fips-matrix\n[main] 5 consecutive failures in step openjdk21_entitlements_true_checkpart4_java-matrix\n[main] 5 consecutive failures in step openjdk21_entitlements_false_checkpart4_java-matrix\n[main] 5 consecutive failures in step openjdk23_entitlements_false_checkpart4_java-matrix\n[main] 5 consecutive failures in step openjdk23_entitlements_true_checkpart4_java-matrix\n[main] 25 failures in class org.elasticsearch.xpack.ssl.SSLErrorMessageFileTests (8.2% fail rate in 306 executions)\n[main] 5 failures in step openjdk21_checkpart4_java-fips-matrix (100.0% fail rate in 5 executions)\n[main] 5 failures in step openjdk21_entitlements_true_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 5 failures in step openjdk21_entitlements_false_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 5 failures in step openjdk23_entitlements_false_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 5 failures in step openjdk23_entitlements_true_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 5 failures in pipeline elasticsearch-periodic (100.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [">test-failure", ":Security/Security", "Team:Security", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127192, "issue_title": "[CI] SSLErrorMessageFileTests testMessageForPemKeyOutsideConfigDir failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7819 / openjdk23_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_checkpart4_java-fips-matrix\nelasticsearch-periodic #7813 / openjdk23_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk23_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7807 / openjdk21_checkpart4_java-fips-matrix\nelasticsearch-periodic #7807 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7807 / openjdk23_entitlements_false_checkpart4_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:test\" --tests \"org.elasticsearch.xpack.ssl.SSLErrorMessageFileTests.testMessageForTrustStoreOutsideConfigDir\" -Dtests.seed=D586AA63B72932B6 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=fr-GQ -Dtests.timezone=Asia/Ust-Nera -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a throwable with message of \"failed to load SSL configuration [xpack.security.authc.realms.saml.saml1.ssl] - cannot read configured [jks] keystore (as a truststore) [/this/path/is/outside/the/config/directory/file.error] because access to read the file is blocked; SSL resources should be placed in the [/dev/shm/bk/bk-agent-prod-gcp-1745470777043392319/elastic/elasticsearch-periodic/x-pack/plugin/security/build/testrun/test/temp/org.elasticsearch.xpack.ssl.SSLErrorMessageFileTests_D586AA63B72932B6-001/tempDir-084/config] directory\"\n     but: was <org.elasticsearch.ElasticsearchSecurityException: failed to load SSL configuration [xpack.security.authc.realms.saml.saml1.ssl] - cannot read configured [jks] keystore (as a truststore) [/this/path/is/outside/the/config/directory/file.error] because the file does not exist> at org.elasticsearch.xpack.core.ssl.SSLService.lambda$loadSslConfigurations$11(SSLService.java:622)\n\nIssue Reasons:\n\n[main] 22 consecutive failures in test testMessageForPemKeyOutsideConfigDir\n[main] 5 consecutive failures in step openjdk21_entitlements_true_checkpart4_java-matrix\n[main] 5 consecutive failures in step openjdk23_entitlements_false_checkpart4_java-matrix\n[main] 4 consecutive failures in step openjdk21_checkpart4_java-fips-matrix\n[main] 4 consecutive failures in step openjdk23_entitlements_true_checkpart4_java-matrix\n[main] 4 consecutive failures in step openjdk21_entitlements_false_checkpart4_java-matrix\n[main] 5 consecutive failures in pipeline elasticsearch-periodic\n[main] 22 failures in test testMessageForPemKeyOutsideConfigDir (100.0% fail rate in 22 executions)\n[main] 5 failures in step openjdk21_entitlements_true_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 5 failures in step openjdk23_entitlements_false_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 4 failures in step openjdk21_checkpart4_java-fips-matrix (100.0% fail rate in 4 executions)\n[main] 4 failures in step openjdk23_entitlements_true_checkpart4_java-matrix (100.0% fail rate in 4 executions)\n[main] 4 failures in step openjdk21_entitlements_false_checkpart4_java-matrix (100.0% fail rate in 4 executions)\n[main] 5 failures in pipeline elasticsearch-periodic (100.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [">test-failure", ":Security/Security", "Team:Security", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127191, "issue_title": "[CI] SSLErrorMessageFileTests testMessageForKeyStoreOutsideConfigDir failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7819 / openjdk23_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_checkpart4_java-fips-matrix\nelasticsearch-periodic #7813 / openjdk23_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk23_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7807 / openjdk21_checkpart4_java-fips-matrix\nelasticsearch-periodic #7807 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7807 / openjdk23_entitlements_false_checkpart4_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:test\" --tests \"org.elasticsearch.xpack.ssl.SSLErrorMessageFileTests.testMessageForTrustStoreOutsideConfigDir\" -Dtests.seed=D586AA63B72932B6 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=fr-GQ -Dtests.timezone=Asia/Ust-Nera -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a throwable with message of \"failed to load SSL configuration [xpack.security.authc.realms.saml.saml1.ssl] - cannot read configured [jks] keystore (as a truststore) [/this/path/is/outside/the/config/directory/file.error] because access to read the file is blocked; SSL resources should be placed in the [/dev/shm/bk/bk-agent-prod-gcp-1745470777043392319/elastic/elasticsearch-periodic/x-pack/plugin/security/build/testrun/test/temp/org.elasticsearch.xpack.ssl.SSLErrorMessageFileTests_D586AA63B72932B6-001/tempDir-084/config] directory\"\n     but: was <org.elasticsearch.ElasticsearchSecurityException: failed to load SSL configuration [xpack.security.authc.realms.saml.saml1.ssl] - cannot read configured [jks] keystore (as a truststore) [/this/path/is/outside/the/config/directory/file.error] because the file does not exist> at org.elasticsearch.xpack.core.ssl.SSLService.lambda$loadSslConfigurations$11(SSLService.java:622)\n\nIssue Reasons:\n\n[main] 22 consecutive failures in test testMessageForKeyStoreOutsideConfigDir\n[main] 5 consecutive failures in step openjdk21_entitlements_true_checkpart4_java-matrix\n[main] 5 consecutive failures in step openjdk23_entitlements_false_checkpart4_java-matrix\n[main] 4 consecutive failures in step openjdk21_checkpart4_java-fips-matrix\n[main] 4 consecutive failures in step openjdk23_entitlements_true_checkpart4_java-matrix\n[main] 4 consecutive failures in step openjdk21_entitlements_false_checkpart4_java-matrix\n[main] 5 consecutive failures in pipeline elasticsearch-periodic\n[main] 22 failures in test testMessageForKeyStoreOutsideConfigDir (100.0% fail rate in 22 executions)\n[main] 5 failures in step openjdk21_entitlements_true_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 5 failures in step openjdk23_entitlements_false_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 4 failures in step openjdk21_checkpart4_java-fips-matrix (100.0% fail rate in 4 executions)\n[main] 4 failures in step openjdk23_entitlements_true_checkpart4_java-matrix (100.0% fail rate in 4 executions)\n[main] 4 failures in step openjdk21_entitlements_false_checkpart4_java-matrix (100.0% fail rate in 4 executions)\n[main] 5 failures in pipeline elasticsearch-periodic (100.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [">test-failure", ":Security/Security", "Team:Security", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127190, "issue_title": "[CI] SSLErrorMessageFileTests testMessageForTrustStoreOutsideConfigDir failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7819 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7819 / openjdk23_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_checkpart4_java-fips-matrix\nelasticsearch-periodic #7813 / openjdk23_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk23_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_false_checkpart4_java-matrix\nelasticsearch-periodic #7813 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7807 / openjdk21_checkpart4_java-fips-matrix\nelasticsearch-periodic #7807 / openjdk21_entitlements_true_checkpart4_java-matrix\nelasticsearch-periodic #7807 / openjdk23_entitlements_false_checkpart4_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:test\" --tests \"org.elasticsearch.xpack.ssl.SSLErrorMessageFileTests.testMessageForTrustStoreOutsideConfigDir\" -Dtests.seed=D586AA63B72932B6 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=fr-GQ -Dtests.timezone=Asia/Ust-Nera -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a throwable with message of \"failed to load SSL configuration [xpack.security.authc.realms.saml.saml1.ssl] - cannot read configured [jks] keystore (as a truststore) [/this/path/is/outside/the/config/directory/file.error] because access to read the file is blocked; SSL resources should be placed in the [/dev/shm/bk/bk-agent-prod-gcp-1745470777043392319/elastic/elasticsearch-periodic/x-pack/plugin/security/build/testrun/test/temp/org.elasticsearch.xpack.ssl.SSLErrorMessageFileTests_D586AA63B72932B6-001/tempDir-084/config] directory\"\n     but: was <org.elasticsearch.ElasticsearchSecurityException: failed to load SSL configuration [xpack.security.authc.realms.saml.saml1.ssl] - cannot read configured [jks] keystore (as a truststore) [/this/path/is/outside/the/config/directory/file.error] because the file does not exist> at org.elasticsearch.xpack.core.ssl.SSLService.lambda$loadSslConfigurations$11(SSLService.java:622)\n\nIssue Reasons:\n\n[main] 22 consecutive failures in test testMessageForTrustStoreOutsideConfigDir\n[main] 5 consecutive failures in step openjdk21_entitlements_true_checkpart4_java-matrix\n[main] 5 consecutive failures in step openjdk23_entitlements_false_checkpart4_java-matrix\n[main] 4 consecutive failures in step openjdk21_checkpart4_java-fips-matrix\n[main] 4 consecutive failures in step openjdk23_entitlements_true_checkpart4_java-matrix\n[main] 4 consecutive failures in step openjdk21_entitlements_false_checkpart4_java-matrix\n[main] 5 consecutive failures in pipeline elasticsearch-periodic\n[main] 22 failures in test testMessageForTrustStoreOutsideConfigDir (100.0% fail rate in 22 executions)\n[main] 5 failures in step openjdk21_entitlements_true_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 5 failures in step openjdk23_entitlements_false_checkpart4_java-matrix (100.0% fail rate in 5 executions)\n[main] 4 failures in step openjdk21_checkpart4_java-fips-matrix (100.0% fail rate in 4 executions)\n[main] 4 failures in step openjdk23_entitlements_true_checkpart4_java-matrix (100.0% fail rate in 4 executions)\n[main] 4 failures in step openjdk21_entitlements_false_checkpart4_java-matrix (100.0% fail rate in 4 executions)\n[main] 5 failures in pipeline elasticsearch-periodic (100.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [">test-failure", ":Security/Security", "Team:Security", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127188, "issue_title": "[CI] DataNodeRequestSenderIT testSearchWhileRelocating failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7817 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #7817 / amazonlinux-2023_platform-support-aws\nelasticsearch-pull-request #68919 / checkpart3_release-tests\nelasticsearch-intake #22176 / part3\nelasticsearch-pull-request #68869 / part-3\nelasticsearch-pull-request #68843 / part-3\nelasticsearch-pull-request #68269 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.plugin.DataNodeRequestSenderIT.testSearchWhileRelocating\" -Dtests.seed=26E641344AFC7BF -Dtests.locale=en-TC -Dtests.timezone=SST -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\ncom.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=2103, name=Thread-60, state=RUNNABLE, group=TGRP-DataNodeRequestSenderIT]\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test testSearchWhileRelocating\n[main] 7 failures in test testSearchWhileRelocating (10.0% fail rate in 70 executions)\n[main] 3 failures in step part-3 (7.7% fail rate in 39 executions)\n[main] 4 failures in pipeline elasticsearch-pull-request (9.8% fail rate in 41 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127187, "issue_title": "ESQL: Get and list APIs should use async execution id format", "issue_body": "Description\nThe get and list APIs for ESQL should use the same async execution id format that the async API uses. You should be able to do a _query/async which returns an id and use that id immediately in the get running query API.\nThe API also shouldn't return node, coordinating_node, or data_node or anything. That's a concept that's not universally applicable. So:\n{ \"queries\" : {\n \"abc:1234\": {    <---- use the encoding returned by async search\n  \"node\": \"abc\",   <---- zap this\n  \"id\": 1234,   <---- zap this\n  \"start_time_millis\": 14585858875292,\n  \"running_time_nanos\": 762794,\n  \"query\": \"FROM logs* | STATS BY hostname\"\n  },\n \"abd:1729\": {    <---- use the encoding returned by async search\n  \"node\": \"abd\",   <---- zap this\n  \"id\":1729,   <---- zap this\n  \"start_time_millis\": 14585858823573,\n  \"running_time_nanos\": 90231,\n  \"query\": \"FROM orders | LOOKUP country_code ON country\"\n  }\n } \n}\n\nGET /_query/queries/abc:1234    <---- use the encoding returned by async search\n\n{\n  \"id\": 1234,   <---- zap this\n  \"node\": \"abc\",   <---- zap this\n  \"start_time_millis\": 14585858875292,\n  \"running_time_nanos\": 762794,\n  \"query\": \"FROM logs* | STATS BY hostname\"\n  \"coordinating_node\": \"oTUltX4IQMOUUVeiohTt8A\"      <---- zap this\n  \"data_nodes\" : [ \"DwrYwfytxthse49X4\", \"i5msnbUyWlpe86e7\"]      <---- zap this\n}\n", "created_at": "2025-04-22", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "nik9000"}
{"issue_number": 127184, "issue_title": "Update semantic_text documentation on cross-cluster limitations", "issue_body": "To my knowledge, semantic_text fields do not (yet) support CCS or CCR. We should document this limitation.", "created_at": "2025-04-22", "closed_at": null, "labels": [">docs", ":SearchOrg/Relevance"], "State": "open", "Author": "benwtrent"}
{"issue_number": 127168, "issue_title": "[CI] DataNodeRequestSenderTests testRetryOnlyMovedShards failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22167 / part3\nelasticsearch-intake #22154 / part3\nelasticsearch-pull-request #68269 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.plugin.DataNodeRequestSenderTests.testRetryOnlyMovedShards\" -Dtests.seed=954153CA6297C084 -Dtests.locale=nl-SR -Dtests.timezone=EET -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: safeGet: listener was completed exceptionally\n\nIssue Reasons:\n\n[main] 3 failures in test testRetryOnlyMovedShards (7.7% fail rate in 39 executions)\n[main] 2 failures in step part3 (16.7% fail rate in 12 executions)\n[main] 2 failures in pipeline elasticsearch-intake (16.7% fail rate in 12 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127167, "issue_title": "ES|QL: execution planner leaking temporary field name", "issue_body": "With CSV dataset:\nfrom firewall_logs,threat_list,airports \n| keep `message`, `name`, source.IP, `type`, message \n| enrich languages_policy on message \n| drop type \n| dissect name \"%{message}\"\n| rename language_name as message \n| lookup join message_types_lookup on message \n| rename `source.IP` AS EkooZqOYHpD, `EkooZqOYHpD` AS `XzWnUOjttGQD` \n| drop `XzWnUOjttGQD` | stats  type = count_distinct(name), `name` = count(*), JhbpKFAaRq = count(*) \n| limit 5791 \n| keep name \n| eval  `name` = true, nhIWDevxEtU = null, name = true, `name` = 1, sPMxyWXGSHm = \"a\", TewXimOwcBYr = true \n| stats  `nhIWDevxEtU` = min(name) by name \n| eval  dsjbDWegyVkg = false, name = null, name = 1, nhIWDevxEtU = null, iPIbTFddDK = 1, rUvqtgSl = 1\n\n{\n    \"took\": 22,\n    \"is_partial\": false,\n    \"documents_found\": 0,\n    \"values_loaded\": 0,\n    \"columns\": [\n        {\n            \"name\": \"$$name$temp_name$1024\",\n            \"type\": \"integer\"\n        },\n        {\n            \"name\": \"dsjbDWegyVkg\",\n            \"type\": \"boolean\"\n        },\n        {\n            \"name\": \"name\",\n            \"type\": \"integer\"\n        },\n        {\n            \"name\": \"nhIWDevxEtU\",\n            \"type\": \"null\"\n        },\n        {\n            \"name\": \"iPIbTFddDK\",\n            \"type\": \"integer\"\n        },\n        {\n            \"name\": \"rUvqtgSl\",\n            \"type\": \"integer\"\n        }\n    ],\n    \"values\": [\n        [\n            1,\n            false,\n            1,\n            null,\n            1,\n            1\n        ]\n    ]\n}\n\n$$name$temp_name$1024 shouldn't be there", "created_at": "2025-04-22", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "luigidellaquila"}
{"issue_number": 127163, "issue_title": "DataNodeRequestSenderIT.testSearchWhileRelocating failing", "issue_body": "CI Link\nhttps://buildkite.com/elastic/elasticsearch-pull-request/builds/68843#01965dba-3b40-4523-beb0-6d42a9343363\nRepro line\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.plugin.DataNodeRequestSenderIT.testSearchWhileRelocating\" -Dtests.seed=CE7E1BE4B05747C -Dtests.locale=ff-Latn-GH -Dtests.timezone=Asia/Phnom_Penh -Druntime.java=24\nDoes it reproduce?\nNo\nApplicable branches\nmain\nFailure history\nNo response\nFailure excerpt\nREPRODUCE WITH: ./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.plugin.DataNodeRequestSenderIT.testSearchWhileRelocating\" -Dtests.seed=CE7E1BE4B05747C -Dtests.locale=ff-Latn-GH -Dtests.timezone=Asia/Phnom_Penh -Druntime.java=24\n\u00a0 | \u00a0\n\u00a0 | DataNodeRequestSenderIT > testSearchWhileRelocating FAILED\n\u00a0 | com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=788, name=Thread-27, state=RUNNABLE, group=TGRP-DataNodeRequestSenderIT]\n\u00a0 | at __randomizedtesting.SeedInfo.seed([CE7E1BE4B05747C:5E8B0EEBF2D85D00]:0)\n\u00a0 | \u00a0\n\u00a0 | Caused by:\n\u00a0 | [index-1/i8P4IN9wSGiQCYyWEh8RUg][[index-1][5]] org.elasticsearch.action.NoShardAvailableActionException: this IndexReader is closed\n\u00a0 | at __randomizedtesting.SeedInfo.seed([CE7E1BE4B05747C]:0)\n", "created_at": "2025-04-22", "closed_at": "2025-04-23", "labels": [">test-failure", "Team:Analytics", "low-risk", ":Analytics/Compute Engine"], "State": "closed", "Author": "bpintea"}
{"issue_number": 127162, "issue_title": "`FieldValueFactorFunction` should return `bad_request` when fields are missing", "issue_body": "Elasticsearch Version\n9.1+\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nFieldValueFactorFunction should return bad_request when fields are missing, not a 5xx.\nSteps to Reproduce\nN/A\nLogs (if relevant)\norg.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:237)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:143)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:70)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:668)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:873)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.lambda$executeQueryPhase$7(SearchService.java:706)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)\n\tat java.base/java.lang.Thread.run(Thread.java:1447)\nCaused by: org.elasticsearch.ElasticsearchException: Missing value for field [<FIELD_NAME>]\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.lucene.search.function.FieldValueFactorFunction$1.score(FieldValueFactorFunction.java:76)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.lucene.search.function.FunctionScoreQuery$FunctionFactorScorer.computeScore(FunctionScoreQuery.java:462)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.lucene.search.function.FunctionScoreQuery$FunctionFactorScorer.score(FunctionScoreQuery.java:444)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.ScoreCachingWrappingScorer.score(ScoreCachingWrappingScorer.java:86)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.FieldComparator$RelevanceComparator.compareBottom(FieldComparator.java:159)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.MultiLeafFieldComparator.compareBottom(MultiLeafFieldComparator.java:53)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.TopFieldCollector$TopFieldLeafCollector.thresholdCheck(TopFieldCollector.java:89)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.TopFieldCollector$SimpleFieldCollector$1.collect(TopFieldCollector.java:202)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.FilterLeafCollector.collect(FilterLeafCollector.java:42)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.ScoreCachingWrappingScorer$ScoreCachingWrappingLeafCollector.collect(ScoreCachingWrappingScorer.java:69)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.Weight$DefaultBulkScorer.scoreTwoPhaseIterator(Weight.java:312)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.Weight$DefaultBulkScorer.score(Weight.java:282)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:46)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:460)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:809)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:387)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:365)\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.TaskExecutor$Task.run(TaskExecutor.java:173)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.TaskExecutor.invokeAll(TaskExecutor.java:111)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:369)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:336)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:212)\n\t... 15 more\n", "created_at": "2025-04-22", "closed_at": null, "labels": [">bug", "Team:Search Relevance", ":Search Relevance/Search"], "State": "open", "Author": "benwtrent"}
{"issue_number": 127158, "issue_title": "[CI] DockerTests test026InstallBundledRepositoryPluginsViaConfigFile failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #7473 / ubuntu-2204_packaging-tests-unix\nelasticsearch-pull-request #68716 / rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-pull-request #68716 / ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\n    PID TTY      STAT   TIME COMMAND\n      1 ?        Ss     0:00 /bin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper\n      7 ?        Sl     0:25 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n    350 ?        Sl     0:00 /usr/share/elasticsearch/jdk/bin/java -XX:+UseG1GC -Djava.io.tmpdir=/tmp/elasticsearch-13693632888005272420 --add-modules=jdk.incubator.vector -Dorg.apache.lucene.store.defaultReadAdvice=normal -XX:+HeapDumpOnOutOfMemoryError -XX:+ExitOnOutOfMemor\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test test026InstallBundledRepositoryPluginsViaConfigFile (1.0% fail rate in 291 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127157, "issue_title": "[CI] GenerativeIT test failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7835 / ubuntu-2404_platform-support-unix\nelasticsearch-pull-request #69189 / part-3\nelasticsearch-pull-request #69186 / part-3\nelasticsearch-pull-request #69156 / part-3\nelasticsearch-pull-request #69087 / part-3\nelasticsearch-pull-request #69079 / part-3\nelasticsearch-periodic-platform-support #7829 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic #7789 / encryption-at-rest\nelasticsearch-periodic-platform-support #7811 / rocky-8_platform-support-unix\nelasticsearch-pull-request #68588 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:single-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.single_node.GenerativeIT.test\" -Dtests.seed=61E6C94C946D0B3A -Dtests.locale=es-US -Dtests.timezone=Greenwich -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: query: from languages_lookup,message_types | dissect type \"%{language_name} %{lUExNPlCFv}\" | keep `language_name`, `message`, `type`, `language_code` | drop messag*, language_name | where  NOT false AND true | stats  dZHmcwpytj = min(language_code), language_code = count(*) by type | limit 3173 | enrich languages_policy on type | keep language_code, dZHmcwpytj| rename dZHmcwpytj as language_code | lookup join languages_lookup on language_code | dissect language_name \"%{rzEYPygMrvRn} %{VoxwLDJkW}\" | dissect rzEYPygMrvRn \"%{rzEYPygMrvRn} %{oRDpAlpSPJrS}\" | eval  `oRDpAlpSPJrS` = 4069359665708631012, NRIVvYrpf = null, eusQAcRMXvpY = null, pKCqMKIRHa = null, `rzEYPygMrvRn` = true, lnZPOkBpIVRS = -342457484, rzEYPygMrvRn = 1213716962 | dissect VoxwLDJkW \"%{CqJzWvklnYU} %{kpENLsKnqNC}\" | rename `rzEYPygMrvRn` AS `sdxbyBdM`, `language_name` AS CqJzWvklnYU, NRIVvYrpf AS `mqMgkAlp` | keep `eusQAcRMXvpY`, CqJzWvklnYU, `oRDpAlpSPJrS`, sdxbyBdM, eusQAcRMXvpY, `kpENLsKnqNC\n[truncated]\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test test\n[main] 11 failures in test test (1.2% fail rate in 881 executions)\n[main] 7 failures in step part-3 (2.3% fail rate in 298 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-platform-support (16.7% fail rate in 18 executions)\n[main] 7 failures in pipeline elasticsearch-pull-request (2.4% fail rate in 295 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127156, "issue_title": "[CI] QueryPhaseTimeoutTests testBulkScorerTimeout failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22151 / part1\nelasticsearch-periodic-platform-support #7799 / almalinux-9_platform-support-unix\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.search.query.QueryPhaseTimeoutTests.testBulkScorerTimeout\" -Dtests.seed=4CC9B711354B273D -Dtests.locale=yue-CN -Dtests.timezone=US/Mountain -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<2048> but was:<2360>\n\nIssue Reasons:\n\n[main] 2 failures in test testBulkScorerTimeout (1.2% fail rate in 167 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127138, "issue_title": "[CI] DockerTests test025SyncPluginsUsingProxy failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #7497 / ubuntu-2404_packaging-tests-unix\nelasticsearch-periodic-packaging #7497 / ubuntu-2404_packaging-tests-unix\nelasticsearch-periodic-packaging #7497 / debian-12_packaging-tests-unix\nelasticsearch-periodic-packaging #7497 / debian-12_packaging-tests-unix\nelasticsearch-periodic-packaging #7497 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #7497 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #7497 / almalinux-9_packaging-tests-unix\nelasticsearch-periodic-packaging #7497 / almalinux-9_packaging-tests-unix\nelasticsearch-periodic-packaging #7497 / ubuntu-2004_packaging-tests-unix\nelasticsearch-periodic-packaging #7497 / ubuntu-2004_packaging-tests-unix\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\nPID   USER     TIME  COMMAND\n    1 elastics  0:00 /sbin/tini -- /app/elasticsearch.sh\n    7 elastics  0:17 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n  301 elastics  0:46 /usr/share/elasticsearch/jdk/bin/java -Des.networkaddress.cache.ttl=60 -Des.networkaddress.cache.negative.ttl=10 -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djna.nosys=true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe=true -Dio.netty.noKeySetOptimization=true -Dio.\n[truncated]\n\nIssue Reasons:\n\n[main] 25 failures in test test025SyncPluginsUsingProxy (3.6% fail rate in 699 executions)\n[main] 2 failures in step ubuntu-2204_packaging-tests-unix (33.3% fail rate in 6 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-packaging (33.3% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127137, "issue_title": "[ES|QL] Rerank command Cross cluster search", "issue_body": "No body", "created_at": "2025-04-22", "closed_at": null, "labels": ["needs:triage"], "State": "open", "Author": "afoucret"}
{"issue_number": 127136, "issue_title": "[CI] RetrySearchIntegTests testSearcherId failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7801 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #7729 / rocky-8_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:searchable-snapshots:internalClusterTest\" --tests \"org.elasticsearch.xpack.searchablesnapshots.RetrySearchIntegTests.testSearcherId\" -Dtests.seed=A534D63AB3D7EA48 -Dtests.locale=bn-BD -Dtests.timezone=Asia/Chongqing -Druntime.java=23\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Index{id='jayyxtsbqm/2TCjqpyKSgyYJQyY-VcQvA/DKi0w9foTIO0UUWYFgCi3w/3/_0.cfe/@0', seqNo=2, primaryTerm=2, version=1, autoGeneratedIdTimestamp=-1}\nExpected: <4L>\n     but: was <2L>\n\nIssue Reasons:\n\n[8.17] 2 failures in test testSearcherId (0.5% fail rate in 374 executions)\n[8.17] 2 failures in pipeline elasticsearch-periodic-platform-support (15.4% fail rate in 13 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-22", "closed_at": null, "labels": [":Search/Search", ">test-failure", "Team:Search", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127106, "issue_title": "[CI] ChangePointOperatorTests testSimpleFinishClose failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7793 / openjdk22_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #7779 / windows-2019_checkpart3_platform-support-windows\nelasticsearch-periodic #7721 / openjdk21_checkpart3_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:compute:test\" --tests \"org.elasticsearch.compute.operator.ChangePointOperatorTests.testSimpleFinishClose\" -Dtests.seed=63E5CF824D2A1E68 -Dtests.locale=ky-KG -Dtests.timezone=America/Indianapolis -Druntime.java=22\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected single page, got: [Page{blocks=[LongVectorBlock[vector=LongArrayVector[positions=23, values=[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...]]]]}, Page{blocks=[LongVectorBlock[vector=LongArrayVector[positions=2, values=[1, 1]]]]}]\n\nIssue Reasons:\n\n[8.x] 3 failures in test testSimpleFinishClose (0.7% fail rate in 452 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (15.4% fail rate in 13 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-20", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127103, "issue_title": "Search Task Cancellation", "issue_body": "Description\nHello,\nAre planning to add timeout for search task cancellation? It is there in opensearch\nopensearch-project/OpenSearch#986", "created_at": "2025-04-20", "closed_at": null, "labels": [">enhancement", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "uchiha-asha"}
{"issue_number": 127101, "issue_title": "[CI] MixedClusterDownsampleRestIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7747 / openjdk21_9.0.1_java-fips-matrix-bwc\nelasticsearch-pull-request #68256 / 8.19.0_bwc\nelasticsearch-pull-request #68256 / 9.0.1_bwc\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 3 failures in class org.elasticsearch.xpack.downsample.MixedClusterDownsampleRestIT (0.5% fail rate in 599 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-20", "closed_at": "2025-04-21", "labels": [">test-failure", ":StorageEngine/Downsampling", "Team:StorageEngine", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127100, "issue_title": "[CI] FieldExtractorIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7747 / openjdk21_9.0.1_java-fips-matrix-bwc\nelasticsearch-pull-request #68256 / 8.19.0_bwc\nelasticsearch-pull-request #68256 / 9.0.1_bwc\nelasticsearch-pull-request #68064 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #68064 / 8.19.0_bwc-snapshots\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 5 failures in class org.elasticsearch.xpack.esql.qa.mixed.FieldExtractorIT (0.6% fail rate in 813 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.7% fail rate in 275 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-20", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127099, "issue_title": "[CI] FiltersIT testSimpleWithFilterQuery failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7769 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7727 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.search.aggregations.bucket.FiltersIT.testSimpleWithFilterQuery\" -Dtests.seed=963D5D7D3D66645F -Dtests.locale=en-FI -Dtests.timezone=Pacific/Midway -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.Exception: Test abandoned because suite timeout was reached.\n\nIssue Reasons:\n\n[main] 2 failures in test testSimpleWithFilterQuery (0.7% fail rate in 277 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (25.0% fail rate in 8 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-20", "closed_at": null, "labels": [":Search/Search", ">test-failure", "Team:Search", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127096, "issue_title": "[CI] CrossClusterAsyncSearchIT testCancellationViaTimeoutWithAllowPartialResultsSetToFalse failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7792 / openjdk22_checkpart2_java-matrix\nelasticsearch-periodic-platform-support #7808 / windows-2019_checkpart2_platform-support-windows\nelasticsearch-periodic-platform-support #7760 / windows-2022_checkpart2_platform-support-windows\nelasticsearch-periodic-platform-support #7736 / windows-2022_checkpart2_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.CrossClusterAsyncSearchIT.testCancellationViaTimeoutWithAllowPartialResultsSetToFalse\" -Dtests.seed=2D86EA427DC65EB3 -Dtests.locale=xh -Dtests.timezone=America/Scoresbysund -Druntime.java=22\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: taskInfo on remote cluster should not be cancelled yet: {\n  \"node\" : \"MdjlQg06SRebU_spMqadCg\",\n  \"id\" : 1286,\n  \"type\" : \"transport\",\n  \"action\" : \"indices:data/read/search[phase/query]\",\n  \"start_time\" : \"2025-04-22T20:37:33.051Z\",\n  \"start_time_in_millis\" : 1745354253051,\n  \"running_time\" : \"498.3ms\",\n  \"running_time_in_nanos\" : 498374729,\n  \"cancellable\" : true,\n  \"cancelled\" : true,\n  \"parent_task_id\" : \"C95WfQi3Q3Gl5EuJZcRPhA:1564\",\n  \"headers\" : { }\n}\n\nIssue Reasons:\n\n[8.18] 4 failures in test testCancellationViaTimeoutWithAllowPartialResultsSetToFalse (0.8% fail rate in 478 executions)\n[8.18] 2 failures in step windows-2022_checkpart2_platform-support-windows (15.4% fail rate in 13 executions)\n[8.18] 3 failures in pipeline elasticsearch-periodic-platform-support (23.1% fail rate in 13 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-19", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127090, "issue_title": "[CI] EsqlClientYamlAsyncSubmitAndFetchIT test {p0=esql/10_basic/basic with documents_found} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7751 / sles-15_platform-support-unix\nelasticsearch-periodic #7729 / openjdk23_entitlements_true_checkpart3_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:single-node:yamlRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.single_node.EsqlClientYamlAsyncSubmitAndFetchIT.test {p0=esql/10_basic/basic with documents_found}\" -Dtests.seed=F5DA378DA1C53486 -Dtests.locale=es-PE -Dtests.timezone=Europe/Zagreb -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [esql/10_basic:200]: \nExpected: <10>\n     but: was <9>\n\nIssue Reasons:\n\n[main] 2 failures in test test {p0=esql/10_basic/basic with documents_found} (1.4% fail rate in 146 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-19", "closed_at": "2025-04-21", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127089, "issue_title": "[CI] AddStringKeyStoreCommandTests testStdinInputWithCarriageReturn failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7798 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7792 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7780 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7774 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7768 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7762 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7756 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7750 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":distribution:tools:keystore-cli:test\" --tests \"org.elasticsearch.cli.keystore.AddStringKeyStoreCommandTests.testStdinInputWithCarriageReturn\" -Dtests.seed=B3841538AEE5F8A9 -Dtests.locale=sd-Arab -Dtests.timezone=Turkey -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.ComparisonFailure: expected:<Typedthisandhitenter[]> but was:<Typedthisandhitenter[\n]>\n\nIssue Reasons:\n\n[9.0] 8 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[9.0] 8 failures in test testStdinInputWithCarriageReturn (3.8% fail rate in 209 executions)\n[9.0] 8 failures in step windows-2022_checkpart1_platform-support-windows (100.0% fail rate in 8 executions)\n[9.0] 8 failures in pipeline elasticsearch-periodic-platform-support (88.9% fail rate in 9 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-19", "closed_at": "2025-04-21", "labels": [">test-failure", "Team:Core/Infra", ":Core/Infra/CLI", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127088, "issue_title": "[CI] XpackWithMultipleProjectsClientYamlTestSuiteIT test {yaml=esql/10_basic/basic with documents_found} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7751 / amazonlinux-2023_platform-support-aws\nelasticsearch-pull-request #68467 / part-2-windows\n\nReproduction Line:\n./gradlew \":x-pack:qa:multi-project:xpack-rest-tests-with-multiple-projects:yamlRestTest\" --tests \"org.elasticsearch.multiproject.test.XpackWithMultipleProjectsClientYamlTestSuiteIT.test {yaml=esql/10_basic/basic with documents_found}\" -Dtests.seed=D676AAD22180945B -Dtests.locale=en-UM -Dtests.timezone=Canada/Yukon -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [esql/10_basic:200]: \nExpected: <10>\n     but: was <8>\n\nIssue Reasons:\n\n[main] 2 failures in test test {yaml=esql/10_basic/basic with documents_found} (0.8% fail rate in 245 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-19", "closed_at": "2025-04-23", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127086, "issue_title": "[CI] ModelRegistryTests class failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22095 / part2\nelasticsearch-pull-request #67959 / part-2\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 2 failures in class org.elasticsearch.xpack.inference.registry.ModelRegistryTests (0.3% fail rate in 758 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-19", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127081, "issue_title": "[CI] DockerTests test026InstallBundledRepositoryPlugins failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #7407 / ubuntu-2204_packaging-tests-unix\nelasticsearch-pull-request #68581 / ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-pull-request #68581 / rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\n    PID TTY      STAT   TIME COMMAND\n      1 ?        Ss     0:00 /bin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper\n      7 ?        Sl     0:23 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n    373 ?        Sl     0:00 /usr/share/elasticsearch/jdk/bin/java -XX:+UseG1GC -Djava.io.tmpdir=/tmp/elasticsearch-13521326275957472505 --add-modules=jdk.incubator.vector -Dorg.apache.lucene.store.defaultReadAdvice=normal -XX:+HeapDumpOnOutOfMemoryError -XX:+ExitOnOutOfMemor\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test test026InstallBundledRepositoryPlugins (1.1% fail rate in 279 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-18", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127080, "issue_title": "[CI] EsqlClientYamlAsyncIT test {p0=esql/10_basic/basic with documents_found} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7759 / single-processor-node-tests\nelasticsearch-pull-request #68690 / part-3\nelasticsearch-periodic-platform-support #7763 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #7745 / rocky-8_platform-support-unix\nelasticsearch-periodic #7705 / encryption-at-rest\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:single-node:yamlRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.single_node.EsqlClientYamlAsyncIT.test {p0=esql/10_basic/basic with documents_found}\" -Dtests.seed=6EEDA62533ACD384 -Dtests.configure_test_clusters_with_one_processor=true -Dtests.locale=en-IN -Dtests.timezone=PST8PDT -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [esql/10_basic:200]: \nExpected: <10>\n     but: was <9>\n\nIssue Reasons:\n\n[main] 5 failures in test test {p0=esql/10_basic/basic with documents_found} (1.4% fail rate in 345 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (20.0% fail rate in 10 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-18", "closed_at": "2025-04-21", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127078, "issue_title": "[CI] EntitlementInitializationTests testValidationFailForWrite failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7729 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7729 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7729 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7729 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7729 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7723 / openjdk21_entitlements_false_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":libs:entitlement:test\" --tests \"org.elasticsearch.entitlement.initialization.EntitlementInitializationTests.testValidationFailForRead\" -Dtests.seed=160B3635076E245D -Dtests.locale=ewo-CM -Dtests.timezone=Asia/Magadan -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Unexpected exception type, expected IllegalArgumentException but got java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"/opt/buildkite-agent/.java/openjdk21/conf\" \"read\")\n\nIssue Reasons:\n\n[main] 5 consecutive failures in test testValidationFailForWrite\n[main] 2 consecutive failures in step openjdk21_checkpart1_java-fips-matrix\n[main] 2 consecutive failures in step openjdk23_entitlements_false_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_true_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_false_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk23_entitlements_true_checkpart1_java-matrix\n[main] 10 failures in test testValidationFailForWrite (13.2% fail rate in 76 executions)\n[main] 2 failures in step openjdk21_checkpart1_java-fips-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk23_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk23_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-18", "closed_at": null, "labels": [">test-failure", "Team:Core/Infra", "low-risk", ":Core/Infra/Entitlements"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127077, "issue_title": "[CI] EntitlementInitializationTests testValidationFailForRead failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7729 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7729 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7729 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7729 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7729 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7723 / openjdk21_entitlements_false_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":libs:entitlement:test\" --tests \"org.elasticsearch.entitlement.initialization.EntitlementInitializationTests.testValidationFailForRead\" -Dtests.seed=160B3635076E245D -Dtests.locale=ewo-CM -Dtests.timezone=Asia/Magadan -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Unexpected exception type, expected IllegalArgumentException but got java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"/opt/buildkite-agent/.java/openjdk21/conf\" \"read\")\n\nIssue Reasons:\n\n[main] 5 consecutive failures in test testValidationFailForRead\n[main] 2 consecutive failures in step openjdk21_checkpart1_java-fips-matrix\n[main] 2 consecutive failures in step openjdk23_entitlements_false_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_true_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_false_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk23_entitlements_true_checkpart1_java-matrix\n[main] 10 failures in test testValidationFailForRead (13.2% fail rate in 76 executions)\n[main] 2 failures in step openjdk21_checkpart1_java-fips-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk23_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk23_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-18", "closed_at": "2025-04-19", "labels": [">test-failure", "Team:Core/Infra", "needs:risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127076, "issue_title": "[CI] EntitlementInitializationTests testValidationPass failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7729 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7729 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7729 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7729 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7729 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7723 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7723 / openjdk21_entitlements_false_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":libs:entitlement:test\" --tests \"org.elasticsearch.entitlement.initialization.EntitlementInitializationTests.testValidationFailForRead\" -Dtests.seed=160B3635076E245D -Dtests.locale=ewo-CM -Dtests.timezone=Asia/Magadan -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Unexpected exception type, expected IllegalArgumentException but got java.security.AccessControlException: access denied (\"java.io.FilePermission\" \"/opt/buildkite-agent/.java/openjdk21/conf\" \"read\")\n\nIssue Reasons:\n\n[main] 5 consecutive failures in test testValidationPass\n[main] 2 consecutive failures in step openjdk21_checkpart1_java-fips-matrix\n[main] 2 consecutive failures in step openjdk23_entitlements_false_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_true_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk21_entitlements_false_checkpart1_java-matrix\n[main] 2 consecutive failures in step openjdk23_entitlements_true_checkpart1_java-matrix\n[main] 10 failures in test testValidationPass (13.2% fail rate in 76 executions)\n[main] 2 failures in step openjdk21_checkpart1_java-fips-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk23_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk21_entitlements_false_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in step openjdk23_entitlements_true_checkpart1_java-matrix (100.0% fail rate in 2 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-18", "closed_at": null, "labels": [">test-failure", "Team:Core/Infra", "low-risk", ":Core/Infra/Entitlements"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127071, "issue_title": "Remove failure_store field name from Data Stream serialization", "issue_body": "Currently we serialize if a data stream has the failure store explicitly enabled when writing a data stream to XContent and to a byte stream. This is redundant because we always send the data stream options for the data stream which already have this setting inside of them. This is a vestigial field from early in failure store's dev cycle that has yet to be cleared up. Now that the feature is going into GA - logic that uses values provided to this field has be cleared up to ignore it. It doesn't look like the field is currently written in XContent. We should look toward clearing it out.\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/cluster/metadata/DataStream.java\n\n\n        Lines 1253 to 1256\n      in\n      d928d1a\n\n\n\n\n\n\n if (out.getTransportVersion() \n\n\n\n     .between(DataStream.ADDED_FAILURE_STORE_TRANSPORT_VERSION, DataStream.ADD_DATA_STREAM_OPTIONS_VERSION)) { \n\n\n\n out.writeBoolean(isFailureStoreExplicitlyEnabled()); \n\n\n\n } \n\n\n\n\n\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/cluster/metadata/DataStream.java\n\n\n         Line 1286\n      in\n      d928d1a\n\n\n\n\n\n\n public static final ParseField FAILURE_STORE_FIELD = new ParseField(\"failure_store\"); \n\n\n\n\n\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/cluster/metadata/DataStream.java\n\n\n        Lines 1366 to 1367\n      in\n      d928d1a\n\n\n\n\n\n\n // Should be removed after backport \n\n\n\n PARSER.declareBoolean(ConstructingObjectParser.optionalConstructorArg(), FAILURE_STORE_FIELD); \n\n\n\n\n", "created_at": "2025-04-18", "closed_at": null, "labels": [":Data Management/Data streams", "Team:Data Management", ">tech debt"], "State": "open", "Author": "jbaiera"}
{"issue_number": 127066, "issue_title": "ElasticReRanker fails to truncate tokens correctly in 8.18, worked in 8.17", "issue_body": "Elasticsearch Version\n8.18.0\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nElastic Cloud\nProblem Description\nI am using the Elastic Reranker through the _inference API in both Kubernetes and in Elastic Cloud\nI had an unexpected breaking change moving from 8.17.2 to 8.18.0\nthe documentation says that the model itself will do 'balanced truncation' to 512 tokens\nThis was the case in 8.17.  it is not the case in 8.18.  In 8.18 if you send it too many tokens you ger this Error return\n400 Bad request\n{\n\"error\": {\n\"root_cause\": [\n{\n\"type\": \"illegal_argument_exception\",\n\"reason\": \"cannot window a sequence without a configured span\"\n}\n],\n\"type\": \"illegal_argument_exception\",\n\"reason\": \"cannot window a sequence without a configured span\"\n},\n\"status\": 400\n}\nSteps to Reproduce\nThis Devtools will reproduce the issue\n## create the inference\nPUT /_inference/rerank/my-elastic-rerank\n{\n  \"service\": \"elasticsearch\",\n  \"service_settings\": {\n        \"num_threads\": 1,\n        \"model_id\": \".rerank-v1\",\n        \"adaptive_allocations\": {\n          \"enabled\": true,\n          \"min_number_of_allocations\": 1,\n          \"max_number_of_allocations\": 4\n        }\n      }\n}\n\n### test it works logically\nPOST /_inference/rerank/my-elastic-rerank\n{\n    \"input\": [\n        \"search engine meant for information retrieval\",\n        \"message queue built for data in motion\",\n        \"machine learning ops built for training models\"\n    ],\n    \"query\": \"vector database\"\n}\n\n\n\n## THIS WORKS payload is 5 strings of 200 words each\nPOST /_inference/rerank/my-elastic-rerank\n{\n  \"input\": [\n    \"scufter oograph seedbed iliotrochanteric ciceroni gaddingly gomeral increasingly Menotyphla unhemmed nornorwest kindheartedly importer cubitodigital endostracum hoggery overnicely homeostatic dispersity affectional Wolffia saraf microsection nature somatotyper Elamitish quillai avitaminosis prediscern controversionalism uncinch Gillenia mesmerizability unaccessibility spermatically Disporum temporomandibular paludism uneuphonious tantivy Iroquoian frangula Rhodothece periocular olm subterraqueous Minoan scotodinia skunkdom Austrophilism ramosely atangle repartition nonindependent woodhack bold axonost aeolipile aberdevine Stegocephalia nidulant polishment unstifled pseudostalactitical hybridal swisher tump depredate ratcatcher geront dargue unimproving pecopteroid Trimeresurus spousy bendwise ferruler isovalerate superfluous monosulphonic planetal biceps fracted nonmonastic regalist underground monographical feyness sibling mataeology Dodecanesian crinite glossocoma gastroesophagostomy devouringness cockneybred dissimilation Plagianthus thakurate diospyraceous all idlish rubbernecker Entamoeba dissolutionist Gerberia waffly premedievalism tarsome subcingulum bluffer childness outsophisticate anecdote obtusifolious ventless disorderedly Gigartinaceae revere overfestoon corollaceous angloid ostiary broadspread Ephemerida suchlike acclaimer ranginess malacoid bakupari Ferae Virgularia gnawer bluefish bow exanimation polynomial Nicaraguan otacoustic unsatirical jacinth trichinize Germanophobist reback unbefriended baudekin factoress spermatorrhea unspattered dragonfish delayage chromatics procellariine tiffin autophoby vowmaking chymosin Observantist pial rheic unthoughtedly overbrutal synerize cine rommack seducible eyepiece pentacarpellary flex pseudoparalysis truck pulsive sourweed glucide unbirthday simplex pleromorph unforgettable intercrystallize gratifying endymal hypergeometric shedlike boort quadricarinate cannequin occiput nomenclaturist mettlesomely heteroecism whirlingly nonoppressive D outsider retrocessionist tracked sacrilegiousness panace lupinin logology\",\n    \"cupule stean scratchable underlimbed pain percaline scoldable bitable resurge doucely Myxospongiae tsubo hoper overcaptiously predesolation plying aristology ayu jitney Amoskeag carbolfuchsin Sigillariaceae writhe multichord inblown calpacked sackbut shoreside warth pucelle countertrench reiver nunciatory carboluria slumpy indulgently retentivity proconsultation unvigorously astrospectral nonelopement heliographical impendent turkis scavengership germen elapid shroud repandodentate tingibility piscine heretrix seepage funniment lobose nonego Alangiaceae surquidy cord unswaying inspeak guildry oathful however metatoluic Nitzschia mastigote demihuman anthropogony Corallorhiza caesaropapacy unpainful alvearium eudiometry holoparasitic blennosis reafforest slateful nectarous Guaycuru intercommunicable unhypocritical sensomotor noncostraight borophenol bullocker wourali tramroad igniferousness carval ribbonlike marrer gentman sexagenarian toellite scatterer acanonical Taube nondelegate rhinotheca favn nonsyndicate distributary entoproctous according pastel exteriorly outfoot ladyfy dysyntribite transect unconsonantly balsaminaceous polysyllabicism roseoliform sarcosoma raiser loam chloralformamide lymphangitis Subakhmimic imaginative kinemometer siphonlike isogeothermic drawn Colchian uncatholical radicivorous bottler ineffaceably kitchenman perosmic seismoscope debauched sulphureted Chrysobalanaceae crumbable vapidly ditty unipolarity subscapular strepent Plagiochila assentation degradement Novatian Taraxacum corrente dispersonate stimulatrix poetling coenflame allokinetic sulfamerazin Flagellatae Spyros ringsider diplanetism unvaleted huffier categoricalness arsenolite presidential hilariously historicoprophetic ago cockish virific lymphation unclustering codshead humblie archdiocesan chelidonian hymnless poisonable pipit carbomethoxyl posthypnotic wrigglesome unnavigable daunter gaussage zygosporic plastidular thuggeeism trend shuffle lymphotomy frowziness putchen spiculose platynotal pezizoid protopin education gelastic Pachytylus interregnal\",\n    \"Troad astomatal austerity godmamma sind unstationed amorphism colophonite blackhead pulpotomy testacean whaleman aeluropodous cosh housebroken reapprobation uninucleate foreknower spherule cryalgesia piligerous doveflower husbandliness myricetin tangleroot Aplysia rhamnaceous guerdoner preplacental Gerres tenomyotomy uninsulting inexcusability organicismal Penthorum endorachis corundophilite Epictetian unpresumptuously definition polystelic sizal marbling poppel reprosecution endosarcous cystostomy moonwards unsistered postcornu macroreaction elucidator oraculous uncost coolen biblioklept supraspinatus fibromata irreligiously unquiescent adapt succeeding mesocephal preliability ischemia impship trig insipiently stickwater phoneidoscope gyroidal Parnassus intrabred achromatocyte frightenedly otophone coliform pythonine frenched roup Petrarchianism pycnotic antievolution looten gralloch existentialize burmanniaceous overgrown Berliner libriform fiddlewood slatter nonevangelical macroplankton ingenuously misplay disgracement craw apneumatic rampageousness accidentiality astrild gulinulae fulminuric didactyl nonemployment shiv toxicodermia detrusor commandingly ungual stupidity anthropoteleological Mohammedan tuberculosed Nietzscheanism augite earthless embattle brokenhearted semirare Tonto ungibbet monohybrid tetraxon updry surfeit pooly phrenohepatic Markab unenduringly allanturic quinolinyl tripestone heterostrophic frequentative autodetector silverberry rodomontade unexhilarated popinjay nonenforcement undebarred behindhand plait polemarch morosis auximone gallivat gudge admarginate colewort ennead grievousness autographical scawl choriambic Hyaenanche agonize tangible homefarer Abelicea amuse grenade proscriptiveness reen hyperphosphorescence pleurenchymatous sawmiller urus catface kinesthesia ethmovomerine carpentership strepitous revolutionizement poignancy lexical superflux assimilativeness cashel prerectal centrifugence tangram admeasurer unseamanship chinking creesh eternalization sulfionide reparatory amini beauty precox reckla hamingja unfrustrated discontinuously moorburning striolate\",\n    \"cursus postmillennial forbiddingness resack daintihood Rufus fakirism teletype sterically lanky bovovaccine hydrocollidine unscarified bacteriofluorescin archaeology warehouseage distaff densimeter dubs nonkosher Nyssa ratheness squamulation ectocardia procommunal biometric jingoism ingressiveness Argentinidae semirotary zoonule octoploid thundersmite Constantine regulated intercadence antipyretic shepherd newspaperwoman cosingular vulviform Gum implicateness urde Kiplingese outportion sharrag deputational suffrago garrafa imide mongst peltast reconfront aerophilately stimpert pallet tigerwood Erigenia colation coenospecific flywinch warming Malurinae supralunar Samantha lithotomous supercultivated semiliquidity Hainan tungate chiliagon teras renotify neurogenic delusion flank trinity docket transperitoneal Impatientaceae equiparate lamenter uncareful department Idomeneus gnathostome tipful quadrennia probanishment balsamy subregional unpejorative costermonger callithump metastibnite Livish superaspiration sinewy cymogene intermingledom lichenographist chemicobiology Cossack Emim urostege infantlike worseness theorematist unlodge roomthy oiled palpatory tripudiation cypseliform binoxalate miscollocation Mercury sculptography heraldress featherwood weasellike Taurini Apostolic laticiferous bebait handreader pedicle rattlebox splurgy woodrowel annale Albion Fistularia laddered pantomorph nonchalantness khedival Tahitian crankum badan apothegmatical pahutan grassant Sobranje antinome electrophysics impressedly Caesarian relighter incapsulation malaprop emyd underviewer Sara Birkenia attractivity philobotanic sundog deepwater unsmothered Crustacea Gigartinales legitimistic splitbeak oda undangerousness heritage deaerate decumbiture sunt aerognosy reaccomplishment nonuniversal setter Eliot edeomania bending intrada Kislev humoristic uncommodiously unreproachably myomorph polyphagic lanthopine knubby nonintellectual gillygaupus disconducive rocheted tadpolism cakewalk atman dikage shriver precensus desilver urostea zaratite\",\n    \"sideage blueback diordinal mountaineer circumagitate sicklepod propylic snout ultraspartan ungloomy superannuate hebronite troubadourist arachnoidal loghead stationman Chefrinia galactopoietic nongeographical suidian perisinuous exotheca unitism effusiometer perfervour semihyperbolic hydrophone apoturmeric frankincensed preunite trisodium phonomotor antipoints nectarlike Oldhamia conjunctiveness intercorrelation postmillennialist undersight unflinchingly adjoin relightable dependency Aeolian slowmouthed agglomerate unthoughtfully yellowfish opposer catacorolla veracity callainite shunt subabsolute Jerahmeel arthrodiran expiational scutellation amanitine wasted Cheiroptera nephropyelitis agust bagnut steadiness lukewarm gastrostomize shewbread psychokinesis whipmaker rehair akpek semialuminous hypinosis breadstuff stepbrotherhood phalloplasty Brahmanhood globeholder northwestwards revitalize parasitoidism Rhaetic uncanonize Compsilura diplogenesis pridefully preconizance soar contragredience setiferous emigree decameter overexcitably hierarchical diolefin Tatarian south banning khirka Cymbalaria bobolink gulonic hemiglossal arrentation Roridulaceae foreacquaint expirator manometer snailery unride gingerwork valleylet spatiotemporal pyrometer byrlaw outage cerebroscopy solicitationism infantilism uncontenting medicochirurgical exsurge interposal phlebothrombosis adapid textually serratiform bullet wrang electrodesiccation multivoiced rushlight unlearn heathered tabes accersitor branny Ambocoelia cinct Wisteria Pleuropterygii mispickel extrared unaudibleness presbytism colorimetry epilogation Gravenstein thunderstorm bookstack shimmery ordinarius fossilization psychiatrist popover dermatology epinasty urethroblennorrhea Tradescantia interblend crew autopsychosis conarial launce gripman opiumism indemnificatory archmarshal distemper mae sibyl borak unpractical esoterics jib strike ichthyolatry Xiphodontidae bibliomane bewidow gonimium rapier throttling Cystidea belimousined bradyuria Seiyukai syncephalus lounder cackerel alpine costotome shoalness synopsis chayaroot parasympathetic preadoption Ronsardism transmissional\"\n  ],\n  \"query\": \"what is the meaning of life?\"\n}\n\n## BUT THIS DOES NOT WORK payload is 5 strings of 800 words each\nPOST /_inference/rerank/my-elastic-rerank\n{\n  \"input\": [\n    \"ideographic flustrine dispeaceful unfarsighted fibulae ribonucleic teaberry denitrificator scriptitiously lemures Monachi vacational ribandmaker parasyphilitic annihilation idolomania embracingness nephelinite reticence fissipalmate pleonectic overrude metralgia sorrowproof clayiness cadilesker Cambuscan enviably penicillately Indicatorinae lamenting life phaseolin parathyroidal acatharsy overhill unaesthetical laridine phosphine rehumiliate spectrohelioscope extremeless crassilingual unimperious gypsoplast stoutheartedly diurnally incompact apocalyptical meteorological fibroadenoma tae monodynamism pygmyweed anglesmith Epirotic instinctively autogenesis oniomaniac exsurge unaggressiveness gurglingly microsplenia chromosphere paraphrasable iatrochemist karyotin intrinsic actinon injunctive consolidative mucaro Eoghanacht nonofficinal philocatholic spirepole overmajority unwestern chylophyllous Shaviana guenon sonless identical reillumination stringhalted Saxonically pygostyled endovaccination ameed experimentalism fictional populousness symbolicly Messianist coto writable variscite othergates omniactuality cercomonad tumultuariness burnoose flipper Winnebago waterdoe Purkinjean gyrene Thursday oxazine megaron overbookish parasuchian accede photogastroscope spoor cozeningly ogival annotate porcelainization mismove rucky fundamentalness frontogenesis univerbal unintimated hematography getting ingoing slobber semidecay tortureproof Saxonization herpolhode osmoscope overgirdle tricrotic wrecking necrophagous tycoonate beamily unenjoined compearance ostiolate saccharophylly pseudosymptomatic catadicrotic metabiology josh gonangial astrogonic carbure uncarried genovino issue retral interreligious Fritz tongkang tow fungilliform kibblerman unshakeable poser delundung efflorescent diluvial objector waterwort compone quartet calamitous unmundified otitis Camaldolensian suety overcoolly Oxycoccus vicarate steganogram Tarzan scripturalist commissural rubdown reprovocation pseudoarthrosis scrawl straining partially pyopericardium postpontile laryngeating floppy tamidine overartificial communalize Timuquanan credenza benzalcohol indeterminately zoogeographical semiconductor clayer overequal reirrigation bronchiostenosis reductively coucal octarch Paralipomenon restuff puree pell uncomputable noneuphonious metascutum karyoplasma togata insulance hortative poachiness trite Targumical exorcismal Shatter jape entrammel hyperorthognathy infructuosity dingbat microtomist achtel messagery Nestor thyridium mucronately bahisti fragmentation Alphard pamphletic bipartitely autoprogressive curatial netman Toltecan incondite iserine augmentationer staurolatry refight birdlore intoxicated salicetum Heterorhachis quizzable etherealize diaphragm untress copsing captious wavicle ootocous leapingly nigritude Asteriidae microlepidopteron unmaidenlike sabella Khowar wheresoever puericulture adeling platformed monolithal inhomogeneity hodmandod overkindness superficially sustanedly encystation alternation lixiviation metacarpale fructescence overkind radiodynamic outbook mentagra Amidist Mizpah nuisancer hydropneumatic irrepresentable hypotyposis pluviosity introverse aerotaxis ecotype alexipharmical rankish propagulum aganglionic oecodomical tided plantationlike ebulliently identify overcram valorize nonmanufacturing dungbird fascinery statequake chuck Strychnos multibladed platinichloride enterokinesia cohesive unrowed ambiency impervial repeatal aortic reneague caesaropopism Senna diadoche mordent revaccination bowet Thymallus stogie resanctify cypre onomatopy thyrsiform scapulospinal viatic sauriasis superstoical followable barytosulphate driveaway peristaltic unhumorous bulbocavernosus outtyrannize nondichogamous anagyrine booter daimonistic Echinoderidae glutton rededication distalwards jowl disculpation poetship porcelainize empicture Armenian lurchline Sericana widowlike bien lamellar trachelotomy namaycush gazel oxyquinoline diosmin outlet fireflirt colluvies ethnarch semilucent slipperflower kil unimitating calalu alizarin hideland quadriphyllous immenseness lameter kiddier nighly smoothify mythical interculture drillet undiscomposed Squilla flashet abaculus inn miserliness Hunchakist sheepsplit unvisibly peridiastolic misanthropist please postreduction notal scufflingly quackishly distraught stercorarious nonapply leucoplast Myristica snoozle turriferous gramineousness purring gerontic rochelime feucht tormentil coimplore phrase aire quizzify myometrium antitorpedo thebaism utopianizer sorrower seedeater ipsedixitism Hamamelis petrostearin nonzealous unfrolicsome Lutetia compromiser robinoside niobous seller daddocky cubitoradial isoperimetrical recountable Bragi monkey unintermissive amphistylic Balanopsidaceae epicure platycyrtean perispherical waremaker khirka morphinomaniac creaker diva preconcert aldimine Amphisile salta hawker antiodont shaglet durenol hoarily hyperphalangism vulgarian bisymmetric stolist stomatomenia cheapery undrawn manto circumboreal certificative convertend pokily tracklaying physiotherapeutical windbreak vulgus galactophorous glycoluril purpure batt apiose onefoldness Fenian Jerseyite Protobranchia trichode sustained reascendency overpartial bronchoscope semidefinite Hemigalus dichotic indirectness osteographer preredemption unscrew stereotropic chairwarmer venenousness alchitran prediscussion cincture unstilted dragon detailedness rotatoplane neobotany serialization unsloughed pigdom isagogics anisic gastropancreatic templeful Bessarabian submit intarissable Khamti overcarelessly unrefrainable excusingly trustiness gymnolaematous pepperbox trifler Tarandian scatological imponderable admixture primogenitary humlie packbuilder expand Faliscan each nondomesticated casaun Opisthognathidae ethnobotanist growed notself kharroubah acinarious unperformance simultaneity Camembert waddlesome desmic octangular pedantically unastray prunello pulpify noncombining Meliponinae taxon Polymyodi papule mercuric eternalism agha undershepherd physicological afterfeed shabash subcortex overprovocation unconfederated labrosauroid uncram ruelike undauntable Alectoropodes hurdleman Oghuz anteclassical underntime glycolate semilogarithmic Mydaus impulsory bogie Solenoconcha octarchy handcar joyously ooblast troutbird thioarsenate Mahesh tarri Tigridia prediscernment excandescence unamending Poinsettia gypsyesque pretercanine unexcursive ski Pentatomoidea Christendom azohumic Artemision burgle consumpted uranidine anywither nozzler bard birchbark churrworm Budukha Alismataceae metaphenomenal wigmaking westwardly suppletively wommerala nonearning rombowline aromatite uroerythrin chilognathous pantalets bibliography photophone polypterid unwarped adversatively uncausatively scribing premusical nonexisting parotis foreplan lacelike unguyed ascorbic unvoluntariness statical unliturgize arrowbush dolose Poria vignette flossification ricrac infertile uncleanse Burley subterrestrial aminoguanidine Britannian Hypnum physicalism menald lupuline mahoe hail sawsetter phosphocreatine sarbican topcast skere Magellanic quantical psychopannychy glomeroporphyritic cupcake breastpiece athematic Mose overlook pregratify zoogonous sarrusophonist Dipneumona predevote condescendent mischaracterization childridden Zuni pimlico tanworks superhypocrite Palestinian transilluminator Xylotrya Celia thiazine morencite reintuitive interfollicular sphacelus Methuselah Hosackia bathroom liquor frustrater honorability savagely plicator taw midspace weeviled Tropidoleptus remodeller vaulted stereobate alcoholuria ungenerate herbarial inyoke hereafter wouldst dispiritedly hersir sparoid periscians proscolex uncomplaisantly tuberculatoradiate diapyesis shipwrightry amorphophyte Hochheimer impleadable unflamboyant porpoise ungainsayable seminonsensical kula anthraphenone cytosine brawly noumenally ahaunch verdigrisy untithable warriorship fibroglioma zymome stuck deappetizing unrailroaded musculopallial maimedly limniad lethargicalness nonstellar Cactus cancroid hemihedrally condemningly assailment chlorophyllous kaolinite retreat Sabbathbreaker interpretability pyrophanous interenjoy inland xyloglyphy illaudatory outrave confiding opossum endocrinotherapy urethrophyma skibby plethorical anaptyctical branner swordproof activital Laboulbeniales lanuginousness frontality channelling coadamite ingratefulness Amiloun servation loup leisterer rossite incommunicability curacao divorceable sporran endobronchitis\",\n    \"item parabolically balance acupunctuation fablemaker unguard galvanocontractility hureaulite hexahydrobenzene pesade minar submind Agaristidae Geomyidae experimentator martially bicuspid autotypography undichotomous objectional outfort chestily unheler unmasquerade dorsoventrally dermatocyst monodactylism itonidid recleanse mastman unconservable voidly dicodeine milling cosmologic copolymerization hydrophytism arsenillo Zealander Lide axhammer strabismus overwroth paraxially voluntarist biocellate Paradisea griffinism echelonment precipiced Horvatian ow Februarius epiklesis pleonastical exhumer auditor unapprehensible remanent undry scrapling ropy unoriginatedness hydroidean undivulged overgrossly neebour gramarye polyonychia electrohomeopathy Khivan Dwayne scheming sicilian Sepsidae Zacatec Argive chemicoastrological outeye unappealable withhold Asclepiadaceae anhydrite overjacket surround Neogaea seminonflammable Malay trombiculid polycyesis aggrievedness homoousious purificant milkbush Dionysiac healthsomely succumbent patriotically small barway fogle playwrightess nannybush period synthete Brummagem isonitroso parado stethoparalysis Paiconeca stenographical Thuban Fife structureless conductive stereocomparator aquilege Helleborus slingstone transaudient unjointured crackling unvisitable polysyllogism overfluent foots geniohyoglossus oily fimbriation kitling underset frayedly koller polygamically largemouth Macrosporium microcombustion Harpocrates necrectomy showable uncheckable quaker amphibolic misleader ruffled telautogram fought cartograph urent ounce trouserian nonextrication Libellula preservationist remedilessness staphyloptosis macrostructure defamer femalize abluvion Pteridophyta unenfranchised brontophobia ataxaphasia needless semiautonomous mover consensually brownstone scandalmonging occipitofacial vermifuge after Stylonychia holmberry Huavean gusle thermoreduction Nigerian duffadar rejoinder fitten Delichon stealy tar blankard physometra Kurumba ateleological subicteric incontinuous quadricostate frangula integralize overlace recompilation perigenesis hybridous perthiocyanic reinversion unobstruent wringman absorbedly muircock thrasonically distemonous williamsite labidophorous upsplash inhomogeneous impulse gownlet eurythmy Beggiatoaceae terdiurnal heptaphyllous subuncinate toothlet solipedal Cryptozonia pronationalistic peptize unluckful actinautographic mentimutation paxillary abortional taunt unmeek unescapable thusly sprang slackener electronographic consuetudinal wash reconstructional existentialist wearingly hematachometry dioptase meagerness asporogenic holoplankton prerepresent Servian typal uncomprehensively milkstone palaeosophy stonebow ganton radicolous misenforce whiskerless ileocolotomy Deuteromycetes incombustion grandnephew Rhodesian cloud alimonied Duns isobutyraldehyde predicatory Amen anarthrosis heterocaseose terracette Socinianistic outstroke deathshot bermudite blindfolder housefast unshapenly instinctual nosebleed mythus indefaceable bradyseismal sottage dosseret Olympianism crystallin chamisal unpecked rhinoscleroma quadrupedism semiroyal gorgelet Caribisi Heliopsis tonguing Gnosticism counterblow Whiggism staling trapes unradiated stridden merrymeeting synchronal nonreticence compromitment expressionlessly sphenoidal postdiluvian theatrical overturnable short taxgathering pillorize canaliferous giddea Tangaroan gametophyte hydrophone Seeder curatage amylocellulose guiba proofreader raspatory besaint uglisome unfetchable Chauceriana uncivilizable tyrolite lionize epistemophiliac Castoroides spasmed pedicellated agriculturally Titanical dolcian Ernst undelighted approximative fructivorous Hypericales nerviness amphisarca hesitatingly luciferoid amphimorula leptomeningeal pharyngoplasty eruptiveness totemist trochitic pokerishness noctidiurnal hindsight magazinism newsworthiness intrusiveness diaconicon pewage overinventoried monopteros impecunious untractableness pseudobasidium tetrarchic Chrysosplenium unhot incorporatedness Neville spiculum upper ictuate Rigelian stoping unauthentic indigena alveololabial gamete Cowichan growler pseudometallic spermoblastic intervertebra boathouse Dirian Pandemonium cobiron spikily hellness Eupolidean dowdiness nosohemia superstratum greyness teleianthous deformeter neomorphic turbith clausthalite Ephraimitic precedential palatineship Veronica recopper lakism unseam Skipetar streetwise albuminate fenceplay nowhen germinant bid stuntedness Tellinacea amphineurous pyramider session Zizania cisleithan isorhamnose decinormal preveniently glazen blake centipedal sponge Xylocopa Victoria unexhaled monitorish choleokinase toxa machree araeostyle Serenoa syllabicness henceforward subgenerical skewer midmandibular Carpodetus hookum Struldbruggian peripeteia windbroach Dungan isonymy Kasha pangenesis Ichthyodectidae sab episiorrhaphy rhamnaceous unsatirically Anthracosaurus restorationism semidelight multicycle deifier redefeat subalternant anile oviducal taligrade gayatri brachycranial unsipped yutu backworm aphronia unaddressed rebatable enhalo bride nonrevelation cytomere squantum sulphatoacetic neurocoele unconjugal pentathionate podiatry zinfandel similitive imponderous reservable womankind axoidean polt Photinia affix overgloominess impacted hocket baffle saimy capripede fornication synthetize precollectable pled unfinishedness gnathopod inofficious sparry fortifiable retrocopulant uteroplasty nonimmune hindcast toasty spectroscope delirious sertularioid pseudodramatic acrose cricketing intraovarian femininism plateasm riantly triplegia diazomethane villanously importableness gastric yoga butyraldehyde papyrophobia magnetooptical pleasingness undestined expunction unbuffed coabsume neuralgy supplicancy cicindelid connexity patrologic unweariably krausite retinaculate trochart endaortic surbed whipcord Crustacea callisteia crophead paradigmatical undeified rixatrix Zande morepork arrish whiskerer titillatingly gappy plebeian fractonimbus accidentiality uratosis Ammonoidea Corydalis cannabinol hinderfully Tomopteris pinchcommons sulphoxide diastolic thakur Isopoda counterdiscipline trisomy clarin unobserved omnitonality hymnological pentangle restaurate hypostatical ophthalmoplegia bhagavata tannyl juror colmar calycle tendonous chironomid bridgeman unexpended supportingly albuminization uncounseled Herpestes sulphonalism masterly speluncean polytungstic glacial Gymnostomata rhombohedric lam regrate rhipiphorid stingfish heliometer unwastingly laurone swain qualimeter unhelved revolvable curvation Kirghiz unrailwayed impressionably acanthophorous phaneroglossal Simonian enteroischiocele overdepress pneumatophorous aduncous disallowable Montauk bobcat protonephros pulmotracheary barathra thicknessing subvillain ehuawa prest nongraduated underpose consociationism laemoparalysis preinvocation sclerotoid condylarth miraculist legua gitaligenin sinsring bitrochanteric bathyal Thereva naphtholsulphonic responsion microblepharia nontransparent clarty gonidiospore acedia spicular nonvictory Martinez afterspring dipterological kilo uncompassionateness celiomyomotomy allergy ethos sulphoantimonite nongipsy trubu backfatter unirhyme phyllitic Sphyraenidae countergabion fortescue pycnidial coronal maladjustment Straffordian playwrightry barberfish Lafite segreant graymill phytin nonminimal unromanticized greensward wonga unsensibleness Wanyamwezi doxographical hypertonic Atacaman pillow ecderon senate dicentrine perspirate foundationally divaricate winnable didle lovesomeness disobeyal underreamer repositary neuromyic Cretic bebouldered Recollet intramatrical prereverse symptomatical pulvinar ah Christolatry playday ejoo unopposed streahte brosy adjag unimpelled overzeal stenochoria thermology discerptibility cosmic unpitying uninsurable adjure whitewall Hulsean photosynthetically vomitive yeggman sumlessness copatentee sextarius serviceably lateroabdominal airable infernal derangeable rimmer polypeptide tukra scug juiciness oophoralgia postappendicular spiciness interdependently spectrotelescope Platonical fruticous impersuadableness bescorch miscellanist realive unhandicapped swishy angionosis timeless zaptiah chalcidoid dictynid bemat veery countryman Diomedeidae lovemonger titano pneumatized alphitomancy Duryodhana ingrowth refracture koombar tinctorial diplococcemia tylostyle rehypothecate chloroamine floppiness bel unattestedness supercatastrophe craftless unagitatedly earthlike unintruding semifinish convallamarin Cathryn coruscant\",\n    \"tamarack synchroscope elegy posteternity Aniba Aporrhais Malacopterygii concreter heredosyphilitic mastocarcinoma hinderly electropathic rehouse Paracelsus throbbingly stonewaller unshown signature respectant slippiness pharyngoscopy psittacomorphic tetraploid whitebelly Zonta unraftered psammolithic Cestidae Ranunculaceae trepanation negligee damned indebtment transgressible addleness obtund nifle scelerat amentaceous phlebemphraxis greenweed pseudorealistic cluther nonleprous painful nonremuneration rotalian trinal metalliform very refunction Rechabite agitatrix unbannered Dialypetalae cotylosaur kokum gumming linguiform overunsuitable programmer science zooplankton ooglea irrigator callable Udolphoish Irving Tricholoma apulmonic entombment tendomucoid yan humid bedeck reobligate rockless tifter archpretender tolguacha clerisy religate unviolined trashrack plasma nymphwise amplification transitoriness voodoo elevating Pseudoscines untwining routhiness galaxy ommateal pyroxyle Lepus ruffling delate fitful carbinol apogamously abirritation galuchat copperer Zaphrentidae succula overbranch helleborism lipofibroma manerial partialist tattery isabnormal proclivousness braces glycolytic Hillary nonrotating missummation tridecane obomegoid unring pilula mhometer unmorally shingled resoutive adactyl tomtate bocasine Resedaceae untaut isopropyl chegoe laryngoscopy Scalops brown cumbent exosporous belonoid unricked coadapt cribriform precartilage chondroblast expeditiously multimodal epimer youthhead interlardation copularium vitrifiable objectivation geratic twentyfold copperleaf wharry ungoodly thallium Jovinian smich cyamelide hydraulicity Englishwoman damascenine weeder drysalter diathermometer fibulare waff chondre daboia unwordably undifferentiated eumeristic labrosauroid shiversome hoper Clausiliidae triglyphal octingentenary evaporativity scintillometer Tagakaolo thirstland metallurgy sigillation nitrator miscreancy interseamed phytol hydrogenization sulfurage venireman Enajim irreprehensibly upwith relentless malease fuliginously unafeared mourn isobarbituric thrombose reweaken hypoiodite swayable Alascan hookup Sudanic gegger dayblush Veneracea unbegun boss unranched delirium instillator bolden knawel asdic grainland clitelliferous fugient typographical vanillery neoparaffin smile pelargonic pinnacle Laestrygones clansmanship doebird hyperthetical anguish blanc uteralgia ampangabeite sulfarsenite cloister unpoisoned notungulate peripteral polisman irresoluteness centistere reperceive nonsegmented pontes actualism aenach silenaceous Esquiline dissever thriller urodynia dephlogisticate wabbly heatmaker countersecurity favaginous proverbialist Kriophoros dislocatedly embrasure semology exiguity noncommensurable arthrogastran Guanche nearable guarana Santalaceae axes prerelate arborescence loose graziery Theriodonta vandalistic counterstrike thermophone tetradrachmal spot prototypic musicianer yaya Beatrix microsporous Hrothgar Jezebelish pseudovum devaporate curatic clinometrical Susumu unchangedness kraft callithumpian Greg unemotionally nummulary nomography deluge socializer contortional ogganition ironclad barbiton pendeloque oenanthic scarved owldom Hardenbergia pyro shelfroom somewhatly spectrographic tamandu elenchically sigillariaceous unpalatably Tatarize undermasted coenocyte scatterling unbendable nosopoetic nucamentaceous jaileress cleidomastoid laminose indigestibly merveileux fugitiveness robot hornety overflexion undeliberativeness flintwork polystomatous colorimetry bambini diathermize Endoprocta Jesuitess gladiate boilersmith muletress gumpus musketlike pelagic Phyciodes mosstrooping Plinian summons hindberry rubbishly attachment raveling thwartedly premiership reeky indeterminism allomerous caricographer firelight nonsecretive psiloceran Gnathobdellae allosematic repeatability trittichan Palaeichthyes parasital unrevealedness variousness grammatistical supraspinate spinney porphyrion mumblingly indigotindisulphonic decent aerodromics girl individuation leisureful reefy dropsywort superinfinitely exactiveness tendron dilo unreeling kirver untrueness unconcealably hemimetabole underpropper fortlet conveyancing overforwardness antiabsolutist phacocystectomy turriferous muncher overlively sestertium Hiodon Asellidae trierucin sapanwood antisensuousness amphimacer hydromonoplane horsetail curliness cionocranian sympodially hypermetaplasia rhamnohexite drammage myotenotomy taurine interreflection bombard nanomelous impertransible combatable plumach weam bigeye modernly disingenuousness zygoneure unprogressed redisseize yogoite masticatory pseudospectral hariolize protovanadium Velloziaceae stromatic prolong clapperdudgeon balsamweed Ramism quinquesect nonbeverage alectoropodous candid dithecal actinula dispersive waganging scurvyweed polyandrian pencilling outthwack epithelization houndsberry oxybutyric Ichneumones vitrean spoucher unassaying pneumoenteritis purpureal thermoammeter antiscians quaintise bebaron inseparate unabashable sence condylopod crusade unuseful fimicolous exemptile pressor sacrosciatic bridgeable pigmentose toucanet xanthogenamide fluorbenzene roselet recco Choco devaloka proletary Mesomyodi Newichawanoc sizal bushbeater samadhi cauk mycose anoa Llanberisslate quaternate scripture natatorial sulfurate Spondias psychesthetic gerontine diphthong congroid charadriiform unconfutable agentival Chaetosoma Gunite Coccolobis Vaseline unpoignard actomyosin exceedingly Tyrrhene chrysamminic rober palander note strawen refectorer purusha chauffeurship unaffliction pentavalent overlanguaged angle tonsure Phylactolaemata uronic slonk militate decarburize rollicker unconcertable across pinchcommons Arecaceae duncedom Jap Decameron unconscientious varletry tendrilly iridocyclitis overpointed realienate pantatype irresolute philosophicoreligious anaphalantiasis analgic ammonocarbonous debauch impunible ispravnik hemopexis retromammillary subclavioaxillary Sorbonne sandproof cardiopericarditis centrobarical mpret forwander savagedom Christianness nonretinal cuttable anaptyctic socle younglet Bahima aristology barrette spondylodymus misvaluation dietrichite unpermeated down brattishing tabulary disimitate Toba unbegilt sloosh overenter nosepiece brimmingly lithograph neckguard Cimbric dodding rivality inerroneous nostalgic demnition reading depigment wasteless bailie boneshaker asteroidean viridite muckite coarrangement anagoge commendableness naperer tenderness unadornable peerdom dominicale Congreve heterometric fanega abjure heterolytic poultryist unpestilential frowningly prenatal melanocomous manuma apyrexy encephalodialysis palaeoniscoid Paratheria filose Diprotodon Owenian baku unstilled biplane supererogate anchoritess ergasia significance collin fabulist cogitant niggardly semipyritic shrift Capernaitish onomatopoeia sulphantimonite inornate rabbinate obvolvent slatternish Arcturus metosteal arabesque ectoblastic aceology Cocceianism relaxative suffragistic heelgrip diabolarch intercorrelate Chuncho tonishness undercellar plethysmograph neurocanal validly methinks shibboleth holeproof oratrix synactic awalt Timonism epicoeloma khedivial monopolist subhooked nullity incisively vassaless boomlet Kaj grugru hybridize waistcoated stegocarpous devotionality eyebrow Phoeniculidae molybdate classy Manhattan sessions bassan splanchnotomy anacleticum weaponed rusticness pitchlike Cannabinaceae unwearyingly allivalite empery fagger methoxyl horsefish Sicana uncomprehensible impassionedly hordary designedness photopic textiferous vestimentary Salish Proteida puan drumbler pneumonophorous abele leucophyllous inshell Abu nonmenial analyze portgrave Masulipatam fibdom gravitational retiringly didascalar boulevardize Mozarab bandala hornblendic underriding latirostrous pyoplania sulphureously seel creatine prunase subpolar knit writhen pourparler Bernese xiphisternal scleroticotomy homeopath cameograph feedable cometic unsteadfastly subobscurely nonrealization sibilatory ligneous neuromimesis cooperage tirret anomalism Ypurinan historics culturable hydroxamino stairy lobated Tylostomaceae perikronion insee uncorner trineural Lepargyraea Og asymmetric polymorph Photostat structuration postsphenoidal medullization Terence typewrite shellblow cardicentesis humblehearted nondetrimental perceiving Variolaria\",\n    \"unreposefulness Koschei superaerial fiance dianoetically Koeberlinia sclerodactylia morgen Gandhara alexipharmacum sabromin Strongylidae bathmic tunnellike uncherishing canalicular Abundantia gnashingly postpontile bloodroot moorbird uncustomary Newtonian thetical coshering neurhypnotist verbiculture calamary Capernaitish kittle predispersion divisural rhythmist postlaryngeal ananda multicourse Colubriformes twankle resident Leads anecdotic infix yancopin unstow Atlantid hydropigenous lackeydom introjection girleen elytrorhagia delightingly Orbitolina reedbush heteroeciously evanesce coloratura deseasonalize linchbolt Phill Melanodendron Lemuel disillusionment inertial replead unlivableness dedicatee Oskar magneto hexandric Rhamnales shuffling endoplasmic mentary charkha castellano attenuative deerdrive ramellose Acroceraunian unendeared embarrassingly sternocoracoid postbulbar tolualdehyde desirousness pauciloquently overjealously sobrevest leadiness alnuin unfallacious guisard surrounding Jacamerops blackener ahura lithochromatography Celebesian checkered xanthocyanopsia vestal amusingness absurdity algic anisocytosis striper injured discommons conational beriberic hucksterer pleurospasm archistome orthodiagonal flaglet lundyfoot denarius thoroughgoing gnomed revealingly furious Megalichthys puritanical sonorosity thoom higginsite porotype Mohineyam effervesce borty unskilled Echinosphaerites outsparkle tapirine fluoroform connectant pericystitis bloodguilt pantothenate privy contradistinct Sol methylglyoxal anthokyan volently micrencephalus revalorization stragglingly subpubescent orchidectomy repertory invaginate fiddlerfish monial mortgagee ecclesia uncrowning Franklinization lingually maned Ganodonta stunning wronger anatopism typhlolithiasis prediscriminate gnathonic condensedly adenomalacia trug mundil psychopannychy underdebauchee oarial miserabilist pashmina dicta incorporated unwithholding doctorly disciplinableness Sequoia machinify tunny cinnabar unniceness diplocardia epiphloedal Concord semiprimigenous annonaceous mentiform proportion deinos misbelief beadlike ropewalk nomadization cometic anathema brakeless unrenouncing unoutspoken microcephalism millimole physogastry sunk enspirit Sphaerocarpaceae Barouni desaurin pyroxylene capomo pretan accordion jacami impersuadableness engravement verrucose diglyceride antepectus cholestane tavistockite catarinite cubanite Alur pheophytin bazoo paragnathism build orthogamous efflower ternarious miraclist Jean-Pierre ferinely monture gulflike alveus amphicoelian palmitoleic schizocytosis exchangeably sop thereamong apertness backrun nicotinian uncheated Tarsiidae poodleship jobbing hydrargyrate profanableness aspidospermine sacrococcygeal subdie synoptic archform outbrother dacryon unfallen antiperistaltic fantasia chincha aphilanthropy scuppaug Germanophile deliciousness tiptop weightedness insubstantiation vacona biwinter grayfish sensationalist melongrower reciprocative unnoticeableness probituminous cantonment chlamyd idiogenetic kurveyor shrups galactophthysis garnish demit acheiria aumil gynomonoeciously gemmaceous constrainer mysticality phrenogram lukewarmish cheapery Anaspides nail Koreshanity baikerinite onium thrustfulness semiarborescent Paraguay Billjim vaagmer bromoiodized lumachel laryngectomy misally trifurcal repartition foreyard larynx subadult beaverlike cloudily profligacy salicylanilide coinspire Samburu inquiringly comburimeter Palaeornis predestinate recondense seasonally bosker outsole probabiliorist edition elution Gigantostraca streptomycin laryngorrhea pentylidene nonoriginal hybridal pretentative umpirage abraxas stylops hematospermatocele ungirded agapetae undigest Moropus photoesthesis bigonial ulcerative pleonic Pani schedulize postuterine otosis ligulate aseismic alodial alchitran nayward gabbro Synchytrium diphtheritis Pteropus sharpsaw insist Inermia triovulate smallware excrescential gawney culvertage piff cashment hypothesis cementatory squareface Amita ataxiagram sternopericardiac benzothiopyran violent alimentatively cudgel Ruritania unpolite electrovection unmaze moralistic voyager limeless macrospore triagonal caged pregenerous variscite pseudoancestral Fegatella confessary proethnic spear vessignon Hepaticae lapsation lakeless jibby district Ramneek leprously lonesomely Drusedom recanvas flaxwoman roaringly hereditist Chrysops superinquisitive cotenancy noniodized resummon overjoyfully uptwined paragogical uncleaned ungarmented quasijudicial jiltee signum aceship Burut Ida jurisprudentialist masseter probabilism Palaemon russetish mineragraphic synenergistic postmarriage algolagny synoecete eyebar overtimbered Rusa procompulsion Mingrelian knickknack cabrerite pariahdom Sergio reinterference kinetogenic truehearted okenite aperture prefrankness encrust mizzle diversity waeg zygomaxillare aristocraticism pityproof urotoxicity unwailed diffame Chequers countercompetition incessancy Numidian naturalistic mechanics ungrappled septentrional ulstered fossick dealerdom hypertense megaphone jugular podzolization pseudococtate scabious pteridospermous attentively zoophoric pantophobous waugh jurisprudent unionistic guyer camelry unflushed trioleate untraitored diplococcal toxicodendrol prolegomenist canvasman reprime shrinkageproof unprosperously consent frenchify conspectus Cygnid switchkeeper lemonweed cockled squareflipper chemisette teachability dreggy Pimpla epiploon anolyte spelding pliosaurian Rafflesiaceae Yankeeist ovoplasm ununanimity uncognoscibility nephrologist intramuscularly kirombo lexicon vester beneficent foyaite uprun psittaceously mechanicality ontogenetic distributary bromate plowjogger mumness Plumatellidae netted exogenous bucciniform establishment lairstone stilbestrol disruptively safeguarder supercommentator bong phrenosin rone serotherapy sylvanize Hopi coma oven snooze zootomist rodney claw redder diffusionist Pithoigia predisrupt nemathecial loiteringness superoexternal argentometric semimajor uranographical exiler naughtily Lobelia plastometer calculative synarchy hoofbound prologize harelike supersarcastic meningitic sweep eroticomania unbind disprobabilization melampyritol carpometacarpus tritangential bajada backswept mixed toothache fantastry cinematography splotchily pyritohedral stoper arborous hypethral velitation sulfonamide dishonorable cirriform crying repriever besought insalivate noninstructional yodel unparasitical intensifier ceryl Shekinah cubomancy overdiscouragement bushwife depressant Cupressus tuckner erythrolysin exculpatory trush citrination tendriled pterostigma platemaking replacement angulinerved dewret bellhanger Vaishnava tuan proctotomy familistic gawkishly inscrutables retributive phose trichinae puzzledom osmundaceous pupilless polyaxon merotropy dacryolite overdash extrasyphilitic Caughnawaga prefeudal gitalin tinkler antiaggressionist bino crotonic polytechnical penitent involucriform fingered disincorporation parao upbrow chainmaking circumvolution stockholding paxillus heliotypy spasmous transplace Donmeh microgeological autocatalytically rebake Megalodon Felinae coctoantigen sulphantimonial phantomically shandy trihedral ghetchoo benamidar unrouted taeniosomous cousinry Klaudia skelper homalogonatous cherisher cognatic drawler scalableness tarok Zohak proslaver supplial cytochylema unelbowed dismayful explodent Sorbian innumerable Phebe hurriedly reviewability endoproctous fibroglioma benzopyrylium chuckler slorp bromethyl stagehand chorda Lokman wily spiritist modulability Trollopeanism stolonate Plumulariidae Orphicism pseudogenteel tuath Christianness laevorotation premiant biggonet commemorational leud uneasefulness Liukiu moldable virescence epilobe reunify lintel anthropolatric endocrinopathic explicit skipjackly longspun wrongous pickaninny toro underproductive apsis jeerer defrost scopoline oust morgan measureless trinitrocresol befetter betso measled unembarrassedness witship conarial overfelon materialistical pipkin reinjure position Hermetism infrugal glyptolith peristeromorph effect noctovision witness blockheadish pararosaniline hippiatrist taxiauto coccygomorphic unbattling preadjunct appreciatorily tractatule hypochondria clapt resinolic prealkalic Hildebrandist undergraduette mulierosity hyperplasic lockspit gocart imprecision sinistrad unlaborious cyclitic myocarditic premundane chondrolipoma hoofed diarthrodial alizari\",\n    \"oppugnance betoil therapeutic wanderoo abstrusity etymology veracity Sainfoin Chaco hysteroproterize reliance schismatist blockage shale tugboat pinnisected diallel noncommunist heresyproof proctoscope unstrafed cityfolk parahepatic nonpedestrian staidness bluejack shoescraper byeworkman repaganize aquarian addable synrhabdosome plethysmographically beggarlike Molochize Gasserian hypocycloid dendrachate denumerantive leniently tetel pumpage remarkably legendist unsolicitousness semifixed superdevelopment backbonelessness consuetudinal decretively Allosaurus banstickle undissonant espial uninheritable angioblastic Serapias profusion beeth longitude foreshank tirocinium paroxysmic laxity dennet microlepidopter Madagascar remonstrating citator prog blader intersexual atterminement Vicki coremaking Bergsonian limettin unsocially sigmoid levorotation velar celiosalpingectomy spoonmaker lycopod scribatiousness unrefusably impeccably friz bathycolpic guardingly loveful Abarambo achlamydate unactiveness dibenzophenazine hierogram levulic vintress arbutin Pahouin interatomic Syriarch gluteal methadone Floralia concinnous lanceproof mariposite proverbiologist zebra redondilla unit torulus unperplex Leucobryum straitlacing celliferous polygonic sayid proagricultural dissuasory transudatory perukiership ossify hydrosorbic outplay tripetaloid nonmotorist unsatable gauntly stof drouk unchasteness contracter airman normalcy cloudland depth parabema welt Copernicia coloratura repledger seminonsensical vaulting phasm sectoral trypanosomatosis columbine shebeener theloncus aporhyolite overeducative retrievableness shipped strategic wigmaker monometallist distich Conioselinum ossicule bannister subsumable Sarcocystis turnel wringer embosom quiscos overrepresentative iridesce pinax bogwort krobylos soroban tohunga archabomination recriminative perfectionate planity Camaldulian zoeaform keratinization swatcher proclericalism hyperapophyseal molehillish pyrographer euxenite encyrtid rhythmic colpenchyma clavated heather unjustified forewritten Cephalata pelycometer orbitelous helmsmanship stuffgownsman ravens subtlety pearwood Sjaak germinability xeromyron piercer uredinium hypoglycemic ptyalism apiarist yak reannounce viscount detention inefficacious palaeostriatal pulton ornamentalist orchester talkative archcriminal unpersonableness standardbred cabernet subdistich genuineness dairi examiner horokaka unpriestlike fangle Heracleum hyperbatically arteriolosclerosis beetle palaeotypic cofathership casate patrioteer quiniretin unmyelinated corked guardroom nondispersal Climaciaceae redistribute quinquetubercular traumaticin haunt unsignaled potatory drofland eulysite zoosporous thermoelement phonautograph trionym sulfurize timber hoodless Draba underjawed Anacyclus lief rappe watchcase insanitariness tray minoress rhinarium sewen trisomy basirhinal arend Psychidae inebriation brawny counterbewitch tenositis malcontented areographical unescalloped nomogenist myotic throbless pseudoprosperous hoptoad sociologize ostracodous Myron catalyte parrhesiastic sloke scleroblastic hyporchema tedder Giottesque typp allegoristic Sandy snuffers arris aftershock superflux planographist diligence Jerusalem beek contubernium symbolicly Copehan nongenerative fantail wrig Japanization uninfused ossiform unthoughtedly rickmatic highroad circumitineration tongueflower xystus magnetotelephone contravener drammed pauperitic Parasitidae omnipercipient plowgate preimpose squamosozygomatic oxyphosphate enambush bodyhood sulfa repel Chatti wampum surplician aldermanly wardapet bacchiac nonintervention pocketlike protoplasmatic mediateness e aulos weblike organotropically photoptometer unwrested Podostomata nonsulphurous unsoldierly nonsiliceous blacky woodhole dowitch chemicoastrological derm backswordsman stra range Hutterites defined honeybloom cover postcaval nonconterminous uncouple dottily Scopulipedes mariner Threskiornithinae hydatomorphic leadin Tullian unicell Chaetifera beguess massy tripartient monactinellidan dissentaneousness mesenteronic Pennaria salvific documentation glovemaking toponymal meat grinder Amblyomma Wambuba overwealthy aftertouch standee ungracefulness unentreating ultraphotomicrograph counterfoil Asiatize nonsurface Anakes aboriginally proconstitutionalism jawless menaccanite Isurus evilwishing room gipsire Melospiza completer affrication theophilist fabulist hypodermatic opsonize interfibrillar atwixt pleonastically lexiphanicism lunar Oedipal overwetness tacheometer requeen witepenny nonmetamorphic quite unfaked Crotalinae antisoporific sancta seasoned zephyrlike nonexaction yus incalescent pyrosulphite stockwright postulancy interstratification sparker interlaboratory Cymbopogon unobtainably planchet spireme garn glycocholate lunation intraprostatic unmaintained cachaza interchangeableness sil Yankee athrepsia legua perameloid epidemicity scyphistomous iconic diligentia unexhilarating hexacolic liberation outfeat Haplodoci qualminess scopuliped chinchayote gnathion cognate woomer homopter inhaustion granitification heinously commentary algine resazurin lifelessness Elaphebolion Romic extractiform counterpronunciamento bedress rebec unjovially unrevengeful pragmaticalness shallowish unorthodoxly filmdom uninvalidated hunkerous Elasmotherium torpitude subdivide cribble footrail hypergeusia orthosis Jess urinogenitary grimacingly mere immoralist physiosociological turnwrist tenomyoplasty tattlement retiringly teleiosis tamehearted smaltite acephaline ampelography divinity interobjective irascent tyroma footlining fogramite homotropal duly Falkland daimonic moderator untorpedoed Astragalus rotulet unfilleted dentist slash monochromist unimprisonable pyritize repeater Istvaeones misadvisedness westward zooplasty prosodially seminuria goosebird cymbiform bathylith roundsman Casziel hemicrane sunfall shastri unsupernaturalize uncheerfully drupaceous palladia scurfy haptere Vitallium stylopization outparish Colima atreptic unpatronized octateuch Sixtus mools trubu Macacus cyanoauric verbosely dermestid ologistic crow supplementation orthotropism deportee karyological unmechanized coextensively nonrural knolly sciatically frustration duchy bouillon multiseriate lucernarian Amblyopsidae illaudable acotyledonous edifice Tephillah chopped Tucano polyzoan rapeful baar gynecocracy Tomtitmouse undelude shorthorn procourt Pupidae estadio lash subarrhation sagittiferous spectrophotography etholide tool multivolent checker tabog Ecclesiasticus throwdown Cecrops chaplain abrash Berchta candyweed pneumonography midewiwin tricker ca antepyretic guapilla toxihemia swagbellied vaporous meditatively Panhellenios file colloquiality Helianthoidean droseraceous unlordly efficaciously dwalm blushiness womb Wasagara superconfirmation politician sheepmonger coadjuvancy classis gouge shatterer invernacular vicariateship Manxwoman preoccupant heder cauliform noncrenate cochal aetosaurian folkmot psalmy adangle exercisable sho unsnarl trochal talcky stormwind titre compendiously Hobbism sublapsary recce ballium chemotactic promorphologically horripilation inanimate misintelligence quadruped comic asphyxiator prut kurbash Marheshvan bloodlessly overshake huthold toastiness cloggy yohimbinization educt flamy claptrap vulsellum blastment battik autoerotic unrespectfulness hennish delectableness maternalize colpus nonenactment spider introvenient actinoneuritis hourly crowshay cacoethes tippable alkine unnaturalism incompatibly phytogeographical Ascidiacea extremistic outclass unface spirling Baloskionaceae uninked slatted pycnotic gunwale lower savola restorationer opiniatrety bedrowse bolectioned imagery pronate remittence hepteris seventeenthly emmetropic fallenness flabbiness buckeen phlebectasia developmentary supernatural contrabass speciousness micropin contravalence forced Kuman pseudamphora vendace teap squin inguinoscrotal santimi hexosaminic outhit Catostomidae unlaundered droughtiness shadchan uproariousness hairbeard heml factitial Tyrannides flanked sauteur mammalogical sniveled bouchal interlocutor Hypericum dutiful pretechnically reprivatization eventide nonfocal macco diaphanoscope casuist subsidization nonsynchronous trunchman unhydrolyzed forbear bullhead banky semitrained skeen Olympiad chandu unsepulcher Ichthyocephali\"\n  ],\n  \"query\": \"what is the meaning of life?\"\n}\n\nLogs (if relevant)\nNo response", "created_at": "2025-04-18", "closed_at": null, "labels": [">bug", ":ml", "Team:ML", "Feature:GenAI"], "State": "open", "Author": "derickson"}
{"issue_number": 127063, "issue_title": "[CI] EsqlSpecIT test {rrf.SimpleRrf ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7739 / ubuntu-2204_platform-support-unix\nelasticsearch-intake #21957 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:single-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.single_node.EsqlSpecIT\" -Dtests.method=\"test {rrf.SimpleRrf ASYNC}\" -Dtests.seed=92E84B4D784905FD -Dtests.locale=nmg-CM -Dtests.timezone=America/Louisville -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected a map containing\n   lt_1d: <0>\n  lt_10s: <0>\n   gt_1d: <0>\n   lt_1h: <0>\nlt_100ms: expected <54> but was <55>\n lt_10ms: <10>\n   lt_1m: <0>\n  lt_10h: <0>\n  lt_10m: <0>\n   lt_1s: expected <7> but was <6>\n\nIssue Reasons:\n\n[main] 2 failures in test test {rrf.SimpleRrf ASYNC} (0.6% fail rate in 309 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-18", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127051, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker before a limit ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22059 / part3\nelasticsearch-pull-request #67937 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker before a limit ASYNC}\" -Dtests.seed=326C64CD068ECB8 -Dtests.locale=uz-Cyrl -Dtests.timezone=Europe/Bratislava -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.net.ConnectException: Connection refused\n\nIssue Reasons:\n\n[main] 2 failures in test test {rerank.Reranker before a limit ASYNC} (0.3% fail rate in 618 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-18", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127047, "issue_title": "Files entitlements need to be case sensitive on Windows", "issue_body": "Elasticsearch Version\n8.18.0, 9.0.0\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nWindows\nProblem Description\nFiles entitlements are checked in a case sensitive way. On Windows, this can lead to deny an entitlement (NotEntitlementException) for paths that should be valid.\nSteps to Reproduce\nThe easiest way to reproduce this is to use a lowercase drive letter, e.g. switch to cd c:\\path\\to\\elasticsearch\\bin and then launch elasticsearch.bat. ES fails to start, as it checks entitlements for C:\\... against c:\\...\nLogs (if relevant)\nNo response", "created_at": "2025-04-18", "closed_at": "2025-04-23", "labels": [">bug", "Team:Core/Infra", "v9.0.0", "v8.18.0", ":Core/Infra/Entitlements"], "State": "closed", "Author": "ldematte"}
{"issue_number": 127046, "issue_title": "[CI] EsqlClientYamlIT test {p0=esql/10_basic/basic with documents_found} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7793 / ubuntu-2404_platform-support-unix\nelasticsearch-pull-request #68720 / part-3\nelasticsearch-pull-request #68703 / part-3\nelasticsearch-periodic-platform-support #7727 / almalinux-8_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:yamlRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlClientYamlIT.test {p0=esql/10_basic/basic with documents_found}\" -Dtests.seed=5DAFCB778F792461 -Dtests.locale=saq-Latn-KE -Dtests.timezone=America/Cuiaba -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [esql/10_basic:200]: \nExpected: <10>\n     but: was <9>\n\nIssue Reasons:\n\n[main] 4 failures in test test {p0=esql/10_basic/basic with documents_found} (0.9% fail rate in 426 executions)\n[main] 2 failures in step part-3 (2.2% fail rate in 90 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (16.7% fail rate in 12 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (2.2% fail rate in 89 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-18", "closed_at": "2025-04-21", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127045, "issue_title": "[CI] DataStreamLifecycleDownsampleDisruptionIT testDataStreamLifecycleDownsampleRollingRestart failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7710 / openjdk21_checkpart2_java-fips-matrix\nelasticsearch-periodic #7704 / openjdk23_checkpart2_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:downsample:internalClusterTest\" --tests \"org.elasticsearch.xpack.downsample.DataStreamLifecycleDownsampleDisruptionIT.testDataStreamLifecycleDownsampleRollingRestart\" -Dtests.seed=77ED6F04F09D631B -Dtests.locale=zh-Hans-HK -Dtests.timezone=Asia/Khandyga -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: safeGet: listener was completed exceptionally\n\nIssue Reasons:\n\n[9.0] 2 failures in test testDataStreamLifecycleDownsampleRollingRestart (2.6% fail rate in 78 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-18", "closed_at": "2025-04-18", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127044, "issue_title": "[CI] EsqlSpecIT test {enrich.EnrichAgesStatsYear SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7725 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #7719 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #7707 / windows-2019_checkpart3_platform-support-windows\nelasticsearch-periodic-platform-support #7707 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #7701 / windows-2022_checkpart3_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {enrich.EnrichAgesStatsYear ASYNC}\" -Dtests.seed=B12161BADEB59AB8 -Dtests.locale=sd -Dtests.timezone=Europe/Prague -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 2:a list containing\nrow 0 column 2:0: expected \"1\" but was \"2\"\nrow 1 column 2:a list containing\nrow 1 column 2:0: expected \"4\" but was \"8\"\nrow 2 column 2:a list containing\nrow 2 column 2:0: expected \"7\" but was \"14\"\nrow 3 column 2:a list containing\nrow 3 column 2:0: expected \"6\" but was \"12\"\nrow 4 column 2:a list containing\nrow 4 column 2:0: expected \"8\" but was \"16\"\nrow 5 column 2:a list containing\nrow 5 column 2:0: expected \"8\" but was \"16\"\nActual:\nbirth_year:long | age_group:keyword | count:long\n1965            | Middle-aged       | 2         \n1964            | Middle-aged       | 8         \n1963            | Middle-aged       | 14        \n1962            | Senior            | 12        \n1961            | Senior            | 16        \n1960            | Senior            | 16        \n\nExpected:\nbirth_year:long | age_group:keyword | count:long\n1965            | Middle-aged       | 1         \n1964            | Middle-aged       | \n[truncated]\n\nIssue Reasons:\n\n[8.x] 5 failures in test test {enrich.EnrichAgesStatsYear SYNC} (2.7% fail rate in 188 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic-platform-support (80.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127043, "issue_title": "[CI] EsqlSpecIT test {enrich.EnrichAgesStatsAgeGroup SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7725 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #7719 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #7707 / windows-2019_checkpart3_platform-support-windows\nelasticsearch-periodic-platform-support #7707 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #7701 / windows-2022_checkpart3_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {enrich.EnrichAgesStatsYear ASYNC}\" -Dtests.seed=B12161BADEB59AB8 -Dtests.locale=sd -Dtests.timezone=Europe/Prague -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 2:a list containing\nrow 0 column 2:0: expected \"1\" but was \"2\"\nrow 1 column 2:a list containing\nrow 1 column 2:0: expected \"4\" but was \"8\"\nrow 2 column 2:a list containing\nrow 2 column 2:0: expected \"7\" but was \"14\"\nrow 3 column 2:a list containing\nrow 3 column 2:0: expected \"6\" but was \"12\"\nrow 4 column 2:a list containing\nrow 4 column 2:0: expected \"8\" but was \"16\"\nrow 5 column 2:a list containing\nrow 5 column 2:0: expected \"8\" but was \"16\"\nActual:\nbirth_year:long | age_group:keyword | count:long\n1965            | Middle-aged       | 2         \n1964            | Middle-aged       | 8         \n1963            | Middle-aged       | 14        \n1962            | Senior            | 12        \n1961            | Senior            | 16        \n1960            | Senior            | 16        \n\nExpected:\nbirth_year:long | age_group:keyword | count:long\n1965            | Middle-aged       | 1         \n1964            | Middle-aged       | \n[truncated]\n\nIssue Reasons:\n\n[8.x] 5 failures in test test {enrich.EnrichAgesStatsAgeGroup SYNC} (2.7% fail rate in 188 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic-platform-support (80.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127042, "issue_title": "[CI] EsqlSpecIT test {enrich.EnrichAgesStatsAgeGroup ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7725 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #7719 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #7707 / windows-2019_checkpart3_platform-support-windows\nelasticsearch-periodic-platform-support #7707 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #7701 / windows-2022_checkpart3_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {enrich.EnrichAgesStatsYear ASYNC}\" -Dtests.seed=B12161BADEB59AB8 -Dtests.locale=sd -Dtests.timezone=Europe/Prague -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 2:a list containing\nrow 0 column 2:0: expected \"1\" but was \"2\"\nrow 1 column 2:a list containing\nrow 1 column 2:0: expected \"4\" but was \"8\"\nrow 2 column 2:a list containing\nrow 2 column 2:0: expected \"7\" but was \"14\"\nrow 3 column 2:a list containing\nrow 3 column 2:0: expected \"6\" but was \"12\"\nrow 4 column 2:a list containing\nrow 4 column 2:0: expected \"8\" but was \"16\"\nrow 5 column 2:a list containing\nrow 5 column 2:0: expected \"8\" but was \"16\"\nActual:\nbirth_year:long | age_group:keyword | count:long\n1965            | Middle-aged       | 2         \n1964            | Middle-aged       | 8         \n1963            | Middle-aged       | 14        \n1962            | Senior            | 12        \n1961            | Senior            | 16        \n1960            | Senior            | 16        \n\nExpected:\nbirth_year:long | age_group:keyword | count:long\n1965            | Middle-aged       | 1         \n1964            | Middle-aged       | \n[truncated]\n\nIssue Reasons:\n\n[8.x] 5 failures in test test {enrich.EnrichAgesStatsAgeGroup ASYNC} (2.7% fail rate in 188 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic-platform-support (80.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127041, "issue_title": "[CI] EsqlSpecIT test {enrich.EnrichAgesStatsYear ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7725 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #7719 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #7707 / windows-2019_checkpart3_platform-support-windows\nelasticsearch-periodic-platform-support #7707 / ubuntu-2404-aarch64_checkpart3_platform-support-arm\nelasticsearch-periodic-platform-support #7701 / windows-2022_checkpart3_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {enrich.EnrichAgesStatsYear ASYNC}\" -Dtests.seed=B12161BADEB59AB8 -Dtests.locale=sd -Dtests.timezone=Europe/Prague -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 2:a list containing\nrow 0 column 2:0: expected \"1\" but was \"2\"\nrow 1 column 2:a list containing\nrow 1 column 2:0: expected \"4\" but was \"8\"\nrow 2 column 2:a list containing\nrow 2 column 2:0: expected \"7\" but was \"14\"\nrow 3 column 2:a list containing\nrow 3 column 2:0: expected \"6\" but was \"12\"\nrow 4 column 2:a list containing\nrow 4 column 2:0: expected \"8\" but was \"16\"\nrow 5 column 2:a list containing\nrow 5 column 2:0: expected \"8\" but was \"16\"\nActual:\nbirth_year:long | age_group:keyword | count:long\n1965            | Middle-aged       | 2         \n1964            | Middle-aged       | 8         \n1963            | Middle-aged       | 14        \n1962            | Senior            | 12        \n1961            | Senior            | 16        \n1960            | Senior            | 16        \n\nExpected:\nbirth_year:long | age_group:keyword | count:long\n1965            | Middle-aged       | 1         \n1964            | Middle-aged       | \n[truncated]\n\nIssue Reasons:\n\n[8.x] 5 failures in test test {enrich.EnrichAgesStatsYear ASYNC} (2.7% fail rate in 188 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic-platform-support (80.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 127039, "issue_title": "[CI] XPackRestIT test {p0=esql/10_basic/basic with documents_found} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7727 / sles-15_platform-support-unix\nelasticsearch-pull-request #68474 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=esql/10_basic/basic with documents_found}\" -Dtests.seed=38A91468434B3F92 -Dtests.locale=fr-DJ -Dtests.timezone=America/Aruba -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [esql/10_basic:200]: \nExpected: <10>\n     but: was <9>\n\nIssue Reasons:\n\n[main] 2 failures in test test {p0=esql/10_basic/basic with documents_found} (1.0% fail rate in 206 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": "2025-04-21", "labels": [">test-failure", ":Search Relevance/Ranking", "Team:Analytics", ":Analytics/ES|QL", "low-risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127029, "issue_title": "[CI] RepositoryAnalysisFailureIT testFailsOnReadError failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22038 / part2\nelasticsearch-pull-request #68130 / part-2-fips\n\nReproduction Line:\n./gradlew \":x-pack:plugin:snapshot-repo-test-kit:internalClusterTest\" --tests \"org.elasticsearch.repositories.blobstore.testkit.analyze.RepositoryAnalysisFailureIT.testFailsOnReadError\" -Dtests.seed=804A05CAB0B10715 -Dtests.locale=zh-Hant-HK -Dtests.timezone=America/Porto_Acre -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: safeGet: listener was not completed within the timeout\n\nIssue Reasons:\n\n[main] 2 failures in test testFailsOnReadError (0.8% fail rate in 245 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": "2025-04-18", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "needs:risk", "Team:Distributed Coordination", "rca:random-controlled"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127028, "issue_title": "Allocation explain should accept query-string parameters", "issue_body": "Today allocation explain takes its parameters in the request body:\nGET _cluster/allocation/explain\n{\n  \"index\": \"my-index-000001\",\n  \"shard\": 0,\n  \"primary\": false,\n  \"current_node\": \"my-node\"\n}\n\nLeaving aside the question of the validity of GET-with-body (you can use POST here) it's also just kinda awkward to pass in a flat map of 4 somewhat-optional parameters in the body. We could just as well make the API accept the same parameters in the query-part of the URI1:\nGET _cluster/allocation/explain?index=my-index-000001&shard=0&primary=false&current_node=my-node\n\nNote that we probably shouldn't accept a mix of these two styles: if there are any parameters, they must all be in the body or all in the query string. We might even want to deprecate the use of the body for these arguments and remove it in the next major?\nFootnotes\n\n\nTechnically ok you can already do this using the source and source_content_type params:\nGET _cluster/allocation/explain?source_content_type=application/json&source=%7B%22index%22%3A%22my-index-000001%22%2C%22shard%22%3A0%2C%22primary%22%3Afalse%2C%22current_node%22%3A%22my-node%22%7D\n\nBut eh that's not all that nice is it? \u21a9\n\n\n", "created_at": "2025-04-17", "closed_at": null, "labels": [">enhancement", ":Distributed Coordination/Allocation", "Supportability", "Team:Distributed Coordination"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 127022, "issue_title": "[ELSER inference error] Unstable inference pipeline execution with ELSER model", "issue_body": "Elasticsearch Version\nv8.18.0\nInstalled Plugins\nNo response\nJava Version\nECH\nOS Version\nECH\nProblem Description\nWhen running the same inference pipeline on 2 different ECH deployments with the same document, one is failing with this error:\nInput field [concatenated_text] does not exist in the source document\nSteps to Reproduce\nCreate a v8.18.0 deployment on ECH GCP.\nDeploy ELSER (.elser_model_2_linux-x86_64)\nCreate a pipeline:\nPUT _ingest/pipeline/ml-inference-testelser\n{\n  \"processors\": [\n    {\n      \"remove\": {\n        \"field\": \"ml.inference.description_expanded\",\n        \"ignore_missing\": true\n      }\n    },\n    {\n      \"inference\": {\n        \"field_map\": {\n          \"description\": \"text_field\"\n        },\n        \"model_id\": \".elser_model_2_linux-x86_64\",\n        \"target_field\": \"ml.inference.description_expanded\",\n        \"on_failure\": [\n          {\n            \"append\": {\n              \"field\": \"_source._ingest.inference_errors\",\n              \"allow_duplicates\": false,\n              \"value\": [\n                {\n                  \"pipeline\": \"ml.inference.abc\",\n                  \"message\": \"Processor 'inference' in pipeline 'ml.inference.abc' failed for field 'description' with message '{{ _ingest.on_failure_message }}'\",\n                  \"timestamp\": \"{{{ _ingest.timestamp }}}\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"append\": {\n        \"field\": \"_source._ingest.processors\",\n        \"value\": [\n          {\n            \"pipeline\": \"ml.inference.abc\",\n            \"model_version\": \"11.0.0\",\n            \"types\": [\n              \"pytorch\",\n              \"text_expansion\"\n            ],\n            \"processed_timestamp\": \"{{{ _ingest.timestamp }}}\"\n          }\n        ]\n      }\n    }\n  ]\n}\n\nThen test with this sample doc:\nPOST /_ingest/pipeline/ml-inference-testelser/_simulate\n{\n  \"docs\": [\n    {\n        \"_source\": {\n            \"transaction_date\": \"2025-03-18\",\n            \"bank_account_number\": \"EL01-944316-Transmission\",\n            \"closing_balance\": 6472,\n            \"customer_email\": \"xyliopnAko@demo-domain.org\",\n            \"description\": \"Inbound payment made from EL01-944316-Transmission, Edin.inv.tst.: 661a04f1-0fe0-42aa-bdbd-70c7738efa54\",\n            \"bank_account_type\": \"Transmission\",\n            \"opening_balance\": 0,\n            \"transaction_value\": 6472,\n            \"customer_name\": \"Joeann Velez\",\n            \"transaction_category\": \"EFT\",\n            \"transaction_type\": \"Credit\"\n        } \n    }\n  ]\n}\n\nIn one cluster, it works (output having embeddings etc), and in the other, we get this output:\n{\n  \"docs\": [\n    {\n      \"doc\": {\n        \"_index\": \"_index\",\n        \"_version\": \"-3\",\n        \"_id\": \"_id\",\n        \"_source\": {\n          \"transaction_date\": \"2025-03-18\",\n          \"bank_account_number\": \"EL01-944316-Transmission\",\n          \"description\": \"Inbound payment made from EL01-944316-Transmission, Edin.inv.tst.: 661a04f1-0fe0-42aa-bdbd-70c7738efa54\",\n          \"transaction_type\": \"Credit\",\n          \"closing_balance\": 6472,\n          \"customer_email\": \"xyliopnAko@demo-domain.org\",\n          \"_ingest\": {\n            \"inference_errors\": [\n              {\n                \"pipeline\": \"ml.inference.abc\",\n                \"message\": \"Processor 'inference' in pipeline 'ml.inference.abc' failed for field 'description' with message 'Input field [concatenated_text] does not exist in the source document'\",\n                \"timestamp\": \"2025-04-17T16:09:23.226408097Z\"\n              }\n            ],\n            \"processors\": [\n              {\n                \"pipeline\": \"ml.inference.abc\",\n                \"model_version\": \"11.0.0\",\n                \"types\": [\n                  \"pytorch\",\n                  \"text_expansion\"\n                ],\n                \"processed_timestamp\": \"2025-04-17T16:09:23.226408097Z\"\n              }\n            ]\n          },\n          \"bank_account_type\": \"Transmission\",\n          \"opening_balance\": 0,\n          \"transaction_value\": 6472,\n          \"customer_name\": \"Joeann Velez\",\n          \"transaction_category\": \"EFT\"\n        },\n        \"_ingest\": {\n          \"timestamp\": \"2025-04-17T16:09:23.226408097Z\"\n        }\n      }\n    }\n  ]\n}\n\nHow could we explain the same steps result in 2 different outputs?\nThe only difference I see is that the working deployment is on GCP US West, the one that doesn't is on GCP EU West...\nAny idea or test would be greatly appreciated!\nThanks a lot in advance,\nVincent\ncc @fred-maussion\nLogs (if relevant)\nNo response", "created_at": "2025-04-17", "closed_at": "2025-04-18", "labels": [">bug", ":ml", "Team:ML"], "State": "closed", "Author": "blookot"}
{"issue_number": 127008, "issue_title": "[CI] AsyncSearchActionIT testDeleteCleanupIndex failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22021 / part2\nelasticsearch-pull-request #68409 / part-2\nelasticsearch-periodic #7693 / encryption-at-rest\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.AsyncSearchActionIT.testDeleteCleanupIndex\" -Dtests.seed=A4B128A45D0C082D -Dtests.locale=fr-GQ -Dtests.timezone=Australia/LHI -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \n#1:\n\torg.elasticsearch.transport.netty4.WrappedByteBuf.release(WrappedByteBuf.java:1028)\n\torg.elasticsearch.transport.netty4.TrashingByteBuf.release(TrashingByteBuf.java:37)\n\torg.elasticsearch.transport.netty4.Netty4Utils$ByteBufRefCounted.decRef(Netty4Utils.java:172)\n\torg.elasticsearch.common.bytes.ReleasableBytesReference.close(ReleasableBytesReference.java:98)\n\torg.elasticsearch.transport.InboundPipeline.releasePendingBytes(InboundPipeline.java:140)\n\torg.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:97)\n\torg.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:69)\n\torg.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:54)\n\tio.netty.channel.Abst\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test testDeleteCleanupIndex (1.6% fail rate in 191 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": "2025-04-17", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 127003, "issue_title": "Active Directory Authentication does not work with Entitlements", "issue_body": "Elasticsearch Version\n8.18.0\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nThe active directory authenticator in x-pack-core uses the unboundid ldap SDK; this (pretty obvious, if you think about it) does a Socket.connect which requires outbound_network permission. This is missing from the x-pack-core policy, causing a  NotEntitledException:\n[WARN ][o.e.e.r.p.P.x.u.ldapsdk ] [name] Not entitled: component [x-pack-core], module [unboundid.ldapsdk], class [class com.unboundid.ldap.sdk.ConnectThread], entitlement [outbound_network]\norg.elasticsearch.entitlement.runtime.api.NotEntitledException: component [x-pack-core], module [unboundid.ldapsdk], class [class com.unboundid.ldap.sdk.ConnectThread], entitlement [outbound_network]\nat org.elasticsearch.entitlement.runtime.policy.PolicyManager.notEntitled(PolicyManager.java:572) ~[elasticsearch-entitlement-8.18.0.jar:?]\nat org.elasticsearch.entitlement.runtime.policy.PolicyManager.checkFlagEntitlement(PolicyManager.java:514) ~[elasticsearch-entitlement-8.18.0.jar:?]\nat org.elasticsearch.entitlement.runtime.policy.PolicyManager.checkEntitlementPresent(PolicyManager.java:604) ~[elasticsearch-entitlement-8.18.0.jar:?]\nat org.elasticsearch.entitlement.runtime.policy.PolicyManager.checkOutboundNetworkAccess(PolicyManager.java:489) ~[elasticsearch-entitlement-8.18.0.jar:?]\nat org.elasticsearch.entitlement.runtime.api.ElasticsearchEntitlementChecker.check$java_net_Socket$connect(ElasticsearchEntitlementChecker.java:636) ~[elasticsearch-entitlement-8.18.0.jar:?]\nat java.net.Socket.connect(Socket.java) ~[?:?]\nat com.unboundid.ldap.sdk.ConnectThread.run(ConnectThread.java:165) ~[?:?]\n[2025-04-17T08:51:59,834][WARN ][o.e.x.s.a.RealmsAuthenticator] [name] Authentication to realm ad failed - authenticate failed (Caused by LDAPException(resultCode=91 (connect error)\n", "created_at": "2025-04-17", "closed_at": "2025-04-18", "labels": [">bug", "Team:Core/Infra", "v9.0.0", "v8.18.0", ":Core/Infra/Entitlements"], "State": "closed", "Author": "ldematte"}
{"issue_number": 127001, "issue_title": "[CI] AsyncSearchActionIT testUpdateStoreKeepAlive failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7721 / oraclelinux-9_platform-support-unix\nelasticsearch-pull-request #68418 / part-2\nelasticsearch-pull-request #68380 / part-2\nelasticsearch-pull-request #68377 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.AsyncSearchActionIT.testUpdateStoreKeepAlive\" -Dtests.seed=AECDFABD0EF2EA0D -Dtests.locale=ko -Dtests.timezone=America/Whitehorse -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \n#1:\n\torg.elasticsearch.transport.netty4.WrappedByteBuf.release(WrappedByteBuf.java:1028)\n\torg.elasticsearch.transport.netty4.TrashingByteBuf.release(TrashingByteBuf.java:37)\n\torg.elasticsearch.transport.netty4.Netty4Utils$ByteBufRefCounted.decRef(Netty4Utils.java:172)\n\torg.elasticsearch.common.bytes.ReleasableBytesReference.close(ReleasableBytesReference.java:98)\n\torg.elasticsearch.transport.InboundPipeline.releasePendingBytes(InboundPipeline.java:145)\n\torg.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:97)\n\torg.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:69)\n\torg.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:54)\n\tio.netty.channel.Abst\n[truncated]\n\nIssue Reasons:\n\n[main] 4 failures in test testUpdateStoreKeepAlive (2.2% fail rate in 182 executions)\n[main] 3 failures in step part-2 (3.8% fail rate in 79 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (4.2% fail rate in 72 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": "2025-04-17", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126999, "issue_title": "[CI] AsyncSearchActionIT testCleanupOnFailure failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22012 / part2\nelasticsearch-intake #22011 / part2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.AsyncSearchActionIT.testCleanupOnFailure\" -Dtests.seed=C8EF182320233484 -Dtests.locale=zh-Hant-MO -Dtests.timezone=Poland -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \n#1:\n\torg.elasticsearch.transport.netty4.WrappedByteBuf.release(WrappedByteBuf.java:1028)\n\torg.elasticsearch.transport.netty4.TrashingByteBuf.release(TrashingByteBuf.java:37)\n\torg.elasticsearch.transport.netty4.Netty4Utils$ByteBufRefCounted.decRef(Netty4Utils.java:172)\n\torg.elasticsearch.common.bytes.ReleasableBytesReference.close(ReleasableBytesReference.java:98)\n\torg.elasticsearch.transport.InboundPipeline.releasePendingBytes(InboundPipeline.java:140)\n\torg.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:97)\n\torg.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:69)\n\torg.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:54)\n\tio.netty.channel.Abst\n[truncated]\n\nIssue Reasons:\n\n[main] 2 consecutive failures in step part2\n[main] 2 consecutive failures in pipeline elasticsearch-intake\n[main] 2 failures in test testCleanupOnFailure (1.1% fail rate in 177 executions)\n[main] 2 failures in step part2 (10.0% fail rate in 20 executions)\n[main] 2 failures in pipeline elasticsearch-intake (10.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": "2025-04-17", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126995, "issue_title": "[CI] AsyncSearchActionIT testMaxResponseSize failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7721 / ubuntu-2404-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic #7699 / openjdk21_checkpart2_java-fips-matrix\nelasticsearch-pull-request #68434 / part-2\nelasticsearch-pull-request #68409 / part-2\nelasticsearch-periodic-platform-support #7672 / windows-2022_checkpart2_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.AsyncSearchActionIT.testMaxResponseSize\" -Dtests.seed=F6C57135883BF80C -Dtests.locale=pl-Latn-PL -Dtests.timezone=Europe/Samara -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \n#1:\n\torg.elasticsearch.transport.netty4.WrappedByteBuf.release(WrappedByteBuf.java:1028)\n\torg.elasticsearch.transport.netty4.TrashingByteBuf.release(TrashingByteBuf.java:37)\n\torg.elasticsearch.transport.netty4.Netty4Utils$ByteBufRefCounted.decRef(Netty4Utils.java:172)\n\torg.elasticsearch.common.bytes.ReleasableBytesReference.close(ReleasableBytesReference.java:98)\n\torg.elasticsearch.transport.InboundPipeline.releasePendingBytes(InboundPipeline.java:145)\n\torg.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:97)\n\torg.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:69)\n\torg.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:54)\n\tio.netty.channel.Abst\n[truncated]\n\nIssue Reasons:\n\n[main] 5 failures in test testMaxResponseSize (1.1% fail rate in 468 executions)\n[main] 2 failures in step part-2 (1.0% fail rate in 204 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (22.2% fail rate in 9 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.0% fail rate in 204 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": "2025-04-17", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126994, "issue_title": "[CI] AsyncSearchActionIT testDeleteCancelRunningTask failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7721 / debian-12_platform-support-unix\nelasticsearch-periodic #7699 / openjdk24_entitlements_true_checkpart2_java-matrix\nelasticsearch-pull-request #68377 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.AsyncSearchActionIT.testDeleteCancelRunningTask\" -Dtests.seed=7071A1951C488948 -Dtests.locale=pcm -Dtests.timezone=Etc/GMT-10 -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \n#1:\n\torg.elasticsearch.transport.netty4.WrappedByteBuf.release(WrappedByteBuf.java:1028)\n\torg.elasticsearch.transport.netty4.TrashingByteBuf.release(TrashingByteBuf.java:37)\n\torg.elasticsearch.transport.netty4.Netty4Utils$ByteBufRefCounted.decRef(Netty4Utils.java:172)\n\torg.elasticsearch.common.bytes.ReleasableBytesReference.close(ReleasableBytesReference.java:98)\n\torg.elasticsearch.transport.InboundPipeline.releasePendingBytes(InboundPipeline.java:145)\n\torg.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:97)\n\torg.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:69)\n\torg.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:54)\n\tio.netty.channel.Abst\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test testDeleteCancelRunningTask (1.6% fail rate in 182 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": "2025-04-17", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126993, "issue_title": "Having wrong password for kibana_system blocks cli based user queries with another authorized user", "issue_body": "Elasticsearch Version\n8.17.4\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nUbuntu 24.04.2\nProblem Description\nI had the wrong password set for kibana_system in Kibana. Ended up having elastic's log getting spammed with:\n\n[2025-04-17T12:59:48,308][INFO ][o.e.x.s.a.RealmsAuthenticator] [elasticsearch.suffix.com] Authentication of [kibana_system] was terminated by realm [reserved] - failed to authenticate user [kibana_system]\n\nMeanwhile in another terminal and / or ansible run i got this:\n\nroot@elasticsearch:~# curl -u elastic:<password> -k https://localhost:9200/_security/user/kibana_system {\"kibana_system\":{\"username\":\"kibana_system\",\"roles\":[\"kibana_system\"],\"full_name\":null,\"email\":null,\"metadata\":{\"_reserved\":true},\"enabled\":true}}\nroot@elasticsearch:~# curl -u elastic:<password> -k https://localhost:9200/_security/user/kibana_system {\"kibana_system\":{\"username\":\"kibana_system\",\"roles\":[\"kibana_system\"],\"full_name\":null,\"email\":null,\"metadata\":{\"_reserved\":true},\"enabled\":true}}\nroot@elasticsearch:~# curl -u elastic:<password> -k https://localhost:9200/_security/user/kibana_system {}\nroot@elasticsearch:~# curl -u elastic:<password> -k https://localhost:9200/_security/user/kibana_system {\"kibana_system\":{\"username\":\"kibana_system\",\"roles\":[\"kibana_system\"],\"full_name\":null,\"email\":null,\"metadata\":{\"_reserved\":true},\"enabled\":true}}\n\nNote how the third query returned nothing as it most likely clashed with the kibana_system trying to log in with an incorrect password simultaneously. So if i keep running the curl, once in a while it just reports empty. If I stop Kibana's service, that never happens again. So it's a timing issue apparently.\nSteps to Reproduce\nTry to start Kibana with wrong password set and start querying users.\nLogs (if relevant)\nNo response", "created_at": "2025-04-17", "closed_at": "2025-04-17", "labels": [">bug", "needs:triage"], "State": "closed", "Author": "tsarajar"}
{"issue_number": 126987, "issue_title": "Storage tiers & lifecycle policies for Azure Blob Storage snapshot repositories", "issue_body": "Today users of snapshot repositories backed by Azure Blob Storage cannot specify which access tier to use, so Elasticsearch will use the account-level default tier for all uploads. We should give users the ability to tell Elasticsearch to specify a particular storage tier at upload time rather than using the account-level default. For similar reasoning to that described in #81352 we should make this separately configurable for data and metadata blobs. In addition, we should allow users to specify tags for Elasticsearch-related uploads so that they can apply a lifecycle policy to their snapshot data. Again, users should be able to specify different tags for data and metadata blobs so that these datasets can have different lifecycle policies.", "created_at": "2025-04-17", "closed_at": null, "labels": [">enhancement", ":Distributed Coordination/Snapshot/Restore", "Team:Distributed Coordination"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 126975, "issue_title": "[CI] AsyncSearchActionIT testRemoveAsyncIndex failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7721 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic #7699 / openjdk23_entitlements_false_checkpart2_java-matrix\nelasticsearch-pull-request #68433 / part-2\nelasticsearch-pull-request #68374 / part-2\nelasticsearch-periodic-platform-support #7715 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7715 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #7715 / debian-12_platform-support-unix\nelasticsearch-periodic #7693 / openjdk21_entitlements_false_checkpart2_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.AsyncSearchActionIT.testRemoveAsyncIndex\" -Dtests.seed=167C1C4AF86B063F -Dtests.locale=ar-TN -Dtests.timezone=Asia/Kuala_Lumpur -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \n#1:\n\torg.elasticsearch.transport.netty4.WrappedByteBuf.release(WrappedByteBuf.java:1028)\n\torg.elasticsearch.transport.netty4.TrashingByteBuf.release(TrashingByteBuf.java:37)\n\torg.elasticsearch.transport.netty4.Netty4Utils$ByteBufRefCounted.decRef(Netty4Utils.java:172)\n\torg.elasticsearch.common.bytes.ReleasableBytesReference.close(ReleasableBytesReference.java:98)\n\torg.elasticsearch.transport.InboundPipeline.releasePendingBytes(InboundPipeline.java:145)\n\torg.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:97)\n\torg.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:69)\n\torg.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:54)\n\tio.netty.channel.Abst\n[truncated]\n\nIssue Reasons:\n\n[main] 8 failures in test testRemoveAsyncIndex (4.4% fail rate in 181 executions)\n[main] 2 failures in step part-2 (2.5% fail rate in 79 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (2.8% fail rate in 72 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": "2025-04-17", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126974, "issue_title": "[CI] AsyncSearchActionIT testRestartAfterCompletion failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7721 / ubuntu-2204_platform-support-unix\nelasticsearch-pull-request #68446 / part-2-windows\nelasticsearch-pull-request #68416 / part-2\nelasticsearch-pull-request #68385 / part-2\nelasticsearch-periodic-platform-support #7715 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #7715 / rocky-8_platform-support-unix\nelasticsearch-periodic-platform-support #7715 / almalinux-8-aarch64_checkpart2_platform-support-arm\nelasticsearch-periodic #7693 / openjdk24_entitlements_true_checkpart2_java-matrix\nelasticsearch-periodic #7693 / openjdk23_entitlements_true_checkpart2_java-matrix\nelasticsearch-periodic-platform-support #7672 / windows-2022_checkpart2_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.AsyncSearchActionIT.testRestartAfterCompletion\" -Dtests.seed=6F53D51DF23B43B7 -Dtests.locale=prg -Dtests.timezone=SystemV/PST8 -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \nCreated at:\n\tio.netty.buffer.PooledByteBufAllocator.newHeapBuffer(PooledByteBufAllocator.java:393)\n\tio.netty.buffer.AbstractByteBufAllocator.heapBuffer(AbstractByteBufAllocator.java:169)\n\torg.elasticsearch.transport.netty4.NettyAllocator$NoDirectBuffers.heapBuffer(NettyAllocator.java:301)\n\torg.elasticsearch.transport.netty4.NettyAllocator$NoDirectBuffers.heapBuffer(NettyAllocator.java:301)\n\torg.elasticsearch.transport.netty4.NettyAllocator$TrashingByteBufAllocator.heapBuffer(NettyAllocator.java:408)\n\torg.elasticsearch.transport.netty4.NettyAllocator$1.obtain(NettyAllocator.java:144)\n\torg.elasticsearch.transport.TransportDecompressor.maybeAddNewPage(TransportDecompressor.java:93)\n\torg.elasticsearch.transport.DeflateTransportDecompressor.decompress(D\n[truncated]\n\nIssue Reasons:\n\n[main] 10 failures in test testRestartAfterCompletion (2.1% fail rate in 482 executions)\n[main] 2 failures in step part-2 (1.0% fail rate in 206 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-platform-support (33.3% fail rate in 9 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (1.5% fail rate in 206 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-17", "closed_at": "2025-04-17", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126967, "issue_title": "[CI] LogsIndexModeFullClusterRestartIT testLogsIndexing {cluster=UPGRADED} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21967 / 8.17.6_bwc-snapshots\nelasticsearch-intake #21966 / 8.17.6_bwc-snapshots\nelasticsearch-intake #21962 / 8.17.6_bwc-snapshots\nelasticsearch-pull-request #68333 / 8.17.6_bwc-snapshots\nelasticsearch-intake #21958 / 8.17.6_bwc-snapshots\nelasticsearch-intake #21952 / 8.17.6_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:full-cluster-restart:v8.17.6#bwcTest\" -Dtests.class=\"org.elasticsearch.upgrades.LogsIndexModeFullClusterRestartIT\" -Dtests.method=\"testLogsIndexing {cluster=UPGRADED}\" -Dtests.seed=FB921CF806D67D73 -Dtests.bwc=true -Dtests.locale=szl-Latn-PL -Dtests.timezone=Mexico/General -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred orchestrating test cluster.\n\nIssue Reasons:\n\n[9.0] 2 consecutive failures in test testLogsIndexing {cluster=UPGRADED}\n[9.0] 6 consecutive failures in step 8.17.6_bwc-snapshots\n[9.0] 2 consecutive failures in pipeline elasticsearch-intake\n[9.0] 6 failures in test testLogsIndexing {cluster=UPGRADED} (8.0% fail rate in 75 executions)\n[9.0] 6 failures in step 8.17.6_bwc-snapshots (30.0% fail rate in 20 executions)\n[9.0] 5 failures in pipeline elasticsearch-intake (41.7% fail rate in 12 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-16", "closed_at": null, "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126955, "issue_title": "Using competitive iterators in Filters agg is broken", "issue_body": "Elasticsearch Version\n9.1.0\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nWhen using a query & a filters aggregation, we may use a competitive iterator, with the Lucene 10.2 upgrade, this is now broken. This results in an indeterminable number of counts. The exact reasoning is still unknown\nSteps to Reproduce\nThis has been replicated in a unit test and will be committed shortly.\nGenerally, the idea is you have terms that you are filtering on and doing a filters agg while also doing a term query.\nLogs (if relevant)\nNo response", "created_at": "2025-04-16", "closed_at": null, "labels": [">bug", "blocker", ":Analytics/Aggregations", ":Search/Search", "Team:Search", "Team:Analytics", "stateful"], "State": "open", "Author": "benwtrent"}
{"issue_number": 126939, "issue_title": "ArrayIndexOutOfBoundsException in FixedBitSet.set during query", "issue_body": "Looks like it happens during scoring.\nFull stack trace:\norg.elasticsearch.search.query.QueryPhaseExecutionException: Query Failed [Failed to execute main query]\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:237)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.executeQuery(QueryPhase.java:143)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:70)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:668)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:873)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.lambda$executeQueryPhase$7(SearchService.java:706)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)\n\tat java.base/java.lang.Thread.run(Thread.java:1447)\nCaused by: java.lang.ArrayIndexOutOfBoundsException: Index -33 out of bounds for length 64\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.util.FixedBitSet.set(FixedBitSet.java:283)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.DocIdSetIterator.intoBitSet(DocIdSetIterator.java:268)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.comparators.TermOrdValComparator$CompetitiveIterator.intoBitSet(TermOrdValComparator.java:539)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.DenseConjunctionBulkScorer.scoreWindowUsingBitSet(DenseConjunctionBulkScorer.java:242)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.DenseConjunctionBulkScorer.scoreWindow(DenseConjunctionBulkScorer.java:210)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.DenseConjunctionBulkScorer.score(DenseConjunctionBulkScorer.java:132)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.CancellableBulkScorer.score(CancellableBulkScorer.java:46)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.searchLeaf(ContextIndexSearcher.java:460)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:809)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:387)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.lambda$search$3(ContextIndexSearcher.java:365)\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.TaskExecutor$Task.run(TaskExecutor.java:173)\n\tat org.apache.lucene.core@10.2.0/org.apache.lucene.search.TaskExecutor.invokeAll(TaskExecutor.java:111)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:369)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.internal.ContextIndexSearcher.search(ContextIndexSearcher.java:336)\n\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.query.QueryPhase.addCollectorsAndSearch(QueryPhase.java:212)\n\t... 15 more\n", "created_at": "2025-04-16", "closed_at": "2025-04-22", "labels": [">bug", "blocker", "Team:Search Relevance", ":Search Relevance/Search"], "State": "closed", "Author": "jordan-powers"}
{"issue_number": 126936, "issue_title": "[CI] DockerTests test024InstallPluginFromArchiveUsingConfigFile failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #7383 / ubuntu-2204_packaging-tests-unix\nelasticsearch-pull-request #68256 / ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-pull-request #68256 / rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-periodic-packaging #7365 / ubuntu-2404_packaging-tests-unix\nelasticsearch-periodic-packaging #7243 / ubuntu-2204_packaging-tests-unix\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\n    PID TTY      STAT   TIME COMMAND\n      1 ?        Ss     0:00 /bin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper\n      7 ?        Sl     0:28 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n    345 pts/1    Rs+    0:00 ps ax\n\nStdout:\nCreated elasticsearch keystore in /usr/share/elasticsearch/config/elasticsearch.keystore\n\nStderr:\n\n\nThread dump:\n2025-04-17 13:04:54\nFull thread dump OpenJDK 64-Bit Server VM (24+36-3646 mixed mode, sharing):\n\nThreads class SMR info\n[truncated]\n\nIssue Reasons:\n\n[main] 5 failures in test test024InstallPluginFromArchiveUsingConfigFile (2.0% fail rate in 248 executions)\n[main] 2 failures in step ubuntu-2204_packaging-tests-unix (10.0% fail rate in 20 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-packaging (14.3% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-16", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126934, "issue_title": "[ES|QL] `LOOKUP JOIN` Support _any_ index type", "issue_body": "Description\nI was messing around with the new LOOKUP JOIN command, and while it's definitely neat, its main \"drawback\" is its limitation on only working against index.mode: lookup.\nIt would be nice to lookup against any index type (standard, logsdb, tsdb, etc...) as that is where the majority of data lives today within Elastic.\n#120655 is partially this request, but at least reads as having a more limited scope. If you think that this request should be rolled under that one.", "created_at": "2025-04-16", "closed_at": null, "labels": [">enhancement", "needs:triage"], "State": "open", "Author": "BenB196"}
{"issue_number": 126910, "issue_title": "[CI] CompletionStatsCacheTests testCompletionStatsCache failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21914 / part1\nelasticsearch-pull-request #68130 / part-1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.engine.CompletionStatsCacheTests.testCompletionStatsCache\" -Dtests.seed=1DE783D89B0B9943 -Dtests.locale=es-EA -Dtests.timezone=America/Anchorage -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a value greater than <168L>\n     but: <168L> was equal to <168L>\n\nIssue Reasons:\n\n[main] 2 failures in test testCompletionStatsCache (1.0% fail rate in 209 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-16", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126909, "issue_title": "[CI] GoogleCloudStorageBlobStoreRepositoryTests testSnapshotWithLargeSegmentFiles failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7681 / concurrent-search-tests\nelasticsearch-periodic #7681 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7681 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7703 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic #7681 / encryption-at-rest\nelasticsearch-periodic-platform-support #7703 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7703 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #7703 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #7703 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #7703 / rocky-8_platform-support-unix\n\nReproduction Line:\n./gradlew \":modules:repository-gcs:internalClusterTest\" --tests \"org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobStoreRepositoryTests.testSnapshotWithLargeSegmentFiles\" -Dtests.seed=8CB6452F0DF728DA -Dtests.locale=kok-Latn -Dtests.timezone=Asia/Atyrau -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a value greater than <0>\n     but: <0> was equal to <0>\n\nIssue Reasons:\n\n[main] 32 failures in test testSnapshotWithLargeSegmentFiles (16.9% fail rate in 189 executions)\n[main] 14 failures in step part-1 (18.2% fail rate in 77 executions)\n[main] 4 failures in step part1 (21.1% fail rate in 19 executions)\n[main] 14 failures in pipeline elasticsearch-pull-request (19.4% fail rate in 72 executions)\n[main] 4 failures in pipeline elasticsearch-intake (21.1% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-16", "closed_at": "2025-04-17", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "needs:risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126908, "issue_title": "[CI] GoogleCloudStorageBlobStoreRepositoryTests testWriteFileMultipleOfChunkSize failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7703 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic #7681 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7681 / concurrent-search-tests\nelasticsearch-periodic #7681 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7703 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic #7681 / single-processor-node-tests\nelasticsearch-periodic #7681 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7681 / openjdk24_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7703 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #7703 / oraclelinux-8_platform-support-unix\n\nReproduction Line:\ngradlew \":modules:repository-gcs:internalClusterTest\" --tests \"org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobStoreRepositoryTests.testWriteFileMultipleOfChunkSize\" -Dtests.seed=75A258F07BA2CCCC -Dtests.locale=cv-RU -Dtests.timezone=Atlantic/Stanley -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\ncom.google.cloud.storage.StorageException: 500 Internal Server Error\n\t|> PUT http://127.0.0.1:59674/upload/storage/v1/b/bucket/o?uploadType=resumable&upload_id=zo45iXHORj6G_RTQSyllKw\n\t|> content-range: bytes 0-16777215/*\n\t|> x-goog-gcs-idempotency-token: 61be9907-b27d-4b6b-a6a6-f30f5f58e200\n\t|  \n\t|< HTTP/1.1 500 Internal Server Error\n\t|< content-length: 0\n\t|  \n\nIssue Reasons:\n\n[main] 36 failures in test testWriteFileMultipleOfChunkSize (19.4% fail rate in 186 executions)\n[main] 19 failures in step part-1 (25.7% fail rate in 74 executions)\n[main] 2 failures in step part1 (11.1% fail rate in 18 executions)\n[main] 17 failures in pipeline elasticsearch-pull-request (24.6% fail rate in 69 executions)\n[main] 2 failures in pipeline elasticsearch-intake (11.1% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-16", "closed_at": "2025-04-17", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "needs:risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126903, "issue_title": "[CI] GoogleCloudStorageBlobStoreRepositoryTests testWriteReadLarge failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21907 / part1\nelasticsearch-pull-request #68175 / part-1\nelasticsearch-pull-request #68157 / part-1\nelasticsearch-pull-request #68172 / part-1\nelasticsearch-intake #21905 / part1\nelasticsearch-pull-request #68157 / part-1\nelasticsearch-pull-request #68132 / part-1\nelasticsearch-pull-request #68130 / part-1\nelasticsearch-intake #21903 / part1\n\nReproduction Line:\n./gradlew \":modules:repository-gcs:internalClusterTest\" --tests \"org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobStoreRepositoryTests.testSnapshotWithLargeSegmentFiles\" -Dtests.seed=E66EB002C30886C5 -Dtests.locale=ccp-Cakm-BD -Dtests.timezone=America/Regina -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a value greater than <0>\n     but: <0> was equal to <0>\n\nIssue Reasons:\n\n[main] 4 consecutive failures in test testWriteReadLarge\n[main] 3 consecutive failures in step part1\n[main] 3 consecutive failures in step part-1\n[main] 3 consecutive failures in pipeline elasticsearch-intake\n[main] 3 consecutive failures in pipeline elasticsearch-pull-request\n[main] 9 failures in test testWriteReadLarge (4.9% fail rate in 184 executions)\n[main] 3 failures in step part1 (12.0% fail rate in 25 executions)\n[main] 6 failures in step part-1 (7.4% fail rate in 81 executions)\n[main] 3 failures in pipeline elasticsearch-intake (12.0% fail rate in 25 executions)\n[main] 5 failures in pipeline elasticsearch-pull-request (6.2% fail rate in 81 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-16", "closed_at": "2025-04-17", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "needs:risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126902, "issue_title": "[CI] GoogleCloudStorageBlobStoreRepositoryTests testRequestStats failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21905 / part1\nelasticsearch-pull-request #68137 / part-1\nelasticsearch-pull-request #68143 / part-1\nelasticsearch-pull-request #68138 / part-1\nelasticsearch-pull-request #68137 / part-1\nelasticsearch-pull-request #68132 / part-1\nelasticsearch-pull-request #68130 / part-1-fips\nelasticsearch-pull-request #68130 / part-1\nelasticsearch-pull-request #68125 / part-1\n\nReproduction Line:\n./gradlew \":modules:repository-gcs:internalClusterTest\" --tests \"org.elasticsearch.repositories.gcs.GoogleCloudStorageBlobStoreRepositoryTests.testRequestStats\" -Dtests.seed=93BC0B8AE3162E96 -Dtests.locale=fr-BF -Dtests.timezone=Australia/Canberra -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a value greater than <0>\n     but: <0> was equal to <0>\n\nIssue Reasons:\n\n[main] 9 failures in test testRequestStats (4.9% fail rate in 182 executions)\n[main] 7 failures in step part-1 (8.8% fail rate in 80 executions)\n[main] 6 failures in pipeline elasticsearch-pull-request (7.4% fail rate in 81 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-16", "closed_at": "2025-04-17", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "needs:risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126897, "issue_title": "ESQL: Docs: link `index.mode` page from `LOOKUP JOIN` page", "issue_body": "Description\nThe LOOKUP JOIN command docs read: LOOKUP JOIN enables you to add data from another index, AKA a 'lookup' index, to your ES|QL query results, simplifying data enrichment and analysis workflows., but there's no further hint on what a 'lookup' index is. We should link that to https://www.elastic.co/docs/reference/elasticsearch/index-settings/index-modules#index-modules-settings", "created_at": "2025-04-16", "closed_at": null, "labels": [">docs", "Team:Docs", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "bpintea"}
{"issue_number": 126893, "issue_title": "[CI] CrossClusterEsqlRCS1EnrichUnavailableRemotesIT testEsqlEnrichWithSkipUnavailable failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7695 / windows-2019_checkpart4_platform-support-windows\nelasticsearch-periodic-platform-support #7607 / rhel-7_platform-support-unix\n\nReproduction Line:\ngradlew \":x-pack:plugin:security:qa:multi-cluster:javaRestTest\" --tests \"org.elasticsearch.xpack.remotecluster.CrossClusterEsqlRCS1EnrichUnavailableRemotesIT.testEsqlEnrichWithSkipUnavailable\" -Dtests.seed=62C13C876F0CE32A -Dtests.locale=uz-Arab-AF -Dtests.timezone=Africa/Lusaka -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: test: esqlEnrichWithRandomSkipUnavailable: id\nExpected: is <1>\n     but: was <4>\n\nIssue Reasons:\n\n[8.x] 2 failures in test testEsqlEnrichWithSkipUnavailable (0.4% fail rate in 471 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (14.3% fail rate in 14 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-16", "closed_at": "2025-04-23", "labels": [">test-failure", "low-risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126888, "issue_title": "Request for RISC-V Architecture Support in Elasticsearch", "issue_body": "Description\nDescription: As RISC-V architecture gains momentum in cloud-native and edge computing scenarios, we propose adding official RISC-V support to Elasticsearch. This would enable deployments on RISC-V based servers/IoT devices and align with the open-source philosophy shared by both projects.\nTechnical Considerations:\nJDK Compatibility: Requires OpenJDK RISC-V port (currently experimental in JDK 21+). Track progress via OpenJDK Portola Project\nNative Libraries:\nRebuild JNI components (e.g., Lucene native modules, Netty transport) for RISC-V\nVerify dependencies like zlib/jemalloc compatibility\nCI/CD Pipeline:\nAdd RISC-V build targets (QEMU emulation or physical hardware)\nCross-compilation support in Gradle build system\nPerformance Testing:\nBenchmark search/ingestion performance on RISC-V vs x86/ARM\nMemory management validation for 64-bit RV64GC\nCommunity Impact:\n\nAttract developers in RISC-V ecosystem (China/EU markets show strong adoption)\nEnable edge computing use cases with low-power devices\nStrengthen open-source infrastructure diversity\n\nProposed Milestones:\nPhase 1: CI pipeline setup with RISC-V emulation\nPhase 2: Core functionality validation\nPhase 3: Performance optimization\nAdditional Context: Recent RISC-V developments show promising server-grade implementations like Alibaba Xuantie and Ventana Veyron. Reference implementations exist in python/cpython#104071 and MySQL.\nWould appreciate feedback from maintainers on feasibility and potential collaboration avenues.", "created_at": "2025-04-16", "closed_at": null, "labels": [">enhancement", "needs:triage"], "State": "open", "Author": "xiaofei-gong"}
{"issue_number": 126886, "issue_title": "Request for RISC-V Architecture Support in Elasticsearch", "issue_body": "Description\nDescription: As RISC-V architecture gains momentum in cloud-native and edge computing scenarios, we propose adding official RISC-V support to Elasticsearch. This would enable deployments on RISC-V based servers/IoT devices and align with the open-source philosophy shared by both projects.\nTechnical Considerations:\n\nJDK Compatibility: Requires OpenJDK RISC-V port (currently experimental in JDK 21+). Track progress via OpenJDK Portola Project\nNative Libraries:\nRebuild JNI components (e.g., Lucene native modules, Netty transport) for RISC-V\nVerify dependencies like zlib/jemalloc compatibility\nCI/CD Pipeline:\nAdd RISC-V build targets (QEMU emulation or physical hardware)\nCross-compilation support in Gradle build system\nPerformance Testing:\nBenchmark search/ingestion performance on RISC-V vs x86/ARM\nMemory management validation for 64-bit RV64GC\n\nCommunity Impact:\n\nAttract developers in RISC-V ecosystem (China/EU markets show strong adoption)\nEnable edge computing use cases with low-power devices\nStrengthen open-source infrastructure diversity\n\nProposed Milestones:\nPhase 1: CI pipeline setup with RISC-V emulation\nPhase 2: Core functionality validation\nPhase 3: Performance optimization\nAdditional Context: Recent RISC-V developments show promising server-grade implementations like Alibaba Xuantie and Ventana Veyron. Reference implementations exist in Python and MySQL.\nWould appreciate feedback from maintainers on feasibility and potential collaboration avenues.", "created_at": "2025-04-16", "closed_at": "2025-04-16", "labels": [">enhancement", "needs:triage"], "State": "closed", "Author": "gong-flying"}
{"issue_number": 126883, "issue_title": "CollectionUtils.uniquify is incorrect in some cases", "issue_body": "Elasticsearch Version\nmain\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\n--\nProblem Description\nCollectionUtils.uniquify(new ArrayList<>(List.of(1, 20, 20, 30, 30, 50)), Comparator.naturalOrder()) produces [1, 20, 30, 30, 50] but should produce [1, 20, 30, 50].\nSteps to Reproduce\nThis test when added to CollectionUtilsTests fails.\n    public void testUniquifyTwoRuns() {\n        assertUniquify(List.of(1, 20, 20, 30, 30, 50), Comparator.naturalOrder(), 4);\n    }\n\n\nLogs (if relevant)\nNo response", "created_at": "2025-04-15", "closed_at": "2025-04-16", "labels": [">bug", ":Core/Infra/Core", "Team:Core/Infra", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "closed", "Author": "lkts"}
{"issue_number": 126882, "issue_title": "[CI] AddStringKeyStoreCommandTests testStdinWithMultipleValues failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7744 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7738 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7732 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":distribution:tools:keystore-cli:test\" --tests \"org.elasticsearch.cli.keystore.AddStringKeyStoreCommandTests.testStdinWithMultipleValues\" -Dtests.seed=144BEC9F7A965E66 -Dtests.locale=kn -Dtests.timezone=Etc/GMT0 -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.ComparisonFailure: expected:<[bar2]> but was:<[]>\n\nIssue Reasons:\n\n[9.0] 3 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[9.0] 3 failures in test testStdinWithMultipleValues (3.8% fail rate in 80 executions)\n[9.0] 3 failures in step windows-2022_checkpart1_platform-support-windows (75.0% fail rate in 4 executions)\n[9.0] 3 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-15", "closed_at": "2025-04-18", "labels": [">test-failure", "Team:Core/Infra", ":Core/Infra/CLI", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126881, "issue_title": "[CI] XPackRestIT test {p0=ml/inference_crud/Test delete given unused trained model} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7691 / amazonlinux-2023_platform-support-aws\nelasticsearch-intake #21802 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=ml/inference_crud/Test delete given unused trained model}\" -Dtests.seed=547A1B615CEDAF71 -Dtests.locale=chr-US -Dtests.timezone=Indian/Mahe -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [ml/inference_crud:553]: expected [2xx] status code but api [ml.delete_trained_model] returned [503 Service Unavailable] [{\"error\":{\"root_cause\":[],\"type\":\"search_phase_execution_exception\",\"reason\":\"start\",\"phase\":\"can_match\",\"grouped\":true,\"failed_shards\":[],\"caused_by\":{\"type\":\"search_phase_execution_exception\",\"reason\":\"Search rejected due to missing shards [[.ml-stats-000001][0]]. Consider using `allow_partial_search_results` setting to bypass this error.\",\"phase\":\"can_match\",\"grouped\":true,\"failed_shards\":[],\"stack_trace\":\"Failed to execute phase [can_match], Search rejected due to missing shards [[.ml-stats-000001][0]]. Consider using `allow_partial_search_results` setting to bypass this error.\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.search.SearchPhase.doCheckNoMissingShards(SearchPhase.java:61)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.search.CanMatchPreFilterSearchPhase.checkNoMiss\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {p0=ml/inference_crud/Test delete given unused trained model} (0.5% fail rate in 432 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-15", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126863, "issue_title": "[CI] XPackRestIT test {p0=transform/transforms_stats/Test get multiple transform stats where one does not have a task} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21886 / part3\nelasticsearch-pull-request #67978 / part-3\nelasticsearch-intake #21813 / part3\nelasticsearch-pull-request #67630 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_stats/Test get multiple transform stats where one does not have a task}\" -Dtests.seed=C11A41F7999E3755 -Dtests.locale=en-AI -Dtests.timezone=Europe/Gibraltar -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [transform/transforms_stats:52]: expected [2xx] status code but api [transform.start_transform] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Starting transform [airline-transform-stats] timed out after [30s]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Starting transform [airline-transform-stats] timed out after [30s]\\n\\tat org.elasticsearch.transform@9.1.0-SNAPSHOT/org.elasticsearch.xpack.transform.action.TransportStartTransformAction$2.onTimeout(TransportStartTransformAction.java:364)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.persistent.PersistentTasksService$1.onTimeout(PersistentTasksService.java:217)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:390)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$Observer\n[truncated]\n\nIssue Reasons:\n\n[main] 4 failures in test test {p0=transform/transforms_stats/Test get multiple transform stats where one does not have a task} (0.4% fail rate in 970 executions)\n[main] 2 failures in step part3 (3.3% fail rate in 60 executions)\n[main] 2 failures in step part-3 (0.9% fail rate in 221 executions)\n[main] 2 failures in pipeline elasticsearch-intake (3.0% fail rate in 66 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.8% fail rate in 244 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-15", "closed_at": null, "labels": [">test-failure", ":ml/Transform", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126855, "issue_title": "Schedule based auto scaling decider", "issue_body": "Description\nCurrently Elasticsearch only offers reactive or proactive storage deciders for auto scaling of data nodes. This is a feature request to add a \"schedule\" based decider to scale up/down based on a set schedule, peak hours, off peak hours etc. This will allow users to setup auto scaling based on predictable load changes so that they can increase or decrease Elasticsearch capacity at specific times.\nFor example, customer has a very large Elasticsearch cluster, where they experience a regular daily traffic pattern where load increases during regular business hours and declines toward the end of the day. They can configure a scaling schedule that aligns with this pattern to optimize costs and performance. i.e cluster has sufficient capacity to handle the day time peak traffic, but does not over-provision unneeded capacity at other times.", "created_at": "2025-04-15", "closed_at": null, "labels": [">enhancement", "needs:triage"], "State": "open", "Author": "mielastic"}
{"issue_number": 126853, "issue_title": "[ML] Inference plugin's utility threadpool executing when no tasks to run", "issue_body": "The inference plugin leverages a thread to check for inference requests that are waiting to send based on the rate limit settings. If there are no tasks to send the thread sleeps and wakes up and checks later.\nThis issue is to investigate if we can improve the code to avoid sleeping and doing nothing. We should look into transitioning to how the TransformScheduler handles it by doing a scheduleWithFixedDelay. We should also confirm that the threadpool is not utilized until a request is sent.\nIn 8.18 I believe this will be near immediately because the EIS authorization request is sent after a node boots up.\nhttps://github.com/elastic/elasticsearch/blob/main/x-pack/plugin/transform/src/main/java/org/elasticsearch/xpack/transform/transforms/scheduling/TransformScheduler.java#L101", "created_at": "2025-04-15", "closed_at": "2025-04-16", "labels": [">bug", ":ml", "Team:ML", "Feature:GenAI"], "State": "closed", "Author": "jonathan-buttner"}
{"issue_number": 126847, "issue_title": "[CI] VectorScorerFactoryTests testRandomScorerChunkSizeSmall failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7685 / amazonlinux-2023_platform-support-aws\nelasticsearch-pull-request #67967 / part-1\nelasticsearch-pull-request #67907 / part-1\n\nReproduction Line:\n./gradlew \":libs:simdvec:test\" --tests \"org.elasticsearch.simdvec.VectorScorerFactoryTests.testRandomScorerChunkSizeSmall\" -Dtests.seed=EA27002535541083 -Dtests.locale=nnh-CM -Dtests.timezone=Pacific/Wallis -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<979.3828> but was:<979.3827>\n\nIssue Reasons:\n\n[main] 3 failures in test testRandomScorerChunkSizeSmall (1.3% fail rate in 226 executions)\n[main] 2 failures in step part-1 (1.7% fail rate in 116 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.8% fail rate in 112 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-15", "closed_at": "2025-04-15", "labels": [">test-failure", ":Search Relevance/Vectors", "low-risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126846, "issue_title": "Finalize grammar for multi_match", "issue_body": "Description\nNo response", "created_at": "2025-04-15", "closed_at": null, "labels": [">enhancement", "needs:triage"], "State": "open", "Author": "svilen-mihaylov-elastic"}
{"issue_number": 126845, "issue_title": "Implement boosting for multi-match", "issue_body": "Description\nSupport field^boost, use existing grammar infra", "created_at": "2025-04-15", "closed_at": null, "labels": [">enhancement", "needs:triage"], "State": "open", "Author": "svilen-mihaylov-elastic"}
{"issue_number": 126833, "issue_title": "Async search expiration to be independent from external signals", "issue_body": "Submit async search allows users to provide a keep_alive. Get async search and get async status response allow users to update the keep_alive while retrieving incremental results or status for a specific async search.\nWhen an async search is expired, its corresponding running tasks should get cancelled in order to stop doing useless work and release resources for other non expired searches. The current cancellation mechanism is based on listener callbacks, that actively check for cancellation (and cancel the task when needed) whenever new shard results come in to the coordinating node, or a partial reduction happens. This is not ideal in that if all shards take a long time coming back to the coord node, the search is likely to expire and the coord node is unlikely to cancel it promptly.\nThere is also a discrepancy in that get async search includes a check for cancellation as well, while get async status does not.\nIn a cross-cluster scenario, this gets worse in that when minimizing roundtrips, each cluster only comes back with its full results, and there aren't frequent enough callbacks that we can leverage to check for cancellation and cancel expired tasks.\nWe should redesign the cancellation mechanism for async search to not depend on external signals: when a new async search starts, submit a runnable that cancels it at its expiration. When a keep_alive gets extended, cancel previously scheduled runnable and schedule a new one. This will result in cancellation that is independent from the progress made by the search as well as what API the user call to poll for status.", "created_at": "2025-04-15", "closed_at": null, "labels": [">bug", "priority:high", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "javanna"}
{"issue_number": 126819, "issue_title": "[ES|QL] Missing backport of \"FROM *-*\" bug fix", "issue_body": "Elasticsearch Version\n8.17.4\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nLinux\nProblem Description\nIn ES|QL, the pattern FROM *-* leads to the following exception:\njava.lang.StringIndexOutOfBoundsException: Index 0 out of bounds for length 0\n\nLooking at IdentifierBuilder::validateIndexPattern(), the index pattern goes from:\n\n\"*-*\"\n\"-\" after index.replace(WILDCARD, \"\").strip();\n\"\" (empty) after removeExclusion(index); (using index.substring(1);)\nCall to MetadataCreateIndexService.validateIndexOrAliasName(index, InvalidIndexNameException::new);\nThrows the exception when calling index.charAt(0) == '_' , since the string is empty\n\nNote that this issue seems to be already addressed by commit d6133235a339, pull request #119960.\nAltough, the pull request #120060 seems to backport it to 8.x branch, it is not present in 8.17.4. Is it an overlook or will it be present in the next patch version?\nThanks.\nSteps to Reproduce\n\nSwitch to ES|QL mode\nRequest FROM *-*\n\nLogs (if relevant)\n\n[2025-04-15T06:53:09,528][WARN ][o.e.x.e.a.EsqlResponseListener] [b7bd49a58476] Request failed with status [INTERNAL_SERVER_ERROR]: java.lang.StringIndexOutOfBoundsException: Index 0 out of bounds for length 0\n\tat java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)\n\tat java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)\n\tat java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)\n\tat java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)\n\tat java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)\n\tat java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106)\n\tat java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302)\n\tat java.base/java.lang.String.checkIndex(String.java:4930)\n\tat java.base/java.lang.StringLatin1.charAt(StringLatin1.java:46)\n\tat java.base/java.lang.String.charAt(String.java:1629)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.cluster.metadata.MetadataCreateIndexService.validateIndexOrAliasName(MetadataCreateIndexService.java:237)\n\tat org.elasticsearch.xpack.esql.parser.IdentifierBuilder.validateIndexPattern(IdentifierBuilder.java:104)\n\tat org.elasticsearch.xpack.esql.parser.IdentifierBuilder.lambda$visitIndexPattern$0(IdentifierBuilder.java:70)\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1597)\n\tat org.elasticsearch.xpack.esql.parser.IdentifierBuilder.visitIndexPattern(IdentifierBuilder.java:63)\n\tat org.elasticsearch.xpack.esql.parser.ExpressionBuilder.visitIndexPattern(ExpressionBuilder.java:92)\n\tat org.elasticsearch.xpack.esql.parser.LogicalPlanBuilder.visitFromCommand(LogicalPlanBuilder.java:259)\n\tat org.elasticsearch.xpack.esql.parser.LogicalPlanBuilder.visitFromCommand(LogicalPlanBuilder.java:87)\n\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser$FromCommandContext.accept(EsqlBaseParser.java:2192)\n\tat org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visitChildren(AbstractParseTreeVisitor.java:46)\n\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParserBaseVisitor.visitSourceCommand(EsqlBaseParserBaseVisitor.java:50)\n\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser$SourceCommandContext.accept(EsqlBaseParser.java:400)\n\tat org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visitChildren(AbstractParseTreeVisitor.java:46)\n\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParserBaseVisitor.visitSingleCommandQuery(EsqlBaseParserBaseVisitor.java:43)\n\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser$SingleCommandQueryContext.accept(EsqlBaseParser.java:302)\n\tat org.elasticsearch.xpack.esql.parser.ParserUtils.typedParsing(ParserUtils.java:68)\n\tat org.elasticsearch.xpack.esql.parser.LogicalPlanBuilder.plan(LogicalPlanBuilder.java:103)\n\tat org.elasticsearch.xpack.esql.parser.LogicalPlanBuilder.visitSingleStatement(LogicalPlanBuilder.java:128)\n\tat org.elasticsearch.xpack.esql.parser.LogicalPlanBuilder.visitSingleStatement(LogicalPlanBuilder.java:87)\n\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser$SingleStatementContext.accept(EsqlBaseParser.java:218)\n\tat org.elasticsearch.xpack.esql.parser.ParserUtils.typedParsing(ParserUtils.java:68)\n\tat org.elasticsearch.xpack.esql.parser.LogicalPlanBuilder.plan(LogicalPlanBuilder.java:103)\n\tat org.elasticsearch.xpack.esql.parser.EsqlParser.invokeParser(EsqlParser.java:92)\n\tat org.elasticsearch.xpack.esql.parser.EsqlParser.createStatement(EsqlParser.java:55)\n\tat org.elasticsearch.xpack.esql.session.EsqlSession.parse(EsqlSession.java:264)\n\tat org.elasticsearch.xpack.esql.session.EsqlSession.execute(EsqlSession.java:150)\n\tat org.elasticsearch.xpack.esql.execution.PlanExecutor.esql(PlanExecutor.java:80)\n\tat org.elasticsearch.xpack.esql.plugin.TransportEsqlQueryAction.innerExecute(TransportEsqlQueryAction.java:185)\n\tat org.elasticsearch.xpack.esql.plugin.TransportEsqlQueryAction.lambda$execute$1(TransportEsqlQueryAction.java:154)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListener.run(ActionListener.java:454)\n\tat org.elasticsearch.xpack.esql.plugin.TransportEsqlQueryAction.execute(TransportEsqlQueryAction.java:154)\n\tat org.elasticsearch.xpack.esql.plugin.TransportEsqlQueryAction.execute(TransportEsqlQueryAction.java:56)\n\tat org.elasticsearch.xpack.esql.core.async.AsyncTaskManagementService.asyncExecute(AsyncTaskManagementService.java:188)\n\tat org.elasticsearch.xpack.esql.plugin.TransportEsqlQueryAction.doExecuteForked(TransportEsqlQueryAction.java:140)\n\tat org.elasticsearch.xpack.esql.plugin.TransportEsqlQueryAction.lambda$doExecute$0(TransportEsqlQueryAction.java:132)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1023)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1575)\n", "created_at": "2025-04-15", "closed_at": null, "labels": [">bug", "needs:triage"], "State": "open", "Author": "nflexfo"}
{"issue_number": 126814, "issue_title": "[CI] EnrichIT testForPushDownEnrichRule failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7653 / encryption-at-rest\nelasticsearch-periodic #7527 / concurrent-search-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EnrichIT.testListeningRatio\" -Dtests.seed=BA76ED34A79F343F -Dtests.locale=uz -Dtests.timezone=America/Goose_Bay -Druntime.java=23\n\nApplicable branches:\n8.17\nReproduces locally?:\n(edit:) yes\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Request breaker not reset to 0 on node: node_s0\nExpected: <0L>\n     but: was <96L>\n\nIssue Reasons:\n\n[8.17] 2 failures in test testForPushDownEnrichRule (0.4% fail rate in 508 executions)\n[8.17] 2 failures in pipeline elasticsearch-periodic (11.1% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-15", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126813, "issue_title": "[CI] SearchServiceSingleNodeTests testLookUpSearchContext failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7679 / oraclelinux-8_platform-support-unix\nelasticsearch-pull-request #67921 / part-1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.search.SearchServiceSingleNodeTests.testCreateReduceContext\" -Dtests.seed=BB78CEAC17853E03 -Dtests.locale=fo-Latn-FO -Dtests.timezone=America/Merida -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: There are still [1] in-flight contexts. The first one's creation site is listed as the cause of this exception.\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test testLookUpSearchContext\n[main] 2 failures in test testLookUpSearchContext (0.8% fail rate in 240 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-15", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126812, "issue_title": "[CI] SearchServiceSingleNodeTests testBeforeShardLockDuringShardCreate failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7679 / oraclelinux-8_platform-support-unix\nelasticsearch-pull-request #67921 / part-1\nelasticsearch-pull-request #67912 / part-1\nelasticsearch-pull-request #67912 / part-1\nelasticsearch-pull-request #67909 / part-1\nelasticsearch-pull-request #67906 / part-1\nelasticsearch-pull-request #67902 / part-1\nelasticsearch-intake #21810 / part1\nelasticsearch-intake #21808 / part1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.search.SearchServiceSingleNodeTests.testCreateReduceContext\" -Dtests.seed=BB78CEAC17853E03 -Dtests.locale=fo-Latn-FO -Dtests.timezone=America/Merida -Druntime.java=24\n\nApplicable branches:\nmain, 8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: There are still [1] in-flight contexts. The first one's creation site is listed as the cause of this exception.\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test testBeforeShardLockDuringShardCreate\n[main] 9 failures in test testBeforeShardLockDuringShardCreate (3.8% fail rate in 240 executions)\n[main] 6 failures in step part-1 (4.8% fail rate in 126 executions)\n[main] 2 failures in step part1 (8.0% fail rate in 25 executions)\n[main] 5 failures in pipeline elasticsearch-pull-request (4.1% fail rate in 123 executions)\n[main] 2 failures in pipeline elasticsearch-intake (8.0% fail rate in 25 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-15", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126809, "issue_title": "When I use KNN search, it will cause ES to fail", "issue_body": "Elasticsearch Version\n8.17.4\nInstalled Plugins\nNo response\nJava Version\nOpenJDK Runtime Environment (23.0+37) (build 23+37-2369)\nOS Version\nUbuntu 20.04.6 LTS\nProblem Description\nI deployed ES8.17.4 using Docker on the host (rocky-linux9.2 x86). The operating system version in the Docker container is Ubuntu 20.04.6 LTS, and the Java version is OpenJDK Runtime Environment (23.0+37) (build 23+37-2369). When I use KNN retrieval, it will cause ES to crash.\nSteps to Reproduce\nPUT products\n{\n\"mappings\": {\n\"dynamic\": \"strict\",\n\"properties\": {\n\"department\": {\n\"type\": \"keyword\"\n},\n\"brand\": {\n\"type\": \"text\",\n\"fields\": {\n\"keyword\": {\n\"type\": \"keyword\",\n\"ignore_above\": 2048\n}\n}\n},\n\"description\": {\n\"type\": \"text\"\n},\n\"embedding\": {\n\"type\": \"dense_vector\",\n\"index\": true,\n\"similarity\": \"l2_norm\"\n},\n\"price\": {\n\"type\": \"float\"\n}\n}\n}\n}\nPOST products/_bulk?refresh=true\n{\"index\":{\"_id\":1}}\n{\"department\":\"backend\",\"brand\": [\"oepnjdk\",\"otherjdk\"], \"description\":\"high-available nice oepnjdk\",\"embedding\":[1,1,1,1],\"price\":100}\n{\"index\":{\"_id\":2}}\n{\"department\":\"backend\",\"brand\": [\"oraclejdk\"],\"description\":\"high-available beautiful oraclejdk\",\"embedding\":[1,1,1,1],\"price\":250}\n{\"index\":{\"_id\":3}}\n{\"department\":\"backend\",\"brand\": [\"otherjdk\"],\"description\":\"every day otherjdk\",\"embedding\":[1,1,1,1],\"price\":50}\n{\"index\":{\"_id\":4}}\n{\"department\":\"backend\",\"brand\": [\"oepnjdk\"],\"description\":\"oepnjdk\",\"embedding\":[2,2,2,0],\"price\":75}\n{\"index\":{\"_id\":5}}\n{\"department\":\"backend\",\"brand\": [\"oepnjdk\"],\"description\":\"oepnjdk 2022\",\"embedding\":[2,2,2,0],\"price\":150}\n{\"index\":{\"_id\":6}}\n{\"department\":\"frontend\",\"brand\": [\"oepnjdk\"], \"description\":\"oepnjdk\",\"embedding\":[2,2,2,0],\"price\":50}\nGET products/_search?\n{\n\"size\": 10,\n\"knn\": {\n\"field\": \"embedding\",\n\"query_vector\": [2,2,2,2],\n\"k\":3,\n\"num_candidates\": 10,\n\"filter\": {\n\"terms\": {\n\"brand\": [\"oepnjdk\",\"otherjdk\"]\n}\n}\n}\n}\nLogs (if relevant)\nhs_err_pid68.log", "created_at": "2025-04-15", "closed_at": "2025-04-16", "labels": [">bug", ":Search Relevance/Vectors", "priority:normal", "Team:Search Relevance"], "State": "closed", "Author": "zhoucheng89"}
{"issue_number": 126808, "issue_title": "[CI] DriverTests testProfileAndStatusFinishInOneRound failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7669 / almalinux-9_platform-support-unix\nelasticsearch-periodic #7598 / graalvm-ce17_checkpart3_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:compute:test\" --tests \"org.elasticsearch.compute.operator.DriverTests.testProfileAndStatusFinishInOneRound\" -Dtests.seed=E8DB241CEC4BBFB6 -Dtests.locale=id -Dtests.timezone=Atlantic/St_Helena -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <80192L>\n     but: was <681632L>\n\nIssue Reasons:\n\n[8.18] 2 failures in test testProfileAndStatusFinishInOneRound (0.8% fail rate in 254 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-14", "closed_at": "2025-04-22", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126802, "issue_title": "[CI] SystemIndexMappingUpgradeIT testGrowShrinkUpgradeUpdatesSystemIndexMapping failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7646 / 8.8.2_bwc\nelasticsearch-periodic #7625 / 8.9.2_bwc\n\nReproduction Line:\n./gradlew \":qa:rolling-upgrade:v8.8.2#bwcTest\" -Dtests.class=\"org.elasticsearch.upgrades.SystemIndexMappingUpgradeIT\" -Dtests.method=\"testGrowShrinkUpgradeUpdatesSystemIndexMapping\" -Dtests.seed=15C133394DF6B889 -Dtests.bwc=true -Dtests.locale=mas -Dtests.timezone=Asia/Ulaanbaatar -Druntime.java=23\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [GET], host [http://[::1]:39227], URI [/_cluster/state], status line [HTTP/1.1 401 Unauthorized]\n{\"error\":{\"root_cause\":[{\"type\":\"security_exception\",\"reason\":\"missing authentication credentials for REST request [/_cluster/state]\",\"header\":{\"WWW-Authenticate\":[\"Basic realm=\\\"security\\\", charset=\\\"UTF-8\\\"\",\"Bearer realm=\\\"security\\\"\",\"ApiKey\"]}}],\"type\":\"security_exception\",\"reason\":\"missing authentication credentials for REST request [/_cluster/state]\",\"header\":{\"WWW-Authenticate\":[\"Basic realm=\\\"security\\\", charset=\\\"UTF-8\\\"\",\"Bearer realm=\\\"security\\\"\",\"ApiKey\"]}},\"status\":401}\n\nIssue Reasons:\n\n[8.17] 2 failures in test testGrowShrinkUpgradeUpdatesSystemIndexMapping (3.5% fail rate in 57 executions)\n[8.17] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-14", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126800, "issue_title": "[CI] SearchServiceSingleNodeTests class failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21837 / part1\nelasticsearch-intake #21828 / part1\nelasticsearch-pull-request #67954 / part-1\nelasticsearch-pull-request #67943 / part-1\nelasticsearch-pull-request #67935 / part-1\nelasticsearch-pull-request #67935 / part-1\nelasticsearch-periodic-platform-support #7677 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic #7655 / openjdk17_checkpart1_java-fips-matrix\nelasticsearch-periodic #7655 / openjdk22_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7677 / ubuntu-2004_platform-support-unix\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.search.SearchServiceSingleNodeTests.testClearOnClose\" -Dtests.seed=D40DBFA4162D9646 -Dtests.locale=zh-Hant-HK -Dtests.timezone=Pacific/Johnston -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.ResourceAlreadyExistsException: index [index/PLm4KcIsTyafVpZN74pk4Q] already exists\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step part1\n[8.x] 2 consecutive failures in pipeline elasticsearch-intake\n[8.x] 13 failures in class org.elasticsearch.search.SearchServiceSingleNodeTests (10.4% fail rate in 125 executions)\n[8.x] 2 failures in step part1 (18.2% fail rate in 11 executions)\n[8.x] 4 failures in step part-1 (19.0% fail rate in 21 executions)\n[8.x] 2 failures in pipeline elasticsearch-intake (18.2% fail rate in 11 executions)\n[8.x] 3 failures in pipeline elasticsearch-pull-request (15.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-14", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126797, "issue_title": "[CI] VectorScorerFactoryTests testRandomScorerMax failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21801 / part1\nelasticsearch-pull-request #67857 / part-1\n\nReproduction Line:\n./gradlew \":libs:simdvec:test\" --tests \"org.elasticsearch.simdvec.VectorScorerFactoryTests.testRandomScorerMax\" -Dtests.seed=7FDA25580A95E52C -Dtests.locale=en-KN -Dtests.timezone=Africa/Bissau -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<743.881> but was:<743.88086>\n\nIssue Reasons:\n\n[main] 2 failures in test testRandomScorerMax (1.1% fail rate in 189 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-14", "closed_at": "2025-04-15", "labels": [">test-failure", ":Search Relevance/Vectors", "low-risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126796, "issue_title": "[ES|QL] Profiling include memory usage stats", "issue_body": "Description\nES|QL has the ability to run queries with profiling enabled. One area that I've found that would be useful is the memory usage stats. ES|QL is integrated with circuit breaker logic, so it can occasionally return a circuit_breaking_exception. It would be useful when analyzing a query to know what parts are consuming what amount of memory for both debugging as well as optimization.", "created_at": "2025-04-14", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "BenB196"}
{"issue_number": 126795, "issue_title": "Ability to opt out a field from fallback synthetic source", "issue_body": "With synthetic _source enabled, values of fields that are not indexed (e.g. using dynamic: false) are stored in a special stored field. This is needed to replicate the behaviour of stored _source and enable reindexing that changes the mapping to now index such a field.\nWith stored _source it is possible to use excludes field on _source mapper to exclude the field from being stored in _source stored field. With this configuration a field will be not represented on disk in any way. This scenario is currently not possible using synthetic _source because excludes field is not compatible with synthetic _source. So in such case field values will be stored via fallback synthetic source making such setup less efficient in terms of storage space.\nThis issue is about exposing configuration options to achieve the same result of zero bytes being stored for a field.", "created_at": "2025-04-14", "closed_at": null, "labels": ["Team:StorageEngine", ":StorageEngine/Mapping"], "State": "open", "Author": "lkts"}
{"issue_number": 126787, "issue_title": "Simulation results are not updated when the order of Grok patterns changes", "issue_body": "The simulation results are not updated when the order of Grok patterns changes in the  _ingest/pipeline/_simulate API.\nSteps to replicate\nPOST _ingest/pipeline/_simulate\n{\n  \"docs\": [\n    {\n      \"_source\": {\n        \"message\": \"2025-04-14 17:19:15,898 FATAL [main] com.example3.util.JsonParser - Invalid JSON encountered: {invalid_key:missing_value}\"\n      }\n    }\n  ],\n  \"pipeline\": {\n    \"processors\": [\n      {\n        \"grok\": {\n          \"field\": \"message\",\n          \"patterns\": [\n            \"%{LOGLEVEL:the_loglevel}\"\n          ]\n        }\n      }\n    ]\n  }\n}\n\nreturns \"the_loglevel\": \"FATAL\",\nPOST _ingest/pipeline/_simulate\n{\n  \"docs\": [\n    {\n      \"_source\": {\n        \"message\": \"2025-04-14 17:19:15,898 FATAL [main] com.example3.util.JsonParser - Invalid JSON encountered: {invalid_key:missing_value}\"\n      }\n    }\n  ],\n  \"pipeline\": {\n    \"processors\": [\n      {\n        \"grok\": {\n          \"field\": \"message\",\n          \"patterns\": [\n            \"%{LOGLEVEL:the_loglevel}\",\n            \"%{WORD:the_word}\"\n          ]\n        }\n      }\n    ]\n  }\n}\n\nreturns \"the_word\": \"2025\"\nPOST _ingest/pipeline/_simulate\n{\n  \"docs\": [\n    {\n      \"_source\": {\n        \"message\": \"2025-04-14 17:19:15,898 FATAL [main] com.example3.util.JsonParser - Invalid JSON encountered: {invalid_key:missing_value}\"\n      }\n    }\n  ],\n  \"pipeline\": {\n    \"processors\": [\n      {\n        \"grok\": {\n          \"field\": \"message\",\n          \"patterns\": [\n            \"%{WORD:the_word}\",\n            \"%{LOGLEVEL:the_loglevel}\"\n           \n          ]\n        }\n      }\n    ]\n  }\n}\n\nreturns \"the_word\": \"2025\"\nRelated to elastic/kibana#218135", "created_at": "2025-04-14", "closed_at": null, "labels": [":Data Management/Indices APIs", "Team:Data Management"], "State": "open", "Author": "gbamparop"}
{"issue_number": 126769, "issue_title": "[CI] XPackRestIT test {p0=migrate/20_reindex_status/Test Reindex With Existing Data Stream} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21775 / part3\nelasticsearch-periodic #7600 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-periodic #7586 / openjdk21_checkpart3_java-matrix\nelasticsearch-pull-request #67648 / part-3\nelasticsearch-periodic #7544 / openjdk23_checkpart3_java-matrix\nelasticsearch-pull-request #66910 / part-3\nelasticsearch-periodic #7516 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-intake #21488 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=migrate/20_reindex_status/Test Reindex With Existing Data Stream}\" -Dtests.seed=821143916AB3F90C -Dtests.locale=fr-BF -Dtests.timezone=America/Cayenne -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [migrate/20_reindex_status:63]: \nExpected: <true>\n     but: was <false>\n\nIssue Reasons:\n\n[9.0] 8 failures in test test {p0=migrate/20_reindex_status/Test Reindex With Existing Data Stream} (1.1% fail rate in 698 executions)\n[9.0] 2 failures in step part3 (8.7% fail rate in 23 executions)\n[9.0] 2 failures in step part-3 (9.5% fail rate in 21 executions)\n[9.0] 2 failures in step openjdk21_checkpart3_java-fips-matrix (11.1% fail rate in 18 executions)\n[9.0] 2 failures in pipeline elasticsearch-intake (7.7% fail rate in 26 executions)\n[9.0] 2 failures in pipeline elasticsearch-pull-request (9.5% fail rate in 21 executions)\n[9.0] 4 failures in pipeline elasticsearch-periodic (21.1% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-14", "closed_at": "2025-04-16", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126765, "issue_title": "[CI] MixedClusterEsqlSpecIT -  test {keep.StatsBySubFieldSortedByKey SYNC}", "issue_body": "CI Link\nhttps://buildkite.com/elastic/elasticsearch-pull-request/builds/67716#0196334a-06ea-4c3f-8fbc-a02d397a754d\nRepro line\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.19.0#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {keep.StatsBySubFieldSortedByKey SYNC}\" -Dtests.seed=53A6D3CC8276AF96 -Dtests.bwc=true -Dtests.locale=he-Hebr-IL -Dtests.timezone=Africa/Maputo -Druntime.java=24\nDoes it reproduce?\nYes\nApplicable branches\nmain\nFailure history\nNo response\nFailure excerpt\nMixedClusterEsqlSpecIT > test {row.Sum ASYNC} FAILED\n--\n\u00a0 | java.lang.AssertionError: Expected a map containing\n\u00a0 | lt_1s: <33>\n\u00a0 | lt_1d: <0>\n\u00a0 | lt_10s: <1>\n\u00a0 | gt_1d: <0>\n\u00a0 | lt_1h: <0>\n\u00a0 | lt_100ms: <1475>\n\u00a0 | lt_1m: <0>\n\u00a0 | lt_10h: <0>\n\u00a0 | lt_10m: <0>\n\u00a0 | lt_10ms: expected <835> but was <834>\n\u00a0 | at __randomizedtesting.SeedInfo.seed([53A6D3CC8276AF96:DBF2EC162C8AC26E]:0)\n\u00a0 | at org.elasticsearch.test.MapMatcher.assertMap(MapMatcher.java:85)\n\u00a0 | at org.elasticsearch.test.MapMatcher.assertMap(MapMatcher.java:68)\n\u00a0 | at org.elasticsearch.xpack.esql.qa.rest.EsqlSpecTestCase.doTest(EsqlSpecTestCase.java:298)\n\u00a0 | at org.elasticsearch.xpack.esql.qa.rest.EsqlSpecTestCase.test(EsqlSpecTestCase.java:178)\n\u00a0 | at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n\u00a0 | at java.base/java.lang.reflect.Method.invoke(Method.java:565)\n\u00a0 | at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1763)\n\u00a0 | at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)\n\u00a0 | at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)\n\u00a0 | at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)\n\u00a0 | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\u00a0 | at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n\u00a0 | at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)\n\u00a0 | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)\n\u00a0 | at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)\n\u00a0 | at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)\n\u00a0 | at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)\n\u00a0 | at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n\u00a0 | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\u00a0 | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)\n\u00a0 | at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)\n\u00a0 | at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)\n\u00a0 | at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)\n\u00a0 | at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)\n\u00a0 | at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)\n\u00a0 | at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)\n\u00a0 | at org.elasticsearch.test.cluster.local.DefaultLocalElasticsearchCluster$1.evaluate(DefaultLocalElasticsearchCluster.java:49)\n\u00a0 | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)\n\u00a0 | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\u00a0 | at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)\n\u00a0 | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n\u00a0 | at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\n\u00a0 | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\u00a0 | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\u00a0 | at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\n\u00a0 | at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)\n\u00a0 | at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)\n\u00a0 | at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)\n\u00a0 | at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)\n\u00a0 | at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n\u00a0 | at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\u00a0 | at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)\n\u00a0 | at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)\n\u00a0 | at java.base/java.lang.Thread.run(Thread.java:1447)\n\n", "created_at": "2025-04-14", "closed_at": "2025-04-14", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "gmarouli"}
{"issue_number": 126755, "issue_title": "[CI] XPackRestIT test {p0=transform/transforms_start_stop/Test start/stop/start continuous transform} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7636 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-pull-request #67476 / part-3\nelasticsearch-pull-request #67476 / rest-compatibility\nelasticsearch-pull-request #67396 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_start_stop/Test start/stop/start continuous transform}\" -Dtests.seed=A644407939721FAD -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=en-ZM -Dtests.timezone=UCT -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [transform/transforms_start_stop:274]: expected [2xx] status code but api [transform.start_transform] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Starting transform [airline-transform-start-stop-continuous] timed out after [30s]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Starting transform [airline-transform-start-stop-continuous] timed out after [30s]\\n\\tat org.elasticsearch.transform@9.1.0-SNAPSHOT/org.elasticsearch.xpack.transform.action.TransportStartTransformAction$2.onTimeout(TransportStartTransformAction.java:364)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.persistent.PersistentTasksService$1.onTimeout(PersistentTasksService.java:217)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:390)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch\n[truncated]\n\nIssue Reasons:\n\n[main] 4 failures in test test {p0=transform/transforms_start_stop/Test start/stop/start continuous transform} (0.6% fail rate in 636 executions)\n[main] 2 failures in step part-3 (1.7% fail rate in 117 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.5% fail rate in 131 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-14", "closed_at": null, "labels": [">test-failure", ":ml/Transform", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126754, "issue_title": "[CI] UpgradeClusterClientYamlTestSuiteIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7757 / 8.0.1_bwc\nelasticsearch-periodic #7751 / 8.0.1_bwc\nelasticsearch-periodic #7745 / 8.0.1_bwc\nelasticsearch-periodic #7739 / 8.0.1_bwc\n\nReproduction Line:\n./gradlew \":x-pack:qa:rolling-upgrade:v8.0.1#oldClusterTest\" -Dtests.class=\"org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=old_cluster/80_transform_jobs_crud/Test put continuous transform on old cluster}\" -Dtests.seed=60F81F0A3795B29B -Dtests.bwc=true -Dtests.locale=bn-IN -Dtests.timezone=Iceland -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure in test setup: Failed to initialize at least 3 watcher nodes\n\nIssue Reasons:\n\n[8.x] 4 failures in class org.elasticsearch.upgrades.UpgradeClusterClientYamlTestSuiteIT (0.4% fail rate in 999 executions)\n[8.x] 4 failures in step 8.0.1_bwc (100.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-14", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126753, "issue_title": "[CI] UpdateMappingIntegrationIT testDynamicUpdates failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7653 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7520 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.indices.mapping.UpdateMappingIntegrationIT.testDynamicUpdates\" -Dtests.seed=5F3D4882141996CB -Dtests.locale=teo -Dtests.timezone=Europe/Bucharest -Druntime.java=23\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: safeAwait: CountDownLatch did not reach zero within the timeout\n\nIssue Reasons:\n\n[8.16] 2 failures in test testDynamicUpdates (0.3% fail rate in 575 executions)\n[8.16] 2 failures in step windows-2022_checkpart1_platform-support-windows (10.0% fail rate in 20 executions)\n[8.16] 2 failures in pipeline elasticsearch-periodic-platform-support (10.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-14", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126749, "issue_title": "[CI] Netty4HttpServerTransportTests testRespondAfterServiceCloseWithClientCancel failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7658 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7644 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-gradle-cache-validation #115 / checkpart1_configuration_caching_validation\n\nReproduction Line:\ngradlew \":modules:transport-netty4:test\" --tests \"org.elasticsearch.http.netty4.Netty4HttpServerTransportTests.testRespondAfterServiceCloseWithClientCancel\" -Dtests.seed=778FBDA0BE9F26AB -Dtests.locale=es-CL -Dtests.timezone=Europe/Monaco -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \n#1:\n\tHint: Caller of readInbound() will handle the message from this point\n\tio.netty.buffer.AdvancedLeakAwareCompositeByteBuf.touch(AdvancedLeakAwareCompositeByteBuf.java:36)\n\tio.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpMessage.touch(HttpObjectAggregator.java:366)\n\tio.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest.touch(HttpObjectAggregator.java:445)\n\tio.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest.touch(HttpObjectAggregator.java:396)\n\tio.netty.channel.embedded.EmbeddedChannel.readInbound(EmbeddedChannel.java:314)\n\torg.elasticsearch.http.netty4.Netty4HttpHeaderValidatorTests.testWithFlowControlAndAggregator(Netty4HttpHeaderValidatorTests.java:160)\n\tjava.base/jdk.\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test testRespondAfterServiceCloseWithClientCancel (1.0% fail rate in 286 executions)\n[main] 2 failures in step windows-2022_checkpart1_platform-support-windows (33.3% fail rate in 6 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (33.3% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-13", "closed_at": "2025-04-14", "labels": [":Distributed Coordination/Network", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126748, "issue_title": "[CI] RepositoriesFileSettingsIT testSettingsApplied failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7831 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7819 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7807 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7741 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7717 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #7711 / rocky-9_platform-support-unix\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.reservedstate.service.RepositoriesFileSettingsIT.testSettingsApplied\" -Dtests.seed=78EDB714D6B5C8E7 -Dtests.locale=ln-AO -Dtests.timezone=NZ-CHAT -Druntime.java=23\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.util.concurrent.ExecutionException: org.elasticsearch.repositories.RepositoryMissingException: [repo, repo1] missing\n\nIssue Reasons:\n\n[8.17] 6 failures in test testSettingsApplied (0.9% fail rate in 636 executions)\n[8.17] 3 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (14.3% fail rate in 21 executions)\n[8.17] 6 failures in pipeline elasticsearch-periodic-platform-support (28.6% fail rate in 21 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-13", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126747, "issue_title": "[CI] RepositoryAnalysisFailureIT testFailsOnWriteException failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7665 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic #7608 / openjdk21_entitlements_false_checkpart2_java-matrix\nelasticsearch-pull-request #67692 / part-2\nelasticsearch-pull-request #66800 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:snapshot-repo-test-kit:internalClusterTest\" --tests \"org.elasticsearch.repositories.blobstore.testkit.analyze.RepositoryAnalysisFailureIT.testFailsOnWriteException\" -Dtests.seed=5E27405E3C54F01 -Dtests.locale=es-GQ -Dtests.timezone=America/Chicago -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: safeGet: listener was not completed within the timeout\n\nIssue Reasons:\n\n[main] 4 failures in test testFailsOnWriteException (0.5% fail rate in 795 executions)\n[main] 2 failures in step part-2 (0.8% fail rate in 249 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.8% fail rate in 248 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-12", "closed_at": "2025-04-14", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "needs:risk", "Team:Distributed Coordination", "rca:random-controlled"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126746, "issue_title": "[CI] TimeSeriesDataStreamsIT testShrinkActionInPolicyWithoutHotPhase failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7630 / ubuntu-2404-aarch64_checkpart5_platform-support-arm\nelasticsearch-pull-request #67642 / part-5\nelasticsearch-pull-request #66748 / part-5\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:qa:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.ilm.TimeSeriesDataStreamsIT.testShrinkActionInPolicyWithoutHotPhase\" -Dtests.seed=E09DE1E27786974F -Dtests.locale=pl -Dtests.timezone=NZ -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [GET], host [http://127.0.0.1:33149], URI [shrink-stkv-.ds-logs-dakdrclfzi-2025.04.12-000001/_ilm/explain?only_errors=false&only_managed=false], status line [HTTP/1.1 404 Not Found]\n{\"error\":{\"root_cause\":[{\"type\":\"index_not_found_exception\",\"reason\":\"no such index [shrink-stkv-.ds-logs-dakdrclfzi-2025.04.12-000001]\",\"resource.type\":\"index_or_alias\",\"resource.id\":\"shrink-stkv-.ds-logs-dakdrclfzi-2025.04.12-000001\",\"index_uuid\":\"_na_\",\"index\":\"shrink-stkv-.ds-logs-dakdrclfzi-2025.04.12-000001\"}],\"type\":\"index_not_found_exception\",\"reason\":\"no such index [shrink-stkv-.ds-logs-dakdrclfzi-2025.04.12-000001]\",\"resource.type\":\"index_or_alias\",\"resource.id\":\"shrink-stkv-.ds-logs-dakdrclfzi-2025.04.12-000001\",\"index_uuid\":\"_na_\",\"index\":\"shrink-stkv-.ds-logs-dakdrclfzi-2025.04.12-000001\"},\"status\":404}\n\nIssue Reasons:\n\n[main] 3 failures in test testShrinkActionInPolicyWithoutHotPhase (0.3% fail rate in 889 executions)\n[main] 2 failures in step part-5 (0.5% fail rate in 418 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.5% fail rate in 417 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-12", "closed_at": "2025-04-17", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126745, "issue_title": "[CI] Netty4HttpServerTransportTests testRespondAfterServiceCloseWithServerCancel failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7630 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7623 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7616 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":modules:transport-netty4:test\" --tests \"org.elasticsearch.http.netty4.Netty4HttpServerTransportTests.testRespondAfterServiceCloseWithServerCancel\" -Dtests.seed=9C479E395E212B79 -Dtests.locale=fur-Latn-IT -Dtests.timezone=SystemV/CST6CDT -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \n#1:\n\tHint: Caller of readInbound() will handle the message from this point\n\tio.netty.buffer.AdvancedLeakAwareCompositeByteBuf.touch(AdvancedLeakAwareCompositeByteBuf.java:36)\n\tio.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpMessage.touch(HttpObjectAggregator.java:366)\n\tio.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest.touch(HttpObjectAggregator.java:445)\n\tio.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest.touch(HttpObjectAggregator.java:396)\n\tio.netty.channel.embedded.EmbeddedChannel.readInbound(EmbeddedChannel.java:314)\n\torg.elasticsearch.http.netty4.Netty4HttpHeaderValidatorTests.testWithFlowControlAndAggregator(Netty4HttpHeaderValidatorTests.java:160)\n\tjava.base/jdk.\n[truncated]\n\nIssue Reasons:\n\n[main] 3 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[main] 3 failures in test testRespondAfterServiceCloseWithServerCancel (1.5% fail rate in 194 executions)\n[main] 3 failures in step windows-2022_checkpart1_platform-support-windows (75.0% fail rate in 4 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-12", "closed_at": "2025-04-14", "labels": [":Distributed Coordination/Network", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126743, "issue_title": "[CI] NettyAllocatorTests testTrashingCompositeByteBuf failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7672 / ubuntu-2404-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7672 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7672 / ubuntu-2204_platform-support-unix\nelasticsearch-periodic #7650 / concurrent-search-tests\nelasticsearch-periodic-platform-support #7672 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #7672 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #7672 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #7672 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7672 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #7672 / opensuse-leap-15_platform-support-unix\n\nReproduction Line:\n./gradlew \":modules:transport-netty4:test\" --tests \"org.elasticsearch.transport.netty4.NettyAllocatorTests.testTrashingCompositeByteBuf\" -Dtests.seed=5F2096B0C9B4D83D -Dtests.locale=ne-IN -Dtests.timezone=Australia/Melbourne -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: an empty collection\n     but: <[LEAK: ByteBuf.release() was not called before it's garbage-collected. See https://netty.io/wiki/reference-counted-objects.html for more information.\nRecent access records: \n#1:\n\tHint: Caller of readInbound() will handle the message from this point\n\tio.netty.buffer.AdvancedLeakAwareCompositeByteBuf.touch(AdvancedLeakAwareCompositeByteBuf.java:36)\n\tio.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpMessage.touch(HttpObjectAggregator.java:366)\n\tio.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest.touch(HttpObjectAggregator.java:445)\n\tio.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest.touch(HttpObjectAggregator.java:396)\n\tio.netty.channel.embedded.EmbeddedChannel.readInbound(EmbeddedChannel.java:314)\n\torg.elasticsearch.http.netty4.Netty4HttpHeaderValidatorTests.testWithFlowControlAndAggregator(Netty4HttpHeaderValidatorTests.java:160)\n\tjava.base/jdk.internal.ref\n[truncated]\n\nIssue Reasons:\n\n[main] 3 consecutive failures in step ubuntu-2404-aarch64_checkpart1_platform-support-arm\n[main] 2 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[main] 2 consecutive failures in step concurrent-search-tests\n[main] 2 consecutive failures in step ubuntu-2004_platform-support-unix\n[main] 3 consecutive failures in step ubuntu-2404_platform-support-unix\n[main] 5 consecutive failures in step rocky-9_platform-support-unix\n[main] 2 consecutive failures in step rhel-9_platform-support-unix\n[main] 5 consecutive failures in step amazonlinux-2023_platform-support-aws\n[main] 7 consecutive failures in step oraclelinux-9_platform-support-unix\n[main] 4 consecutive failures in step single-processor-node-tests\n[main] 97 failures in test testTrashingCompositeByteBuf (15.3% fail rate in 636 executions)\n[main] 3 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (33.3% fail rate in 9 executions)\n[main] 7 failures in step ubuntu-2404-aarch64_checkpart1_platform-support-arm (77.8% fail rate in 9 executions)\n[main] 7 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (77.8% fail rate in 9 executions)\n[main] 4 failures in step ubuntu-2204_platform-support-unix (44.4% fail rate in 9 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-12", "closed_at": "2025-04-14", "labels": [":Distributed Coordination/Network", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126742, "issue_title": "[CI] GeoDistanceIT testDistanceSortingWithUnmappedField failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7620 / openjdk17_checkpart1_java-fips-matrix\nelasticsearch-periodic-platform-support #7614 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #7614 / rhel-9_platform-support-unix\nelasticsearch-periodic #7578 / openjdk23_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.search.sort.GeoDistanceIT.testDistanceSortingWithUnmappedField\" -Dtests.seed=6216A97CDE49EF02 -Dtests.locale=nn -Dtests.timezone=America/Creston -Druntime.java=17 -Dtests.fips.enabled=true\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.action.search.SearchPhaseExecutionException: \n\nIssue Reasons:\n\n[8.x] 4 failures in test testDistanceSortingWithUnmappedField (1.8% fail rate in 221 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (28.6% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-12", "closed_at": "2025-04-17", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126710, "issue_title": "ES|QL - dense_vector search support", "issue_body": "Description\nAs dense_vector support is being addressed in #125783, ES|QL will be able to perform nearest neighbours search.\nThe following tasks will be needed:\n\n kNN search using vectors\n kNN text search, using Inference\n Exact NN search, doing brute force search\n", "created_at": "2025-04-11", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "carlosdelest"}
{"issue_number": 126709, "issue_title": "Ingesting documents with Amazon Bedrock inference fails with \"Invalid value [ingest] received\"", "issue_body": "Elasticsearch Version\nServerless\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nServerless\nProblem Description\nIngesting semantic_text content using Amazon Titan is returning inference failures.\nDigging into what might be causing this error, it's potentially a combination of this line (from 5 months ago) - with a hardcoded InputType.INGEST  for chunked inference - combined with the logic here added last month.\nSteps to Reproduce\nPerform the following requests, using Amazon Bedrock credentials with support for amazon.titan-embed-text-v2:0:\nPUT /_inference/text_embedding/my-bedrock-embeddings\n{\n    \"service\": \"amazonbedrock\",\n    \"service_settings\": {\n        \"access_key\": \"...\",\n        \"secret_key\": \"...\",\n        \"provider\": \"amazontitan\",\n        \"model\": \"amazon.titan-embed-text-v2:0\",\n        \"region\": \"us-east-1\"\n    }\n}\n\n\nPUT my-test-index\n{\n  \"mappings\": {\n    \"properties\": {\n      \"semantic_field\": {\n        \"type\": \"semantic_text\",\n        \"inference_id\": \"my-bedrock-embeddings\"\n      }\n    }\n  }\n}\n\nPUT my-test-index/_doc/1\n{\n    \"semantic_field\": \"The Jedi Master Yoda said, do or do not, there is no try\"\n}\n\nThe ingest request will return the following inference error:\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"validation_exception\",\n        \"reason\": \"Validation Failed: 1: Invalid value [ingest] received. [input_type] is not allowed for provider [amazontitan];\"\n      }\n    ],\n    \"type\": \"validation_exception\",\n    \"reason\": \"Validation Failed: 1: Invalid value [ingest] received. [input_type] is not allowed for provider [amazontitan];\"\n  },\n  \"status\": 400\n}\n\nThe following script has been verified to work on 8.17.4 but is failing in serverless.\nLogs (if relevant)\nNo response", "created_at": "2025-04-11", "closed_at": "2025-04-18", "labels": [">bug", ":ml", "Team:ML", "Feature:GenAI"], "State": "closed", "Author": "kderusso"}
{"issue_number": 126694, "issue_title": "[CI] ActiveDirectoryRunAsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #22054 / part2\nelasticsearch-pull-request #67546 / part-2\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 2 failures in class org.elasticsearch.xpack.security.authc.ldap.ActiveDirectoryRunAsIT (0.2% fail rate in 997 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-11", "closed_at": null, "labels": [">test-failure", ":Security/Authentication", "Team:Security", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126691, "issue_title": "[CI] CreateFromDeploymentIT testAttachWithModelId failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7601 / windows-2022_checkpart2_platform-support-windows\nelasticsearch-periodic-platform-support #7566 / windows-2022_checkpart2_platform-support-windows\n\nReproduction Line:\ngradlew \":x-pack:plugin:inference:qa:inference-service-tests:javaRestTest\" --tests \"org.elasticsearch.xpack.inference.CreateFromDeploymentIT.testAttachWithModelId\" -Dtests.seed=4C87E08EA346A0FD -Dtests.locale=en-001 -Dtests.timezone=EAT -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:55108], URI [/_ml/trained_models/attach_with_model_id/deployment/_start?timeout=10s&wait_for=started&threads_per_allocation=1&number_of_allocations=1&deployment_id=existing_deployment_with_model_id], status line [HTTP/1.1 408 Request Timeout]\n{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Timed out after [10s] waiting for model deployment to start. Use the trained model stats API to track the state of the deployment.\"}],\"type\":\"status_exception\",\"reason\":\"Timed out after [10s] waiting for model deployment to start. Use the trained model stats API to track the state of the deployment.\"},\"status\":408}\n\nIssue Reasons:\n\n[9.0] 2 failures in test testAttachWithModelId (1.7% fail rate in 119 executions)\n[9.0] 2 failures in step windows-2022_checkpart2_platform-support-windows (33.3% fail rate in 6 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (33.3% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-11", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126665, "issue_title": "terminate_after is not honour when size = 0 and query has aggregations", "issue_body": "When a query is not collecting hits (size = 0) and contains aggregations,  it does not honour the parameter terminate_after if defined. There are different incarnations of this bug depending on the value of track_total_hits. The two I have found out are:\n\n\nif track_total_hits is false it will never terminate early and will completely ignore the terminate_after parameter.\n\n\nif track_total_hits is true it might collect more documents that the one defined in terminate_after parameter.\niff one or more segments fully match the query (we are collecting all doxuments of that segment).\n\n\nThere might more edge cases.", "created_at": "2025-04-11", "closed_at": null, "labels": ["Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "iverase"}
{"issue_number": 126660, "issue_title": "[DOCS] CCS stats median should be average", "issue_body": "Elasticsearch Version\n8.16+\nInstalled Plugins\n\n\n\nJava Version\nbundled\nOS Version\n\n\n\nProblem Description\nIn the official documentation about the Cluster Stats API, the response contains different *.took*.avg values in the css._search section that are described as median instead of average. Median and average are different, and it was confirmed that the actual value behind the avg value is truly an average and not a median.\nHence, we should correct the following fields descriptions:\n\nccs._search.took.avg: (integer) The average time taken to execute a cross-cluster search request, in milliseconds.\nccs._search.took_mrt_true.avg: (integer) The average time taken to execute a cross-cluster search request, in milliseconds.\nccs._search.took_mrt_false.avg: (integer) The average time taken to execute a cross-cluster search request, in milliseconds.\nccs._search.clusters.took.avg: (integer) The average time taken to execute a cross-cluster search request, in milliseconds.\n\nAnother field called remotes_per_search_avg is properly defined as The average number of remote clusters that were queried in a single cross-cluster search request, so all *avg fields should have a consistent description.\nSteps to Reproduce\nGo to the Cluster Stats API documentation\nLogs (if relevant)\nNone", "created_at": "2025-04-11", "closed_at": null, "labels": [">docs", "Team:Docs", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "open", "Author": "consulthys"}
{"issue_number": 126645, "issue_title": "[ES|QL] Make SubstituteSurrogateExpressions recognize SurrogateExpression attached to MultiTypeEsField", "issue_body": "#126532 Introduces surrogate expressions for to_ip (conversion)function. Traditionally, the substitute surrogate expressions is done by LogicalPlanOptimizer's substitutions batch. Because SubstituteSurrogateExpressions cannot recognize the conversion/surrogate functions attached to MultiTypeEsField today, the substitution of to_ip for multi-typed fields is done in Analyzer.\nThis issue is open to investigate the possibility to improve SubstituteSurrogateExpressions to recognize the conversion/surrogate functions attached to MultiTypeEsField, so that the substitutions can be centralized in LogicalPlanOptimizer", "created_at": "2025-04-10", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "fang-xing-esql"}
{"issue_number": 126642, "issue_title": "[CI] ScheduledEventTests testBuild_SucceedsWithProvidedSkipResultAndSkipModelUpdatesValues failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7561 / openjdk17_checkpart2_java-matrix\nelasticsearch-periodic #7533 / openjdk21_checkpart2_java-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:core:test\" --tests \"org.elasticsearch.xpack.core.ml.calendars.ScheduledEventTests.testBuild_SucceedsWithProvidedSkipResultAndSkipModelUpdatesValues\" -Dtests.seed=3922CDBA78F81DC6 -Dtests.locale=ff-Latn-GM -Dtests.timezone=Africa/Windhoek -Druntime.java=17\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.ElasticsearchStatusException: Event start time [2025-04-10T20:19:37.097Z] must come before end time [2025-04-10T20:19:37.097Z]\n\nIssue Reasons:\n\n[8.16] 2 failures in test testBuild_SucceedsWithProvidedSkipResultAndSkipModelUpdatesValues (1.6% fail rate in 129 executions)\n[8.16] 2 failures in pipeline elasticsearch-periodic (40.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-10", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126633, "issue_title": "[CI] SearchStatesIT testCanMatch failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21662 / 8.19.0_bwc-snapshots\nelasticsearch-intake #21660 / 8.19.0_bwc-snapshots\nelasticsearch-intake #21659 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67369 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67355 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67363 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67357 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67356 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67355 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67351 / 8.19.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:ccs-rolling-upgrade-remote-cluster:v8.19.0#oneThirdUpgraded\" -Dtests.class=\"org.elasticsearch.upgrades.SearchStatesIT\" -Dtests.method=\"testCanMatch\" -Dtests.seed=BC6B127480CE0547 -Dtests.bwc=true -Dtests.locale=en-ZM -Dtests.timezone=Asia/Chongqing -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.io.UncheckedIOException: org.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:36413], URI [/_search?index=remote_cluster%3Atest_can_match_remote_index&pre_filter_shard_size=9&ccs_minimize_roundtrips=false], status line [HTTP/1.1 500 Internal Server Error]\n{\"error\":{\"root_cause\":[],\"type\":\"search_phase_execution_exception\",\"reason\":\"\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[],\"caused_by\":{\"type\":\"null_pointer_exception\",\"reason\":\"Cannot read field \\\"topDocs\\\" because \\\"topDocs\\\" is null\"}},\"status\":500}\n\nIssue Reasons:\n\n[main] 12 failures in test testCanMatch (1.2% fail rate in 1000 executions)\n[main] 12 failures in step 8.19.0_bwc-snapshots (13.8% fail rate in 87 executions)\n[main] 3 failures in pipeline elasticsearch-intake (15.8% fail rate in 19 executions)\n[main] 8 failures in pipeline elasticsearch-pull-request (11.1% fail rate in 72 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-10", "closed_at": "2025-04-11", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126632, "issue_title": "[CI] SearchStatesIT testBWCSearchStates failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21660 / 8.19.0_bwc-snapshots\nelasticsearch-intake #21659 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67347 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67356 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67353 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67351 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #67341 / 8.19.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:ccs-rolling-upgrade-remote-cluster:v8.19.0#oneThirdUpgraded\" -Dtests.class=\"org.elasticsearch.upgrades.SearchStatesIT\" -Dtests.method=\"testBWCSearchStates\" -Dtests.seed=AA7F22EF73238199 -Dtests.bwc=true -Dtests.locale=asa-TZ -Dtests.timezone=Mexico/General -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.io.UncheckedIOException: org.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:45833], URI [/_search?index=remote_cluster%3Atest_bwc_search_states_remote_index&pre_filter_shard_size=80&ccs_minimize_roundtrips=false], status line [HTTP/1.1 500 Internal Server Error]\n{\"error\":{\"root_cause\":[],\"type\":\"search_phase_execution_exception\",\"reason\":\"\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[],\"caused_by\":{\"type\":\"null_pointer_exception\",\"reason\":\"Cannot read field \\\"topDocs\\\" because \\\"topDocs\\\" is null\"}},\"status\":500}\n\nIssue Reasons:\n\n[main] 7 failures in test testBWCSearchStates (0.7% fail rate in 1000 executions)\n[main] 7 failures in step 8.19.0_bwc-snapshots (8.1% fail rate in 86 executions)\n[main] 2 failures in pipeline elasticsearch-intake (10.5% fail rate in 19 executions)\n[main] 5 failures in pipeline elasticsearch-pull-request (6.9% fail rate in 72 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-10", "closed_at": "2025-04-11", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126628, "issue_title": "[CI] IndexShardTests testReentrantEngineReadLockAcquisitionInRefreshListener failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21656 / part1\nelasticsearch-pull-request #67355 / part-1\nelasticsearch-pull-request #67351 / part-1\nelasticsearch-pull-request #67353 / part-1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.shard.IndexShardTests.testReentrantEngineReadLockAcquisitionInRefreshListener\" -Dtests.seed=F4A2389381739651 -Dtests.locale=en-RW -Dtests.timezone=America/Indiana/Knox -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\ncom.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=3062, name=Thread-520, state=RUNNABLE, group=TGRP-IndexShardTests]\n\nIssue Reasons:\n\n[main] 4 failures in test testReentrantEngineReadLockAcquisitionInRefreshListener (7.5% fail rate in 53 executions)\n[main] 3 failures in step part-1 (7.3% fail rate in 41 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (7.5% fail rate in 40 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-10", "closed_at": "2025-04-11", "labels": [">test-failure", ":Distributed Indexing/Engine", "needs:risk", "Team:Distributed Indexing"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126611, "issue_title": "[Failure store] Remove unused write indices from failure store", "issue_body": "Description\nData stream failure store is using the lazy rollover to reduce its footprint. Let's see how:\n\nData stream gets created with 1 backing index and 0 failure indices. It also has the rollover_on_write set to true for the failure store.\nWhen a failure is encountered, the data stream will execute the rollover of its failure store because of rollover_on_write, and it will write the failed document.\nThe data stream now has 1 backing index and 1 failure index and rollover_on_write set to false.\nAs time passes DLM will roll over the failure index and this will create another failure index.\nThe data stream now has 1 backing index and 2 failure index and rollover_on_write set to false\nAs time passes DLM will delete the initial failure index.\n\nSo far so good. However, if we encountered no more failure the last failure index created cannot be removed because DLM does not remove a write index, the only option is to roll them over.\nEnhancement\nWe would like to be able to go back to 0 failure indices if we witness no failures for reasonable time period. This reduces the costs of having a failure store when we have no failures.\nDraft idea\nIntroduce a lazy rollover with conditions, meaning that when this request is executed it will set the rollover_on_write only if the conditions are met.\n\nThis can be used later by DLM to lazy rollover failure store when the conditions apply.\nThe getWriteFailureIndex should only return the write index if the rollover_on_write is set to false.\nThis means that the latest failure index can easily move through the DLM since it's not the write index anymore.\n", "created_at": "2025-04-10", "closed_at": null, "labels": [">enhancement", ":Data Management/Data streams", "Team:Data Management"], "State": "open", "Author": "gmarouli"}
{"issue_number": 126609, "issue_title": "SAML logout and invalidate session actions may block transport_worker", "issue_body": "Description\nThe issue is same as in #104962. We missed to cover places where the logout and session invalidation actions fork back to transport_worker and get blocked waiting on slow SAML metadata refresh.\n\nThread dump which shows transport_worker thread being blocked on a lock \nobtained by a timer thread  that executes HTTP call to refresh SAML metadata\n 0.0% [cpu=0.0%, idle=100.0%] (0s out of 500ms) cpu usage by thread 'elasticsearch[xxxx][transport_worker][T#2]'\n  10/10 snapshots sharing following 73 elements\n    net.shibboleth.utilities.java.support@8.4.0/net.shibboleth.utilities.java.support.component.AbstractInitializableComponent.isInitialized(AbstractInitializableComponent.java:43)\n    net.shibboleth.utilities.java.support@8.4.0/net.shibboleth.utilities.java.support.component.ComponentSupport.ifNotInitializedThrowUninitializedComponentException(ComponentSupport.java:104)\n    org.opensaml.saml.impl@4.3.0/org.opensaml.saml.metadata.resolver.impl.AbstractMetadataResolver.resolveSingle(AbstractMetadataResolver.java:262)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm.resolveEntityDescriptorWithPossibleRefresh(SamlRealm.java:844)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm.resolveEntityDescriptor(SamlRealm.java:822)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm.lambda$parseHttpMetadata$9(SamlRealm.java:734)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm$$Lambda/0x00007f7d87e9eb58.run(Unknown Source)\n    java.base@22.0.1/java.security.AccessController.executePrivileged(AccessController.java:816)\n    java.base@22.0.1/java.security.AccessController.doPrivileged(AccessController.java:571)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm.lambda$parseHttpMetadata$10(SamlRealm.java:733)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm$$Lambda/0x00007f7d87e9b108.get(Unknown Source)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm.buildLogoutRequest(SamlRealm.java:935)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.action.saml.TransportSamlLogoutAction.buildResponse(TransportSamlLogoutAction.java:127)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.action.saml.TransportSamlLogoutAction.lambda$doExecuteForked$2(TransportSamlLogoutAction.java:76)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.action.saml.TransportSamlLogoutAction$$Lambda/0x00007f7d88394800.accept(Unknown Source)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:249)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.TokenService.lambda$getAuthenticationAndMetadata$5(TokenService.java:495)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.TokenService$$Lambda/0x00007f7d88394c60.accept(Unknown Source)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:249)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.TokenService.lambda$getAndValidateUserToken$6(TokenService.java:536)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.TokenService$$Lambda/0x00007f7d88a15400.accept(Unknown Source)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:249)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.TokenService.lambda$getTokenDocById$9(TokenService.java:607)\n    org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.TokenService$$Lambda/0x00007f7d885ee400.accept(Unknown Source)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.action.ActionListener$2.onResponse(ActionListener.java:249)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:32)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:202)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:196)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:307)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:32)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:95)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.action.ActionListenerResponseHandler.handleResponse(ActionListenerResponseHandler.java:48)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleResponse(TransportService.java:1480)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.InboundHandler.doHandleResponse(InboundHandler.java:432)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.InboundHandler.handleResponse(InboundHandler.java:381)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:148)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:123)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:97)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:821)\n    org.elasticsearch.transport.netty4@8.15.2/org.elasticsearch.transport.netty4.Netty4Transport$$Lambda/0x00007f7d885c67e0.accept(Unknown Source)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:124)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:96)\n    app/org.elasticsearch.server@8.15.2/org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:61)\n    org.elasticsearch.transport.netty4@8.15.2/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:57)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    io.netty.codec@4.1.109.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1475)\n    io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1338)\n    io.netty.handler@4.1.109.Final/io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1387)\n    io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)\n    io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)\n    io.netty.codec@4.1.109.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    io.netty.transport@4.1.109.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n    io.netty.transport@4.1.109.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    io.netty.transport@4.1.109.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n    io.netty.transport@4.1.109.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n    io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n    io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:689)\n    io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:652)\n    io.netty.transport@4.1.109.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n    io.netty.common@4.1.109.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    io.netty.common@4.1.109.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    java.base@22.0.1/java.lang.Thread.runWith(Thread.java:1583)\n    java.base@22.0.1/java.lang.Thread.run(Thread.java:1570)\n\n\n    0.0% [cpu=0.0%, other=0.0%] (0s out of 500ms) cpu usage by thread 'Timer for org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver@73128b3a'\n    10/10 snapshots sharing following 39 elements\n      java.base@22.0.1/sun.nio.ch.SocketDispatcher.read0(Native Method)\n      java.base@22.0.1/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:47)\n      java.base@22.0.1/sun.nio.ch.NioSocketImpl.tryRead(NioSocketImpl.java:256)\n      java.base@22.0.1/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:307)\n      java.base@22.0.1/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)\n      java.base@22.0.1/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)\n      java.base@22.0.1/java.net.Socket$SocketInputStream.implRead(Socket.java:1108)\n      java.base@22.0.1/java.net.Socket$SocketInputStream.read(Socket.java:1095)\n      java.base@22.0.1/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:489)\n      java.base@22.0.1/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)\n      java.base@22.0.1/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:160)\n      java.base@22.0.1/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)\n      java.base@22.0.1/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\n      java.base@22.0.1/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1422)\n      java.base@22.0.1/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455)\n      java.base@22.0.1/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:426)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:436)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:384)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n      org.apache.httpcomponents.httpclient@4.5.14/org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n      org.opensaml.saml.impl@4.3.0/org.opensaml.saml.metadata.resolver.impl.HTTPMetadataResolver.fetchMetadata(HTTPMetadataResolver.java:212)\n      org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver.access$001(SamlRealm.java:747)\n      org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver.lambda$fetchMetadata$0(SamlRealm.java:758)\n      org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver$$Lambda/0x00007f7d87e5b0e0.run(Unknown Source)\n      java.base@22.0.1/java.security.AccessController.executePrivileged(AccessController.java:816)\n      java.base@22.0.1/java.security.AccessController.doPrivileged(AccessController.java:571)\n      org.elasticsearch.security@8.15.2/org.elasticsearch.xpack.security.authc.saml.SamlRealm$PrivilegedHTTPMetadataResolver.fetchMetadata(SamlRealm.java:757)\n      org.opensaml.saml.impl@4.3.0/org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver.refresh(AbstractReloadingMetadataResolver.java:364)\n      org.opensaml.saml.impl@4.3.0/org.opensaml.saml.metadata.resolver.impl.AbstractReloadingMetadataResolver$RefreshMetadataTask.run(AbstractReloadingMetadataResolver.java:685)\n      java.base@22.0.1/java.util.TimerThread.mainLoop(Timer.java:571)\n      java.base@22.0.1/java.util.TimerThread.run(Timer.java:521)\n\n\n", "created_at": "2025-04-10", "closed_at": null, "labels": [">bug", ":Security/Authentication", "Team:Security"], "State": "open", "Author": "slobodanadamovic"}
{"issue_number": 126608, "issue_title": "[ES|QL]  Rerank command - Telemetry", "issue_body": "The telemetry should be enabled for the RERANK command.\nNote: it seems that the only thing to do is to add TelemetryAware to the list of implemented interfaces for the Completion logical plan.", "created_at": "2025-04-10", "closed_at": null, "labels": ["Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "afoucret"}
{"issue_number": 126607, "issue_title": "[CI] ForkIT testWithStatsSimple failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7559 / openjdk24_entitlements_false_checkpart3_java-matrix\nelasticsearch-pull-request #67304 / part-3\nelasticsearch-pull-request #67293 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.ForkIT.testWithStatsSimple\" -Dtests.seed=DD6C010AF787828F -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=en-IM -Dtests.timezone=NST -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <[[fork1, 6, [1, 2, 3, 4, 5, 6], null], [fork2, null, null, 2]]>\n     but: was <[[fork1, 6, [5, 4, 3, 6, 1, 2], null], [fork2, null, null, 2]]>\n\nIssue Reasons:\n\n[main] 3 failures in test testWithStatsSimple (13.6% fail rate in 22 executions)\n[main] 2 failures in step part-3 (10.5% fail rate in 19 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (10.5% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-10", "closed_at": "2025-04-15", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126606, "issue_title": "[CI] EsqlClientYamlIT test {p0=esql/40_unsupported_types/nested declared inline} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7556 / openjdk23_8.16.7_java-matrix-bwc\nelasticsearch-periodic #7507 / openjdk17_8.16.7_java-matrix-bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.16.7#yamlRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.EsqlClientYamlIT\" -Dtests.method=\"test {p0=esql/40_unsupported_types/nested declared inline}\" -Dtests.seed=C11EA63583E52630 -Dtests.bwc=true -Dtests.locale=yrl-CO -Dtests.timezone=EET -Druntime.java=23\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [esql/40_unsupported_types:426]: expected [2xx] status code but api [esql.query] returned [400 Bad Request] [{\"error\":{\"root_cause\":[{\"type\":\"verification_exception\",\"reason\":\"Found 1 problem\\nline 1:19: Unknown column [find_me]\",\"stack_trace\":\"org.elasticsearch.xpack.esql.VerificationException: Found 1 problem\\nline 1:19: Unknown column [find_me]\\n\\tat org.elasticsearch.xpack.esql.analysis.Analyzer.verify(Analyzer.java:192)\\n\\tat org.elasticsearch.xpack.esql.analysis.Analyzer.analyze(Analyzer.java:186)\\n\\tat org.elasticsearch.xpack.esql.session.EsqlSession.lambda$analyzedPlan$7(EsqlSession.java:304)\\n\\tat org.elasticsearch.xpack.esql.session.EsqlSession.analyzeAndMaybeRetry(EsqlSession.java:510)\\n\\tat org.elasticsearch.xpack.esql.session.EsqlSession.lambda$analyzedPlan$16(EsqlSession.java:349)\\n\\tat org.elasticsearch.server@8.18.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListene\n[truncated]\n\nIssue Reasons:\n\n[8.18] 2 failures in test test {p0=esql/40_unsupported_types/nested declared inline} (1.2% fail rate in 166 executions)\n[8.18] 2 failures in pipeline elasticsearch-periodic (25.0% fail rate in 8 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-10", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126603, "issue_title": "[ES|QL] RERANK command - Prevent unnamed fields", "issue_body": "Acceptance criteria:\n\nWe should enforce the usage of an identifier for fields used in the RERANK command.\n\nThe following command:\nFROM movies METADATA _score\n  | WHERE QSTR(\"star wars\")\n  | RERANK \"star wars\" ON title, SUBSTRING(overview, 0, 100), actors WITH rerankerInferenceId\n\nshould fail because no name has been provided for the SUBSTRING expression.\nThe correct way to write it is:\nFROM movies METADATA _score\n  | WHERE QSTR(\"star wars\")\n  | RERANK \"star wars\" ON title, short_overview=SUBSTRING(overview, 0, 100), actors WITH rerankerInferenceId\n", "created_at": "2025-04-10", "closed_at": null, "labels": ["Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "afoucret"}
{"issue_number": 126602, "issue_title": "[ES|QL] RERANK Command - Inference Id should be optiona", "issue_body": "Acceptance creiteria:\n\nThe inference id is optional and default to the default reranker (.rerank-v1-elasticsearch)\nUsing the default reranker must trigger its download (and automatic deployment)\n", "created_at": "2025-04-10", "closed_at": null, "labels": ["Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "afoucret"}
{"issue_number": 126591, "issue_title": "Transform using `geotile_grid` pivot with `missing_bucket=true` triggers NullPointerException", "issue_body": "Elasticsearch Version\n8.4.3\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nUbuntu 22.04\nProblem Description\nUsing a transform which pivots on a geotile_grid will trigger a NullPointerException when setting the missing_buckets option to true.\nThe same composite aggregation works fine and correctly generates a bucket whose key contains a null value (as the value to aggregate on is missing). I believe it is a bug in the transform code when manipulating the composite bucket containing a key with a null value.\nSteps to Reproduce\n\nCreate index with 3 documents:\n\nPUT /test\n{\n  \"mappings\": {\n    \"properties\": {\n      \"username\": {\n        \"type\": \"keyword\"\n      },\n      \"date\": {\n        \"type\": \"date\"\n      },\n      \"location\": {\n        \"type\": \"geo_point\"\n      }\n    }\n  }\n}\n\nPUT /test/_doc/1\n{\n  \"username\": \"bob\",\n  \"date\": \"2025-12-25\",\n  \"location\": \"50.62096405029297,5.5580315589904785\"\n}\n\nPUT /test/_doc/2\n{\n  \"username\": \"bob\",\n  \"date\": \"2024-12-25\",\n  \"location\": \"50.620975494384766,5.558044910430908\"\n}\n\nPUT /test/_doc/3\n{\n  \"username\": \"bob\",\n  \"date\": \"2023-12-25\"\n}\n\n\nTest composite aggregation on username + location fields:\n\nGET /test/_search?filter_path=aggregations.pivot.buckets\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"size\": 0, \n  \"aggs\": {\n    \"pivot\": {\n      \"composite\": {\n        \"sources\": [\n          {\n            \"user\": {\n              \"terms\": {\n                \"field\": \"username\"\n              }\n            }\n          },\n          {\n            \"pings\": {\n              \"geotile_grid\": {\n                \"field\": \"location\",\n                \"precision\": 1,\n                \"missing_bucket\": true\n              }\n            }\n          }\n        ]\n      },\n      \"aggs\": {\n        \"seen_first\": {\n          \"min\": {\n            \"field\": \"date\"\n          }\n        }\n      }\n    }\n  }\n}\n\nResult is as excepted. 2 buckets, one matching the 2 documents with geo_points and one matching the document with no geo_points.\n{\n  \"aggregations\": {\n    \"pivot\": {\n      \"buckets\": [\n        {\n          \"key\": {\n            \"user\": \"bob\",\n            \"pings\": null\n          },\n          \"doc_count\": 1,\n          \"seen_first\": {\n            \"value\": 1703462400000,\n            \"value_as_string\": \"2023-12-25T00:00:00.000Z\"\n          }\n        },\n        {\n          \"key\": {\n            \"user\": \"bob\",\n            \"pings\": \"1/1/0\"\n          },\n          \"doc_count\": 2,\n          \"seen_first\": {\n            \"value\": 1735084800000,\n            \"value_as_string\": \"2024-12-25T00:00:00.000Z\"\n          }\n        }\n      ]\n    }\n  }\n}\n\n\nRun a transform preview with the equivalent aggregations:\n\nGET /_transform/_preview\n{\n  \"source\": {\n    \"index\": \"test\"\n  },\n  \"pivot\": {\n    \"group_by\": {\n      \"user\": {\n        \"terms\": {\n          \"field\": \"username\"\n        }\n      },\n      \"pings\": {\n        \"geotile_grid\": {\n          \"field\": \"location\",\n          \"precision\": 1,\n          \"missing_bucket\": true\n        }\n      }\n    },\n    \"aggregations\": {\n      \"seen_first\": {\n        \"min\": {\n          \"field\": \"date\"\n        }\n      }\n    }\n  }\n}\n\nResult in HTTP 500 error\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"null_pointer_exception\",\n        \"reason\": \"\"\"Cannot invoke \"Object.toString()\" because \"key\" is null\"\"\"\n      }\n    ],\n    \"type\": \"null_pointer_exception\",\n    \"reason\": \"\"\"Cannot invoke \"Object.toString()\" because \"key\" is null\"\"\"\n  },\n  \"status\": 500\n}\n\nExpected results: 2 buckets\nLogs (if relevant)\nServer logs contain the following backtrace:\njava.lang.NullPointerException: Cannot invoke \"Object.toString()\" because \"key\" is null\n    at org.elasticsearch.transform@8.13.3/org.elasticsearch.xpack.transform.transforms.pivot.AggregationResultUtils$GeoTileBucketKeyExtractor.value(AggregationResultUtils.java:486)\n    at org.elasticsearch.transform@8.13.3/org.elasticsearch.xpack.transform.transforms.pivot.AggregationResultUtils.lambda$extractCompositeAggregationResults$0(AggregationResultUtils.java:123)\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)\n    at org.elasticsearch.transform@8.13.3/org.elasticsearch.xpack.transform.transforms.pivot.AggregationResultUtils.lambda$extractCompositeAggregationResults$2(AggregationResultUtils.java:116)\n[...]\n", "created_at": "2025-04-10", "closed_at": null, "labels": [">bug", ":ml/Transform", "Team:ML"], "State": "open", "Author": "elemask"}
{"issue_number": 126580, "issue_title": "[CI] EsqlActionIT testQueryOnEmptyDataIndex failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7566 / openjdk23_entitlements_true_checkpart3_java-matrix\nelasticsearch-pull-request #67373 / part-3\nelasticsearch-periodic-platform-support #7574 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #7567 / almalinux-8-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.EsqlActionIT.testQueryOnEmptyDataIndex\" -Dtests.seed=7F6F669A68650803 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=ro-Latn-RO -Dtests.timezone=EET -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.action.NoShardAvailableActionException: this IndexReader is closed\n\nIssue Reasons:\n\n[main] 4 failures in test testQueryOnEmptyDataIndex (1.9% fail rate in 208 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (66.7% fail rate in 3 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-10", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126579, "issue_title": "Expose node weights in GetDesiredBalance API response", "issue_body": "Currently the GetDesiredBalance reports shard_count, forecast_write_load and forecast_disk_usage which are components of the node_weight. It would be great if we also report the actual node_weight directly in the response to help investigation.\nThis may also be an opportunity to improve and consolidate the computation of individual weights since they might be already available in DesiredBalance since #115854", "created_at": "2025-04-10", "closed_at": null, "labels": [">enhancement", ":Distributed Coordination/Allocation", "Supportability", "Team:Distributed Coordination"], "State": "open", "Author": "ywangd"}
{"issue_number": 126576, "issue_title": "[CI] S3RepositoryAnalysisRestIT testRepositoryAnalysis failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7602 / opensuse-leap-15_platform-support-unix\nelasticsearch-pull-request #67546 / part-2\nelasticsearch-pull-request #67528 / part-2\nelasticsearch-pull-request #67464 / part-2\nelasticsearch-pull-request #67425 / part-2\nelasticsearch-intake #21621 / part2\nelasticsearch-periodic-platform-support #7567 / ubuntu-2004_platform-support-unix\nelasticsearch-pull-request #67190 / part-2\nelasticsearch-pull-request #67191 / part-2\nelasticsearch-pull-request #67180 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:snapshot-repo-test-kit:qa:s3:javaRestTest\" --tests \"org.elasticsearch.repositories.blobstore.testkit.analyze.S3RepositoryAnalysisRestIT.testRepositoryAnalysis\" -Dtests.seed=B71B1505C30AE167 -Dtests.locale=vi-VN -Dtests.timezone=US/Michigan -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:34247], URI [/_snapshot/repository/_analyze?blob_count=10&seed=-2481787089920117582&max_blob_size=10mb&timeout=120s&concurrency=4], status line [HTTP/1.1 500 Internal Server Error]\n{\"error\":{\"root_cause\":[{\"type\":\"uncategorized_execution_exception\",\"reason\":\"Failed execution\"}],\"type\":\"repository_verification_exception\",\"reason\":\"[repository] Elasticsearch observed the storage system underneath this repository behaved incorrectly which indicates it is not suitable for use with Elasticsearch snapshots. Typically this happens when using storage other than AWS S3 which incorrectly claims to be S3-compatible. If so, please report this incompatibility to your storage supplier. Do not report Elasticsearch issues involving storage systems which claim to be S3-compatible unless you can demonstrate that the same issue exists when using a genuine AWS S3 repository. See [https://www.elastic.co/docs/api/doc/elasticsearch\n[truncated]\n\nIssue Reasons:\n\n[main] 15 failures in test testRepositoryAnalysis (3.0% fail rate in 505 executions)\n[main] 11 failures in step part-2 (4.6% fail rate in 237 executions)\n[main] 11 failures in pipeline elasticsearch-pull-request (4.7% fail rate in 236 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (22.2% fail rate in 9 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-09", "closed_at": "2025-04-14", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination", "rca:random-controlled"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126573, "issue_title": "[CI] GenerativeIT test failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7567 / rhel-9_platform-support-unix\nelasticsearch-pull-request #67059 / part-3\nelasticsearch-pull-request #67005 / part-3\nelasticsearch-pull-request #66982 / part-3\nelasticsearch-pull-request #66934 / part-3\nelasticsearch-pull-request #66906 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:single-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.single_node.GenerativeIT.test\" -Dtests.seed=9BEB71494829D856 -Dtests.locale=es-419 -Dtests.timezone=America/Havana -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: query: from hos*,languages,message_types | stats  `host_group` = max(language_code), blwldNmdNT = count_distinct(ip1), `type` = max(language_code) by ip0| rename type as language_code | lookup join languages_lookup on language_code | rename language_code AS host_group, `blwldNmdNT` AS XestDuQGgH, host_group AS GrGohjSgZDKC | eval  `XestDuQGgH` = 8114584234002416914, LkJAzHvh = -584594685, `ip0` = \"RybGIVMRgk\", eLJEZHIT = 922367746, XestDuQGgH = false | where  NOT true AND  NOT false AND true | where true OR  NOT true | eval  eLJEZHIT = true, eLJEZHIT = false, `ip0` = null, LoHDpeHrPhQ = 2106562490, `XestDuQGgH` = null, udcDrTDNWEn = true, btMNxWSTgt = true, KrKFGkPeVf = 5964325812842123566, language_name = null | where  NOT LoHDpeHrPhQ >= 50 OR LkJAzHvh != 50 OR  NOT LkJAzHvh >= 50 OR  NOT false| rename GrGohjSgZDKC as language_code | lookup join languages_lookup on language_code | enrich languages_policy on language_name | enrich languages_policy on language_\n[truncated]\n\nIssue Reasons:\n\n[main] 6 failures in test test (2.2% fail rate in 267 executions)\n[main] 5 failures in step part-3 (4.2% fail rate in 120 executions)\n[main] 5 failures in pipeline elasticsearch-pull-request (4.3% fail rate in 116 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-09", "closed_at": "2025-04-10", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126569, "issue_title": "[CI] SnapshotRepoTestKitClientYamlTestSuiteIT test {p0=/10_analyze/Analysis without details} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7567 / ubuntu-2204_platform-support-unix\nelasticsearch-periodic-platform-support #7567 / rhel-9_platform-support-unix\nelasticsearch-pull-request #67187 / part-2\nelasticsearch-pull-request #67177 / part-2\nelasticsearch-periodic #7545 / openjdk23_entitlements_false_checkpart2_java-matrix\nelasticsearch-intake #21609 / part2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:snapshot-repo-test-kit:qa:rest:yamlRestTest\" --tests \"org.elasticsearch.repositories.blobstore.testkit.rest.SnapshotRepoTestKitClientYamlTestSuiteIT.test {p0=/10_analyze/Analysis without details}\" -Dtests.seed=F9E6ECF99D4BE225 -Dtests.locale=it-CH -Dtests.timezone=Pacific/Enderbury -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [/10_analyze:82]: \nExpected: <10>\n     but: was <9>\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test test {p0=/10_analyze/Analysis without details}\n[main] 6 failures in test test {p0=/10_analyze/Analysis without details} (3.2% fail rate in 189 executions)\n[main] 2 failures in step part-2 (2.3% fail rate in 87 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (2.3% fail rate in 87 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-09", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126568, "issue_title": "[CI] XPackRestIT test {p0=transform/transforms_stats/Test get single transform stats when it does not have a task} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7545 / openjdk23_entitlements_false_checkpart3_java-matrix\nelasticsearch-intake #21561 / part3\nelasticsearch-pull-request #66827 / part-3\nelasticsearch-pull-request #66778 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_stats/Test get single transform stats when it does not have a task}\" -Dtests.seed=C79FC9EB4440DAC7 -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=pt-MO -Dtests.timezone=Asia/Riyadh -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [transform/transforms_stats:52]: expected [2xx] status code but api [transform.start_transform] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Starting transform [airline-transform-stats] timed out after [30s]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Starting transform [airline-transform-stats] timed out after [30s]\\n\\tat org.elasticsearch.transform@9.1.0-SNAPSHOT/org.elasticsearch.xpack.transform.action.TransportStartTransformAction$2.onTimeout(TransportStartTransformAction.java:364)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.persistent.PersistentTasksService$1.onTimeout(PersistentTasksService.java:217)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:390)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$Observer\n[truncated]\n\nIssue Reasons:\n\n[main] 4 failures in test test {p0=transform/transforms_stats/Test get single transform stats when it does not have a task} (0.6% fail rate in 673 executions)\n[main] 2 failures in step part-3 (1.2% fail rate in 172 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.1% fail rate in 185 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-09", "closed_at": null, "labels": [">test-failure", ":ml/Transform", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126567, "issue_title": "[CI] XPackRestIT test {p0=transform/transforms_stats/Test get multiple transform stats} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7545 / openjdk23_entitlements_true_checkpart3_java-matrix\nelasticsearch-pull-request #66846 / part-3\nelasticsearch-intake #21480 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_stats/Test get multiple transform stats}\" -Dtests.seed=627FA7AF8EF9853E -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=bs-Cyrl-BA -Dtests.timezone=America/Dominica -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [transform/transforms_stats:52]: expected [2xx] status code but api [transform.start_transform] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Starting transform [airline-transform-stats] timed out after [30s]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Starting transform [airline-transform-stats] timed out after [30s]\\n\\tat org.elasticsearch.transform@9.1.0-SNAPSHOT/org.elasticsearch.xpack.transform.action.TransportStartTransformAction$2.onTimeout(TransportStartTransformAction.java:364)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.persistent.PersistentTasksService$1.onTimeout(PersistentTasksService.java:217)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:390)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$Observer\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test test {p0=transform/transforms_stats/Test get multiple transform stats} (0.4% fail rate in 730 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-09", "closed_at": null, "labels": [">test-failure", ":ml/Transform", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126553, "issue_title": "FORK: allow more commands in FORK branches", "issue_body": "Tracked in #121652\nAt the moment FORK branches can only allow WHERE/LIMIT/SORT commands.\nWe want to remove this restriction, allowing FORK branches to support (almost) all commands.\nOne of the commands for which we know we will continue to have a restriction is the case of having a FORK commands inside another FORK branch.\nThis will be disallowed for the moment.\n\n #125937 (just opens up support for DISSECT/STATS and EVAL)\n open up support such that we allow the rest of the commands in FORK branches\n add proper validation for the ones that we won't support (e.g. FORK within a FORK)\n", "created_at": "2025-04-09", "closed_at": null, "labels": [">feature", "ES|QL-ui", "Team:Search Relevance", ":Search Relevance/Search", "v9.1.0"], "State": "open", "Author": "ioanatia"}
{"issue_number": 126551, "issue_title": "Incorrect date histogram bucket creation due to DST handling", "issue_body": "Elasticsearch Version\n7.15\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nDarwin Kernel Version 23.6.0\nProblem Description\nWhile running a date histogram aggregation over a time range with \"calendar_interval\": \"1w\" and \"time_zone\": \"America/New_York\", we are seeing incorrect bucketing behaviour around the Daylight Saving Time (DST) transition in March.\nIn the aggregation response, the bucket for the week of March 9, 2025 is shifted and shows a start time of \"2025-03-08T23:00:00.000-05:00\" instead of \"2025-03-09T00:00:00.000-05:00\" or correctly adjusted for the DST change.\nThe weekly buckets should continue to align correctly even through the DST boundary. The DST change should not cause a shift in the calendar alignment of the histogram buckets.\nThis results in misleading aggregation visualizations or reporting, especially when plotting time-based charts on weekly intervals in timezones affected by DST.\nSteps to Reproduce\nQuery Request:\ncurl -X POST \"localhost:9200/events/_search\" -H 'Content-Type: application/json' -d '{\n\"size\": 0,\n\"timeout\": \"60000ms\",\n\"query\": {\n\"constant_score\": {\n\"filter\": {\n\"bool\": {\n\"must\": [\n{\n\"range\": {\n\"scheduleDate\": {\n\"from\": 1740286800000,\n\"to\": 1743911999999,\n\"include_lower\": true,\n\"include_upper\": true\n}\n}\n}\n]\n}\n}\n}\n},\n\"aggregations\": {\n\"SCHEDULE_DATE_29\": {\n\"date_histogram\": {\n\"field\": \"scheduleDate\",\n\"calendar_interval\": \"1w\",\n\"min_doc_count\": 0,\n\"time_zone\": \"America/New_York\",\n\"offset\": \"-86400000ms\",\n\"extended_bounds\": {\n\"min\": 1740286800000,\n\"max\": 1743911999999\n}\n}\n}\n}\n}'\nResponse:\n{\n\"took\": 10,\n\"timed_out\": false,\n\"_shards\":\n{\n\"total\": 1,\n\"successful\": 1,\n\"skipped\": 0,\n\"failed\": 0\n},\n\"hits\":\n{\n\"total\":\n{\n\"value\": 2,\n\"relation\": \"eq\"\n},\n\"max_score\": null,\n\"hits\":\n[]\n},\n\"aggregations\":\n{\n\"SCHEDULE_DATE_29\":\n{\n\"buckets\":\n[\n{\n\"key_as_string\": \"2025-02-16T00:00:00.000-05:00\",\n\"key\": 1739682000000,\n\"doc_count\": 0\n},\n{\n\"key_as_string\": \"2025-02-23T00:00:00.000-05:00\",\n\"key\": 1740286800000,\n\"doc_count\": 2\n},\n{\n\"key_as_string\": \"2025-03-02T00:00:00.000-05:00\",\n\"key\": 1740891600000,\n\"doc_count\": 0\n},\n{\n\"key_as_string\": \"2025-03-08T23:00:00.000-05:00\",\n\"key\": 1741492800000,\n\"doc_count\": 0\n},\n{\n\"key_as_string\": \"2025-03-16T00:00:00.000-04:00\",\n\"key\": 1742097600000,\n\"doc_count\": 0\n},\n{\n\"key_as_string\": \"2025-03-23T00:00:00.000-04:00\",\n\"key\": 1742702400000,\n\"doc_count\": 0\n},\n{\n\"key_as_string\": \"2025-03-30T00:00:00.000-04:00\",\n\"key\": 1743307200000,\n\"doc_count\": 0\n}\n]\n}\n}\n}\nLogs (if relevant)\nNo response", "created_at": "2025-04-09", "closed_at": null, "labels": [">bug", ":Analytics/Aggregations", "Team:Analytics"], "State": "open", "Author": "vinpatel27"}
{"issue_number": 126535, "issue_title": "Re-evaluate the ML node memory avalability formula", "issue_body": "Currently, if ml.use_auto_machine_memory_percent is set to true, the amount of available memory on an ML node is calculated as\nNODE_MEMORY - JVM_HEAP_SIZE  - 200MB OFF-HEAP MEMORY\nWhere JVM_HEAP_SIZE is configured on ES start, and the off-heap memory is estimated at 200MB as a fixed value.\nSome empirical evidence suggests that the off-heap memory can be significantly larger, which can lead to the Java process being killed by the OOM-killer.\nWe need to re-evaluate whether the way the ML code is becoming aware of the available memory needs to be adjusted or changed.", "created_at": "2025-04-09", "closed_at": null, "labels": [":Core/Infra/Core", ":ml", "Team:Core/Infra", "Team:ML"], "State": "open", "Author": "valeriy42"}
{"issue_number": 126534, "issue_title": "[ES|QL] add more info to operator docs", "issue_body": "Description\nWe have two asks before we can pull the operator docs into Kibana's inline help.\n\nWe need some way to get the actual operator character (e.g. - for NEG)... maybe a new field in the operator definitions?\nThe following names should be expanded so they are more user-friendly.\n\n\nDIV -> DIVIDE\nMOD -> MODULO\nMUL -> MULTIPLY\nNEG -> NEGATE\nSUB - SUBTRACT\n\nThis will allow the titles of these sections to be much more helpful. For example NEG will become NEGATE (-).\n", "created_at": "2025-04-09", "closed_at": "2025-04-19", "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL", "ES|QL-ui"], "State": "closed", "Author": "drewdaemon"}
{"issue_number": 126527, "issue_title": "Cleanup old bwc logic for test clusters", "issue_body": "In the old (ElasticsearchNode) and new (AbstractLocalClusterFactory) integ test frameworks there exists some backcompat logic for configuring old nodes. This logic reaches back to 6.x. Since main only runs against clusters going back to 8.x, this logic should be cleaned up.", "created_at": "2025-04-09", "closed_at": null, "labels": [":Core/Infra/Core", "Team:Core/Infra"], "State": "open", "Author": "rjernst"}
{"issue_number": 126526, "issue_title": "[ML] Bedrock Cohere should support embedding_type", "issue_body": "Request should support one of byte, float, int8 as per https://www.elastic.co/guide/en/elasticsearch/reference/current/infer-service-cohere.html\nPUT _inference/text_embedding/multilingual-cohere-v3-search\n{\n  \"service\": \"amazonbedrock\",\n  \"service_settings\": {\n    \"access_key\": \"***\",\n    \"secret_key\": \"***\",\n    \"region\": \"us-east-1\",\n    \"provider\": \"Cohere\",\n    \"model\": \"cohere.embed-multilingual-v3\",\n    \"embedding_type\": \"float\"\n  }\n}\n\nWe currently only support parsing float: AmazonBedrockEmbeddingsResponse\nWe should be able to reuse this code: CohereEmbeddingsResponseEntity\nhttps://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-embed.html", "created_at": "2025-04-09", "closed_at": null, "labels": [">enhancement", ":ml", "Team:ML", "v8.19.0", "v9.1.0"], "State": "open", "Author": "prwhelan"}
{"issue_number": 126510, "issue_title": "[CI] MlWithSecurityIT test {yaml=ml/get_trained_model_stats/Test get stats given trained models} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7553 / oraclelinux-9_platform-support-unix\nelasticsearch-pull-request #66295 / part-4\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:ml-with-security:yamlRestTest\" --tests \"org.elasticsearch.smoketest.MlWithSecurityIT.test {yaml=ml/get_trained_model_stats/Test get stats given trained models}\" -Dtests.seed=4F3C9726F48303FA -Dtests.locale=zh-Latn -Dtests.timezone=Asia/Hebron -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [ml/get_trained_model_stats:147]: expected [2xx] status code but api [ml.get_trained_models_stats] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[],\"type\":\"exception\",\"reason\":\"Searching for stats for models [a-unused-regression-model,a-unused-regression-model1] failed\",\"caused_by\":{\"type\":\"search_phase_execution_exception\",\"reason\":\"\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[],\"caused_by\":{\"type\":\"search_phase_execution_exception\",\"reason\":\"Search rejected due to missing shards [[.ml-stats-000001][0]]. Consider using `allow_partial_search_results` setting to bypass this error.\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[],\"stack_trace\":\"Failed to execute phase [query], Search rejected due to missing shards [[.ml-stats-000001][0]]. Consider using `allow_partial_search_results` setting to bypass this error.\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.search.SearchPhase.doCheckNoMissingShards(Searc\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {yaml=ml/get_trained_model_stats/Test get stats given trained models} (0.3% fail rate in 788 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-09", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126496, "issue_title": "[CI] ParseIpTests testLeadingZerosAreOctal {TestCase[str=v4, validLeadingZerosRejected=true, validLeadingZerosAreDecimal=true, validLeadingZerosAreOctal=true]} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7560 / rocky-8_platform-support-unix\nelasticsearch-pull-request #66991 / part-3\nelasticsearch-periodic-platform-support #7553 / opensuse-leap-15_platform-support-unix\nelasticsearch-pull-request #66961 / part-3\nelasticsearch-pull-request #66770 / part-3\nelasticsearch-intake #21480 / part3\nelasticsearch-pull-request #66720 / part-3\nelasticsearch-intake #21457 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.expression.function.scalar.convert.ParseIpTests.testLeadingZerosAreOctal {TestCase[str=v4, validLeadingZerosRejected=true, validLeadingZerosAreDecimal=true, validLeadingZerosAreOctal=true]}\" -Dtests.seed=FA865C2C84E9BA3E -Dtests.locale=shi-Tfng -Dtests.timezone=Europe/Brussels -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <[0 0 0 0 0 0 0 0 0 0 ff ff 0 6d 87 46]>\n     but: was <[0 0 0 0 0 0 0 0 0 0 ff ff 0 9b cf 6a]>\n\nIssue Reasons:\n\n[main] 8 failures in test testLeadingZerosAreOctal {TestCase[str=v4, validLeadingZerosRejected=true, validLeadingZerosAreDecimal=true, validLeadingZerosAreOctal=true]} (2.0% fail rate in 403 executions)\n[main] 4 failures in step part-3 (2.2% fail rate in 185 executions)\n[main] 2 failures in step part3 (3.5% fail rate in 57 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (33.3% fail rate in 6 executions)\n[main] 4 failures in pipeline elasticsearch-pull-request (2.2% fail rate in 181 executions)\n[main] 2 failures in pipeline elasticsearch-intake (3.5% fail rate in 57 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-08", "closed_at": "2025-04-09", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126495, "issue_title": "[CI] ILMDownsampleDisruptionIT testILMDownsampleRollingRestart failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7524 / openjdk21_entitlements_true_checkpart2_java-matrix\nelasticsearch-pull-request #66142 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:downsample:internalClusterTest\" --tests \"org.elasticsearch.xpack.downsample.ILMDownsampleDisruptionIT.testILMDownsampleRollingRestart\" -Dtests.seed=DADEFAB78F2B7B70 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=kl -Dtests.timezone=America/Noronha -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.index.IndexNotFoundException: no such index [downsample-1h-jmuazrphnw]\n\nIssue Reasons:\n\n[main] 2 failures in test testILMDownsampleRollingRestart (0.3% fail rate in 776 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-08", "closed_at": "2025-04-11", "labels": [">test-failure", ":Data Management/Indices APIs", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126494, "issue_title": "[CI] DateTimeToCharProcessorTests test {tochar-generated.csv:76 mi @ FMmiTH} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7518 / zulu8_java-matrix\nelasticsearch-periodic #7518 / corretto11_java-matrix\nelasticsearch-periodic #7511 / corretto11_java-matrix\nelasticsearch-periodic #7511 / zulu11_java-matrix\nelasticsearch-periodic #7511 / zulu8_java-matrix\nelasticsearch-periodic #7511 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7504 / zulu11_java-matrix\nelasticsearch-periodic #7504 / corretto11_java-matrix\nelasticsearch-periodic #7504 / zulu8_java-matrix\nelasticsearch-periodic #7504 / adoptopenjdk11_java-matrix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:test' --tests \"org.elasticsearch.xpack.sql.expression.function.scalar.datetime.DateTimeToCharProcessorTests\" -Dtests.method=\"test {tochar-generated.csv:113 0:HH @ 1:HH12TH @ 2:fmHH24TH @ 3:FMMI @ 4:FMSSth @ 5:FMMSTH @ 6:USth @ 7:fmFF1th @ 8:FMFF2TH @ 9:FMFF3th @ 10:fmFF4 @ 11:fmFF5TH @ 12:FF6TH @ 13:fmSSSSS @ 14:SSSSTH @ 15:FMAMTH @ 16:FMam @ 17:fmPMTH @ 18:fmpmTH @ 19:fmA.M. @ 20:FMa.m.TH @ 21:FMP.M.TH @ 22:fmp.m.TH @ 23:FMY,YYYth @ 24:YYYY @ 25:YYYth @ 26:YY @ 27:Y @ 28:fmIYYY @ 29:FMIYY @ 30:fmIY @ 31:FMI @ 32:fmBCTH @ 33:FMbcth @ 34:FMAD @ 35:adTH @ 36:B.C.TH @ 37:b.c. @ 38:fmA.D. @ 39:fma.d.TH @ 40:FMMONTHth @ 41:FMMonth @ 42:fmmonthTH @ 43:fmMONTH @ 44:Mon @ 45:fmmon @ 46:fmMMTH @ 47:DAY @ 48:DayTH @ 49:FMday @ 50:FMDYTH @ 51:FMDyth @ 52:FMdy @ 53:DDDth @ 54:fmIDDD @ 55:FMDDTH @ 56:FMID @ 57:FMDTH @ 58:FMWth @ 59:WWth @ 60:FMIW @ 61:fmCCTH @ 62:FMJTH @ 63:QTH @ 64:FMRMth @ 65:rmth @ 66:FMTZH @ 67:FMTZMTH @ 68:FMOF @ 69:fmhhTH @ 70:fmhh12 @ 71:fmhh24 @ 72:mith @ 73:fmssTH @ 74:fmms @ 75:FMusth @ 76:ff1th @ 77:ff2TH @ 78:FMff3th @ 79:ff4 @ 80:fmff5 @ 81:fmff6TH @ 82:sssssth @ 83:FMssssTH @ 84:y,yyyth @ 85:yyyyth @ 86:FMyyy @ 87:fmyyTH @ 88:fmy @ 89:FMiyyyTH @ 90:iyyth @ 91:FMiyTH @ 92:FMith @ 93:mmTH @ 94:FMdddTH @ 95:fmidddth @ 96:dd @ 97:id @ 98:FMd @ 99:FMwth @ 100:fmwwth @ 101:fmiw @ 102:ccth @ 103:fmjth @ 104:qTH}\" -Dtests.seed=ED766E05FAFACE32 -Dtests.locale=pt -Dtests.timezone=Africa/Porto-Novo -Druntime.java=8\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.ComparisonFailure: \nLine number:                        113 (in tochar-generated.csv)\nzone:                               CET\ntimestamp (as epoch):               -96224368442.833361\ntimestamp (java, UTC):              -1080-10-09T00:45:57.166639Z\ntimestamp (postgres, to_timestamp): 1081-10-09 01:45:57.166639+01 BC\ntimestamp (java with zone):         -1080-10-09T01:03:27.166639+00:17:30[CET]\nformat string:                      0:HH @ 1:HH12TH @ 2:fmHH24TH @ 3:FMMI @ 4:FMSSth @ 5:FMMSTH @ 6:USth @ 7:fmFF1th @ 8:FMFF2TH @ 9:FMFF3th @ 10:fmFF4 @ 11:fmFF5TH @ 12:FF6TH @ 13:fmSSSSS @ 14:SSSSTH @ 15:FMAMTH @ 16:FMam @ 17:fmPMTH @ 18:fmpmTH @ 19:fmA.M. @ 20:FMa.m.TH @ 21:FMP.M.TH @ 22:fmp.m.TH @ 23:FMY,YYYth @ 24:YYYY @ 25:YYYth @ 26:YY @ 27:Y @ 28:fmIYYY @ 29:FMIYY @ 30:fmIY @ 31:FMI @ 32:fmBCTH @ 33:FMbcth @ 34:FMAD @ 35:adTH @ 36:B.C.TH @ 37:b.c. @ 38:fmA.D. @ 39:fma.d.TH @ 40:FMMONTHth @ 41:FMMonth @ 42:fmmonthTH @ 43:fmMONTH @ 44:Mon @ 45:fmmon @ 46:fmMMTH @ 47:DAY @ 48:DayTH @ \n[truncated]\n\nIssue Reasons:\n\n[7.17] 2 consecutive failures in test test {tochar-generated.csv:76 mi @ FMmiTH}\n[7.17] 16 consecutive failures in step zulu8_java-matrix\n[7.17] 15 consecutive failures in step corretto11_java-matrix\n[7.17] 19 consecutive failures in step zulu11_java-matrix\n[7.17] 16 consecutive failures in step adoptopenjdk11_java-matrix\n[7.17] 66 failures in test test {tochar-generated.csv:76 mi @ FMmiTH} (9.1% fail rate in 727 executions)\n[7.17] 16 failures in step zulu8_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 15 failures in step corretto11_java-matrix (100.0% fail rate in 15 executions)\n[7.17] 19 failures in step zulu11_java-matrix (100.0% fail rate in 19 executions)\n[7.17] 16 failures in step adoptopenjdk11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 20 failures in pipeline elasticsearch-periodic (100.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-08", "closed_at": null, "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126484, "issue_title": "ParseIpTests.testLeadingZerosAreOctal failing", "issue_body": "CI Link\nhttps://gradle-enterprise.elastic.co/s/7xw7goreqzvkg/tests/task/:x-pack:plugin:esql:test/details/org.elasticsearch.xpack.esql.expression.function.scalar.convert.ParseIpTests/testLeadingZerosAreOctal%20%7BTestCase%5Bstr%3Dv4%2C%20validLeadingZerosRejected%3Dtrue%2C%20validLeadingZerosAreDecimal%3Dtrue%2C%20validLeadingZerosAreOctal%3Dtrue%5D%7D?top-execution=1\nRepro line\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.expression.function.scalar.convert.ParseIpTests.testLeadingZerosAreOctal {TestCase[str=v4, validLeadingZerosRejected=true, validLeadingZerosAreDecimal=true, validLeadingZerosAreOctal=true]}\" -Dtests.seed=4E9DFA270335688A -Dtests.locale=nyn -Dtests.timezone=PST -Druntime.java=24\t\n\nDoes it reproduce?\nYes\nApplicable branches\n8.x\nFailure history\nNo response\nFailure excerpt\njava.lang.AssertionError: \t\nExpected: <[0 0 0 0 0 0 0 0 0 0 ff ff 0 17 6f 7a]>\t\n     but: was <[0 0 0 0 0 0 0 0 0 0 ff ff 0 1b 9d ac]>\t\nat __randomizedtesting.SeedInfo.seed([4E9DFA270335688A:8937DA60C418AE6E]:0)\t\nat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)\t\nat org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:6)\t\nat org.elasticsearch.test.ESTestCase.assertThat(ESTestCase.java:2637)\t\nat org.elasticsearch.xpack.esql.expression.function.scalar.convert.ParseIpTests.success(ParseIpTests.java:133)\t\nat org.elasticsearch.xpack.esql.expression.function.scalar.convert.ParseIpTests.testLeadingZerosAreOctal(ParseIpTests.java:125)\t\nat jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\t\nat java.lang.reflect.Method.invoke(Method.java:565)\t\nat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1763)\t\nat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)\t\nat com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)\t\nat com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)\t\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\t\nat org.junit.rules.RunRules.evaluate(RunRules.java:20)\t\nat org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)\t\nat org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)\t\nat org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)\t\nat org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)\t\nat org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)\t\nat org.junit.rules.RunRules.evaluate(RunRules.java:20)\t\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\t\nat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)\t\nat com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)\t\nat com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)\t\nat com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)\t\nat com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)\t\nat com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)\t\nat com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)\t\nat org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)\t\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\t\nat org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)\t\nat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\t\nat com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)\t\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\t\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\t\nat org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)\t\nat org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)\t\nat org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)\t\nat org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)\t\nat org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)\t\nat org.junit.rules.RunRules.evaluate(RunRules.java:20)\t\nat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\t\nat com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)\t\nat com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)\t\nat java.lang.Thread.run(Thread.java:1447)\n", "created_at": "2025-04-08", "closed_at": "2025-04-09", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "alex-spies"}
{"issue_number": 126479, "issue_title": "[ML] Update Inference Settings cannot clear settings", "issue_body": "Unsetting or explicitly setting a value to null does not clear the setting:\nhttps://github.com/elastic/elasticsearch/blob/main/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/embeddings/CohereEmbeddingsTaskSettings.java#L116\nAll of our updatedTaskSettings should check if a user is explicitly setting a field to null and, if so, clearing the field.\nIf a user creates an endpoint with input_type set:\n    \"task_settings\": {\n        \"input_type\": \"search\"\n    }\n\nAn update like this should clear the input_type setting:\n    \"task_settings\": {\n        \"input_type\": null\n    }\n\nWhereas an update like this should not:\n    \"task_settings\": {\n    }\n\nWorkaround is to delete and recreate the endpoint with the desired task_settings", "created_at": "2025-04-08", "closed_at": null, "labels": [">bug", ":ml", "Team:ML", "v9.1.0"], "State": "open", "Author": "prwhelan"}
{"issue_number": 126473, "issue_title": "Index mode of data streams cannot be changed from logsdb to time_series", "issue_body": "We cannot change the index mode of data streams from logsdb to time_series or vice versa, even after performing a rollover.\n\n\n\n\n\nScreen.Recording.2025-04-08.at.16.00.40.mov\n\n\n\n\n\n", "created_at": "2025-04-08", "closed_at": null, "labels": [">bug", ":Data Management/Data streams", "Team:Data Management"], "State": "open", "Author": "ElenaStoeva"}
{"issue_number": 126471, "issue_title": "[CI] HttpCertificateCommandTests testGenerateMultipleCertificateWithNewCA failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7537 / encryption-at-rest\nelasticsearch-pull-request #67006 / part-4\nelasticsearch-periodic-platform-support #7545 / almalinux-8_platform-support-unix\nelasticsearch-intake #21508 / part4\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:cli:test\" --tests \"org.elasticsearch.xpack.security.cli.HttpCertificateCommandTests.testGenerateMultipleCertificateWithNewCA\" -Dtests.seed=3385ED15607E6F4B -Dtests.locale=en-VC -Dtests.timezone=Atlantic/Faroe -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: keyUsage bit [5] not expected to be set: []\nExpected: <false>\n     but: was <true>\n\nIssue Reasons:\n\n[9.0] 4 failures in test testGenerateMultipleCertificateWithNewCA (4.1% fail rate in 97 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-08", "closed_at": "2025-04-11", "labels": [">test-failure", ":Security/TLS", "Team:Security", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126467, "issue_title": "EQL: consider applying tier filters also to field_caps", "issue_body": "In some scenarios, the user could expect that if a query only involves data from a specific tier, it doesn't consider other tiers at all, not even for planning purposes.\nThis is not true today, eg. if a foo field is declared as keyword in the hot tier indices and as text in the frozen tier indices , even if the query has\n\"filter\": {\n    \"term\": { \"_tier\": \"data_hot\" }\n  }\n\naccessing that field in the query will still lead to conflicts, eg.\nCannot use field [foo] due to ambiguities being mapped as [2] incompatible types\n\nThis is due to the fact that field_caps does not take filters into consideration, and the planning is executed base on the mappings of all the indices.\nThis is by design, but sometimes it's confusing, so we could consider reviewing it or providing an option for a different default.\nFor completeness, changing this behavior could lead to errors on existing queries:\n\nsuppose you have N indices idx1 ... idxN\nidx1 has a field called foo, other indices don't\na query like\nGET /idx*/_eql/search\n{\n  \"query\": \"any where foo == 10 or bar == 20\",\n  \"filter\": {\n    \"term\": { \"_tier\": \"data_hot\" }\n  }\n}\n\nsucceeds as long as idx1 is on the hot tier\nas soon as idx1 is moved to the frozen tier, with current defaults the query keeps working fine; if we change the defaults, completely ignoring the frozen tier, the query will start failing.\n", "created_at": "2025-04-08", "closed_at": null, "labels": [">non-issue", ":Analytics/EQL", "Team:Analytics"], "State": "open", "Author": "luigidellaquila"}
{"issue_number": 126466, "issue_title": "[CI] XPackRestIT test {p0=transform/transforms_start_stop/Test start/stop only starts/stops specified transform} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21522 / part3\nelasticsearch-pull-request #66590 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_start_stop/Test start/stop only starts/stops specified transform}\" -Dtests.seed=BDC9EFF9066C8E03 -Dtests.locale=es-BO -Dtests.timezone=America/Argentina/Catamarca -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [transform/transforms_start_stop:377]: expected [2xx] status code but api [transform.start_transform] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Starting transform [airline-transform-start-stop-continuous] timed out after [30s]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Starting transform [airline-transform-start-stop-continuous] timed out after [30s]\\n\\tat org.elasticsearch.transform@9.1.0-SNAPSHOT/org.elasticsearch.xpack.transform.action.TransportStartTransformAction$2.onTimeout(TransportStartTransformAction.java:364)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.persistent.PersistentTasksService$1.onTimeout(PersistentTasksService.java:217)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:390)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {p0=transform/transforms_start_stop/Test start/stop only starts/stops specified transform} (0.4% fail rate in 525 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-08", "closed_at": null, "labels": [">test-failure", ":ml/Transform", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126465, "issue_title": "[CI] EsqlPartialResultsIT testPartialResult failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7539 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7532 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":test:external-modules:test-error-query:javaRestTest\" --tests \"org.elasticsearch.test.esql.EsqlPartialResultsIT.testPartialResult\" -Dtests.seed=C6F1EC86DE4B2117 -Dtests.locale=lrc -Dtests.timezone=Mexico/BajaSur -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <{type=illegal_state_exception, reason=Accessing failing field}>\n     but: was <{reason=Accessing failing field, suppressed=[{reason=Accessing failing field, type=illegal_state_exception}], type=illegal_state_exception}>\n\nIssue Reasons:\n\n[main] 2 failures in test testPartialResult (0.9% fail rate in 221 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-08", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126451, "issue_title": "Error Handling for \"Ignoring Failure for this processor\" in JSON parsing during conflicts in index template", "issue_body": "Elasticsearch Version\n8.15.5\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nElastic cloud\nProblem Description\nCurrently I am piping Kubernetes container logs to ElasticCloud 8.15.X. I want to make use of JSON processor in Ingest Pipeline to decode the container logs. As container logs come in different shape and sizes, its very unlikely i can enforce everyone to pipe logs in the same way, which there are cases where there are random fields that are conflict in field type e.g.\n{\"process\": \"audit\"}\n{\"process\":{ \"id\":123}}\n\nlogs from 2 different application may spit out the logs in different format, resulting it to drop the event.\n{\"log.level\":\"warn\",\"@timestamp\":\"2025-04-08T03:02:20.683Z\",\"message\":\"Cannot index event publisher.Event{Content:beat.Event{Timestamp:time.Date(2025, time.April, 8, 3, 2, 5, 778206559, time.UTC), Meta:{\\\"input_id\\\":\\\"filestream-container-logs-089e3666-e252-484b-b7a4-a85b5c12876a-kubernetes-59b5cb54-ec6e-4a30-9013-1e1db3f366ae.elastic-agent\\\",\\\"raw_index\\\":\\\"logs-kubernetes.container_log\n...\nPrivate:(*input_logfile.updateOp)(0xc001cac2d0), TimeSeries:false}, Flags:0x1, Cache:publisher.EventCache{m:mapstr.M(nil)}} (status=400): {\\\"type\\\":\\\"document_parsing_exception\\\",\\\"reason\\\":\\\"[1:5019] failed to parse field [message_json.process] of type [keyword] in document with id 'UolZE5YBC9Dr76AKSGUv'. Preview of field's value: '{pid=4955}'\\\",\\\"caused_by\\\":{\\\"type\\\":\\\"illegal_state_exception\\\",\\\"reason\\\":\\\"Can't get text on a START_OBJECT at 1:5005\\\"}}, dropping event!\",\"component\":{\"binary\":\"filebeat\",\"dataset\":\"elastic_agent.filebeat\",\"id\":\"filestream-default\",\"type\":\"filestream\"},\"log\":{\"source\":\"filestream-default\"},\"log.logger\":\"elasticsearch\",\"log.origin\":{\"file.line\":446,\"file.name\":\"elasticsearch/client.go\"},\"service.name\":\"filebeat\",\"ecs.version\":\"1.6.0\",\"ecs.version\":\"1.6.0\"}\n\nI was hoping that when i turned on \"ignore failure for this processor\", it will just move ahead when there is index template, meaning not to drop the went, just don't attempt the json encoding, just keep it under message.\nI want to find out what would be a good way to handle this kind of problem?\nSteps to Reproduce\n\nCreate ingest pipeline with json decoding to message field to another field\npipe 2 documents to the same index with conflicting type\n\nmessage: \"{\"process\": \"audit\"}\"\nmessage: \"{\"process\":{ \"id\":123}}\"\n\n\nGo to discover page to look for message: \"Cannot index event*\"\n\nLogs (if relevant)\nNo response", "created_at": "2025-04-08", "closed_at": null, "labels": [">bug", ":Data Management/Ingest Node", "Team:Data Management"], "State": "open", "Author": "doom160"}
{"issue_number": 126440, "issue_title": "Fleet update fails wit missing .asc file", "issue_body": "Elasticsearch Version\nVersion: 8.17.4, Build: deb/c63c7f5f8ce7d2e4805b7b3d842e7e792d84dda1/2025-03-20T15:39:59.811110136Z, JVM: 23\nInstalled Plugins\nNo response\nJava Version\nJVM: 23\nOS Version\ndifferent linux\nProblem Description\nI want to update my agents via fleet. What is working fine on windows fails on linux. Tested with kali linux, kali purple, proxmox and an old debian.\nEvery time it is a missing .asc file.\nIf i go to them machine and download the file with wget while the fleet update is running - everything is working fine.\nAs i can download the file with wget in the machine itself i can not see any cause in the infrastructure?\nSteps to Reproduce\nStart agent update via fleet, wait to fail, check agent status\nLogs (if relevant)\n\u250c\u2500\u2500(root\u327fyoga-2-purple)-[/home/kali]\n\u2514\u2500# /opt/Elastic/Agent/elastic-agent status\n\u250c\u2500 fleet\n\u2502  \u2514\u2500 status: (HEALTHY) Connected\n\u251c\u2500 elastic-agent\n\u2502  \u2514\u2500 status: (HEALTHY) Running\n\u2514\u2500 upgrade_details\n\u251c\u2500 target_version: 8.17.4\n\u251c\u2500 state: UPG_FAILED\n\u251c\u2500 action_id: 2a18eb82-9f3f-456a-bbbb-07fbfa30ec7f\n\u2514\u2500 metadata\n\u251c\u2500 failed_state: UPG_DOWNLOADING\n\u2514\u2500 error_msg: failed verification of agent binary: could not get .asc file: fetching asc file from '/opt/Elastic/Agent/data/elastic-agent-8.17.3-0efe49/downloads/elastic-agent-8.17.4-linux-x86_64.tar.gz.asc': open /opt/Elastic/Agent/data/elastic-agent-8.17.3-0efe49/downloads/elastic-agent-8.17.4-linux-x86_64.tar.gz.asc: no such file or directory\nfetching asc file from https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.17.4-linux-x86_64.tar.gz.asc: failed loading public key: Get \"https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.17.4-linux-x86_64.tar.gz.asc\": context deadline exceeded\n[elastic_agent][error] upgrade to version 8.17.4 failed: failed verification of agent binary: could not get .asc file: fetching asc file from '/opt/Elastic/Agent/data/elastic-agent-8.17.3-0efe49/downloads/elastic-agent-8.17.4-linux-x86_64.tar.gz.asc': open /opt/Elastic/Agent/data/elastic-agent-8.17.3-0efe49/downloads/elastic-agent-8.17.4-linux-x86_64.tar.gz.asc: no such file or directory\nfetching asc file from https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.17.4-linux-x86_64.tar.gz.asc: failed loading public key: Get \"https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.17.4-linux-x86_64.tar.gz.asc\": context deadline exceeded", "created_at": "2025-04-08", "closed_at": "2025-04-14", "labels": [">bug", "needs:triage"], "State": "closed", "Author": "drummbelbummel"}
{"issue_number": 126434, "issue_title": "Optimize block loader of `semantic_text` field for synthetic source", "issue_body": "semantic_text field always uses fallback synthetic source (implementation of synthetic source that uses a special _ignored_source field to store raw field data). If such fields are expected to be used with synthetic source it would be beneficial to apply optimization similar to #126237 to it. This would allows ESQL to directly load values from a stored field without the need to synthesize the entire synthetic _source.", "created_at": "2025-04-07", "closed_at": null, "labels": [">enhancement", "Team:SearchOrg", ":SearchOrg/Relevance"], "State": "open", "Author": "lkts"}
{"issue_number": 126427, "issue_title": "Incorrect results querying `text` field with multi field in ESQL when using synthetic source", "issue_body": "Elasticsearch Version\n9.1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\n--\nProblem Description\nIn a specific case text field with keyword multi field is not loaded correctly when synthetic source is used.\nSteps to Reproduce\nPUT my-index\n{\n  \"settings\": {\n    \"index.mapping.source.mode\": \"synthetic\"\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"t\": {\n        \"type\": \"text\",\n        \"fields\": {\n          \"kwd\": {\n            \"type\": \"keyword\",\n            \"null_value\": \"NA\",\n            \"index\": false\n          }\n        }\n      }\n    }\n  }\n}\n\nPOST my-index/_bulk?refresh\n{ \"create\": {} }\n{ \"t\": null }\n\n\nPOST /_query?format=txt\n{\n  \"query\": \"FROM my-index\"\n}\n\nProduces:\n       t       |     t.kwd     \n---------------+---------------\nnull           |NA             \n\nI expected (this can be achieved by setting index to true for a multi field):\n       t       |     t.kwd     \n---------------+---------------\nNA             |NA             \n\nLogs (if relevant)\nNo response", "created_at": "2025-04-07", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "open", "Author": "lkts"}
{"issue_number": 126419, "issue_title": "ES|QL: JOIN left field is incompatible with right field of type", "issue_body": "On CSV dataset\nfrom sample_data_t*,client_cidr,languag*\n| rename language.name.keyword as message \n| lookup join message_types_lookup on message \n| drop language_code, language.code, @timestamp, country.keyword, `client_ip`, event_duration, *r, language_name, `env`, *v, `client_cidr`, `@timestamp` \n| rename message as message \n| lookup join message_types_lookup on message \n| eval  yjFBNROMv = 4066967889218962785, `message` = true, language.name = \"a\", language.id = null, `language.name` = 1, type = 1, yHfbOTMUV = \"a\", `type` = null \n| rename country AS language.name  \n| enrich languages_policy on yHfbOTMUV\n| rename language_name as message \n| lookup join message_types_lookup on message\n| rename type as message \n| lookup join message_types_lookup on message \n| keep `language.name`, lang*, language.name, yHfbOTMUV, `language.id`\n\nThe query works fine until you add last KEEP, then it starts failing\n{\n    \"error\": {\n        \"root_cause\": [\n            {\n                \"type\": \"verification_exception\",\n                \"reason\": \"Found 1 problem\\nline 1:733: JOIN left field [message] of type [NULL] is incompatible with right field [message] of type [KEYWORD]\"\n            }\n        ],\n        \"type\": \"verification_exception\",\n        \"reason\": \"Found 1 problem\\nline 1:733: JOIN left field [message] of type [NULL] is incompatible with right field [message] of type [KEYWORD]\"\n    },\n    \"status\": 400\n}\n\nThe query was generated by GenerativeIT tests, it can probably be simplified a lot", "created_at": "2025-04-07", "closed_at": "2025-04-15", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "luigidellaquila"}
{"issue_number": 126418, "issue_title": "ES|QL: no matches for pattern", "issue_body": "With CSV dataset\nfrom addresses,cartesian_multipolygons,hosts| rename city.name as message \n| lookup join message_types_lookup on message \n| eval  card = -6013949614291505456, hOntTwnVC = null, PQAF = null, DXkxCFXyw = null, number = -7336429038807752405 \n| eval  dewAwHC = -1186293612, message = null \n| sort number ASC, street ASC, ip0 DESC, name ASC NULLS FIRST, host ASC \n| drop number, host_group, *umber, `city.country.continent.name`, dewAwHC, `zip_code`, `message`, city.country.continent.planet.name, `name`, `ip1`, message, zip_code \n| drop description, *e, id \n| keep `hOntTwnVC`, city.country.continent.planet.galaxy\n\nDROP *e seems to work fine by itself, but as soon as we add another KEEP after that, the query starts failing\n{\n    \"error\": {\n        \"root_cause\": [\n            {\n                \"type\": \"verification_exception\",\n                \"reason\": \"Found 1 problem\\nline 1:542: No matches found for pattern [*e]\"\n            }\n        ],\n        \"type\": \"verification_exception\",\n        \"reason\": \"Found 1 problem\\nline 1:542: No matches found for pattern [*e]\"\n    },\n    \"status\": 400\n}\n", "created_at": "2025-04-07", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "luigidellaquila"}
{"issue_number": 126392, "issue_title": "ESQL: `EVAL` after `STATS` produces an empty column", "issue_body": "The query below:\nrow foo = 10 \n| stats this = max(foo) \n| eval this = 2\n\nproduces the following result:\n               |     this      \n---------------+---------------\nnull           |2              \n\nThis result includes a null column with an empty name, which is not expected and should not exist.", "created_at": "2025-04-07", "closed_at": "2025-04-21", "labels": ["Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "kanoshiou"}
{"issue_number": 126389, "issue_title": "Streaming execution for FORK", "issue_body": "tracked in #121950\nCurrently FORK uses the same execution model as INLINESTATS where each FORK branch is executed one by one.\nThe result of each FORK branch is then stored into a LocalSourceExec which replaces the FORK branch in the main physical plan.\nAfter all the branches have been executed and their result stored in the main plan, the main plan is executed as well.\nThis model has a few limitations including a limitation on the max size for each FORK branch result.\nHowever the biggest issue is that we do not take advantage of the existing infrastructure on the compute service that allows pages to \"flow\" between the data node plans and the main coordinator plan.\nThis is an illustrative example of how FORK could be modelled to do streaming of pages.\nTake a simple FORK query:\nFROM test\n| FORK\n    ( WHERE content:\"fox\" ) // sub plan 1\n    ( WHERE content:\"dog\" ) // sub plan 2\n| SORT _fork\n| KEEP _fork, id, content\n\nThe physical plan for the previous query will be split into a list of sub plans and a main coordinator plan.\nEach sub plan will also be split into a data node plan and coordinator plan.\n\nEach plan will have the required ExchangeSinkExec when they have to sink data to another plan and a ExchangeSourceExec when they have to pull pages from another plan.\nDetailed planning\nThe initial physical plan:\nProjectExec[[_fork{r}#2, id{f}#9, content{f}#10]]\n\\_TopNExec[[Order[_fork{r}#2,ASC,LAST]],1000[INTEGER],104]\n  \\_MergeExec[[content{f}#10, id{f}#9, _fork{r}#2]]\n    |_EvalExec[[[66 6f 72 6b 31][KEYWORD] AS _fork]]\n    | \\_LimitExec[1000[INTEGER]]\n    |   \\_ExchangeExec[[id{f}#9, content{f}#10],false]\n    |     \\_FragmentExec[filter=null, estimatedRowSize=50, reducer=[], fragment=[<>\n            \\_Limit[1000[INTEGER],false]\n              \\_Filter[:(content{f}#10,[66 6f 78][KEYWORD])]\n                \\_EsRelation[test][content{f}#10, id{f}#9]<>]]\n    \\_EvalExec[[[66 6f 72 6b 32][KEYWORD] AS _fork]]\n      \\_LimitExec[1000[INTEGER]]\n        \\_ExchangeExec[[],false]\n          \\_FragmentExec[filter=null, estimatedRowSize=50, reducer=[], fragment=[<>\n            Limit[1000[INTEGER],false]\n            \\_Filter[:(content{f}#10,[64 6f 67][KEYWORD])]\n              \\_EsRelation[test][content{f}#10, id{f}#9]<>]]\n\nThe main physical plan would be split into sub plans and a main coordinator plan.\nThe main coordinator plan:\nOutputExec\n\\_ProjectExec[[_fork{r}#2, id{f}#9, content{f}#10]]\n  \\_TopNExec[[Order[_fork{r}#2,ASC,LAST]],1000[INTEGER],104]\n    \\_ExchangeSourceExec[[content{f}#10, id{f}#9, _fork{r}#2],false]\n\nA sub plan:\nExchangeSinkExec[[id{f}#9, content{f}#10, _fork{r}#2],false]\n\\_EvalExec[[[66 6f 72 6b 31][KEYWORD] AS _fork]]\n  \\_LimitExec[1000[INTEGER]]\n    \\_ExchangeExec[[id{f}#9, content{f}#10],false]\n      \\_FragmentExec[filter=null, estimatedRowSize=50, reducer=[], fragment=[<>\n        \\_Limit[1000[INTEGER],false]\n          \\_Filter[:(content{f}#10,[66 6f 78][KEYWORD])]\n            \\_EsRelation[test][content{f}#10, id{f}#9]<>]]\n\nEach sub plan will be further split between a data node plan and a coordinator plan.\nThe data plan for sub plan 1:\nExchangeSinkExec[[id{f}#9, content{f}#10],false]\n\\_FragmentExec[filter=null, estimatedRowSize=50, reducer=[], fragment=[<>\n    \\_Limit[1000[INTEGER],false]\n      \\_Filter[:(content{f}#10,[66 6f 78][KEYWORD])]\n        \\_EsRelation[test][content{f}#10, id{f}#9]<>]]\n\nThe coordinator  plan for sub plan 1:\nExchangeSinkExec[[id{f}#9, content{f}#10, _fork{r}#2],false]\n\\_EvalExec[[[66 6f 72 6b 31][KEYWORD] AS _fork]]\n  \\_LimitExec[1000[INTEGER]]\n    \\_ExchangeSourceExec[[id{f}#9, content{f}#10],false]\n", "created_at": "2025-04-07", "closed_at": "2025-04-22", "labels": ["Team:Search Relevance", ":Search Relevance/Search", "v9.1.0"], "State": "closed", "Author": "ioanatia"}
{"issue_number": 126371, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker using multiple fields ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7483 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic #7447 / single-processor-node-tests\nelasticsearch-periodic #7447 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-periodic #7447 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic #7440 / concurrent-search-tests\nelasticsearch-pull-request #66516 / part-3\nelasticsearch-intake #21362 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker using a single field ASYNC}\" -Dtests.seed=4E64DA54DF558CBB -Dtests.locale=mzn-Arab-IR -Dtests.timezone=America/Noronha -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.02222> but was <0.02273>\nrow 3 column 3:a list containing\nrow 3 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n9032            | War and Peace: A Novel (6 Volumes)                    | Tolstoy Leo                                 | 0.02083      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text        \n[truncated]\n\nIssue Reasons:\n\n[main] 7 failures in test test {rerank.Reranker using multiple fields ASYNC} (4.3% fail rate in 161 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-07", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126370, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker using a single field SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7483 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7483 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic #7447 / single-processor-node-tests\nelasticsearch-periodic #7440 / concurrent-search-tests\nelasticsearch-pull-request #66519 / part-3\nelasticsearch-pull-request #66516 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker using another sort order SYNC}\" -Dtests.seed=158FF6085345BBBA -Dtests.locale=af-Latn-ZA -Dtests.timezone=IET -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 3:a list containing\nrow 0 column 3:0: expected <0.02222> but was <0.02273>\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, \n[truncated]\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test test {rerank.Reranker using a single field SYNC}\n[main] 6 failures in test test {rerank.Reranker using a single field SYNC} (4.9% fail rate in 123 executions)\n[main] 2 failures in step part-3 (12.5% fail rate in 16 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (12.5% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-07", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126369, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker using a single field ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7483 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7483 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic #7447 / single-processor-node-tests\nelasticsearch-periodic #7447 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-pull-request #66519 / part-3\nelasticsearch-pull-request #66516 / part-3\nelasticsearch-pull-request #65867 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker using another sort order SYNC}\" -Dtests.seed=158FF6085345BBBA -Dtests.locale=af-Latn-ZA -Dtests.timezone=IET -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 3:a list containing\nrow 0 column 3:0: expected <0.02222> but was <0.02273>\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, \n[truncated]\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test test {rerank.Reranker using a single field ASYNC}\n[main] 7 failures in test test {rerank.Reranker using a single field ASYNC} (4.1% fail rate in 172 executions)\n[main] 3 failures in step part-3 (6.4% fail rate in 47 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (7.0% fail rate in 43 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-07", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126368, "issue_title": "[CI] MixedClusterClientYamlTestSuiteIT test {p0=search.vectors/42_knn_search_bbq_flat/Vector rescoring has same scoring as exact search for kNN section} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7461 / openjdk23_9.0.0_java-matrix-bwc\nelasticsearch-pull-request #65989 / 9.0.0_bwc-snapshots\nelasticsearch-pull-request #65989 / 8.19.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:mixed-cluster:v9.0.0#mixedClusterTest\" -Dtests.class=\"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=search.vectors/42_knn_search_bbq_flat/Vector rescoring has same scoring as exact search for kNN section}\" -Dtests.seed=8EA4B61C9E959D2D -Dtests.bwc=true -Dtests.locale=rof -Dtests.timezone=Europe/Chisinau -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [search.vectors/42_knn_search_bbq_flat:142]: \nExpected: <3>\n     but: was <2>\n\nIssue Reasons:\n\n[main] 3 failures in test test {p0=search.vectors/42_knn_search_bbq_flat/Vector rescoring has same scoring as exact search for kNN section} (0.4% fail rate in 754 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126367, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker add the _score column when missing SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7483 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7483 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic #7461 / openjdk23_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic #7447 / single-processor-node-tests\nelasticsearch-periodic #7447 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic #7440 / concurrent-search-tests\nelasticsearch-pull-request #66516 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker using another sort order SYNC}\" -Dtests.seed=158FF6085345BBBA -Dtests.locale=af-Latn-ZA -Dtests.timezone=IET -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 3:a list containing\nrow 0 column 3:0: expected <0.02222> but was <0.02273>\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, \n[truncated]\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test test {rerank.Reranker add the _score column when missing SYNC}\n[main] 7 failures in test test {rerank.Reranker add the _score column when missing SYNC} (5.8% fail rate in 121 executions)\n[main] 3 failures in pipeline elasticsearch-periodic (75.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-07", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126366, "issue_title": "[CI] CoordinatorTests testAllSearchesExecuted failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7455 / zulu8_java-matrix\nelasticsearch-periodic-platform-support #7344 / ubuntu-2404_platform-support-unix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:enrich:test' --tests \"org.elasticsearch.xpack.enrich.action.CoordinatorTests.testAllSearchesExecuted\" -Dtests.seed=383D3FDDCAFA585A -Dtests.locale=et -Dtests.timezone=America/Costa_Rica -Druntime.java=8\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[7.17] 2 failures in test testAllSearchesExecuted (0.3% fail rate in 730 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": null, "labels": [">test-failure", "low-risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126363, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker using another sort order SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7483 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic #7461 / openjdk23_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #7476 / rhel-9_platform-support-unix\nelasticsearch-periodic #7447 / single-processor-node-tests\nelasticsearch-periodic #7447 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-pull-request #66516 / part-3\nelasticsearch-pull-request #65594 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker using another sort order SYNC}\" -Dtests.seed=158FF6085345BBBA -Dtests.locale=af-Latn-ZA -Dtests.timezone=IET -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 3:a list containing\nrow 0 column 3:0: expected <0.02222> but was <0.02273>\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, \n[truncated]\n\nIssue Reasons:\n\n[main] 7 failures in test test {rerank.Reranker using another sort order SYNC} (4.0% fail rate in 173 executions)\n[main] 2 failures in step part-3 (3.9% fail rate in 51 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (4.3% fail rate in 46 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-09", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126362, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker using another sort order ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7476 / rhel-9_platform-support-unix\nelasticsearch-periodic #7447 / single-processor-node-tests\nelasticsearch-periodic #7447 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-periodic #7447 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic #7440 / concurrent-search-tests\nelasticsearch-pull-request #66519 / part-3\nelasticsearch-pull-request #66516 / part-3\nelasticsearch-intake #21362 / part3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker add the _score column when missing ASYNC}\" -Dtests.seed=E9A81693DD813AD4 -Dtests.locale=mn-Cyrl-MN -Dtests.timezone=US/Hawaii -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.02222> but was <0.02273>\nrow 3 column 3:a list containing\nrow 3 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n9032            | War and Peace: A Novel (6 Volumes)                    | Tolstoy Leo                                 | 0.02083      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text        \n[truncated]\n\nIssue Reasons:\n\n[main] 8 failures in test test {rerank.Reranker using another sort order ASYNC} (6.3% fail rate in 126 executions)\n[main] 2 failures in step part-3 (5.6% fail rate in 36 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (66.7% fail rate in 3 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (5.9% fail rate in 34 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-09", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126361, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker before a limit ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7476 / rhel-9_platform-support-unix\nelasticsearch-periodic #7447 / single-processor-node-tests\nelasticsearch-periodic #7447 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-periodic #7447 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-pull-request #66519 / part-3\nelasticsearch-pull-request #66516 / part-3\nelasticsearch-pull-request #66215 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker add the _score column when missing ASYNC}\" -Dtests.seed=E9A81693DD813AD4 -Dtests.locale=mn-Cyrl-MN -Dtests.timezone=US/Hawaii -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.02222> but was <0.02273>\nrow 3 column 3:a list containing\nrow 3 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n9032            | War and Peace: A Novel (6 Volumes)                    | Tolstoy Leo                                 | 0.02083      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text        \n[truncated]\n\nIssue Reasons:\n\n[main] 7 failures in test test {rerank.Reranker before a limit ASYNC} (5.3% fail rate in 132 executions)\n[main] 3 failures in step part-3 (7.1% fail rate in 42 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (7.7% fail rate in 39 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-09", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126360, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker add the _score column when missing ASYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7476 / rhel-9_platform-support-unix\nelasticsearch-periodic #7447 / single-processor-node-tests\nelasticsearch-periodic #7447 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-periodic #7440 / concurrent-search-tests\nelasticsearch-pull-request #66519 / part-3\nelasticsearch-pull-request #66516 / part-3\nelasticsearch-pull-request #66215 / part-3\nelasticsearch-pull-request #65594 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker add the _score column when missing ASYNC}\" -Dtests.seed=E9A81693DD813AD4 -Dtests.locale=mn-Cyrl-MN -Dtests.timezone=US/Hawaii -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.02222> but was <0.02273>\nrow 3 column 3:a list containing\nrow 3 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n9032            | War and Peace: A Novel (6 Volumes)                    | Tolstoy Leo                                 | 0.02083      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text        \n[truncated]\n\nIssue Reasons:\n\n[main] 8 failures in test test {rerank.Reranker add the _score column when missing ASYNC} (5.7% fail rate in 141 executions)\n[main] 4 failures in step part-3 (7.8% fail rate in 51 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (66.7% fail rate in 3 executions)\n[main] 4 failures in pipeline elasticsearch-pull-request (8.7% fail rate in 46 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-07", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126359, "issue_title": "[CI] IndexStatsIT testThrottleStats failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7477 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7470 / windows-2019_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7463 / windows-2019_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew ':server:internalClusterTest' --tests \"org.elasticsearch.indices.stats.IndexStatsIT.testThrottleStats\" -Dtests.seed=B49CF2DCE5C9E7DB -Dtests.locale=hu -Dtests.timezone=America/Argentina/Ushuaia -Druntime.java=22\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: index throttling didn't kick in after 5 minutes of intense merging\n\nIssue Reasons:\n\n[7.17] 3 consecutive failures in step windows-2019_checkpart1_platform-support-windows\n[7.17] 3 failures in test testThrottleStats (2.5% fail rate in 119 executions)\n[7.17] 3 failures in step windows-2019_checkpart1_platform-support-windows (100.0% fail rate in 3 executions)\n[7.17] 3 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 3 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": null, "labels": [">test-failure", ":Distributed Indexing/Distributed", "low-risk", "Team:Distributed Indexing"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126358, "issue_title": "[CI] AsyncSearchErrorTraceIT testDataNodeDoesNotLogStackTraceWhenErrorTraceTrue failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7550 / encryption-at-rest\nelasticsearch-periodic #7515 / concurrent-search-tests\nelasticsearch-periodic-platform-support #7516 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #7474 / debian-11_platform-support-unix\nelasticsearch-periodic-platform-support #7467 / windows-2019_checkpart2_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.AsyncSearchErrorTraceIT.testDataNodeDoesNotLogStackTraceWhenErrorTraceTrue\" -Dtests.seed=8FE42AAB71B1EDC -Dtests.locale=nus-SS -Dtests.timezone=Brazil/DeNoronha -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Shard [.async-search][0] is still locked after 5 sec waiting\n\nIssue Reasons:\n\n[8.x] 5 failures in test testDataNodeDoesNotLogStackTraceWhenErrorTraceTrue (1.0% fail rate in 518 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (13.3% fail rate in 15 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (18.8% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-11", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126357, "issue_title": "[CI] AsyncSearchErrorTraceIT testDataNodeLogsStackTraceWhenErrorTraceFalseOrEmpty failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7563 / graalvm-ce17_checkpart2_java-matrix\nelasticsearch-periodic-platform-support #7515 / sles-12_platform-support-unix\nelasticsearch-periodic-platform-support #7480 / windows-2019_checkpart2_platform-support-windows\nelasticsearch-periodic-platform-support #7473 / windows-2019_checkpart2_platform-support-windows\nelasticsearch-periodic-platform-support #7466 / windows-2019_checkpart2_platform-support-windows\n\nReproduction Line:\n./gradlew \":x-pack:plugin:async-search:internalClusterTest\" --tests \"org.elasticsearch.xpack.search.AsyncSearchErrorTraceIT.testDataNodeLogsStackTraceWhenErrorTraceFalseOrEmpty\" -Dtests.seed=788CAC820F60C9BC -Dtests.locale=ff-Latn-GN -Dtests.timezone=Portugal -Druntime.java=17\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Shard [.async-search][0] is still locked after 5 sec waiting\n\nIssue Reasons:\n\n[8.18] 5 failures in test testDataNodeLogsStackTraceWhenErrorTraceFalseOrEmpty (1.0% fail rate in 522 executions)\n[8.18] 3 failures in step windows-2019_checkpart2_platform-support-windows (18.8% fail rate in 16 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic-platform-support (23.5% fail rate in 17 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-18", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126356, "issue_title": "Failure stores cannot be replicated in CCR", "issue_body": "We currently filter failure store indices out from being considered for auto follow logic when processing data streams (see #126355). This is because a write index must always be present on a data stream. If a failure index is the only index from a cluster that is replicated (i.e. no other backing indices are replicated), the resulting follower data stream is not guaranteed to satisfy this invariant. Even if all indices are replicated, the construction of the data stream to hold them is done as part of the follow operation. If follow operations are done in arbitrary order and are subject to independent failure, we can't guarantee that a data stream will always have a write index in its backing index set.", "created_at": "2025-04-05", "closed_at": null, "labels": [">enhancement", ":Distributed Indexing/CCR", ":Data Management/Data streams", "Team:Data Management", "Team:Distributed Indexing"], "State": "open", "Author": "jbaiera"}
{"issue_number": 126354, "issue_title": "[CI] SearchableSnapshotActionIT testSearchableSnapshotTotalShardsPerNode failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7440 / release-tests\nelasticsearch-pull-request #66239 / part-5\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:qa:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.ilm.actions.SearchableSnapshotActionIT.testSearchableSnapshotTotalShardsPerNode\" -Dtests.seed=497C5BC56D95C60C -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=sa-IN -Dtests.timezone=Etc/GMT+3 -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 2 failures in test testSearchableSnapshotTotalShardsPerNode (0.7% fail rate in 289 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-05", "closed_at": "2025-04-10", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126350, "issue_title": "ML] OpenAI Inference Endpoint is missing URL parameter", "issue_body": "Description\nThe Inference Endpoint flyout for the OpenAI service is missing \"URL\", which is an optional service setting.\nThe OpenAI Inference provider returned by the inference API is missing the URL parameter. This should be returned so that it can be displayed in the Inference endpoint flyout.\n", "created_at": "2025-04-04", "closed_at": "2025-04-11", "labels": [">enhancement", ":ml", "Team:ML", "v9.1.0"], "State": "closed", "Author": "alvarezmelissa87"}
{"issue_number": 126348, "issue_title": "[CI] ClusterStateWaitThresholdBreachTests testWaitInShrunkShardsAllocatedExceedsThreshold failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7440 / openjdk21_checkpart2_java-fips-matrix\nelasticsearch-pull-request #66374 / part-2\nelasticsearch-pull-request #66143 / part-2-fips\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:internalClusterTest\" --tests \"org.elasticsearch.xpack.ilm.ClusterStateWaitThresholdBreachTests.testWaitInShrunkShardsAllocatedExceedsThreshold\" -Dtests.seed=2BDAD0719ABA2123 -Dtests.locale=shi-MA -Dtests.timezone=Israel -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.index.IndexNotFoundException: no such index [shrink-cncc-index-rfqmtvnuxfdjt]\n\nIssue Reasons:\n\n[main] 3 failures in test testWaitInShrunkShardsAllocatedExceedsThreshold (1.0% fail rate in 296 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.7% fail rate in 119 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": "2025-04-11", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126340, "issue_title": "[CI] SearchWithRejectionsIT testOpenContextsAfterRejections failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7751 / encryption-at-rest\nelasticsearch-periodic-platform-support #7773 / debian-11_platform-support-unix\nelasticsearch-periodic-platform-support #7755 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #7713 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #7683 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.search.SearchWithRejectionsIT.testOpenContextsAfterRejections\" -Dtests.seed=B5D7A7091296A55F -Dtests.locale=sms-FI -Dtests.timezone=Asia/Jerusalem -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <0L>\n     but: was <1L>\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in test testOpenContextsAfterRejections\n[8.x] 5 failures in test testOpenContextsAfterRejections (0.9% fail rate in 554 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic-platform-support (25.0% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126322, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker before a limit SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21362 / part3\nelasticsearch-pull-request #66215 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker using another sort order ASYNC}\" -Dtests.seed=6362DB869228C967 -Dtests.locale=ru-KG -Dtests.timezone=Australia/West -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 3:a list containing\nrow 0 column 3:0: expected <0.02222> but was <0.02273>\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, \n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {rerank.Reranker before a limit SYNC} (28.6% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": "2025-04-09", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126320, "issue_title": "[CI] EsqlSpecIT test {rerank.Reranker using multiple fields SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21362 / part3\nelasticsearch-pull-request #66215 / part-3\nelasticsearch-pull-request #65594 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.multi_node.EsqlSpecIT\" -Dtests.method=\"test {rerank.Reranker using another sort order ASYNC}\" -Dtests.seed=6362DB869228C967 -Dtests.locale=ru-KG -Dtests.timezone=Australia/West -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nData mismatch:\nrow 0 column 3:a list containing\nrow 0 column 3:0: expected <0.02222> but was <0.02273>\nrow 1 column 3:a list containing\nrow 1 column 3:0: expected <0.01515> but was <0.01493>\nActual:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, Leo Tolstoy, Pat Conroy] | 0.02273      \n2776            | The Devil and Other Stories (Oxford World's Classics) | Leo Tolstoy                                 | 0.01493      \n5327            | War and Peace                                         | Leo Tolstoy                                 | 0.03846      \n\nExpected:\nbook_no:keyword | title:text                                            | author:text                                 | _score:double\n4536            | War and Peace (Signet Classics)                       | [John Hockenberry, \n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test test {rerank.Reranker using multiple fields SYNC} (18.8% fail rate in 16 executions)\n[main] 2 failures in step part-3 (13.3% fail rate in 15 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (16.7% fail rate in 12 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": "2025-04-09", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126306, "issue_title": "[CI] CustomWebIdentityTokenCredentialsProviderTests testPickUpNewWebIdentityTokenWhenItsChanged failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7433 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk21_entitlements_true_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":modules:repository-s3:qa:web-identity-token:test\" --tests \"org.elasticsearch.repositories.s3.CustomWebIdentityTokenCredentialsProviderTests.testCreateWebIdentityTokenCredentialsProvider\" -Dtests.seed=B9B4FCCCE00D687C -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=ps-PK -Dtests.timezone=Europe/Dublin -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.security.AccessControlException: access denied (\"java.lang.RuntimePermission\" \"accessDeclaredMembers\")\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test testPickUpNewWebIdentityTokenWhenItsChanged\n[main] 4 failures in test testPickUpNewWebIdentityTokenWhenItsChanged (1.7% fail rate in 235 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": "2025-04-04", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126305, "issue_title": "[CI] CustomWebIdentityTokenCredentialsProviderTests testCreateWebIdentityTokenCredentialsProvider failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7433 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk21_entitlements_true_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":modules:repository-s3:qa:web-identity-token:test\" --tests \"org.elasticsearch.repositories.s3.CustomWebIdentityTokenCredentialsProviderTests.testCreateWebIdentityTokenCredentialsProvider\" -Dtests.seed=B9B4FCCCE00D687C -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=ps-PK -Dtests.timezone=Europe/Dublin -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.security.AccessControlException: access denied (\"java.lang.RuntimePermission\" \"accessDeclaredMembers\")\n\nIssue Reasons:\n\n[main] 2 consecutive failures in test testCreateWebIdentityTokenCredentialsProvider\n[main] 4 failures in test testCreateWebIdentityTokenCredentialsProvider (1.7% fail rate in 235 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": "2025-04-04", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126304, "issue_title": "[CI] CustomWebIdentityTokenCredentialsProviderTests testSupportRegionalizedEndpoints failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7433 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk21_entitlements_true_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":modules:repository-s3:qa:web-identity-token:test\" --tests \"org.elasticsearch.repositories.s3.CustomWebIdentityTokenCredentialsProviderTests.testCreateWebIdentityTokenCredentialsProvider\" -Dtests.seed=B9B4FCCCE00D687C -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=ps-PK -Dtests.timezone=Europe/Dublin -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.security.AccessControlException: access denied (\"java.lang.RuntimePermission\" \"accessDeclaredMembers\")\n\nIssue Reasons:\n\n[main] 4 failures in test testSupportRegionalizedEndpoints (1.7% fail rate in 236 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": "2025-04-04", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126303, "issue_title": "[CI] RepositoryCredentialsTests testInsecureRepositoryCredentials failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7433 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk21_entitlements_true_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":modules:repository-s3:qa:insecure-credentials:test\" --tests \"org.elasticsearch.repositories.s3.RepositoryCredentialsTests.testInsecureRepositoryCredentials\" -Dtests.seed=B9B4FCCCE00D687C -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=sd -Dtests.timezone=Arctic/Longyearbyen -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.ExceptionInInitializerError: null\n\nIssue Reasons:\n\n[main] 4 failures in test testInsecureRepositoryCredentials (2.0% fail rate in 200 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": "2025-04-04", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126302, "issue_title": "[CI] RepositoryCredentialsTests testRepositoryCredentialsOverrideSecureCredentials failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7433 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk21_entitlements_true_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":modules:repository-s3:qa:insecure-credentials:test\" --tests \"org.elasticsearch.repositories.s3.RepositoryCredentialsTests.testInsecureRepositoryCredentials\" -Dtests.seed=B9B4FCCCE00D687C -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=sd -Dtests.timezone=Arctic/Longyearbyen -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.ExceptionInInitializerError: null\n\nIssue Reasons:\n\n[main] 4 failures in test testRepositoryCredentialsOverrideSecureCredentials (2.0% fail rate in 200 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": "2025-04-04", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126301, "issue_title": "[CI] RepositoryCredentialsTests testReinitSecureCredentials failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7433 / openjdk21_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7433 / openjdk21_entitlements_true_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":modules:repository-s3:qa:insecure-credentials:test\" --tests \"org.elasticsearch.repositories.s3.RepositoryCredentialsTests.testInsecureRepositoryCredentials\" -Dtests.seed=B9B4FCCCE00D687C -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=sd -Dtests.timezone=Arctic/Longyearbyen -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.ExceptionInInitializerError: null\n\nIssue Reasons:\n\n[main] 4 failures in test testReinitSecureCredentials (2.0% fail rate in 200 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": "2025-04-04", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126299, "issue_title": "[CI] XPackRestIT test {p0=ml/start_data_frame_analytics/Test start classification analysis when the dependent variable cardinality is too low} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7433 / openjdk24_entitlements_true_checkpart3_java-matrix\nelasticsearch-pull-request #66310 / part-3\nelasticsearch-pull-request #65993 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=ml/start_data_frame_analytics/Test start classification analysis when the dependent variable cardinality is too low}\" -Dtests.seed=2AF51D1F410095EF -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=es-AR -Dtests.timezone=Europe/Rome -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [ml/start_data_frame_analytics:213]: the error message was expected to match the provided regex but didn't\nExpected: Field \\[keyword_field\\] must have at least \\[2\\] distinct values but there were \\[1\\]\n     but: was \"{root_cause=[{type=no_shard_available_action_exception, reason=null, stack_trace=org.elasticsearch.action.NoShardAvailableActionException\\n}], type=exception, reason=all shards failed, caused_by={type=search_phase_execution_exception, reason=all shards failed, phase=query, grouped=true, failed_shards=[{shard=0, index=.ml-stats-000001, node=null, reason={type=no_shard_available_action_exception, reason=null, stack_trace=org.elasticsearch.action.NoShardAvailableActionException\\n}}], stack_trace=Failed to execute phase [query], all shards failed; shardFailures {[_na_][.ml-stats-000001][0]: org.elasticsearch.action.NoShardAvailableActionException\\n}\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearc\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test test {p0=ml/start_data_frame_analytics/Test start classification analysis when the dependent variable cardinality is too low} (0.5% fail rate in 658 executions)\n[main] 2 failures in step part-3 (1.2% fail rate in 169 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.0% fail rate in 192 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126297, "issue_title": "[CI] EsqlClientYamlIT test {p0=esql/61_enrich_ip/IP strings} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7805 / 8.12.2_bwc\nelasticsearch-periodic #7799 / 8.13.4_bwc\nelasticsearch-periodic #7793 / 8.12.2_bwc\nelasticsearch-periodic #7787 / 8.13.4_bwc\nelasticsearch-periodic #7787 / 8.12.2_bwc\nelasticsearch-periodic #7781 / 8.11.4_bwc\nelasticsearch-periodic #7769 / 8.12.2_bwc\nelasticsearch-periodic #7763 / 8.12.2_bwc\nelasticsearch-periodic #7757 / 8.13.4_bwc\nelasticsearch-periodic #7757 / 8.12.2_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.12.2#yamlRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.EsqlClientYamlIT\" -Dtests.method=\"test {p0=esql/61_enrich_ip/IP strings}\" -Dtests.seed=577A0E35E8F701B9 -Dtests.bwc=true -Dtests.locale=my -Dtests.timezone=SystemV/PST8 -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [esql/61_enrich_ip:112]: expected [2xx] status code but api [esql.query] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[{\"type\":\"null_pointer_exception\",\"reason\":\"Cannot invoke \\\"org.elasticsearch.xpack.esql.core.type.DataType.noText()\\\" because \\\"inputDataType\\\" is null\",\"stack_trace\":\"org.elasticsearch.ElasticsearchException$1: Cannot invoke \\\"org.elasticsearch.xpack.esql.core.type.DataType.noText()\\\" because \\\"inputDataType\\\" is null\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:707)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:635)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.build(RestResponse.java:201)\\n\\tat org.elasticsearch.server@8.19.0-SNAPSHOT/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:160)\\\n[truncated]\n\nIssue Reasons:\n\n[8.x] 18 failures in test test {p0=esql/61_enrich_ip/IP strings} (2.8% fail rate in 645 executions)\n[8.x] 7 failures in step 8.12.2_bwc (33.3% fail rate in 21 executions)\n[8.x] 4 failures in step 8.11.4_bwc (20.0% fail rate in 20 executions)\n[8.x] 7 failures in step 8.13.4_bwc (33.3% fail rate in 21 executions)\n[8.x] 15 failures in pipeline elasticsearch-periodic (68.2% fail rate in 22 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126295, "issue_title": "Ability to aggregate on `_tier` metadata", "issue_body": "Description\nTerms aggregation on _tier metadata field results in an error. It is not clear whether this is intended behavior or a bug, but I'd expect this to work since a similar aggregation on _index metadata succeeds.\nUse case\nThe kibana streams plugin shows a graph displaying document counts per tier for data streams managed by an ILM policy.\nWe currently query the document count per _index and cross that data with _ilm/explain. Aggregating on _tier would simplify the approach.\nIssue\nPOST logs/_search\n{\n  \"track_total_hits\": false,\n  \"size\": 0,\n  \"aggs\": {\n    \"tiers\": {\n      \"terms\": {\n        \"field\": \"_tier\"\n      }\n    }\n  }\n}\n\n--->\n...\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"illegal_argument_exception\",\n        \"reason\": \"Fielddata is not supported on field [_tier] of type [_tier]\"\n      }\n    ],\n...\n}\n", "created_at": "2025-04-04", "closed_at": null, "labels": [">enhancement", ":Analytics/Aggregations", "Team:Analytics"], "State": "open", "Author": "klacabane"}
{"issue_number": 126275, "issue_title": "ESQL: silently empty result in case of missing index instead of ValidationException", "issue_body": "Applies to main, 8.x doesn't reproduce this.\nReproducer:\ncurl -u elastic:password -HContent-Type:application/json 'localhost:9200/test/_doc?refresh' -d '\n{\"foo\": 1}\n'\n\ncurl -u elastic-admin:elastic-password -H \"Content-Type: application/json\" 'localhost:9200/_query?format=txt' -d'\n{                \n  \"query\": \"from test\"     \n}'\n\n      foo      \n---------------\n1\n\ncurl -u elastic-admin:elastic-password -H \"Content-Type: application/json\" 'localhost:9200/_query?format=txt' -d '\n{\n  \"query\": \"from test, missingindex\"\n}'\n      foo      \n---------------\n\nNotice how the inclusion of missingindex in the index pattern causes the query to silently return an empty result. On 8.x, this (correctly) returns a verification exception.", "created_at": "2025-04-04", "closed_at": "2025-04-04", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "alex-spies"}
{"issue_number": 126270, "issue_title": "[CI] XPackRestIT test {p0=transform/transforms_stats/Test get transform stats} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21329 / part3\nelasticsearch-periodic #7419 / openjdk23_entitlements_true_checkpart3_java-matrix\nelasticsearch-pull-request #66220 / part-3\nelasticsearch-pull-request #66003 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_stats/Test get transform stats}\" -Dtests.seed=AF15272B40016D1 -Dtests.locale=lo-Laoo-LA -Dtests.timezone=Asia/Kuching -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [transform/transforms_stats:52]: expected [2xx] status code but api [transform.start_transform] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Starting transform [airline-transform-stats] timed out after [30s]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Starting transform [airline-transform-stats] timed out after [30s]\\n\\tat org.elasticsearch.transform@9.1.0-SNAPSHOT/org.elasticsearch.xpack.transform.action.TransportStartTransformAction$2.onTimeout(TransportStartTransformAction.java:364)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.persistent.PersistentTasksService$1.onTimeout(PersistentTasksService.java:217)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:390)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$Observer\n[truncated]\n\nIssue Reasons:\n\n[main] 4 failures in test test {p0=transform/transforms_stats/Test get transform stats} (0.8% fail rate in 502 executions)\n[main] 2 failures in step part-3 (1.6% fail rate in 127 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.4% fail rate in 146 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-04", "closed_at": null, "labels": [">test-failure", ":ml/Transform", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126262, "issue_title": "Add parameters to BlobStore#stats() request for different dimensions", "issue_body": "\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/common/blobstore/BlobStore.java\n\n\n         Line 32\n      in\n      0586cbf\n\n\n\n\n\n\n default Map<String, BlobStoreActionStats> stats() { \n\n\n\n\n\n Map<String, BlobStoreActionStats> stats() is an interface to get stats from the blob store for every repository implementation (S3, Azure, GCS). The problem with this API that it returns different keys depending on the environment. Specifically every cloud implementation checks if it's serverless:\nS3:\n    @Override\n    public Map<String, BlobStoreActionStats> stats() {\n        return statsCollectors.statsMap(service.isStateless);\n    }\nAzure:\n    @Override\n    public Map<String, BlobStoreActionStats> stats() {\n        return requestMetricsRecorder.statsMap(service.isStateless());\n    }\nGCS:\n    @Override\n    public Map<String, BlobStoreActionStats> stats() {\n        return statsCollector.operationsStats(storageService.isServerless());\n    }\nAnd outcome of API will be different. In stateful Map<Operation, BlobStoreActionStats> and serverless Map<OperationPurpose_Operation, BlobStoreActionStats>. So serverless returns two dimensional data, every pair of purpose and operation. Caller of this API needs to know how to deal with different outputs.\nWe need to change API so it accepts arguments that describe what kind of stats caller needs. For example, which dimensions OperationPurpose, Operation, or maybe both stats(List<Dimensions>) or more rigid stats(boolean withOperationPurpose). Also remove serverless flag.", "created_at": "2025-04-04", "closed_at": null, "labels": [":Distributed Coordination/Snapshot/Restore", ">tech debt", "Team:Distributed Coordination"], "State": "open", "Author": "mhl-b"}
{"issue_number": 126253, "issue_title": "[CI] EsqlClientYamlIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7781 / 8.11.4_bwc\nelasticsearch-periodic #7769 / 8.12.2_bwc\nelasticsearch-periodic #7763 / 8.12.2_bwc\nelasticsearch-periodic #7757 / 8.13.4_bwc\nelasticsearch-periodic #7757 / 8.12.2_bwc\nelasticsearch-periodic #7745 / 8.13.4_bwc\nelasticsearch-periodic #7733 / 8.13.4_bwc\nelasticsearch-periodic #7733 / 8.11.4_bwc\nelasticsearch-periodic #7715 / 8.12.2_bwc\nelasticsearch-periodic #7697 / 8.11.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.11.4#yamlRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.EsqlClientYamlIT\" -Dtests.method=\"test {p0=esql/160_union_types/load two indices, convert, rename and then drop ambiguous field event_duration}\" -Dtests.seed=8BFB5ACC7AC95FF4 -Dtests.bwc=true -Dtests.locale=ee-GH -Dtests.timezone=Africa/Windhoek -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: circuit breakers not reset to 0Expected a map containing\nestimated_size_in_bytes: expected <0> but was <368>\n         estimated_size: expected \"0b\" but was \"368b\"\n               overhead: <1.0> unexpected but ok\n    limit_size_in_bytes: <322122547> unexpected but ok\n             limit_size: \"307.1mb\" unexpected but ok\n                tripped: <0> unexpected but ok\n\nIssue Reasons:\n\n[8.x] 14 failures in class org.elasticsearch.xpack.esql.qa.mixed.EsqlClientYamlIT (2.3% fail rate in 618 executions)\n[8.x] 4 failures in step 8.11.4_bwc (21.1% fail rate in 19 executions)\n[8.x] 6 failures in step 8.13.4_bwc (31.6% fail rate in 19 executions)\n[8.x] 4 failures in step 8.12.2_bwc (22.2% fail rate in 18 executions)\n[8.x] 12 failures in pipeline elasticsearch-periodic (60.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-03", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126252, "issue_title": "[CI] ExplainDataStreamLifecycleIT testExplainLifecycleForIndicesWithErrors failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7441 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic #7419 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic #7419 / openjdk24_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7441 / rocky-8_platform-support-unix\nelasticsearch-periodic-platform-support #7441 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #7441 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #7441 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7441 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7441 / sles-15_platform-support-unix\nelasticsearch-pull-request #66266 / part-1\n\nReproduction Line:\n./gradlew \":modules:data-streams:internalClusterTest\" --tests \"org.elasticsearch.datastreams.lifecycle.ExplainDataStreamLifecycleIT.testExplainLifecycleForIndicesWithErrors\" -Dtests.seed=93802F6833D45A19 -Dtests.locale=az-AZ -Dtests.timezone=MIT -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: is null\n     but: was <ErrorEntry[firstOccurrenceTimestamp=1743715367602, error={\"type\":\"exception\",\"reason\":\"Force merge request only had 1 successful shards out of a total of 2\"}, recordedTimestamp=1743715374608, retryCount=7]>\n\nIssue Reasons:\n\n[main] 14 failures in test testExplainLifecycleForIndicesWithErrors (7.8% fail rate in 179 executions)\n[main] 4 failures in step part-1 (6.3% fail rate in 63 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (4.6% fail rate in 65 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-03", "closed_at": "2025-04-04", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126240, "issue_title": "[CI] XPackRestIT test {p0=transform/transforms_reset/Test force reseting a running transform} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21296 / part3\nelasticsearch-pull-request #65952 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_reset/Test force reseting a running transform}\" -Dtests.seed=5AD21B045ED1392C -Dtests.locale=seh-MZ -Dtests.timezone=Asia/Bangkok -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [transform/transforms_reset:153]: expected [2xx] status code but api [transform.start_transform] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Starting transform [airline-transform-start-reset] timed out after [30s]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Starting transform [airline-transform-start-reset] timed out after [30s]\\n\\tat org.elasticsearch.transform@9.1.0-SNAPSHOT/org.elasticsearch.xpack.transform.action.TransportStartTransformAction$2.onTimeout(TransportStartTransformAction.java:364)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.persistent.PersistentTasksService$1.onTimeout(PersistentTasksService.java:217)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:390)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObse\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {p0=transform/transforms_reset/Test force reseting a running transform} (0.4% fail rate in 487 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-03", "closed_at": null, "labels": [">test-failure", ":ml/Transform", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126232, "issue_title": "[CI] DockerTests test020PluginsListWithNoPlugins failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #7096 / oraclelinux-9_packaging-tests-unix\nelasticsearch-pull-request #66204 / rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-pull-request #66204 / ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-periodic-packaging #7068 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #7054 / ubuntu-2204_packaging-tests-unix\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\n    PID TTY      STAT   TIME COMMAND\n      1 ?        Ss     0:00 /bin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper\n      7 ?        Sl     0:32 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n    340 pts/1    Rs+    0:00 ps ax\n\nStdout:\nCreated elasticsearch keystore in /usr/share/elasticsearch/config/elasticsearch.keystore\n\nStderr:\n\n\nThread dump:\n2025-04-03 13:15:16\nFull thread dump OpenJDK 64-Bit Server VM (24+36-3646 mixed mode, sharing):\n\nThreads class SMR info\n[truncated]\n\nIssue Reasons:\n\n[main] 5 failures in test test020PluginsListWithNoPlugins (0.7% fail rate in 719 executions)\n[main] 2 failures in step ubuntu-2204_packaging-tests-unix (28.6% fail rate in 7 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-packaging (42.9% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-03", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126230, "issue_title": "[CI] EnterpriseGeoIpDownloaderIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21286 / part1\nelasticsearch-periodic-platform-support #7420 / ubuntu-2204_platform-support-unix\nelasticsearch-periodic #7391 / encryption-at-rest\nelasticsearch-pull-request #65886 / part-1\nelasticsearch-periodic-platform-support #7406 / ubuntu-2204_platform-support-unix\nelasticsearch-intake #21104 / part1\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 6 failures in class org.elasticsearch.ingest.geoip.EnterpriseGeoIpDownloaderIT (1.4% fail rate in 441 executions)\n[main] 2 failures in step part1 (3.8% fail rate in 53 executions)\n[main] 2 failures in step ubuntu-2204_platform-support-unix (33.3% fail rate in 6 executions)\n[main] 2 failures in pipeline elasticsearch-intake (3.8% fail rate in 53 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (28.6% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-03", "closed_at": "2025-04-03", "labels": [">test-failure", ":Data Management/Ingest Node", "Team:Data Management", "medium-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126223, "issue_title": "[CI] SecurityRolesMultiProjectIT testUpdatingFileBasedRoleAffectsAllProjects failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7412 / encryption-at-rest\nelasticsearch-pull-request #65900 / part-1\n\nReproduction Line:\n./gradlew \":test:external-modules:test-multi-project:javaRestTest\" --tests \"org.elasticsearch.xpack.security.SecurityRolesMultiProjectIT.testUpdatingFileBasedRoleAffectsAllProjects\" -Dtests.seed=7BE81C497538C951 -Dtests.locale=mr-Deva-IN -Dtests.timezone=SystemV/CST6 -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable containing [\"monitor\"]\n     but: no item was \"monitor\"\n\nIssue Reasons:\n\n[main] 2 failures in test testUpdatingFileBasedRoleAffectsAllProjects (1.0% fail rate in 200 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-03", "closed_at": null, "labels": [">test-failure", ":Security/Security", "Team:Security", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126216, "issue_title": "Simulate Ingest API incorrectly validates outputs for logsdb when component_template_substitutions are given", "issue_body": "Ingest into indices with index.mode set to logsdb skips validation because index.mapping.ignore_malformed is set to true for those, and we skip validation if index.mapping.ignore_malformed is true (at least for numbers).\nThis behavior works as intended for ingest and simulate ingest, as long as no overrides are given.\nAdd a template for a logsdb data stream:\nPUT _index_template/datastream-logsdb-template\n{\n  \"index_patterns\": [\n    \"datastream-logsdb-*\"\n  ],\n  \"data_stream\": {},\n  \"template\": {\n    \"mappings\": {\n      \"properties\": {\n        \"my_field\": {\n          \"type\": \"long\"\n        }\n      }\n    },\n    \"settings\": {\n      \"index\": {\n        \"mode\": \"logsdb\"\n      }\n    }\n  },\n  \"priority\": 500\n}\n\nCreate the data stream:\nPUT /_data_stream/datastream-logsdb-1\n\nNow when we simulate ingest, it correctly (for logsdb) skips validation:\nPOST /_ingest/_simulate\n{\n  \"docs\": [\n    {\n      \"_index\": \"datastream-logsdb-1\",\n      \"_id\": \"0\",\n      \"_source\": {\n        \"my_field\": \"asdf\",\n        \"@timestamp\" : \"2027-03-30T12:02:01.789Z\"\n      }\n    }\n  ]\n}\n\nAnd when we do normal ingest, it correctly skips validation:\nPOST datastream-logsdb-1/_doc\n{\n  \"my_field\": \"asdf\",\n  \"@timestamp\" : \"2027-03-30T12:02:01.789Z\"\n}\n\nBut if we add a completely unrelated and unused component_template_override, it incorrectly (for logsdb) validates the outputs:\nPOST /_ingest/_simulate\n{\n  \"docs\": [\n    {\n      \"_index\": \"datastream-logsdb-1\",\n      \"_id\": \"0\",\n      \"_source\": {\n        \"my_field\": \"asdf\",\n        \"@timestamp\" : \"2027-03-30T12:02:01.789Z\"\n      }\n    }\n  ],\n   \"component_template_substitutions\": {\n    \"template123\": {\n      \"template\": {\n        \"mappings\": {\n          \"properties\": {\n            \"my_field\": {\n              \"type\": \"long\"\n            }\n          }\n        }\n      }    \n    }      \n  }\n}\n\nGives output:\n{\n  \"docs\": [\n    {\n      \"doc\": {\n        \"_id\": \"0\",\n        \"_index\": \"datastream-logsdb-1\",\n        \"_version\": -3,\n        \"_source\": {\n          \"@timestamp\": \"2027-03-30T12:02:01.789Z\",\n          \"my_field\": \"asdf\"\n        },\n        \"executed_pipelines\": [],\n        \"error\": {\n          \"type\": \"document_parsing_exception\",\n          \"reason\": \"[1:53] failed to parse field [my_field] of type [long] in document with id '0'. Preview of field's value: 'asdf'\",\n          \"caused_by\": {\n            \"type\": \"illegal_argument_exception\",\n            \"reason\": \"For input string: \\\"asdf\\\"\"\n          }\n        }\n      }\n    }\n  ]\n}\n", "created_at": "2025-04-03", "closed_at": null, "labels": [">bug", ":Data Management/Ingest Node", "Team:Data Management"], "State": "open", "Author": "masseyke"}
{"issue_number": 126213, "issue_title": "[CI] DateTimeToCharProcessorTests test {tochar-generated.csv:70 TZH @ FMTZHTH} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7518 / zulu8_java-matrix\nelasticsearch-periodic #7518 / corretto11_java-matrix\nelasticsearch-periodic #7511 / corretto11_java-matrix\nelasticsearch-periodic #7511 / zulu11_java-matrix\nelasticsearch-periodic #7511 / zulu8_java-matrix\nelasticsearch-periodic #7511 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7504 / zulu11_java-matrix\nelasticsearch-periodic #7504 / corretto11_java-matrix\nelasticsearch-periodic #7504 / zulu8_java-matrix\nelasticsearch-periodic #7504 / adoptopenjdk11_java-matrix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:test' --tests \"org.elasticsearch.xpack.sql.expression.function.scalar.datetime.DateTimeToCharProcessorTests\" -Dtests.method=\"test {tochar-generated.csv:113 0:HH @ 1:HH12TH @ 2:fmHH24TH @ 3:FMMI @ 4:FMSSth @ 5:FMMSTH @ 6:USth @ 7:fmFF1th @ 8:FMFF2TH @ 9:FMFF3th @ 10:fmFF4 @ 11:fmFF5TH @ 12:FF6TH @ 13:fmSSSSS @ 14:SSSSTH @ 15:FMAMTH @ 16:FMam @ 17:fmPMTH @ 18:fmpmTH @ 19:fmA.M. @ 20:FMa.m.TH @ 21:FMP.M.TH @ 22:fmp.m.TH @ 23:FMY,YYYth @ 24:YYYY @ 25:YYYth @ 26:YY @ 27:Y @ 28:fmIYYY @ 29:FMIYY @ 30:fmIY @ 31:FMI @ 32:fmBCTH @ 33:FMbcth @ 34:FMAD @ 35:adTH @ 36:B.C.TH @ 37:b.c. @ 38:fmA.D. @ 39:fma.d.TH @ 40:FMMONTHth @ 41:FMMonth @ 42:fmmonthTH @ 43:fmMONTH @ 44:Mon @ 45:fmmon @ 46:fmMMTH @ 47:DAY @ 48:DayTH @ 49:FMday @ 50:FMDYTH @ 51:FMDyth @ 52:FMdy @ 53:DDDth @ 54:fmIDDD @ 55:FMDDTH @ 56:FMID @ 57:FMDTH @ 58:FMWth @ 59:WWth @ 60:FMIW @ 61:fmCCTH @ 62:FMJTH @ 63:QTH @ 64:FMRMth @ 65:rmth @ 66:FMTZH @ 67:FMTZMTH @ 68:FMOF @ 69:fmhhTH @ 70:fmhh12 @ 71:fmhh24 @ 72:mith @ 73:fmssTH @ 74:fmms @ 75:FMusth @ 76:ff1th @ 77:ff2TH @ 78:FMff3th @ 79:ff4 @ 80:fmff5 @ 81:fmff6TH @ 82:sssssth @ 83:FMssssTH @ 84:y,yyyth @ 85:yyyyth @ 86:FMyyy @ 87:fmyyTH @ 88:fmy @ 89:FMiyyyTH @ 90:iyyth @ 91:FMiyTH @ 92:FMith @ 93:mmTH @ 94:FMdddTH @ 95:fmidddth @ 96:dd @ 97:id @ 98:FMd @ 99:FMwth @ 100:fmwwth @ 101:fmiw @ 102:ccth @ 103:fmjth @ 104:qTH}\" -Dtests.seed=ED766E05FAFACE32 -Dtests.locale=pt -Dtests.timezone=Africa/Porto-Novo -Druntime.java=8\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.ComparisonFailure: \nLine number:                        113 (in tochar-generated.csv)\nzone:                               CET\ntimestamp (as epoch):               -96224368442.833361\ntimestamp (java, UTC):              -1080-10-09T00:45:57.166639Z\ntimestamp (postgres, to_timestamp): 1081-10-09 01:45:57.166639+01 BC\ntimestamp (java with zone):         -1080-10-09T01:03:27.166639+00:17:30[CET]\nformat string:                      0:HH @ 1:HH12TH @ 2:fmHH24TH @ 3:FMMI @ 4:FMSSth @ 5:FMMSTH @ 6:USth @ 7:fmFF1th @ 8:FMFF2TH @ 9:FMFF3th @ 10:fmFF4 @ 11:fmFF5TH @ 12:FF6TH @ 13:fmSSSSS @ 14:SSSSTH @ 15:FMAMTH @ 16:FMam @ 17:fmPMTH @ 18:fmpmTH @ 19:fmA.M. @ 20:FMa.m.TH @ 21:FMP.M.TH @ 22:fmp.m.TH @ 23:FMY,YYYth @ 24:YYYY @ 25:YYYth @ 26:YY @ 27:Y @ 28:fmIYYY @ 29:FMIYY @ 30:fmIY @ 31:FMI @ 32:fmBCTH @ 33:FMbcth @ 34:FMAD @ 35:adTH @ 36:B.C.TH @ 37:b.c. @ 38:fmA.D. @ 39:fma.d.TH @ 40:FMMONTHth @ 41:FMMonth @ 42:fmmonthTH @ 43:fmMONTH @ 44:Mon @ 45:fmmon @ 46:fmMMTH @ 47:DAY @ 48:DayTH @ \n[truncated]\n\nIssue Reasons:\n\n[7.17] 2 consecutive failures in test test {tochar-generated.csv:70 TZH @ FMTZHTH}\n[7.17] 16 consecutive failures in step zulu8_java-matrix\n[7.17] 15 consecutive failures in step corretto11_java-matrix\n[7.17] 19 consecutive failures in step zulu11_java-matrix\n[7.17] 16 consecutive failures in step adoptopenjdk11_java-matrix\n[7.17] 66 failures in test test {tochar-generated.csv:70 TZH @ FMTZHTH} (9.1% fail rate in 727 executions)\n[7.17] 16 failures in step zulu8_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 15 failures in step corretto11_java-matrix (100.0% fail rate in 15 executions)\n[7.17] 19 failures in step zulu11_java-matrix (100.0% fail rate in 19 executions)\n[7.17] 16 failures in step adoptopenjdk11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 20 failures in pipeline elasticsearch-periodic (100.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-03", "closed_at": null, "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126204, "issue_title": "[CI] SharedClusterSnapshotRestoreIT testDeletionOfFailingToRecoverIndexShouldStopRestore failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21263 / part1\nelasticsearch-pull-request #66140 / part-1\nelasticsearch-intake #21259 / part1\nelasticsearch-pull-request #66140 / part-1\nelasticsearch-pull-request #66126 / part-1\nelasticsearch-pull-request #66078 / part-1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.snapshots.SharedClusterSnapshotRestoreIT.testDeletionOfFailingToRecoverIndexShouldStopRestore\" -Dtests.seed=127C6CFF1D1C565D -Dtests.locale=fr-BE -Dtests.timezone=Asia/Yakutsk -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.snapshots.SnapshotRestoreException: [default:test-repo:test-snap/ys7WgC4oQfaufdfgx_fumg] cannot restore index [test-idx] because an open index with same name already exists in the cluster. Either close or delete the existing index or restore the index under a different name by providing a rename pattern and replacement name\n\nIssue Reasons:\n\n[main] 6 failures in test testDeletionOfFailingToRecoverIndexShouldStopRestore (3.3% fail rate in 180 executions)\n[main] 2 failures in step part1 (9.5% fail rate in 21 executions)\n[main] 4 failures in step part-1 (5.0% fail rate in 80 executions)\n[main] 2 failures in pipeline elasticsearch-intake (9.5% fail rate in 21 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (3.8% fail rate in 80 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-03", "closed_at": "2025-04-09", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "medium-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126201, "issue_title": "Create CEF processor for ingest node", "issue_body": "Description:\nCurrently, many users rely on Beats and Logstash to parse and ingest CEF (Common Event Format) logs. However, there is an increasing demand for native CEF processing in Ingest Node, particularly for users who want to move away from Beats or Logstash and leverage the performance benefits and flexibility of Ingest Pipelines directly within Elasticsearch. Introducing a CEF processor within the Ingest Node would provide a significant advantage for users, simplifying log ingestion and processing workflows in Elasticsearch without the need for intermediate processing layers.\nBackground:\nCEF Logs and Usage:\nThe Common Event Format (CEF) is widely adopted for event logging, especially for security and network devices. It is commonly used in various industries for structured log data, which helps in centralizing log data, monitoring, and alerting.\nCurrent Workflows:\nUsers typically rely on Beats (such as Filebeat with the decode_cef pre processor ) or Logstash with custom configurations or specific parsers to handle CEF logs. These tools add overhead and complexity for those who prefer a more direct, centralized solution within Elasticsearch.\nThere is growing interest from users who want to bypass Beats or Logstash and utilize Ingest Pipelines for data transformation and enrichment directly within Elasticsearch.\nProposed Solution:\nIntroduce a new CEF processor within the Ingest Node to handle the parsing and transformation of CEF logs. This processor would allow users to:\n\nParse and extract fields from CEF logs into structured JSON format for use in Ingest Pipelines.\nEnable easy migration paths from Beats/Logstash-based processing to native Elasticsearch ingestion.\nMinimise reliance on external tools for users already leveraging Elasticsearch as their primary platform.\n\nKey Features:\nCEF Log Parsing:\nThe processor should be capable of parsing CEF-formatted logs and extracting key-value pairs from the log header, extension, and event sections.\nExample:\nA CEF log entry looks like this:\nCEF:0|Elastic|Vaporware|1.0.0-alpha|18|Web request|low|eventId=3457 requestMethod=POST slat=38.915 slong=-77.511 proto=TCP sourceServiceName=httpd requestContext=https://www.google.com src=89.160.20.156 spt=33876 dst=192.168.10.1 dpt=443 request=https://www.example.com/cart\n\nAfter parsing, the processor would extract structured fields such as:\n\n CEF parsed event \n{\n  \"observer\": {\n    \"product\": \"Vaporware\",\n    \"vendor\": \"Elastic\",\n    \"version\": \"1.0.0-alpha\"\n  },\n  \"cef\": {\n    \"severity\": \"low\",\n    \"name\": \"Web request\",\n    \"device\": {\n      \"product\": \"Vaporware\",\n      \"event_class_id\": 18,\n      \"vendor\": \"Elastic\",\n      \"version\": \"1.0.0-alpha\"\n    },\n    \"version\": 0\n  },\n  \"destination\": {\n    \"port\": 443,\n    \"ip\": \"192.168.10.1\"\n  },\n  \"http\": {\n    \"request\": {\n      \"referrer\": \"https://www.google.com\",\n      \"method\": \"POST\"\n    }\n  },\n  \"source\": {\n    \"geo\": {\n      \"location\": {\n        \"lon\": -77.511,\n        \"lat\": 38.915\n      }\n    },\n    \"port\": 33876,\n    \"service\": {\n      \"name\": \"httpd\"\n    },\n    \"ip\": \"89.160.20.156\"\n  },\n  \"message\": \"CEF:0|Elastic|Vaporware|1.0.0-alpha|18|Web request|low|eventId=3457 requestMethod=POST slat=38.915 slong=-77.511 proto=TCP sourceServiceName=httpd requestContext=https://www.google.com src=89.160.20.156 spt=33876 dst=192.168.10.1 dpt=443 request=https://www.example.com/cart\",\n  \"event\": {\n    \"code\": 18,\n    \"id\": 3457\n  },\n  \"url\": {\n    \"original\": \"https://www.example.com/cart\"\n  },\n  \"network\": {\n    \"transport\": \"TCP\"\n  },\n  \"_index\": \"index\",\n  \"_id\": \"id\",\n  \"_version\": 1,\n  \"ingestMetadata\": {\n    \"timestamp\": \"2025-04-03T11:04:49.532277Z\"\n  }\n}\n\nCompatibility with Ingest Pipelines:\nThe CEF processor will be fully compatible with existing Ingest Pipelines and should support chaining with other processors (e.g., geoip, date, or user-agent parsers).\nConfiguration Options:\nUsers should be able to specify a field containing the CEF log and customize the extraction rules for any additional fields (e.g., custom event fields) if needed.\nTesting and Validation:\nThe processor should come with comprehensive test cases, including various CEF log formats and edge cases, to ensure reliability and compatibility.\nUse Cases:\nSecurity Information and Event Management (SIEM):\nMany organizations use CEF logs for security monitoring and alerting. By processing these logs directly within Elasticsearch, security teams can quickly analyze and correlate security events.\nNetwork Device Monitoring:\nDevices such as firewalls, routers, and intrusion detection systems often generate CEF logs. A native processor would make it easier to ingest and analyze these logs directly in Elasticsearch.\nEnterprise Log Management:\nEnterprises using CEF for various system logs will benefit from having a native processor for seamless log ingestion into Elasticsearch for analysis and search.\nRelated Issues:", "created_at": "2025-04-03", "closed_at": null, "labels": [">enhancement", ":Data Management/Ingest Node", "Team:Data Management"], "State": "open", "Author": "bhapas"}
{"issue_number": 126200, "issue_title": "Vulnerabilities listed in official docker image (elastic/elasticsearch:8.17.4) on AWS console", "issue_body": "Hey,\nOur AWS console reported active vulnerabilities in the official docker image (elastic/elasticsearch:8.17.4) after we deployed it.\nCVE-2024-37371 - libgssapi-krb5-2, libk5crypto3 and 2 more\nCVE-2023-38545 - curl, libcurl4\nCVE-2022-48522 - perl\n", "created_at": "2025-04-03", "closed_at": "2025-04-03", "labels": ["needs:triage"], "State": "closed", "Author": "operinko"}
{"issue_number": 126199, "issue_title": "[DOCS v3] Break out ESQL functions into subpages", "issue_body": "Now that we are free from the old asciidoc constraints we can break this giant page out into digestible sub-pages. I've outlined what needs to be done, some perhaps can be done manually by writers, but other updates might need to be handled via the generated code.\nHere's what I think needs to be done:\n1\n\n Remove original includes in monolith page\n\n2\n\n Create new files for dedicated function pages in a new functions-operators directory\n\n New subpage files:\n\n Create a new file in the functions-operators directory\n Add an include statement that references the snippet file\n In the snippet file (being included):\n\n Identify the existing heading and its custom anchor\n Remove this heading from the snippet file to avoid duplication\n\n\n Add the heading extracted from the snippet file, preserving its custom anchor, to the new subpage file\n\n Convert this heading to an H1\n\n\n\n\n\n\n\n3\n\n Update the TOC file\n\n Update the toc.yml to include the new files as children of the main functions-operators page\n\n\n\ndiff --git a/docs/reference/query-languages/toc.yml b/docs/reference/query-languages/toc.yml\nindex deadd649b91..069468133f9 100644\n--- a/docs/reference/query-languages/toc.yml\n+++ b/docs/reference/query-languages/toc.yml\n@@ -87,6 +87,19 @@ toc:\n       - file: esql/esql-syntax.md\n       - file: esql/esql-commands.md\n       - file: esql/esql-functions-operators.md\n+        children:\n+          - file: esql/functions-operators/aggregation-functions.md\n+          - file: esql/functions-operators/grouping-functions.md\n+          - file: esql/functions-operators/conditional-functions-and-expressions.md\n+          - file: esql/functions-operators/date-time-functions.md\n+          - file: esql/functions-operators/ip-functions.md\n+          - file: esql/functions-operators/math-functions.md\n+          - file: esql/functions-operators/search-functions.md\n+          - file: esql/functions-operators/spatial-functions.md\n+          - file: esql/functions-operators/string-functions.md\n+          - file: esql/functions-operators/type-conversion-functions.md\n+          - file: esql/functions-operators/mv-functions.md\n+          - file: esql/functions-operators/operators.md\n       - file: esql/esql-metadata-fields.md\n       - file: esql/esql-multivalued-fields.md\n       - file: esql/esql-process-data-with-dissect-grok.md\n4\n\n Fix references in lists files\n\n Update all references in list files to point to the correct subpages instead of the original monolithic file\n\n\n\n5\n\n Fix other function references\n\n Update references in function descriptions and parameter files to point to the appropriate new function-specific files\n\n\n", "created_at": "2025-04-03", "closed_at": "2025-04-10", "labels": [">docs", "Team:Docs", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "leemthompo"}
{"issue_number": 126198, "issue_title": "ESQL: only 400 response on IllegalArgumentException in the compute engine", "issue_body": "To reproduce: Check out main before #125764 was merged. Run a local ES instance via ./gradlew run and ingest the csv test data:\n./gradlew :x-pack:plugin:esql:qa:testFixtures:loadCsvSpecData --args=\"http://elastic-admin:elastic-password@localhost:9200\"\n\nRun the following query (until it errors, it's slightly non-deterministic):\nfrom *    \n| enrich languages_policy on author.keyword\n| sort book_no\n| limit 1\n\nThis gives a 400 when it errors. Running with error_trace shows that it's due to a mismatch in data types (originally from a wrong layout):\n Expected [BYTES_REF] but was [INT]\n...\nCaused by: java.lang.IllegalArgumentException: Expected [BYTES_REF] but was [INT]\n  \\tat org.elasticsearch.compute.operator.topn.ValueExtractor.extractorFor(ValueExtractor.java:30)\n  \\tat org.elasticsearch.compute.operator.topn.TopNOperator$RowFiller.<init>(TopNOperator.java:150)\n  \\tat org.elasticsearch.compute.operator.topn.TopNOperator.addInput(TopNOperator.java:371)\n  \\tat org.elasticsearch.compute.operator.Driver.runSingleLoopIteration(Driver.java:276)\n...\n\nI believe this IAE should've triggered a 500 response; returning 400 can obscure a bug in the compute engine.", "created_at": "2025-04-03", "closed_at": "2025-04-07", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "alex-spies"}
{"issue_number": 126196, "issue_title": "ES|QL operator statuses in profiling output missing a proper discriminant field", "issue_body": "When we ask for profiling information in ES|QL, the output contains operator statuses which are specific to each operator type (a dozen implementations at the time of writing).\nIn the outpout, the operator field is set using operator.toString() (see here and here), which contains the operator class name and its parameters, e.g.:\n        \"operators\": [\n          {\n            \"operator\": \"LuceneSourceOperator[maxPageSize = 512, remainingDocs = 993]\",\n            \"status\": {\n              \"processed_slices\": 1,\n              ...\n            }\n          },\n          {\n            \"operator\": \"ValuesSourceReaderOperator[fields = [11 fields]]\",\n            \"status\": {\n              \"readers_built\": {\n                \"_action.keyword:column_at_a_time:BlockDocValuesReader.SingletonOrdinals\": 1,\n                \"_action.keyword:column_at_a_time:constant_nulls\": 4,\n                ...\n\nThis makes operator unusable as a discriminant to determine how to parse status, with several consequences:\n\nstatus cannot be represented in the API specification. It's just arbitrary JSON.\nit makes it unnecessarily hard to build automated tools that will monitor query performance, since the operator value has to be processed to determine the operator type.\n\nPossible solution\nUse only the class name as the value for operator, and move parameter values either inside status or as a sibling parameters property.", "created_at": "2025-04-03", "closed_at": "2025-04-03", "labels": ["Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "swallez"}
{"issue_number": 126192, "issue_title": "Master node disconnects from joining node too early during re-election", "issue_body": "Since #92755 the master node will report a WARN log if a node leaves the cluster and then rejoins without restarting, including the reason disconnected if the node left the cluster because a connection from the master node was closed. This normally indicates an unstable network. However, this can also happen during a messy election if the following (improbable!) sequence of events occur:\n\nmaster node M wins election in term T and publishes cluster state version V in this term\nanother node N sends a join request to M\nM's Coordinator#handleJoinRequest opens a connection to N for the duration of the join\nM publishes cluster state version (V+1) in term T adding N to the cluster\nM accepts its own publication and writes cluster state version (V+1) to disk\nM moves to term (T+1), failing the publication in term T before it commits\nM wins another election in term (T+1) and publishes cluster state version (V+2) in this term; this state is based on the on-disk state with version (V+1) so it includes N in the cluster\nthe failure to commit state version (V+1) completes the waiting join listener which closes the connection opened by handleJoinRequest\nthe connection closure enqueues a node-left task for N which is published as state version (V+3)\nN rejoins the cluster having not restarted, triggering the warning.\n\nThere's various places we could fix this, maybe just suppressing the warning, but the fundamental problem is IMO that we drop the outbound connection to a node while it still might be joining the cluster (in the sense that we haven't committed a state which excludes it). The failure of the first node-join publication does not imply that the join failed, because it may be retried and eventually succeed:\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/cluster/ClusterStateTaskListener.java\n\n\n        Lines 20 to 22\n      in\n      a59c182\n\n\n\n\n\n\n      * state publication fails then this method receives a {@link FailedToCommitClusterStateException}. If publication fails then a new \n\n\n\n      * master is elected and the update might or might not take effect, depending on whether or not the newly-elected master accepted the \n\n\n\n      * published state that failed to be committed. \n\n\n\n\n", "created_at": "2025-04-03", "closed_at": null, "labels": [">bug", ":Distributed Coordination/Cluster Coordination", "Team:Distributed Coordination"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 126180, "issue_title": "Multi-target wildcard expansion issue in PUT request.", "issue_body": "Hello,\nOut of the following 4 commands, the last command fails in Elasticsearch v8.17.3. It looks like it should succeed as well.\nThis command has '*' after my-index-name and it works.\ncurl -X GET \"https://192.168.0.1:9200/my-index-name*,-*-off/_search\"\nThis command does not have '*' after my-index-name and it works.\ncurl -X GET \"https://192.168.0.1:9200/my-index-name,-*-off/_search\"\nThis command has '*' after my-index-name and it works.\ncurl -X PUT \"https://192.168.0.1:9200/my-index-name*,-*-off/_settings\" -H 'Content-Type: application/json' -d '{\"index\":{\"refresh_interval\":\"1s\"}}'\nThis command does not have '*' after my-index-name and it FAILS,\ncurl -X PUT \"https://192.168.0.1:9200/my-index-name,-*-off/_settings\" -H 'Content-Type: application/json' -d '{\"index\":{\"refresh_interval\":\"1s\"}}'\nand displays the following error:\n{\"error\":{\"root_cause\":[{\"type\":\"index_not_found_exception\",\"reason\":\"no such index [-*-off]\",\"index_uuid\":\"_na_\",\"index\":\"-*-off\"}],\"type\":\"index_not_found_exception\",\"reason\":\"no such index [-*-off]\",\"index_uuid\":\"_na_\",\"index\":\"-*-off\"},\"status\":404}\nThank you,\nAlex.", "created_at": "2025-04-03", "closed_at": "2025-04-04", "labels": ["needs:triage"], "State": "closed", "Author": "iloveai-git"}
{"issue_number": 126176, "issue_title": "[CI] PolicyUtilsTests testFormatFilesEntitlement failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7440 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7433 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7426 / windows-2022_checkpart1_platform-support-windows\nelasticsearch-periodic-platform-support #7419 / windows-2022_checkpart1_platform-support-windows\n\nReproduction Line:\ngradlew \":libs:entitlement:test\" --tests \"org.elasticsearch.entitlement.runtime.policy.PolicyUtilsTests.testFormatFilesEntitlement\" -Dtests.seed=21501B919A8CD53B -Dtests.locale=saq-KE -Dtests.timezone=PST -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: iterable with items [\"files [READ_WRITE] \\\\a\\\\b\", \"files [READ] <DATA>/c/d\", \"files [READ] <DATA>/<setting>\"] in any order\n     but: not matched: \"files [READ_WRITE] C:\\\\a\\\\b\"\n\nIssue Reasons:\n\n[9.0] 4 consecutive failures in step windows-2022_checkpart1_platform-support-windows\n[9.0] 4 failures in test testFormatFilesEntitlement (4.8% fail rate in 84 executions)\n[9.0] 4 failures in step windows-2022_checkpart1_platform-support-windows (100.0% fail rate in 4 executions)\n[9.0] 4 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-02", "closed_at": "2025-04-03", "labels": [">test-failure", "Team:Core/Infra", "low-risk", ":Core/Infra/Entitlements"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126174, "issue_title": "[CI] TsdbDocValueBwcTests testMixedIndex failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7398 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7398 / openjdk21_checkpart1_java-fips-matrix\nelasticsearch-periodic #7398 / openjdk23_entitlements_false_checkpart1_java-matrix\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.codec.tsdb.TsdbDocValueBwcTests.testMixedIndex\" -Dtests.seed=3162DABFE3159420 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=hu-HU -Dtests.timezone=Africa/Bamako -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.security.AccessControlException: access denied (\"java.lang.reflect.ReflectPermission\" \"suppressAccessChecks\")\n\nIssue Reasons:\n\n[main] 3 consecutive failures in test testMixedIndex\n[main] 3 failures in test testMixedIndex (3.6% fail rate in 84 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-02", "closed_at": "2025-04-03", "labels": [">test-failure", "Team:StorageEngine", "needs:risk", ":StorageEngine/Codec"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126156, "issue_title": "[ML] Bedrock Cohere does not support InputType, Truncate", "issue_body": "This currently returns an error:\nPUT _inference/text_embedding/multilingual-cohere-v3-search\n{\n  \"service\": \"amazonbedrock\",\n  \"service_settings\": {\n    \"access_key\": \"***\",\n    \"secret_key\": \"***\",\n    \"region\": \"us-east-1\",\n    \"provider\": \"Cohere\",\n    \"model\": \"cohere.embed-multilingual-v3\"\n  },\n  \"task_settings\": {\n    \"truncate\": \"START\"\n  }\n}\n\nPOST _inference/text_embedding/multilingual-cohere-v3-search\n{\n  \"input\": \"The sky above the port was the color of television tuned to a dead channel.\",\n  \"input_type\": \"search\"\n}\n\nThough AWS supports it: https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-embed.html", "created_at": "2025-04-02", "closed_at": "2025-04-09", "labels": [">enhancement", ":ml", "Team:ML", "v8.19.0", "v9.1.0"], "State": "closed", "Author": "prwhelan"}
{"issue_number": 126155, "issue_title": "synthetic_source_keep: \"arrays\" overtriggers for fields that parse arrays", "issue_body": "This can be reproduced by this test https://github.com/elastic/elasticsearch/blob/main/server/src/test/java/org/elasticsearch/index/mapper/blockloader/GeoPointFieldBlockLoaderTests.java#L77. geo_point fields have custom handling of arrays and therefore synthetic_source_keep: \"arrays\" should not apply to it (arrays have special meaning so we don't know how to exactly preserve them). However we put values of geo_point field in _ignored_source in some cases.", "created_at": "2025-04-02", "closed_at": null, "labels": [">enhancement", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "open", "Author": "lkts"}
{"issue_number": 126148, "issue_title": "[ML] Prevent AD jobs from being stuck in the \"opening\" state", "issue_body": "Elasticsearch Version\n8.18\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nWe have seen that during a rolling update ML anomaly detection jobs can get stuck in the OPENING state because the master node was temporarily unavailable when the job tried to update its state to OPENED. The number of jobs that can be in the OPENING state simultaneously on a single ML node is limited by the xpack.node_concurrent_job_allocations setting which has a default value of 2. If 2 jobs are stuck in the OPENING state this leads to a situation where vacated jobs cannot be reopened after the cluster upgrade.\nIn this situation the fix is to force close the jobs stuck OPENING or increase the value of xpack.node_concurrent_job_allocations to allow more jobs to open. This requires user intervention, a better solution would be that Elasticsearch detects jobs stuck in the OPENING state for an extended period of time and attempts to fix them with one of two alternatives:\n\nClose and reopen the job to fix the problem automatically.\nStop the job or it into the failed state then continue opening the other jobs.\n\nWe need to design and implement a solution that requires minimal user intervention while providing user feedback about the state of the job migration.\nSteps to Reproduce\nCreate a large number of anomaly detection jobs and perform a rolling upgrade\nLogs (if relevant)\nNo response", "created_at": "2025-04-02", "closed_at": null, "labels": [">bug", ":ml", "Team:ML"], "State": "open", "Author": "davidkyle"}
{"issue_number": 126145, "issue_title": "[CI] DockerTests test023InstallPluginUsingConfigFile failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #7117 / ubuntu-2204_packaging-tests-unix\nelasticsearch-pull-request #66262 / ubuntu-2004_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-pull-request #66262 / rhel-8_destructivedistrotest.docker_packaging-tests-unix-sample\nelasticsearch-periodic-packaging #7096 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #7075 / ubuntu-2204_packaging-tests-unix\n\nReproduction Line:\nnull\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\n    PID TTY      STAT   TIME COMMAND\n      1 ?        Ss     0:00 /bin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper\n      7 ?        Sl     0:28 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Dhttp.proxyHost=example.org -Dhttp.proxyPort=9999 -Dhttps.proxyHost=example.org -Dhttps.proxyPort=9999 -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -Des.java.type=bundled JDK -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n    344 pts/0    Rs+    0:00 ps ax\n\nStdout:\nCreated elasticsearch keystore in /usr/share/elasticsearch/config/elasticsearch.keystore\n-> Installing analysis-icu\n-> Downloadi\n[truncated]\n\nIssue Reasons:\n\n[main] 5 failures in test test023InstallPluginUsingConfigFile (0.7% fail rate in 763 executions)\n[main] 3 failures in step ubuntu-2204_packaging-tests-unix (42.9% fail rate in 7 executions)\n[main] 3 failures in pipeline elasticsearch-periodic-packaging (42.9% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-02", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126139, "issue_title": "[CI] GenerativeIT test failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7413 / almalinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7413 / rocky-9_platform-support-unix\nelasticsearch-pull-request #65917 / part-3\nelasticsearch-pull-request #65913 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:single-node:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.qa.single_node.GenerativeIT.test\" -Dtests.seed=CFE3FB5D9710EFCD -Dtests.locale=ha-GH -Dtests.timezone=Asia/Brunei -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: query: from languages_lookup_non_unique_ke*,no_mapping_sample_data* | limit 9180 | eval  `language_code` = -2657316569294869309, jtdeY = -706707837, country = 850667825, `country.keyword` = -5713135059288987047, country.keyword = false, language_code = 6745982913013275940, zod = -3119129993057472970, rQNNd = 769646083, language_code = \"vvdHygIqHqV\", language_name = -1851577784 | sort language_code ASC NULLS FIRST, jtdeY ASC NULLS LAST, language_name DESC NULLS FIRST| rename jtdeY as language_code | lookup join languages_lookup on language_code | rename `country` AS uGhif, language_code AS `rQNNd` | mv_expand `country.keyword`| rename language_name as message | lookup join message_types_lookup on message | rename `uGhif` AS ectad | dissect message \"%{zod}\" | dissect message \"%{xSULx} %{type}\"| rename zod as message | lookup join message_types_lookup on message | mv_expand country.keyword | mv_expand `message` | grok message \"%{WORD:SPJey} %{WORD:kgyEp} %{WORD:z\n[truncated]\n\nIssue Reasons:\n\n[main] 4 failures in test test (5.1% fail rate in 79 executions)\n[main] 2 failures in step part-3 (4.9% fail rate in 41 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (4.9% fail rate in 41 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-02", "closed_at": "2025-04-08", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126130, "issue_title": "[CI] RBACEngineTests testBuildUserPrivilegeResponseCombinesIndexPrivileges failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7391 / release-tests\nelasticsearch-pull-request #65971 / checkpart4_release-tests\nelasticsearch-pull-request #65945 / checkpart4_release-tests\nelasticsearch-pull-request #65867 / checkpart4_release-tests\nelasticsearch-pull-request #65867 / checkpart4_release-tests\nelasticsearch-periodic #7384 / release-tests\nelasticsearch-pull-request #65866 / checkpart4_release-tests\nelasticsearch-periodic #7377 / release-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:test\" --tests \"org.elasticsearch.xpack.security.authz.RBACEngineTests.testBuildUserPrivilegeResponseCombinesIndexPrivileges\" -Dtests.seed=205E45A120220093 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=saq -Dtests.timezone=Asia/Tomsk -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IllegalArgumentException: unknown index privilege [read_failure_store]. a privilege must be either one of the predefined fixed indices privileges [none=[none],create_doc=[create_doc],create=[create],auto_configure=[auto_configure],create_index=[create_index],delete=[delete],delete_index=[delete_index],index=[index],maintenance=[maintenance],manage_data_stream_lifecycle=[manage_data_stream_lifecycle],manage_follow_index=[manage_follow_index],manage_ilm=[manage_ilm],manage_leader_index=[manage_leader_index],monitor=[monitor],view_index_metadata=[view_index_metadata],cross_cluster_replication=[cross_cluster_replication],cross_cluster_replication_internal=[cross_cluster_replication_internal],manage=[manage],read=[read],read_cross_cluster=[read_cross_cluster],write=[write],all=[all]] or a pattern over one of the available index actions\n\nIssue Reasons:\n\n[main] 3 consecutive failures in step release-tests\n[main] 5 consecutive failures in step checkpart4_release-tests\n[main] 8 failures in test testBuildUserPrivilegeResponseCombinesIndexPrivileges (4.0% fail rate in 201 executions)\n[main] 3 failures in step release-tests (100.0% fail rate in 3 executions)\n[main] 5 failures in step checkpart4_release-tests (100.0% fail rate in 5 executions)\n[main] 3 failures in pipeline elasticsearch-periodic (100.0% fail rate in 3 executions)\n[main] 4 failures in pipeline elasticsearch-pull-request (4.5% fail rate in 89 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-02", "closed_at": "2025-04-03", "labels": [">test-failure", ":Security/Authorization", "Team:Security", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126124, "issue_title": "[CI] EnterpriseGeoIpDownloaderIT testEnterpriseDownloaderTask failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7814 / ubuntu-1804_platform-support-unix\nelasticsearch-periodic-platform-support #7748 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #7736 / amazonlinux-2_platform-support-aws\nelasticsearch-periodic #7690 / graalvm-ce17_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7700 / almalinux-9_platform-support-unix\n\nReproduction Line:\n./gradlew \":modules:ingest-geoip:internalClusterTest\" --tests \"org.elasticsearch.ingest.geoip.EnterpriseGeoIpDownloaderIT.testEnterpriseDownloaderTask\" -Dtests.seed=51C8E3295BA6FBED -Dtests.locale=blo-BJ -Dtests.timezone=Pacific/Auckland -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <2>\n     but: was <1>\n\nIssue Reasons:\n\n[8.18] 5 failures in test testEnterpriseDownloaderTask (0.7% fail rate in 683 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-02", "closed_at": null, "labels": [">test-failure", ":Data Management/Ingest Node", "Team:Data Management", "medium-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126121, "issue_title": "[CI] KeywordFieldBlockLoaderTests testBlockLoader {preference=Params[syntheticSource=false, preference=DOC_VALUES]} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7391 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7391 / concurrent-search-tests\nelasticsearch-periodic #7391 / openjdk24_entitlements_true_checkpart1_java-matrix\nelasticsearch-pull-request #65943 / part-1\nelasticsearch-intake #21189 / part1\nelasticsearch-pull-request #65936 / part-1\nelasticsearch-pull-request #65927 / part-1\nelasticsearch-pull-request #65927 / part-1\nelasticsearch-pull-request #65919 / part-1-fips\nelasticsearch-pull-request #65905 / part-1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.blockloader.KeywordFieldBlockLoaderTests.testBlockLoader {preference=Params[syntheticSource=false, preference=DOC_VALUES]}\" -Dtests.seed=F9B9BC7C3CF81C55 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=en-GI -Dtests.timezone=Australia/Darwin -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<[[65 4b 65 5a 57 6a 6f 54 4a 59 48], [54 53 52 4b 66 72 52 57 77 6e 59 4b 4b 41 6c 47 49 47 48 73 53 41 47 4c 46 77 57 77 4c 4f 61 65 46 6f 4f 4f 74 4c 70 6f 54 41], [56 76 70 78 73 4a 6a 70 48 78 66 56 6f 54 61 77 6d 74 62 6d 41 6a 66 53 58 70 72 56 50 48 56 57 77 6b 44]]> but was:<[[54 53 52 4b 66 72 52 57 77 6e 59 4b 4b 41 6c 47 49 47 48 73 53 41 47 4c 46 77 57 77 4c 4f 61 65 46 6f 4f 4f 74 4c 70 6f 54 41], [56 76 70 78 73 4a 6a 70 48 78 66 56 6f 54 61 77 6d 74 62 6d 41 6a 66 53 58 70 72 56 50 48 56 57 77 6b 44], [65 4b 65 5a 57 6a 6f 54 4a 59 48]]>\n\nIssue Reasons:\n\n[main] 2 consecutive failures in step checkpart1_release-tests\n[main] 15 failures in test testBlockLoader {preference=Params[syntheticSource=false, preference=DOC_VALUES]} (13.6% fail rate in 110 executions)\n[main] 7 failures in step part-1 (11.7% fail rate in 60 executions)\n[main] 2 failures in step part1 (12.5% fail rate in 16 executions)\n[main] 2 failures in step checkpart1_release-tests (100.0% fail rate in 2 executions)\n[main] 8 failures in pipeline elasticsearch-pull-request (14.5% fail rate in 55 executions)\n[main] 2 failures in pipeline elasticsearch-intake (12.5% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-02", "closed_at": "2025-04-02", "labels": [">test-failure", "Team:StorageEngine", ":StorageEngine/Mapping", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126120, "issue_title": "Remove remaining asciidoc files from project", "issue_body": "We've converted docs over to markdown, but some asciidoc files remain. This is an issue to ensure they are removed:\n\n Versions.asciidoc\n index file in docs/community-clients\n java-rest docs\n", "created_at": "2025-04-02", "closed_at": null, "labels": [">docs", ":Delivery/Build", "Team:Docs", "Team:Delivery"], "State": "open", "Author": "rjernst"}
{"issue_number": 126118, "issue_title": "[CI] GeoDistanceIT testDistanceSortingWithUnmappedField failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21186 / part1\nelasticsearch-pull-request #65474 / part-1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.search.sort.GeoDistanceIT.testDistanceSortingWithUnmappedField\" -Dtests.seed=579B109C4F710F23 -Dtests.locale=vai-Vaii -Dtests.timezone=Africa/Lagos -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.action.search.SearchPhaseExecutionException: \n\nIssue Reasons:\n\n[main] 2 failures in test testDistanceSortingWithUnmappedField (0.4% fail rate in 450 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-02", "closed_at": "2025-04-10", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126111, "issue_title": "Optimize segment merging in the tsdb doc value codec", "issue_body": "The doc values codec iterates a few times over the doc value instance that needs to be written to disk. In case when merging and index sorting is enabled, this is much more expensive, as each time the doc values instance is iterated a merge sort is performed (in order to get the doc ids from different segments in order of index sorting).\nThere are several reasons why the doc value instance is iterated multiple times:\n\nTo compute stats (num values, number of docs with value) required for writing values to disk.\nTo write bitset that indicate which documents have a value. (indexed disi, jump table)\nTo write the actual values to disk.\nTo write the addresses to disk (in case docs have multiple values)\n\nThis applies for numeric doc values, but also for the ordinals of sorted (set) doc values.\nThe following changes should be made to address this performance issue:\n\n Change the tsdb doc values format to allows store numDocsWithField as metadata and store jump table after the values (#125933).\n Reuse statistics used during merging from the metadata instead of computing it on the fly by creating a merged SortedNumericDocValues  (#125403).\n Keep track of documents with value while iterating over values and use that to write jump table later (#126499)\n Keep track of docValueCount while iterating over values and write to later for the address offsets. (#126732)\n Optimize merging binary doc value. By accumulating offsets and disi, so that we iterate once. (#127278)\n", "created_at": "2025-04-02", "closed_at": null, "labels": ["Meta", "Team:StorageEngine", ":StorageEngine/Codec"], "State": "open", "Author": "martijnvg"}
{"issue_number": 126088, "issue_title": "[CI] KeywordFieldBlockLoaderTests testBlockLoaderForFieldInObject {preference=Params[syntheticSource=false, preference=DOC_VALUES]} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21170 / part1\nelasticsearch-pull-request #65853 / part-1\nelasticsearch-intake #21168 / part1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.mapper.blockloader.KeywordFieldBlockLoaderTests.testBlockLoaderForFieldInObject {preference=Params[syntheticSource=false, preference=DOC_VALUES]}\" -Dtests.seed=EE69191AC8D6B510 -Dtests.locale=en-VC -Dtests.timezone=US/Aleutian -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nYes\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<[[56 51 6c 68 53 44 6e 71 65 54 47 61 48 6a 59 4e 56 52 44 70 47 4b 48 56 68 50 4e 59 64 48 42 6e 69 45 59 74 62 49 64 56 48 58 73 6e 79 6d], [42 4d 45 6b 4c 4b 42 42 51 4f 58 64 6a 7a 41], [67 53 6d 52 4c 6d 79 45 79 50 7a 74 6c 4c 5a 62 61 52 78 65 67 79 52 70 50 56 46 77 75 7a 47 50 64 67 6e 75 4b 5a 76 59 75 41 67 4a 63 77 4b 53 51], [54 72 51 47 78 72 74 53 6e 56 7a 68 6b 53 4a 69 6e 6a 75 44 77 50 50 44 78 48 74 52 67 4a 6e 52 78 6d 76 53 48 6b 69 50 64 51 41 46 59 68 52 6c], [41 41 57 6d 52 66 74 6d 6e 73 49 51 61 76 70 63 79 47 44 66 7a 69 4c 6e 4b 6b 50 64 4a 4a 59 76], [69 76 75 4f 45 77 55 7a 45 4e 65 4c 63 71 67 79 43 46 7a 44 78 74 52 58 63 4a 41], [73 45 6c 50 51 78 79 4f 6b 58 61 7a 69 52 79 63], [6b 5a 52 78 73 42 50 45 50 47 67 59 69 62 41 5a 75 5a 51 55 4c 59 67 42 77 50 43 4e 63 77], [], [56 67 5a 75 72 4f 72 50 52 45 73 77 6f 57 74 52 71 4a 63 42 5a 61 42 6c 76 75 6b], [6b 72 6e 78 64 47 57 56 72 4e 7a 41 45 53 51 72 50 74 4c], [7\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test testBlockLoaderForFieldInObject {preference=Params[syntheticSource=false, preference=DOC_VALUES]} (18.8% fail rate in 16 executions)\n[main] 2 failures in step part1 (33.3% fail rate in 6 executions)\n[main] 2 failures in pipeline elasticsearch-intake (33.3% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-02", "closed_at": "2025-04-02", "labels": [">test-failure", "Team:StorageEngine", ":StorageEngine/Mapping", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126086, "issue_title": "[CI] VectorTileRestIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7438 / release-tests\nelasticsearch-periodic #7431 / release-tests\nelasticsearch-periodic #7424 / release-tests\nelasticsearch-periodic #7417 / release-tests\nelasticsearch-periodic #7410 / release-tests\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 5 consecutive failures in step release-tests\n[8.x] 5 failures in class org.elasticsearch.xpack.vectortile.VectorTileRestIT (2.5% fail rate in 199 executions)\n[8.x] 5 failures in step release-tests (100.0% fail rate in 5 executions)\n[8.x] 5 failures in pipeline elasticsearch-periodic (100.0% fail rate in 5 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-01", "closed_at": "2025-04-04", "labels": [":Analytics/Geo", ">test-failure", "Team:Analytics", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126085, "issue_title": "[CI] CCSDuelIT testTerminateAfter failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7811 / openjdk23_8.19.0_java-matrix-bwc\nelasticsearch-periodic #7703 / openjdk17_8.19.0_java-matrix-bwc\n\nReproduction Line:\n./gradlew \":qa:multi-cluster-search:v8.19.0#multi-cluster\" -Dtests.class=\"org.elasticsearch.search.CCSDuelIT\" -Dtests.method=\"testTerminateAfter\" -Dtests.seed=6EBA17E041424AB4 -Dtests.bwc=true -Dtests.locale=en-IL -Dtests.timezone=SystemV/PST8PDT -Druntime.java=23\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Comparing sync_search minimizeRoundTrip vs. fanOut. Didn't match expected value. /terminated_early: the elements don't match: [true] != [false].\nFull diff                      _clusters: \n                         details: \n                           (local): \n                             _shards: \n                                failed: same [0]\n                               skipped: same [0]\n                            successful: same [2]\n                                 total: same [2]\n                             indices: same [ccs_duel_index]\n                              status: same [successful]\n                           timed_out: same [false]\n                                took: same [-1]\n                 my_remote_cluster: \n                             _shards: \n                                failed: same [0]\n                               skipped: same [0]\n                            successful: same [5]\n                                 total: s\n[truncated]\n\nIssue Reasons:\n\n[8.x] 2 failures in test testTerminateAfter (0.5% fail rate in 430 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (10.5% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-01", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 126084, "issue_title": "[CI] MultiClusterSpecIT test {range.Invalid boundaries date} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7389 / 8.13.4_bwc\nelasticsearch-pull-request #65912 / 8.13.4_bwc\nelasticsearch-periodic #7375 / 8.13.4_bwc\nelasticsearch-periodic #7368 / 8.13.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:multi-clusters:v8.13.4#oldToNew\" -Dtests.class=\"org.elasticsearch.xpack.esql.ccq.MultiClusterSpecIT\" -Dtests.method=\"test {range.Invalid boundaries date}\" -Dtests.seed=3BD94163188023E1 -Dtests.bwc=true -Dtests.locale=kea-Latn-CV -Dtests.timezone=Antarctica/Macquarie -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected an empty list\n0: <unexpected> but was \"Line 2:21: evaluation of [TO_DATETIME(\\\\\\\"2025-01-01\\\\\\\")] failed, treating result as null. Only first 20 failures recorded.\"\n1: <unexpected> but was \"Line 2:21: java.lang.IllegalArgumentException: failed to parse date field [2025-01-01] with format [yyyy-MM-dd'T'HH:mm:ss.SSS'Z']\"\n2: <unexpected> but was \"Line 2:63: evaluation of [TO_DATETIME(\\\\\\\"2020-01-01\\\\\\\")] failed, treating result as null. Only first 20 failures recorded.\"\n3: <unexpected> but was \"Line 2:63: java.lang.IllegalArgumentException: failed to parse date field [2020-01-01] with format [yyyy-MM-dd'T'HH:mm:ss.SSS'Z']\"\n\nIssue Reasons:\n\n[8.x] 4 failures in test test {range.Invalid boundaries date} (0.7% fail rate in 566 executions)\n[8.x] 4 failures in step 8.13.4_bwc (80.0% fail rate in 5 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic (100.0% fail rate in 3 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-01", "closed_at": "2025-04-04", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126083, "issue_title": "[CI] MixedClusterEsqlSpecIT test {range.Invalid boundaries date SYNC} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7375 / 8.11.4_bwc\nelasticsearch-pull-request #65757 / 8.13.4_bwc\nelasticsearch-pull-request #65757 / 8.12.2_bwc\nelasticsearch-pull-request #65757 / 8.11.4_bwc\nelasticsearch-periodic #7368 / 8.12.2_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:qa:server:mixed-cluster:v8.11.4#javaRestTest\" -Dtests.class=\"org.elasticsearch.xpack.esql.qa.mixed.MixedClusterEsqlSpecIT\" -Dtests.method=\"test {range.Invalid boundaries date SYNC}\" -Dtests.seed=61E4DACB6DB37410 -Dtests.bwc=true -Dtests.locale=ca-ES -Dtests.timezone=Etc/GMT-4 -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Expected an empty list\n0: <unexpected> but was \"Line 2:21: evaluation of [TO_DATETIME(\\\\\\\"2025-01-01\\\\\\\")] failed, treating result as null. Only first 20 failures recorded.\"\n1: <unexpected> but was \"Line 2:21: java.lang.IllegalArgumentException: failed to parse date field [2025-01-01] with format [yyyy-MM-dd'T'HH:mm:ss.SSS'Z']\"\n2: <unexpected> but was \"Line 2:63: evaluation of [TO_DATETIME(\\\\\\\"2020-01-01\\\\\\\")] failed, treating result as null. Only first 20 failures recorded.\"\n3: <unexpected> but was \"Line 2:63: java.lang.IllegalArgumentException: failed to parse date field [2020-01-01] with format [yyyy-MM-dd'T'HH:mm:ss.SSS'Z']\"\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step 8.11.4_bwc\n[8.x] 5 failures in test test {range.Invalid boundaries date SYNC} (3.8% fail rate in 130 executions)\n[8.x] 2 failures in step 8.12.2_bwc (66.7% fail rate in 3 executions)\n[8.x] 2 failures in step 8.11.4_bwc (66.7% fail rate in 3 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-01", "closed_at": "2025-04-04", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126082, "issue_title": "Optimize block loader for `geo_point` in case of synthetic _source", "issue_body": "Currently doc_values are used in block loader only when FieldExtractPreference is DOC_VALUES https://github.com/elastic/elasticsearch/blob/main/server/src/main/java/org/elasticsearch/index/mapper/GeoPointFieldMapper.java#L536. With synthetic source, block loader from source will be used. However if doc_values are present, synthetic source will be built from those same doc_values. We should directly use doc_values in this case instead of the _source indirection.", "created_at": "2025-04-01", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL", "Team:StorageEngine", ":StorageEngine/Mapping"], "State": "open", "Author": "lkts"}
{"issue_number": 126071, "issue_title": "Rules Retriever Failing with `Unknown NamedWriteable`", "issue_body": "Elasticsearch Version\n8.17.4\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nCloud\nProblem Description\nWhen using the rules retriever, the query will fail on at least one shard. It seems to be inconsistent and will switch between which shards fail (when there is more than one on the searched index) and will sometimes apply the rules scoring and sometimes will not.\nSteps to Reproduce\nThis appears to be reproducible with a brand new rules set and a brand new content index.\nRules:\nPUT _query_rules/my-rules\n{\n  \"rules\": [\n    {\n      \"rule_id\": \"1\",\n      \"type\": \"pinned\",\n      \"actions\": {\n        \"ids\": [\"6759e60f09a922ba4dbac10d\"]\n      },\n      \"criteria\": [\n        {\n          \"type\": \"contains\",\n          \"values\": [\"search\"],\n          \"metadata\": \"user_query\"\n        }\n      ]\n    }\n  ]\n}\n\nQuery:\nPOST search-es-blog/_search?error_trace=true&explain=true\n{\n  \"from\": 0,\n  \"size\": 10,\n  \"retriever\": {\n    \"rule\": {\n      \"rank_window_size\": 10000,\n      \"match_criteria\": {\n        \"user_query\": \"search\"\n      },\n      \"ruleset_ids\": [\n        \"my-rules\"\n      ],\n      \"retriever\": {\n        \"standard\": {\n          \"query\": {\n            \"match_all\": {}\n          }\n        }\n      }\n    }\n  },\n  \"_source\": false\n}\n\nMy index was web crawling the Elastic blog, but the actual content of the index does not seem to matter.\nLogs (if relevant)\nStack Trace:\norg.elasticsearch.ElasticsearchException$1: Unknown NamedWriteable [org.elasticsearch.search.rank.RankDoc][query_rule_rank_doc]\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:706)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:161)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:688)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.ElasticsearchException.generateFailureXContent(ElasticsearchException.java:634)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.rest.RestResponse.build(RestResponse.java:200)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:159)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.rest.RestResponse.<init>(RestResponse.java:120)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.rest.action.RestActionListener.onFailure(RestActionListener.java:54)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.rest.action.RestCancellableNodeClient$1.onFailure(RestCancellableNodeClient.java:97)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.tasks.TaskManager$1.onFailure(TaskManager.java:215)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onFailure(ActionListenerImplementations.java:346)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.support.ContextPreservingActionListener.onFailure(ContextPreservingActionListener.java:40)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations.safeAcceptException(ActionListenerImplementations.java:64)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations.safeOnFailure(ActionListenerImplementations.java:75)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.DelegatingActionListener.onFailure(DelegatingActionListener.java:32)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.search.TransportSearchAction$SearchResponseActionListener.onFailure(TransportSearchAction.java:1952)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.search.TransportSearchAction$1.lambda$onFailure$1(TransportSearchAction.java:524)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations$RunAfterActionListener.onResponse(ActionListenerImplementations.java:300)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:203)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:197)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:336)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:97)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.search.ClearScrollController.lambda$closeContexts$7(ClearScrollController.java:168)\n\tat org.elasticsearch.base@8.17.4/org.elasticsearch.core.AbstractRefCounted$1.closeInternal(AbstractRefCounted.java:125)\n\tat org.elasticsearch.base@8.17.4/org.elasticsearch.core.AbstractRefCounted.decRef(AbstractRefCounted.java:77)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.support.RefCountingRunnable.close(RefCountingRunnable.java:113)\n\tat org.elasticsearch.base@8.17.4/org.elasticsearch.core.Releasables.close(Releasables.java:35)\n\tat org.elasticsearch.base@8.17.4/org.elasticsearch.core.Releasables.closeExpectNoException(Releasables.java:57)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations$2.run(ActionListenerImplementations.java:51)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:217)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:97)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.action.ActionListenerResponseHandler.handleResponse(ActionListenerResponseHandler.java:49)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.TransportService$ContextRestoreResponseHandler.handleResponse(TransportService.java:1500)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.InboundHandler.doHandleResponse(InboundHandler.java:434)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.InboundHandler.handleResponse(InboundHandler.java:383)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.InboundHandler.executeResponseHandler(InboundHandler.java:150)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:125)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:98)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:822)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:125)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:97)\n\tat org.elasticsearch.server@8.17.4/org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:62)\n\tat org.elasticsearch.transport.netty4@8.17.4/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:55)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.codec@4.1.118.Final/io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:107)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.handler@4.1.118.Final/io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1515)\n\tat io.netty.handler@4.1.118.Final/io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1378)\n\tat io.netty.handler@4.1.118.Final/io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1427)\n\tat io.netty.codec@4.1.118.Final/io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)\n\tat io.netty.codec@4.1.118.Final/io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)\n\tat io.netty.codec@4.1.118.Final/io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1357)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:868)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:796)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:697)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:660)\n\tat io.netty.transport@4.1.118.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n\tat io.netty.common@4.1.118.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998)\n\tat io.netty.common@4.1.118.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n\tat java.base/java.lang.Thread.run(Thread.java:1575)\nCaused by: java.lang.IllegalArgumentException: Unknown NamedWriteable [org.elasticsearch.search.rank.RankDoc][query_rule_rank_doc]\n\tat org.elasticsearch.common.io.stream.NamedWriteableRegistry.throwOnUnknownWritable(NamedWriteableRegistry.java:151)\n\tat org.elasticsearch.common.io.stream.NamedWriteableRegistry.getReader(NamedWriteableRegistry.java:126)\n\tat org.elasticsearch.common.io.stream.NamedWriteableRegistry.getReader(NamedWriteableRegistry.java:109)\n\tat org.elasticsearch.common.io.stream.NamedWriteableAwareStreamInput.readNamedWriteable(NamedWriteableAwareStreamInput.java:56)\n\tat org.elasticsearch.common.io.stream.NamedWriteableAwareStreamInput.readNamedWriteable(NamedWriteableAwareStreamInput.java:33)\n\tat org.elasticsearch.index.query.RankDocsQueryBuilder.lambda$new$0(RankDocsQueryBuilder.java:46)\n\tat org.elasticsearch.common.io.stream.StreamInput.readArray(StreamInput.java:1090)\n\tat org.elasticsearch.index.query.RankDocsQueryBuilder.<init>(RankDocsQueryBuilder.java:46)\n\tat org.elasticsearch.common.io.stream.NamedWriteableAwareStreamInput.readNamedWriteable(NamedWriteableAwareStreamInput.java:57)\n\tat org.elasticsearch.common.io.stream.NamedWriteableAwareStreamInput.readNamedWriteable(NamedWriteableAwareStreamInput.java:33)\n\tat org.elasticsearch.search.builder.SubSearchSourceBuilder.<init>(SubSearchSourceBuilder.java:80)\n\tat org.elasticsearch.common.io.stream.StreamInput.readCollection(StreamInput.java:1319)\n\tat org.elasticsearch.common.io.stream.StreamInput.readCollectionAsList(StreamInput.java:1191)\n\tat org.elasticsearch.search.builder.SearchSourceBuilder.<init>(SearchSourceBuilder.java:242)\n\tat org.elasticsearch.common.io.stream.StreamInput.readOptional(StreamInput.java:1117)\n\tat org.elasticsearch.common.io.stream.StreamInput.readOptionalWriteable(StreamInput.java:1107)\n\tat org.elasticsearch.search.internal.ShardSearchRequest.<init>(ShardSearchRequest.java:287)\n\tat org.elasticsearch.transport.RequestHandlerRegistry.newRequest(RequestHandlerRegistry.java:63)\n\tat org.elasticsearch.transport.InboundHandler.handleRequest(InboundHandler.java:262)\n\tat org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:118)\n\tat org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:98)\n\tat org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:822)\n\tat org.elasticsearch.transport.InboundPipeline.forwardFragments(InboundPipeline.java:125)\n\tat org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:97)\n\tat org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:62)\n\tat org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:55)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:107)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1515)\n\tat io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1378)\n\tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1427)\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1357)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:868)\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:796)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:697)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:660)\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998)\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n\tat java.lang.Thread.run(Thread.java:1575)\n", "created_at": "2025-04-01", "closed_at": null, "labels": [">bug", ":Search Relevance/Ranking", "priority:high", "Team:Search Relevance"], "State": "open", "Author": "bean710"}
{"issue_number": 126061, "issue_title": "[CI] RBACEngineTests testGetRoleDescriptorsIntersectionForRemoteClusterHasDeterministicOrderForIndicesPrivileges failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21144 / part4\nelasticsearch-pull-request #65772 / part-4\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:test\" --tests \"org.elasticsearch.xpack.security.authz.RBACEngineTests.testGetRoleDescriptorsIntersectionForRemoteClusterHasDeterministicOrderForIndicesPrivileges\" -Dtests.seed=BE755488CF34B1DB -Dtests.locale=en-PG -Dtests.timezone=America/Bogota -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <2>\n     but: was <4>\n\nIssue Reasons:\n\n[main] 2 failures in test testGetRoleDescriptorsIntersectionForRemoteClusterHasDeterministicOrderForIndicesPrivileges (1.2% fail rate in 171 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-01", "closed_at": "2025-04-02", "labels": [">test-failure", ":Security/Authorization", "Team:Security", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126053, "issue_title": "[CI] TimeSeriesLifecycleActionsIT testDeleteActionDoesntDeleteSearchableSnapshot failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7392 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7294 / oraclelinux-8_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:qa:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.ilm.TimeSeriesLifecycleActionsIT.testDeleteActionDoesntDeleteSearchableSnapshot\" -Dtests.seed=8E4F510D5CCE007A -Dtests.locale=pa-Guru-IN -Dtests.timezone=Africa/Djibouti -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 2 failures in test testDeleteActionDoesntDeleteSearchableSnapshot (0.3% fail rate in 638 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (15.4% fail rate in 13 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-01", "closed_at": "2025-04-10", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126047, "issue_title": "Add COLLECT() Function to ES|QL", "issue_body": "Description\nDescription:\nES|QL lacks a function to aggregate multiple values from a field into an array per group, similar to collect() in Humio/LogScale. A COLLECT() function would improve data analysis by allowing users to retrieve all values for a field within a grouping key.\nProposed Functionality:\nSTATS user_emails = COLLECT(user.email, DISTINCT=true) BY client.ip\n\n\nAggregates field values into an array per group\nSupports optional deduplication (DISTINCT=true)\nAllows ordering (ORDER_BY=timestamp DESC)\n\nUse Case:\nIdentify distinct users attempting logins from the same IP:\nFROM filebeat-* \n| WHERE event.action == \"login_attempt\"\n| STATS user_count = COUNT_DISTINCT(user.email), user_emails = COLLECT(user.email, DISTINCT=true) BY client.ip\n| WHERE user_count > 1\n| SORT user_count DESC\n", "created_at": "2025-04-01", "closed_at": "2025-04-02", "labels": [">enhancement", "needs:triage"], "State": "closed", "Author": "FideliusFalcon"}
{"issue_number": 126046, "issue_title": "ESQL: StringIndexOutOfBoundsException when parsing metadata", "issue_body": "We got the following stack trace from Serverless:\n        \"java.lang.StringIndexOutOfBoundsException: Range [55, 55 + -54) out of bounds for length 161    \n  \\tat java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)    \n  \\tat java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)    \n  \\tat java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)    \n  \\tat java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)    \n  \\tat java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)    \n  \\tat java.base/jdk.internal.util.Preconditions.outOfBoundsCheckFromIndexSize(Preconditions.java:118)    \n  \\tat java.base/jdk.internal.util.Preconditions.checkFromIndexSize(Preconditions.java:397)    \n  \\tat java.base/java.lang.String.checkBoundsOffCount(String.java:4938)    \n  \\tat java.base/java.lang.String.<init>(String.java:543)    \n  \\tat org.antlr.v4.runtime.CodePointCharStream$CodePoint8BitCharStream.getText(CodePointCharStream.java:160)    \n  \\tat org.antlr.v4.runtime.CommonToken.getText(CommonToken.java:170)    \n  \\tat org.elasticsearch.xpack.esql.parser.ParserUtils.nameOrPosition(ParserUtils.java:147)    \n  \\tat org.elasticsearch.xpack.esql.parser.EsqlParser$ParametrizedTokenSource.nextToken(EsqlParser.java:233)    \n  \\tat org.antlr.v4.runtime.BufferedTokenStream.fetch(BufferedTokenStream.java:169)    \n  \\tat org.antlr.v4.runtime.BufferedTokenStream.sync(BufferedTokenStream.java:152)    \n  \\tat org.antlr.v4.runtime.BufferedTokenStream.nextTokenOnChannel(BufferedTokenStream.java:325)    \n  \\tat org.antlr.v4.runtime.CommonTokenStream.adjustSeekIndex(CommonTokenStream.java:70)    \n  \\tat org.antlr.v4.runtime.BufferedTokenStream.consume(BufferedTokenStream.java:137)    \n  \\tat org.antlr.v4.runtime.Parser.consume(Parser.java:571)    \n  \\tat org.antlr.v4.runtime.Parser.match(Parser.java:205)    \n  \\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser.metadata(EsqlBaseParser.java:1412)    \n  \\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser.indexPatternAndMetadataFields(EsqlBaseParser.java:1173)    \n  \\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser.fromCommand(EsqlBaseParser.java:1042)    \n  \\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser.sourceCommand(EsqlBaseParser.java:434)    \n  \\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser.query(EsqlBaseParser.java:339)    \n  \\tat org.elasticsearch.xpack.esql.parser.EsqlBaseParser.singleStatement(EsqlBaseParser.java:241)    \n  \\tat org.elasticsearch.xpack.esql.parser.EsqlParser.invokeParser(EsqlParser.java:148)    \n  \\tat org.elasticsearch.xpack.esql.parser.EsqlParser.createStatement(EsqlParser.java:114)    \n  \\tat org.elasticsearch.xpack.esql.session.EsqlSession.parse(EsqlSession.java:321)    \n  \\tat org.elasticsearch.xpack.esql.session.EsqlSession.execute(EsqlSession.java:164)    \n  \\tat org.elasticsearch.xpack.esql.execution.PlanExecutor.lambda$esql$2(PlanExecutor.java:96)\n...\n\nSomehow, calling token.getText() causes an out of bounds when parsing, I think, FROM ... METADATA ....\nThe out of bounds is triggered inside code that was most recently changed in #122459, although I can't say if the latter PR caused this.\nI didn't manage to repro this after trying for the better part of an hour.\n@fang-xing-esql , I noticed that before #122459, EsqlParser.nextToken() used to check for\ntoken.getType() == EsqlBaseLexer.NAMED_OR_POSITIONAL_PARAM\n\nbefore attempting to call token.getText, whereas now we call token.getText() before checking the token type (in ParserUtils.nameOrPosition()`). That might be why we see this now and didn't run into this before.", "created_at": "2025-04-01", "closed_at": "2025-04-11", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "alex-spies"}
{"issue_number": 126040, "issue_title": "[CI] IndicesPermissionTests testAuthorizeDataStreamFailureIndices failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7396 / release-tests\nelasticsearch-periodic #7389 / release-tests\nelasticsearch-periodic #7382 / release-tests\nelasticsearch-periodic #7375 / release-tests\nelasticsearch-periodic #7368 / release-tests\nelasticsearch-periodic #7270 / release-tests\nelasticsearch-periodic #7263 / release-tests\nelasticsearch-periodic #7256 / release-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:test\" --tests \"org.elasticsearch.xpack.security.authz.accesscontrol.IndicesPermissionTests.testAuthorizeDataStreamFailureIndices\" -Dtests.seed=510ECCBC81E6C71A -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=xnr-IN -Dtests.timezone=US/Indiana-Starke -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: for privilege [read_failure_store]\nExpected: is <true>\n     but: was <false>\n\nIssue Reasons:\n\n[8.x] 8 consecutive failures in step release-tests\n[8.x] 8 failures in test testAuthorizeDataStreamFailureIndices (1.0% fail rate in 838 executions)\n[8.x] 8 failures in step release-tests (100.0% fail rate in 8 executions)\n[8.x] 8 failures in pipeline elasticsearch-periodic (42.1% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-04-01", "closed_at": "2025-04-02", "labels": [">test-failure", ":Security/Authorization", "Team:Security", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 126036, "issue_title": "ES|QL: IntArrayBlock cannot be cast to DoubleBlock", "issue_body": "With the CSV tests dataset\n(load the dataset with ./gradlew :x-pack:plugin:esql:qa:testFixtures:loadCsvSpecData --args=\"http://elastic-admin:elastic-password@localhost:9200\")\nfrom *,sample_data_ts_long* \n| enrich languages_policy on cluster\n| rename languages.byte as language_code \n| lookup join languages_lookup on language_code \n| stats  still_hired = count_distinct(`height.scaled_float`), salary_change.long = max(ratings), foo = max(num) by ip1\n\n{\n    \"error\": {\n        \"root_cause\": [\n            {\n                \"type\": \"class_cast_exception\",\n                \"reason\": \"class org.elasticsearch.compute.data.IntArrayBlock cannot be cast to class org.elasticsearch.compute.data.DoubleBlock (org.elasticsearch.compute.data.IntArrayBlock and org.elasticsearch.compute.data.DoubleBlock are in unnamed module of loader java.net.FactoryURLClassLoader @541afb85)\"\n            }\n        ],\n        \"type\": \"class_cast_exception\",\n        \"reason\": \"class org.elasticsearch.compute.data.IntArrayBlock cannot be cast to class org.elasticsearch.compute.data.DoubleBlock (org.elasticsearch.compute.data.IntArrayBlock and org.elasticsearch.compute.data.DoubleBlock are in unnamed module of loader java.net.FactoryURLClassLoader @541afb85)\"\n    },\n    \"status\": 500\n}\n\njava.lang.ClassCastException: class org.elasticsearch.compute.data.IntArrayBlock cannot be cast to class org.elasticsearch.compute.data.DoubleBlock (org.elasticsearch.compute.data.IntArrayBlock and org.elasticsearch.compute.data.DoubleBlock are in unnamed module of loader java.net.FactoryURLClassLoader @541afb85)\n        at org.elasticsearch.compute.aggregation.MaxDoubleGroupingAggregatorFunction.prepareProcessPage(MaxDoubleGroupingAggregatorFunction.java:62)\n        at org.elasticsearch.compute.aggregation.GroupingAggregator.prepareProcessPage(GroupingAggregator.java:57)\n        at org.elasticsearch.compute.operator.HashAggregationOperator.addInput(HashAggregationOperator.java:189)\n        at org.elasticsearch.compute.operator.Driver.runSingleLoopIteration(Driver.java:276)\n        at org.elasticsearch.compute.operator.Driver.run(Driver.java:184)\n        at org.elasticsearch.compute.operator.Driver$1.doRun(Driver.java:403)\n        at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n        at org.elasticsearch.compute.operator.DriverScheduler$1.doRun(DriverScheduler.java:57)\n        at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n        at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34)\n        at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)\n        at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1583)\n", "created_at": "2025-04-01", "closed_at": "2025-04-03", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "luigidellaquila"}
{"issue_number": 126030, "issue_title": "ES|QL: problems with TopN", "issue_body": "With the CSV dataset\nfrom * \n| keep `city`, `city.name`, `card`, nanos, year, network.bytes_in, author.keyword, `birth_date`, `ip0`, `height.half_float`, `languages.short`, zip_code, network.cost, `status`, `ratings`, emp_no, host, `salary_change.long`, `street`, `client_cidr`, `city.country.continent.planet.name`, `languages.int`, height, `network.bytes_in`, author, `is_rehired`, contai*, *, version, height.double, `first_name`, `author`, contains, `millis`, bytes_out, network.total_cost, `country.keyword`, still_hir*, `within`, gender, `location`, fi*, sha*, `lk`, `kibana.alert.risk_score`, `last_name`, salary_change.long, `name`, ip*, `book_no`, `city.country.continent.name`, scalerank, `id`, hire_date, *set, message, `ip1`, height.scaled_float, `height`, language.name.keyword, client_cidr, `client_ip`, `decade`, languages.int, `bytes_in` \n| drop `language.name`, `city.name`, pod, `num`, birth_date, description, `host_group`, `lk`, `@timestamp`, type, `birth_date`, `height.half_float`, book_no, `smaller`, height_range, `status`, ratings, `street`, event, `city.country.continent.planet.name`, date_range, still_hired, `is_rehired`, `pod`, event_duration, env, height.scaled_float, `first_name`, `languages.long`, *uthor, `client.ip`, height.half_float, `height.double`, `author`, `height`, bytes_out, `still_hired`, `language.code`, `event`, location, abbrev, millis, region \n| enrich languages_policy on author.keyword \n| sort city.country.name NULLS LAST\n\n{\n    \"error\": {\n        \"root_cause\": [\n            {\n                \"type\": \"illegal_argument_exception\",\n                \"reason\": \"expected exactly [16] bytes but got [4]\"\n            }\n        ],\n        \"type\": \"illegal_argument_exception\",\n        \"reason\": \"expected exactly [16] bytes but got [4]\"\n    },\n    \"status\": 400\n}\n\nSame query, but without KEEP\nfrom * \n| drop `language.name`, `city.name`, pod, `num`, birth_date, description, `host_group`, `lk`, `@timestamp`, type, `birth_date`, `height.half_float`, book_no, `smaller`, height_range, `status`, ratings, `street`, event, `city.country.continent.planet.name`, date_range, still_hired, `is_rehired`, `pod`, event_duration, env, height.scaled_float, `first_name`, `languages.long`, *uthor, `client.ip`, height.half_float, `height.double`, `author`, `height`, bytes_out, `still_hired`, `language.code`, `event`, location, abbrev, millis, region \n| enrich languages_policy on author.keyword \n| sort city.country.name NULLS LAST\n\n{\n    \"error\": {\n        \"root_cause\": [\n            {\n                \"type\": \"illegal_argument_exception\",\n                \"reason\": \"Expected [BYTES_REF] but was [DOUBLE]\"\n            }\n        ],\n        \"type\": \"illegal_argument_exception\",\n        \"reason\": \"Expected [BYTES_REF] but was [DOUBLE]\"\n    },\n    \"status\": 400\n}\n", "created_at": "2025-04-01", "closed_at": "2025-04-03", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "luigidellaquila"}
{"issue_number": 126026, "issue_title": "ES|QL: columns not projected away despite KEEP", "issue_body": "row foo = 10 \n| stats field_1 = max(foo), this = count(*), field_2 = max(foo) by foo  \n| rename this AS field_2 \n| keep field_1, field_2  \n| eval field_2 = 1, field_1 = 1\n\n      foo      |    field_1    |    field_2    \n---------------+---------------+---------------\n10             |1              |1              \n\n\nfoo shouldn't be there.\nInterestingly, if you try to use the wrong column, the query will fail:\nrow foo = 10 \n| stats field_1 = max(foo), this = count(*), field_2 = max(foo) by foo  \n| rename this AS field_2 \n| keep field_1, field_2  \n| eval field_2 = 1, field_1 = 1, bar = foo\n\n{\n    \"error\": {\n        \"root_cause\": [\n            {\n                \"type\": \"verification_exception\",\n                \"reason\": \"Found 1 problem\\nline 1:176: Unknown column [foo]\"\n            }\n        ],\n        \"type\": \"verification_exception\",\n        \"reason\": \"Found 1 problem\\nline 1:176: Unknown column [foo]\"\n    },\n    \"status\": 400\n}\n", "created_at": "2025-04-01", "closed_at": "2025-04-23", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "luigidellaquila"}
{"issue_number": 126017, "issue_title": "ES|QL: improper pruning of unused columns at planning time", "issue_body": "With the CSV dataset\nfrom sample_data  \n| eval type = 1000 \n| lookup join message_types_lookup on message \n| grok type \"%{WORD:foo}\" \n| keep event_duration, type\n\n{\n    \"took\": 39,\n    \"is_partial\": false,\n    \"columns\": [\n        {\n            \"name\": \"event_duration\",\n            \"type\": \"long\"\n        },\n        {\n            \"name\": \"type\",\n            \"type\": \"keyword\"\n        }\n    ],\n    \"values\": [\n   ....\n]\n\ntype (a keyword) comes from the right-hand side of the JOIN, and overwrites the previous integer type column.\nRemoving it from the final projections also removes it from the output of the JOIN, no longer masking the existing integer column:\nfrom sample_data  \n| eval type = 1000 \n| lookup join message_types_lookup on message \n| grok type \"%{WORD:foo}\" \n| keep event_duration\n\n{\n    \"error\": {\n        \"root_cause\": [\n            {\n                \"type\": \"verification_exception\",\n                \"reason\": \"Found 1 problem\\nline 1:91: Grok only supports KEYWORD or TEXT values, found expression [type] type [INTEGER]\"\n            }\n        ],\n        \"type\": \"verification_exception\",\n        \"reason\": \"Found 1 problem\\nline 1:91: Grok only supports KEYWORD or TEXT values, found expression [type] type [INTEGER]\"\n    },\n    \"status\": 400\n}\n", "created_at": "2025-04-01", "closed_at": "2025-04-22", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "luigidellaquila"}
{"issue_number": 126015, "issue_title": "Unlimited index privileges cache can lead to OOM", "issue_body": "Elasticsearch Version\n8.x\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nall\nProblem Description\nCurrently, the IndexPrivielge#CACHE is an unbounded ConcurrentHashMap. This can lead to a high memory consumption in clusters with many roles.\nLocal testing showed that roughly ~500 roles with random set of index privileges can lead to OOM errors with 500MB heap.\n\nexample stacktrace\njava.lang.OutOfMemoryError: Java heap space\n\tat __randomizedtesting.SeedInfo.seed([FBD32FDE56DB2F8B:2AA7B1D3F0CEEE63]:0)\n\tat org.apache.lucene.util.ArrayUtil.growExact(ArrayUtil.java:320)\n\tat org.apache.lucene.util.ArrayUtil.growInRange(ArrayUtil.java:346)\n\tat org.apache.lucene.util.ArrayUtil.grow(ArrayUtil.java:354)\n\tat org.apache.lucene.internal.hppc.IntArrayList.ensureBufferSpace(IntArrayList.java:276)\n\tat org.apache.lucene.internal.hppc.IntArrayList.add(IntArrayList.java:76)\n\tat org.elasticsearch.lucene.util.automaton.MinimizationOperations.minimize(MinimizationOperations.java:155)\n\tat org.elasticsearch.xpack.core.security.support.Automatons.minimize(Automatons.java:297)\n\tat org.elasticsearch.xpack.core.security.support.Automatons.unionAndMinimize(Automatons.java:283)\n\tat org.elasticsearch.xpack.core.security.authz.privilege.IndexPrivilege.union(IndexPrivilege.java:467)\n\tat org.elasticsearch.xpack.core.security.authz.privilege.IndexPrivilege.combineIndexPrivileges(IndexPrivilege.java:435)\n\tat org.elasticsearch.xpack.core.security.authz.privilege.IndexPrivilege.resolve(IndexPrivilege.java:405)\n\tat org.elasticsearch.xpack.core.security.authz.privilege.IndexPrivilege.lambda$resolveBySelectorAccess$0(IndexPrivilege.java:347)\n\tat org.elasticsearch.xpack.core.security.authz.privilege.IndexPrivilege$$Lambda/0x000003f8003f3888.apply(Unknown Source)\n\tat java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1756)\n\tat org.elasticsearch.xpack.core.security.authz.privilege.IndexPrivilege.resolveBySelectorAccess(IndexPrivilege.java:343)\n\tat org.elasticsearch.xpack.core.security.action.role.RoleDescriptorRequestValidator.validate(RoleDescriptorRequestValidator.java:53)\n\tat org.elasticsearch.xpack.core.security.action.role.RoleDescriptorRequestValidator.validate(RoleDescriptorRequestValidator.java:31)\n\tat org.elasticsearch.xpack.core.security.action.role.RoleDescriptorRequestValidatorTests.validateAndAssertSelectorNotAllowed(RoleDescriptorRequestValidatorTests.java:57)\n\tat org.elasticsearch.xpack.core.security.action.role.RoleDescriptorRequestValidatorTests.testSelectorsValidation(RoleDescriptorRequestValidatorTests.java:38)\n\tat java.base/java.lang.invoke.LambdaForm$DMH/0x000003f800000c00.invokeVirtual(LambdaForm$DMH)\n\tat java.base/java.lang.invoke.LambdaForm$MH/0x000003f800402800.invoke(LambdaForm$MH)\n\tat java.base/java.lang.invoke.Invokers$Holder.invokeExact_MT(Invokers$Holder)\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(DirectMethodHandleAccessor.java:154)\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:565)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1763)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)\n\tat com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)\n\tat com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)\n\tat org.junit.rules.RunRules.evaluate(RunRules.java:20)\n\tat org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:48)\n\nSteps to Reproduce\n\nRandomly create many roles\n\nLogs (if relevant)\nNo response", "created_at": "2025-04-01", "closed_at": null, "labels": [">bug", ":Security/Authorization", "Team:Security"], "State": "open", "Author": "slobodanadamovic"}
{"issue_number": 126005, "issue_title": "Conditional ingest processors should respect `ignore_failure` for errors in `if` condition", "issue_body": "When an error occurs in the if statement of an ingest processor, and the processor has ignore_failure=true, the failure is not ignored, and the on_failure processor is called. This behavior seems incorrect. Example:\nGiven the following pipeline:\n{\n    \"processors\":\n    [\n        {\n            \"set\":\n            {\n                \"if\": \"ctx.does_not_exist.length() > 0\",\n                \"ignore_failure\": true,\n                \"field\": \"wont_get_set\",\n                \"value\": true\n            }\n        },\n        {\n            \"set\":\n            {\n                \"field\": \"set_after\",\n                \"value\": true\n            }\n        }\n    ],\n    \"on_failure\":\n    [\n        {\n            \"set\":\n            {\n                \"field\": \"error\",\n                \"value\": \"{{ _ingest.on_failure_message }}\"\n            }\n        }\n    ]\n}'\n\nAnd the following simulate ingest:\ncurl -s -X POST \"localhost:9200/_ingest/pipeline/some_pipeline/_simulate?pretty\" -H 'Content-Type: application/json' -d'\n{\n  \"docs\": [\n    {\n        \"_source\": { \"field\": 1 }\n    }\n  ]\n}\n'\n\nWe get the following output:\n{\n  \"docs\": [\n    {\n      \"doc\": {\n        \"_index\": \"_index\",\n        \"_version\": \"-3\",\n        \"_id\": \"_id\",\n        \"_source\": {\n          \"field\": 1,\n          \"error\": \"cannot access method/field [length] from a null def reference\"\n        },\n        \"_ingest\": {\n          \"timestamp\": \"2025-03-31T22:42:12.895010791Z\"\n        }\n      }\n    }\n  ]\n}\n\nThis seems incorrect. Though the if statement in the first processor should fail because the variable does_not_exist does not exist, ignore_failure was set to true. So the following set processor should have run, and set_after field should be set. The failure processor should not have run.\nThe results should instead have been:\n{\n    \"field\": 1,\n    \"set_after\": true\n}\n\nInterestingly, if verbose is set to true in the simulate call, we get the correct result. I did a bit of debugging, and see that without verbose, the top-level CompoundProcessor has ignore_failure=false. Whereas, with verbose, the top-level TrackingResultProcessor has ignore_failure=true. It appears this this is because the tracking result processor unwraps the conditional processor here, bringing the ignore_failure value up to the top-level processor.", "created_at": "2025-03-31", "closed_at": null, "labels": [">bug", ":Data Management/Ingest Node", "Team:Data Management", "low-risk"], "State": "open", "Author": "parkertimmins"}
{"issue_number": 126001, "issue_title": "[CI] MlConfigIndexMappingsFullClusterRestartIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7354 / 8.1.3_bwc\nelasticsearch-periodic #7319 / 8.7.1_bwc\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.xpack.restart.MlConfigIndexMappingsFullClusterRestartIT (0.3% fail rate in 579 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (33.3% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125996, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest module projects are wired into test cluster setup failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]\n\nOutput:\nCalculating task graph as no cached configuration is available for tasks: yamlRestTest\n=======================================\nElasticsearch Build Hamster says Hello!\n  Gradle Version        : 8.13\n  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)\n  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)\n  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)\n  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Random Testing Seed   : C70DCF99734E0852\n  In FIPS 140 mode      : false\n=======================================\n\nFAILURE: \n[truncated]\n\nIssue Reasons:\n\n[8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 39 failures in test module projects are wired into test cluster setup (28.3% fail rate in 138 executions)\n[8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)\n[8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125995, "issue_title": "ESQL: Search results for wildcards and selectors return errors instead of empty results when indices are missing", "issue_body": "If you search for an index using a wildcard pattern, and the pattern does not match any indices, you will receive a successful response with no results from the _search API, but an error from the _query API:\n> GET /missing*/_search\n\n{\n  \"took\": 0,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 0,\n    \"successful\": 0,\n    \"skipped\": 0,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": {\n      \"value\": 0,\n      \"relation\": \"eq\"\n    },\n    \"max_score\": 0.0,\n    \"hits\": []\n  }\n}\n\n> POST /_query\n> {\"query\": \"FROM missing*\"}\n\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"verification_exception\",\n        \"reason\": \"Found 1 problem\\nline 1:1: Unknown index [missing*]\"\n      }\n    ],\n    \"type\": \"verification_exception\",\n    \"reason\": \"Found 1 problem\\nline 1:1: Unknown index [missing*]\"\n  },\n  \"status\": 400\n}\n\n\nThis can also be seen when searching a data stream's failure store if the failure store does not exist yet (e.g. there have been no failures logged yet).\n> GET /my_ds-1::failures/_search\n\n{\n  \"took\": 0,\n  \"timed_out\": false,\n  \"_shards\": {\n    \"total\": 0,\n    \"successful\": 0,\n    \"skipped\": 0,\n    \"failed\": 0\n  },\n  \"hits\": {\n    \"total\": {\n      \"value\": 0,\n      \"relation\": \"eq\"\n    },\n    \"max_score\": 0.0,\n    \"hits\": []\n  }\n}\n\n> POST /_query\n> {\"query\": \"FROM my_ds-1::failures\"}\n\n{\n  \"error\": {\n    \"root_cause\": [\n      {\n        \"type\": \"verification_exception\",\n        \"reason\": \"Found 1 problem\\nline 1:1: Unknown index [my_ds-1::failures]\"\n      }\n    ],\n    \"type\": \"verification_exception\",\n    \"reason\": \"Found 1 problem\\nline 1:1: Unknown index [my_ds-1::failures]\"\n  },\n  \"status\": 400\n}\n\nExecuting the query operation with error tracing enabled on the latest mainline version reveals the following stack traces:\norg.elasticsearch.xpack.esql.VerificationException: Found 1 problem\nline 1:1: Unknown index [missing*]\n\tat org.elasticsearch.xpack.esql.analysis.Analyzer.verify(Analyzer.java:196)\n\tat org.elasticsearch.xpack.esql.analysis.Analyzer.analyze(Analyzer.java:190)\n\tat org.elasticsearch.xpack.esql.session.EsqlSession.lambda$analyzedPlan$12(EsqlSession.java:342)\n\tat org.elasticsearch.xpack.esql.session.EsqlSession.analyzeAndMaybeRetry(EsqlSession.java:555)\n\tat org.elasticsearch.xpack.esql.session.EsqlSession.lambda$analyzedPlan$21(EsqlSession.java:387)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.support.SubscribableListener$SuccessResult.complete(SubscribableListener.java:394)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.support.SubscribableListener.tryComplete(SubscribableListener.java:314)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.support.SubscribableListener.setResult(SubscribableListener.java:343)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.support.SubscribableListener.onResponse(SubscribableListener.java:250)\n\tat org.elasticsearch.xpack.esql.session.EsqlSession.lambda$analyzedPlan$20(EsqlSession.java:384)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.support.SubscribableListener$SuccessResult.complete(SubscribableListener.java:394)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.support.SubscribableListener.tryComplete(SubscribableListener.java:314)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.support.SubscribableListener.setResult(SubscribableListener.java:343)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.support.SubscribableListener.onResponse(SubscribableListener.java:250)\n\tat org.elasticsearch.xpack.esql.session.EsqlSession.lambda$preAnalyzeIndices$27(EsqlSession.java:489)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations$DelegatingFailureActionListener.onResponse(ActionListenerImplementations.java:233)\n\tat org.elasticsearch.xpack.esql.session.IndexResolver.lambda$resolveAsMergedMapping$0(IndexResolver.java:91)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:261)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListener$3.onResponse(ActionListener.java:413)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:203)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:197)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:350)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListener$3.onResponse(ActionListener.java:413)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:33)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListenerImplementations$MappedActionListener.onResponse(ActionListenerImplementations.java:111)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.fieldcaps.TransportFieldCapabilitiesAction.doExecuteForked(TransportFieldCapabilitiesAction.java:165)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.fieldcaps.TransportFieldCapabilitiesAction.lambda$executeRequest$1(TransportFieldCapabilitiesAction.java:136)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.TimedRunnable.doRun(TimedRunnable.java:34)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044)\n\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n", "created_at": "2025-03-31", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "jbaiera"}
{"issue_number": 125975, "issue_title": "[CI] XPackRestIT test {p0=transform/transforms_stats/Test get transform stats with timeout} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21055 / part3\nelasticsearch-pull-request #65288 / part-3\nelasticsearch-pull-request #65199 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_stats/Test get transform stats with timeout}\" -Dtests.seed=E72E63C5A508A342 -Dtests.locale=lij-Latn-IT -Dtests.timezone=Pacific/Pohnpei -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [transform/transforms_stats:52]: expected [2xx] status code but api [transform.start_transform] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Starting transform [airline-transform-stats] timed out after [30s]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Starting transform [airline-transform-stats] timed out after [30s]\\n\\tat org.elasticsearch.transform@9.1.0-SNAPSHOT/org.elasticsearch.xpack.transform.action.TransportStartTransformAction$2.onTimeout(TransportStartTransformAction.java:364)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.persistent.PersistentTasksService$1.onTimeout(PersistentTasksService.java:217)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:390)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$Observer\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test test {p0=transform/transforms_stats/Test get transform stats with timeout} (0.3% fail rate in 912 executions)\n[main] 2 failures in step part-3 (1.1% fail rate in 182 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (1.0% fail rate in 203 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": null, "labels": [">test-failure", ":ml/Transform", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125947, "issue_title": "[CI] ManyShardsIT testCancelUnnecessaryRequests failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7349 / openjdk23_entitlements_false_checkpart3_java-matrix\nelasticsearch-pull-request #65500 / part-3\nelasticsearch-periodic-platform-support #7252 / almalinux-9_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.ManyShardsIT.testCancelUnnecessaryRequests\" -Dtests.seed=2B36B5E6A61236E2 -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=tt-RU -Dtests.timezone=America/Belize -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: safeGet: listener was completed exceptionally\n\nIssue Reasons:\n\n[main] 3 failures in test testCancelUnnecessaryRequests (0.3% fail rate in 871 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": "2025-04-22", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125946, "issue_title": "[CI] CrossClusterAsyncQueryIT testStopQueryLocal failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7788 / concurrent-search-tests\nelasticsearch-periodic #7710 / single-processor-node-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.action.CrossClusterAsyncQueryIT.testStopQueryLocal\" -Dtests.seed=4FB2617B88902D0C -Dtests.jvm.argline=\"-Des.concurrent_search=true\" -Dtests.locale=de-LU -Dtests.timezone=America/Indiana/Marengo -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: not <running>\n     but: was <running>\n\nIssue Reasons:\n\n[9.0] 2 failures in test testStopQueryLocal (0.6% fail rate in 336 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic (14.3% fail rate in 14 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": null, "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/CCS"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125944, "issue_title": "[CI] SearchServiceSingleNodeTests class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7349 / release-tests\nelasticsearch-periodic #7342 / release-tests\nelasticsearch-periodic #7328 / release-tests\nelasticsearch-periodic #7321 / release-tests\nelasticsearch-periodic #7314 / release-tests\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 5 consecutive failures in step release-tests\n[main] 5 failures in class org.elasticsearch.search.SearchServiceSingleNodeTests (2.5% fail rate in 200 executions)\n[main] 5 failures in step release-tests (100.0% fail rate in 5 executions)\n[main] 5 failures in pipeline elasticsearch-periodic (83.3% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": "2025-03-31", "labels": [">test-failure", "needs:risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125941, "issue_title": "[CI] RoleMappingFileSettingsIT testGetRoleMappings failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7369 / ubuntu-2404-aarch64_checkpart4_platform-support-arm\nelasticsearch-periodic-platform-support #7362 / ubuntu-2404-aarch64_checkpart4_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:internalClusterTest\" --tests \"org.elasticsearch.integration.RoleMappingFileSettingsIT.testGetRoleMappings\" -Dtests.seed=FEE527BEE886F79A -Dtests.locale=zh-Hant-MO -Dtests.timezone=Europe/Warsaw -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: safeGet: listener was not completed within the timeout\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step ubuntu-2404-aarch64_checkpart4_platform-support-arm\n[8.x] 2 failures in test testGetRoleMappings (1.8% fail rate in 112 executions)\n[8.x] 2 failures in step ubuntu-2404-aarch64_checkpart4_platform-support-arm (50.0% fail rate in 4 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": null, "labels": [">test-failure", ":Security/Security", "Team:Security", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125931, "issue_title": "[ES|QL] improvements to the definitions / docs kibana files", "issue_body": "Description\nHere is a list of improvements on the kibana definitions / docs.\nHigh priority:\nRemove the docs link from here as it breaks the CI https://buildkite.com/elastic/kibana-es-ql-grammar-sync/builds/120#0195ea5c-c561-4484-b0a7-ef0f33feff67 and the automate PR can't be created\nLower priority\nIs null and is not null are validated and suggested as different operators at kibana. At our definitions and docs here we are grouping them under the predicates group. In order to reuse them kibana needs to hardcode the two operators and get the details from ES. Check our PR. It would be more convenient instead of having one predicates file json and md to have 2 (is null, is not null) in order kibana to not hardcode anything", "created_at": "2025-03-31", "closed_at": "2025-04-01", "labels": [">enhancement", ">docs", "Team:Docs", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "stratoula"}
{"issue_number": 125920, "issue_title": "Increased memory usage in 8.18/9.0", "issue_body": "Elasticsearch Version\n8.18, 9.0, main\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nAll (confirmend on Linux and OSX)\nProblem Description\nWe observed an increased usage of memory from ES processes; when running in 1GiB containers, this leads ES to occasionally exceed the limits of the container and get oom-killed.\nApparently, this happens more frequently with 8.18, main, and with cgroups v2; 9.0 appeared to be unaffected, and so nodes running with cgroups v1, but this seems to be more due to chance than hard evidence.\nThis issue was observed internally in our cloud depolyments (ECE and Serverless) -- Incident 1321.\nThe root cause seems to be an increase to Java \"Internal\" memory (one of the categories reported by Java NMT (Native Memory Tracking), which is ~100MB greater than in previous versions. It seems the additional memory is allocated/retained by the JVM as a consequence of enabling Entitlements.\nSteps to Reproduce\nThe increased memory consumption can be seen by running ES 8.18; in particular, running it with NMT shows the increase in Internal size.\nIn order to compare the numbers with a baseline however it is necessary to run ES 8.18 (or main) with entitlements off; to do that, you need a code change (look for write usages of the useEntitlements variable).\nLogs (if relevant)\nNo response", "created_at": "2025-03-31", "closed_at": "2025-03-31", "labels": [">bug", "Team:Core/Infra", "v9.0.0", "v8.18.0", ":Core/Infra/Entitlements"], "State": "closed", "Author": "ldematte"}
{"issue_number": 125913, "issue_title": "[CI] HeapAttackIT testLookupExplosionNoFetch failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7657 / ubuntu-2404-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7622 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":test:external-modules:test-esql-heap-attack:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.heap_attack.HeapAttackIT.testLookupExplosionNoFetch\" -Dtests.seed=FC387C8F4E103DFA -Dtests.locale=rn-Latn-BI -Dtests.timezone=America/Bahia -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:33219], URI [/_query?error_trace=], status line [HTTP/1.1 429 Too Many Requests]\nWarnings: [No limit defined, adding default limit of [1000]]\n{\"error\":{\"root_cause\":[{\"type\":\"circuit_breaking_exception\",\"reason\":\"[request] Data too large, data for [serialize lookup join response] would be [601527584/573.6mb], which is larger than the limit of [322122547/307.1mb]; for more information, see https://www.elastic.co/docs/troubleshoot/elasticsearch/circuit-breaker-errors?version=master\",\"bytes_wanted\":601527584,\"bytes_limit\":322122547,\"durability\":\"TRANSIENT\",\"stack_trace\":\"org.elasticsearch.common.breaker.CircuitBreakingException: [request] Data too large, data for [serialize lookup join response] would be [601527584/573.6mb], which is larger than the limit of [322122547/307.1mb]; for more information, see https://www.elastic.co/docs/troubleshoot/elasticsearch/circuit-breaker-errors?version=master\\n\\tat org.elasti\n[truncated]\n\nIssue Reasons:\n\n[9.0] 2 failures in test testLookupExplosionNoFetch (1.6% fail rate in 124 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (33.3% fail rate in 6 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": "2025-04-15", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125912, "issue_title": "[CI] IndexStatsIT testConcurrentIndexingAndStatsRequests failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7342 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7364 / rhel-9_platform-support-unix\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.indices.stats.IndexStatsIT.testThrottleStats\" -Dtests.seed=89A7CF4ED59E5D2 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=ks-Arab -Dtests.timezone=Pacific/Honolulu -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Shard [test][0] is still locked after 5 sec waiting\n\nIssue Reasons:\n\n[main] 2 failures in test testConcurrentIndexingAndStatsRequests (2.0% fail rate in 102 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": "2025-04-03", "labels": [">test-failure", ":Distributed Indexing/Distributed", "medium-risk", "Team:Distributed Indexing"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125911, "issue_title": "[CI] SearchableSnapshotActionIT testConvertingSearchableSnapshotFromFullToPartial failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7545 / concurrent-search-tests\nelasticsearch-periodic #7440 / single-processor-node-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:qa:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.ilm.actions.SearchableSnapshotActionIT.testConvertingSearchableSnapshotFromFullToPartial\" -Dtests.seed=6ADBECFE16B1790E -Dtests.jvm.argline=\"-Des.concurrent_search=true\" -Dtests.locale=prg -Dtests.timezone=Europe/Zurich -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 2 failures in test testConvertingSearchableSnapshotFromFullToPartial (0.3% fail rate in 705 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (12.5% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": "2025-04-10", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125910, "issue_title": "[CI] IndexStatsIT testThrottleStats failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7342 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7364 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic #7342 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7342 / single-processor-node-tests\nelasticsearch-periodic-platform-support #7364 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #7364 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #7364 / ubuntu-2204_platform-support-unix\nelasticsearch-periodic-platform-support #7364 / rhel-9_platform-support-unix\nelasticsearch-intake #21005 / part1\nelasticsearch-pull-request #65274 / part-1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.indices.stats.IndexStatsIT.testThrottleStats\" -Dtests.seed=A518D7D30D2205E8 -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=ff-Adlm-GH -Dtests.timezone=America/New_York -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: expected:<0> but was:<3>\n\nIssue Reasons:\n\n[main] 10 failures in test testThrottleStats (3.3% fail rate in 306 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-31", "closed_at": "2025-04-03", "labels": [">test-failure", ":Distributed Indexing/Distributed", "medium-risk", "Team:Distributed Indexing"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125909, "issue_title": "[CI] XPackRestIT test {p0=ml/start_data_frame_analytics/Test start given dest index is not empty} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7357 / ubuntu-2404_platform-support-unix\nelasticsearch-pull-request #65199 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=ml/start_data_frame_analytics/Test start given dest index is not empty}\" -Dtests.seed=BD149426348092AA -Dtests.locale=vec-Latn-IT -Dtests.timezone=Antarctica/South_Pole -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [ml/start_data_frame_analytics:174]: the error message was expected to match the provided regex but didn't\nExpected: dest index \\[non-empty-dest\\] must be empty\n     but: was \"{root_cause=[{type=no_shard_available_action_exception, reason=null, stack_trace=org.elasticsearch.action.NoShardAvailableActionException\\n}], type=exception, reason=all shards failed, caused_by={type=search_phase_execution_exception, reason=all shards failed, phase=query, grouped=true, failed_shards=[{shard=0, index=.ml-stats-000001, node=null, reason={type=no_shard_available_action_exception, reason=null, stack_trace=org.elasticsearch.action.NoShardAvailableActionException\\n}}], stack_trace=Failed to execute phase [query], all shards failed; shardFailures {[_na_][.ml-stats-000001][0]: org.elasticsearch.action.NoShardAvailableActionException\\n}\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseFailure(AbstractSearch\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {p0=ml/start_data_frame_analytics/Test start given dest index is not empty} (0.3% fail rate in 672 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125908, "issue_title": "[CI] EsqlPartialResultsIT testFailureFromRemote failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7791 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic-platform-support #7725 / ubuntu-2204_platform-support-unix\n\nReproduction Line:\n./gradlew \":test:external-modules:test-error-query:javaRestTest\" --tests \"org.elasticsearch.test.esql.EsqlPartialResultsIT.testFailureFromRemote\" -Dtests.seed=557B7E241EDF5AB7 -Dtests.locale=st-ZA -Dtests.timezone=America/Nipigon -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <{type=illegal_state_exception, reason=Accessing failing field}>\n     but: was <{reason=Accessing failing field, suppressed=[{reason=Accessing failing field, type=illegal_state_exception}], type=illegal_state_exception}>\n\nIssue Reasons:\n\n[8.x] 2 failures in test testFailureFromRemote (0.6% fail rate in 338 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (16.7% fail rate in 12 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": null, "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125907, "issue_title": "[CI] IndexStatsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7342 / openjdk21_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7342 / openjdk23_entitlements_false_checkpart1_java-matrix\nelasticsearch-periodic-platform-support #7364 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic #7342 / openjdk23_entitlements_true_checkpart1_java-matrix\nelasticsearch-periodic #7342 / single-processor-node-tests\nelasticsearch-periodic-platform-support #7364 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #7364 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #7364 / ubuntu-2204_platform-support-unix\nelasticsearch-periodic-platform-support #7364 / rhel-9_platform-support-unix\nelasticsearch-intake #21007 / part1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.indices.stats.IndexStatsIT.testBulkStats\" -Dtests.seed=E7ABC83C0CFF72FE -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=ksh-DE -Dtests.timezone=Pacific/Kwajalein -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.ResourceAlreadyExistsException: index [test/LPf_YSX2SDCkbc-4-CAa2w] already exists\n\nIssue Reasons:\n\n[main] 2 consecutive failures in class org.elasticsearch.indices.stats.IndexStatsIT\n[main] 12 failures in class org.elasticsearch.indices.stats.IndexStatsIT (3.9% fail rate in 307 executions)\n[main] 2 failures in step part1 (8.0% fail rate in 25 executions)\n[main] 2 failures in pipeline elasticsearch-intake (8.0% fail rate in 25 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": "2025-04-03", "labels": [">test-failure", ":Distributed Indexing/Distributed", "medium-risk", "Team:Distributed Indexing"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125906, "issue_title": "[CI] DockerYmlTestSuiteIT test {p0=/11_nodes/Test cat nodes output} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7480 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-pull-request #66150 / part-1\nelasticsearch-periodic-platform-support #7410 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic-platform-support #7389 / amazonlinux-2_platform-support-aws\nelasticsearch-periodic-platform-support #7354 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":distribution:docker:yamlRestTest\" --tests \"org.elasticsearch.docker.test.DockerYmlTestSuiteIT.test {p0=/11_nodes/Additional disk information}\" -Dtests.seed=7162E11D34378256 -Dtests.locale=mt-Latn-MT -Dtests.timezone=Europe/Mariehamn -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[8.18] 5 failures in test test {p0=/11_nodes/Test cat nodes output} (0.9% fail rate in 579 executions)\n[8.18] 2 failures in step amazonlinux-2023_platform-support-aws (12.5% fail rate in 16 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic-platform-support (22.2% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125905, "issue_title": "[CI] DockerYmlTestSuiteIT test {p0=/11_nodes/Additional disk information} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7480 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-pull-request #66150 / part-1\nelasticsearch-periodic-platform-support #7410 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic-platform-support #7389 / amazonlinux-2_platform-support-aws\nelasticsearch-periodic-platform-support #7354 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":distribution:docker:yamlRestTest\" --tests \"org.elasticsearch.docker.test.DockerYmlTestSuiteIT.test {p0=/11_nodes/Additional disk information}\" -Dtests.seed=7162E11D34378256 -Dtests.locale=mt-Latn-MT -Dtests.timezone=Europe/Mariehamn -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[8.18] 5 failures in test test {p0=/11_nodes/Additional disk information} (0.9% fail rate in 579 executions)\n[8.18] 2 failures in step amazonlinux-2023_platform-support-aws (12.5% fail rate in 16 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic-platform-support (22.2% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125904, "issue_title": "[CI] DockerYmlTestSuiteIT test {p0=/10_info/Info} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7480 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-pull-request #66150 / part-1\nelasticsearch-periodic-platform-support #7410 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic-platform-support #7389 / amazonlinux-2_platform-support-aws\nelasticsearch-periodic-platform-support #7354 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":distribution:docker:yamlRestTest\" --tests \"org.elasticsearch.docker.test.DockerYmlTestSuiteIT.test {p0=/11_nodes/Additional disk information}\" -Dtests.seed=7162E11D34378256 -Dtests.locale=mt-Latn-MT -Dtests.timezone=Europe/Mariehamn -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[8.18] 5 failures in test test {p0=/10_info/Info} (0.9% fail rate in 579 executions)\n[8.18] 2 failures in step amazonlinux-2023_platform-support-aws (12.5% fail rate in 16 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic-platform-support (22.2% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125903, "issue_title": "[CI] DockerYmlTestSuiteIT test {p0=/11_nodes/Test cat nodes output with full_id set} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7480 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-pull-request #66150 / part-1\nelasticsearch-periodic-platform-support #7410 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic-platform-support #7389 / amazonlinux-2_platform-support-aws\nelasticsearch-periodic-platform-support #7354 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":distribution:docker:yamlRestTest\" --tests \"org.elasticsearch.docker.test.DockerYmlTestSuiteIT.test {p0=/11_nodes/Additional disk information}\" -Dtests.seed=7162E11D34378256 -Dtests.locale=mt-Latn-MT -Dtests.timezone=Europe/Mariehamn -Druntime.java=24\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[8.18] 5 failures in test test {p0=/11_nodes/Test cat nodes output with full_id set} (0.9% fail rate in 579 executions)\n[8.18] 2 failures in step amazonlinux-2023_platform-support-aws (12.5% fail rate in 16 executions)\n[8.18] 4 failures in pipeline elasticsearch-periodic-platform-support (22.2% fail rate in 18 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125902, "issue_title": "[CI] CoreWithMultipleProjectsClientYamlTestSuiteIT test {yaml=search.vectors/41_knn_search_bbq_hnsw/Test index configured rescore vector score consistency} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7328 / openjdk21_entitlements_false_checkpart2_java-matrix\nelasticsearch-pull-request #65412 / part-2\nelasticsearch-pull-request #65329 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:qa:multi-project:core-rest-tests-with-multiple-projects:yamlRestTest\" --tests \"org.elasticsearch.multiproject.test.CoreWithMultipleProjectsClientYamlTestSuiteIT\" -Dtests.method=\"test {yaml=search.vectors/41_knn_search_bbq_hnsw/Test index configured rescore vector score consistency}\" -Dtests.seed=E639BE0AF4AC13A2 -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=en-CH -Dtests.timezone=Europe/Saratov -Druntime.java=21\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [search.vectors/41_knn_search_bbq_hnsw:594]: \nExpected: <6.3367105>\n     but: was <6.392275>\n\nIssue Reasons:\n\n[main] 3 failures in test test {yaml=search.vectors/41_knn_search_bbq_hnsw/Test index configured rescore vector score consistency} (1.6% fail rate in 192 executions)\n[main] 2 failures in step part-2 (3.8% fail rate in 53 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (3.8% fail rate in 52 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": "2025-04-01", "labels": [">test-failure", ":Search Relevance/Vectors", "needs:risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125901, "issue_title": "[CI] RejectionActionIT testSimulatedSearchRejectionLoad failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7614 / ubuntu-2204_platform-support-unix\nelasticsearch-pull-request #67348 / part-1\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.action.RejectionActionIT.testSimulatedSearchRejectionLoad\" -Dtests.seed=51E1B1F07CB9F3EC -Dtests.locale=en-KN -Dtests.timezone=America/Creston -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: There are still [1] in-flight contexts. The first one's creation site is listed as the cause of this exception.\n\nIssue Reasons:\n\n[8.x] 2 failures in test testSimulatedSearchRejectionLoad (1.4% fail rate in 142 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125899, "issue_title": "[CI] SearchServiceSingleNodeTests testSlicingBehaviourForParallelCollection failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7356 / release-tests\nelasticsearch-pull-request #65610 / checkpart1_release-tests\nelasticsearch-pull-request #65594 / checkpart1_release-tests\nelasticsearch-pull-request #65602 / checkpart1_release-tests\nelasticsearch-pull-request #65594 / checkpart1_release-tests\nelasticsearch-periodic #7349 / release-tests\nelasticsearch-periodic #7342 / release-tests\nelasticsearch-periodic #7328 / release-tests\nelasticsearch-periodic #7321 / release-tests\nelasticsearch-periodic #7314 / release-tests\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.search.SearchServiceSingleNodeTests.testSlicingBehaviourForParallelCollection\" -Dtests.seed=A5774D4729EE9273 -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=szl -Dtests.timezone=PST8PDT -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 6 consecutive failures in step release-tests\n[main] 4 consecutive failures in step checkpart1_release-tests\n[main] 10 failures in test testSlicingBehaviourForParallelCollection (3.3% fail rate in 304 executions)\n[main] 6 failures in step release-tests (100.0% fail rate in 6 executions)\n[main] 4 failures in step checkpart1_release-tests (100.0% fail rate in 4 executions)\n[main] 6 failures in pipeline elasticsearch-periodic (85.7% fail rate in 7 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (3.7% fail rate in 81 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-30", "closed_at": "2025-04-04", "labels": [">test-failure", "low-risk", "Team:Search Foundations", ":Search Foundations/Search"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125897, "issue_title": "[CI] XPackRestIT test {p0=data_stream/80_resolve_index_data_streams/Resolve index with hidden and closed indices} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7311 / openjdk23_checkrestcompat_java-matrix\nelasticsearch-periodic-platform-support #7228 / ubuntu-2404-aarch64_checkrestcompat_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTestV7CompatTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=data_stream/80_resolve_index_data_streams/Resolve index with hidden and closed indices}\" -Dtests.seed=D3D01922EAC1F2E3 -Dtests.locale=lb -Dtests.timezone=Europe/Astrakhan -Druntime.java=23\n\nApplicable branches:\n8.18\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [data_stream/80_resolve_index_data_streams:261]: \nExpected: \"test_index1\"\n     but: was \".security-7\"\n\nIssue Reasons:\n\n[8.18] 2 failures in test test {p0=data_stream/80_resolve_index_data_streams/Resolve index with hidden and closed indices} (1.0% fail rate in 199 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-29", "closed_at": "2025-03-31", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125890, "issue_title": "[CI] EnterpriseSearchRestIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20993 / rest-compat\nelasticsearch-intake #20992 / rest-compat\nelasticsearch-pull-request #65434 / rest-compatibility\nelasticsearch-pull-request #65438 / rest-compatibility\nelasticsearch-pull-request #65436 / rest-compatibility\nelasticsearch-pull-request #65434 / rest-compatibility\nelasticsearch-pull-request #65433 / rest-compatibility\nelasticsearch-intake #20988 / rest-compat\nelasticsearch-pull-request #65432 / rest-compatibility\nelasticsearch-pull-request #65428 / rest-compatibility\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 7 consecutive failures in step rest-compat\n[main] 6 consecutive failures in step rest-compatibility\n[main] 2 consecutive failures in pipeline elasticsearch-intake\n[main] 23 failures in class org.elasticsearch.xpack.entsearch.EnterpriseSearchRestIT (3.9% fail rate in 597 executions)\n[main] 7 failures in step rest-compat (15.9% fail rate in 44 executions)\n[main] 15 failures in step rest-compatibility (8.3% fail rate in 180 executions)\n[main] 7 failures in pipeline elasticsearch-intake (15.6% fail rate in 45 executions)\n[main] 13 failures in pipeline elasticsearch-pull-request (7.0% fail rate in 185 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-28", "closed_at": "2025-03-28", "labels": [">test-failure", ":SearchOrg/Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125872, "issue_title": "Show \"mustache.max_output_size_bytes\" cluster settings defaults", "issue_body": "Elasticsearch Version\n8.17.3\nInstalled Plugins\nNA\nJava Version\nbundled\nOS Version\nESS\nProblem Description\n\ud83d\udc4b howdy, team!\nIt appears @thecoop added mustache.max_output_size_bytes into Elasticsearch in v8.16.0 via #114002. Per #122947, this setting is editable to a certain limit somewhere under 2GB.\nHowever this setting is not documented in Elasticsearch's docs (in current for v8 nor docs-content for main for v9) && this setting does not show under Cluster Settings API with defaults included. Therefore, users who immediately start erring post upgrade cannot find recovery information.\nSteps to Reproduce\n\nCreate a Watcher with a large search response body.\nUnrecoverably error like log below.\nIF on-prem update elasticsearch.yml setting mustache.max_output_size_bytes to potentially recover, else narrow down response body. IF on ECH/ES3, unknown recovery path.\n\nLogs (if relevant)\n[2025-03-26T07:32:56,638][ERROR][org.elasticsearch.xpack.watcher.actions.webhook.ExecutableWebhookAction] [instance-0000000023] failed to execute action [xxxxx_xxxxxx/output_to_eleasticsearch]\norg.elasticsearch.ElasticsearchParseException: Mustache script result size limit exceeded\n    at org.elasticsearch.script.mustache.MustacheScriptEngine$MustacheExecutableScript.execute(MustacheScriptEngine.java:148) ~[?:?]\n    at org.elasticsearch.xpack.watcher.common.text.TextTemplateEngine.render(TextTemplateEngine.java:64) ~[?:?]\n    at org.elasticsearch.xpack.watcher.common.http.HttpRequestTemplate.render(HttpRequestTemplate.java:163) ~[?:?]\n    at org.elasticsearch.xpack.watcher.notification.WebhookService.execute(WebhookService.java:126) ~[?:?]\n    at org.elasticsearch.xpack.watcher.actions.webhook.ExecutableWebhookAction.execute(ExecutableWebhookAction.java:30) ~[?:?]\n    at org.elasticsearch.xpack.core.watcher.actions.ActionWrapper.execute(ActionWrapper.java:175) ~[?:?]\n    at org.elasticsearch.xpack.watcher.execution.ExecutionService.executeInner(ExecutionService.java:559) ~[?:?]\n    at org.elasticsearch.xpack.watcher.execution.ExecutionService.execute(ExecutionService.java:341) ~[?:?]\n    at org.elasticsearch.xpack.watcher.execution.ExecutionService.lambda$executeAsync$6(ExecutionService.java:439) ~[?:?]\n    at org.elasticsearch.xpack.watcher.execution.ExecutionService$WatchExecutionTask.run(ExecutionService.java:665) ~[?:?]\n    at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:956) ~[elasticsearch-8.17.3.jar:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[?:?]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[?:?]\n    at java.lang.Thread.run(Thread.java:1575) ~[?:?]\nCaused by: com.github.mustachejava.MustacheException: Failed to get value for xxxxx_xxxxxx.sum @[query-template:4]\n    at com.github.mustachejava.codes.ValueCode.execute(ValueCode.java:74) ~[?:?]\n    at com.github.mustachejava.codes.DefaultMustache.run(DefaultMustache.java:34) ~[?:?]\n    at com.github.mustachejava.codes.DefaultCode.run(DefaultCode.java:214) ~[?:?]\n    at com.github.mustachejava.codes.IterableCode.next(IterableCode.java:143) ~[?:?]\n    at com.github.mustachejava.reflect.BaseObjectHandler.iterate(BaseObjectHandler.java:81) ~[?:?]\n    at com.github.mustachejava.codes.IterableCode.execute(IterableCode.java:138) ~[?:?]\n    at com.github.mustachejava.codes.IterableCode.handle(IterableCode.java:54) ~[?:?]\n    at com.github.mustachejava.codes.IterableCode.execute(IterableCode.java:42) ~[?:?]\n    at com.github.mustachejava.codes.DefaultMustache.run(DefaultMustache.java:34) ~[?:?]\n    at com.github.mustachejava.codes.DefaultCode.execute(DefaultCode.java:162) ~[?:?]\n    at com.github.mustachejava.codes.DefaultMustache.execute(DefaultMustache.java:57) ~[?:?]\n    at com.github.mustachejava.Mustache.execute(Mustache.java:38) ~[?:?]\n    at org.elasticsearch.script.mustache.MustacheScriptEngine$MustacheExecutableScript.execute(MustacheScriptEngine.java:143) ~[?:?]\n    ... 13 more\nCaused by: org.elasticsearch.common.text.SizeLimitingStringWriter$SizeLimitExceededException: String [\n{ \"index\" : { \"_ind...] has exceeded the size limit [1048576]\n    at org.elasticsearch.common.text.SizeLimitingStringWriter.checkSizeLimit(SizeLimitingStringWriter.java:37) ~[elasticsearch-8.17.3.jar:?]\n    at org.elasticsearch.common.text.SizeLimitingStringWriter.write(SizeLimitingStringWriter.java:58) ~[elasticsearch-8.17.3.jar:?]\n    at com.github.mustachejava.codes.DefaultCode.appendText(DefaultCode.java:205) ~[?:?]\n    at com.github.mustachejava.codes.DefaultCode.execute(DefaultCode.java:162) ~[?:?]\n    at com.github.mustachejava.codes.ValueCode.execute(ValueCode.java:72) ~[?:?]\n    at com.github.mustachejava.codes.DefaultMustache.run(DefaultMustache.java:34) ~[?:?]\n    at com.github.mustachejava.codes.DefaultCode.run(DefaultCode.java:214) ~[?:?]\n    at com.github.mustachejava.codes.IterableCode.next(IterableCode.java:143) ~[?:?]\n    at com.github.mustachejava.reflect.BaseObjectHandler.iterate(BaseObjectHandler.java:81) ~[?:?]\n    at com.github.mustachejava.codes.IterableCode.execute(IterableCode.java:138) ~[?:?]\n    at com.github.mustachejava.codes.IterableCode.handle(IterableCode.java:54) ~[?:?]\n    at com.github.mustachejava.codes.IterableCode.execute(IterableCode.java:42) ~[?:?]\n    at com.github.mustachejava.codes.DefaultMustache.run(DefaultMustache.java:34) ~[?:?]\n    at com.github.mustachejava.codes.DefaultCode.execute(DefaultCode.java:162) ~[?:?]\n    at com.github.mustachejava.codes.DefaultMustache.execute(DefaultMustache.java:57) ~[?:?]\n    at com.github.mustachejava.Mustache.execute(Mustache.java:38) ~[?:?]\n    at org.elasticsearch.script.mustache.MustacheScriptEngine$MustacheExecutableScript.execute(MustacheScriptEngine.java:143) ~[?:?]\n    ... 13 more\n", "created_at": "2025-03-28", "closed_at": null, "labels": [">bug", ":Core/Infra/Scripting", "Team:Core/Infra", "Supportability", "triaged"], "State": "open", "Author": "stefnestor"}
{"issue_number": 125870, "issue_title": "ES|QL query produces column with empty name and null value", "issue_body": "With test dataset\nPOST /_query\n{\n  \"query\":\"from employees | stats  foo = min(emp_no), bar = count_distinct(emp_no) | rename bar AS bug_here, foo AS baz, baz AS bug_here | eval bug_here = \\\"something\\\"\"\n}\n\n{\n    \"took\": 5,\n    \"is_partial\": false,\n    \"columns\": [\n        {\n            \"name\": \"\",                  <<<-----\n            \"type\": \"null\"               <<<-----\n        },\n        {\n            \"name\": \"bug_here\",\n            \"type\": \"keyword\"\n        }\n    ],\n    \"values\": [\n        [\n            null,\n            \"something\"\n        ]\n    ]\n}\n", "created_at": "2025-03-28", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "luigidellaquila"}
{"issue_number": 125867, "issue_title": "[CI] TimeSeriesDataStreamsIT testSearchableSnapshotAction failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7308 / rhel-9_platform-support-unix\nelasticsearch-pull-request #64585 / part-5\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:qa:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.ilm.TimeSeriesDataStreamsIT.testSearchableSnapshotAction\" -Dtests.seed=B64E5CCDB22BF95B -Dtests.locale=cs -Dtests.timezone=Europe/Istanbul -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: null\n\nIssue Reasons:\n\n[main] 2 failures in test testSearchableSnapshotAction (0.3% fail rate in 651 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-28", "closed_at": "2025-04-10", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125866, "issue_title": "ES|QL: better validation for queries on empty mappings", "issue_body": "Querying an index with no columns returns the following error\n{\n    \"error\": {\n        \"root_cause\": [\n            {\n                \"type\": \"illegal_state_exception\",\n                \"reason\": \"Found 1 problem\\nline 1:1: Plan [ProjectExec[[<no-fields>{r$}#3]]] optimized incorrectly due to missing references [<no-fields>{r$}#3]\"\n            }\n        ],\n        \"type\": \"illegal_state_exception\",\n        \"reason\": \"Found 1 problem\\nline 1:1: Plan [ProjectExec[[<no-fields>{r$}#3]]] optimized incorrectly due to missing references [<no-fields>{r$}#3]\"\n    },\n    \"status\": 500\n}\n\nIt's a very corner case, but we should at least return a more graceful error message, and for sure we don't want it to be a 500.\nReproducer:\nPUT /index\n{\n    \"mappings\":{\n        \"dynamic\": \"false\",\n        \"properties\": {}\n    }\n}\n\nPOST /_query\n{\n  \"query\": \"from index\"\n}\n", "created_at": "2025-03-28", "closed_at": "2025-03-28", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "luigidellaquila"}
{"issue_number": 125860, "issue_title": "Notify certificate expiration and make renew easier", "issue_body": "Description\nCurrently my system is down after the certificate expired. guess it was the http.p12?\nUnfortunately there was no warning so i directly ran into the crash after updating the os.\n--> guess some kind of warning in the UI might have prevented this?\nNext i updated the \"http\" with the cert tool and copied the resulting files. Now the agent / fleet can no longer start due to:\n\u250c\u2500 fleet\n\u2502  \u2514\u2500 status: (STARTING)\n\u2514\u2500 elastic-agent\n   \u251c\u2500 status: (DEGRADED) 1 or more components/units in a failed state\n   \u2514\u2500 fleet-server-default\n      \u251c\u2500 status: (HEALTHY) Healthy: communicating with pid '1255'\n      \u251c\u2500 fleet-server-default\n      \u2502  \u2514\u2500 status: (FAILED) Error - failed version compatibility check with elasticsearch: x509: certificate signed by unknown authority\n      \u2514\u2500 fleet-server-default-fleet-server-fleet_server-bad6ee92-babd-4f47-a612-eb78cb0f27ea\n         \u2514\u2500 status: (FAILED) Error - failed version compatibility check with elasticsearch: x509: certificate signed by unknown authority\n\nNo idea how to fix this, no manual in sight. Agent had been installed with \"--insecure\" and i wonder why this setting got lost.\n--> it would really be helpfull if there's either better documentation \"how to update / replace expired certificate\" or much better a script surrounding the cert tool that is able to not only create the new cert but \"distribute\" it to the right locations.\nAny yes - i used the existing CA.", "created_at": "2025-03-28", "closed_at": null, "labels": [">enhancement", ":Security/TLS", "Team:Security"], "State": "open", "Author": "drummbelbummel"}
{"issue_number": 125854, "issue_title": "[CI] XPackRestIT test {p0=transform/transforms_start_stop/Verify start transform creates destination index with appropriate mapping} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20947 / part3\nelasticsearch-pull-request #65202 / part-3\nelasticsearch-periodic #7265 / openjdk21_checkpart3_java-fips-matrix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=transform/transforms_start_stop/Verify start transform creates destination index with appropriate mapping}\" -Dtests.seed=8E581B091C7F3A81 -Dtests.locale=pis-SB -Dtests.timezone=Asia/Chita -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [transform/transforms_start_stop:175]: expected [2xx] status code but api [transform.start_transform] returned [408 Request Timeout] [{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Starting transform [airline-transform-start-stop] timed out after [30s]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Starting transform [airline-transform-start-stop] timed out after [30s]\\n\\tat org.elasticsearch.transform@9.1.0-SNAPSHOT/org.elasticsearch.xpack.transform.action.TransportStartTransformAction$2.onTimeout(TransportStartTransformAction.java:364)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.persistent.PersistentTasksService$1.onTimeout(PersistentTasksService.java:217)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:390)\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.ClusterStateO\n[truncated]\n\nIssue Reasons:\n\n[main] 3 failures in test test {p0=transform/transforms_start_stop/Verify start transform creates destination index with appropriate mapping} (0.8% fail rate in 380 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-28", "closed_at": null, "labels": [">test-failure", ":ml/Transform", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125851, "issue_title": "[CI] RcsCcsCommonYamlTestSuiteIT test {p0=search.vectors/41_knn_search_bbq_hnsw/Test index configured rescore vector score consistency} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7286 / openjdk24_entitlements_true_checkpart1_java-matrix\nelasticsearch-pull-request #65031 / part-1\n\nReproduction Line:\n./gradlew \":qa:ccs-common-rest:yamlRestTest\" --tests \"org.elasticsearch.test.rest.yaml.RcsCcsCommonYamlTestSuiteIT\" -Dtests.method=\"test {p0=search.vectors/41_knn_search_bbq_hnsw/Test index configured rescore vector score consistency}\" -Dtests.seed=E7EEC75882A0B533 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=ne-Deva-NP -Dtests.timezone=Asia/Singapore -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [search.vectors/41_knn_search_bbq_hnsw:594]: \nExpected: <6.3367105>\n     but: was <6.392275>\n\nIssue Reasons:\n\n[main] 2 failures in test test {p0=search.vectors/41_knn_search_bbq_hnsw/Test index configured rescore vector score consistency} (0.9% fail rate in 216 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-28", "closed_at": "2025-03-31", "labels": [">test-failure", ":Search Relevance/Vectors", "needs:risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125850, "issue_title": "ESQL: can't increase refCount on already released object [ConstantNullBlock[...]]", "issue_body": "Elasticsearch Version\nmain, 8.16.3 at least\nInstalled Plugins\nNo response\nJava Version\nN/A\nOS Version\nN/A\nProblem Description\nQueries with union types of type boolean/keyword can lead to re-using an already released constant null block in the value source reader operator. This causes an illegal state exception and returns a 500 to the user.\nThe error may be in ComputeBlockLoaderFactory.constantNulls() (here), where we do not take into account that a constant null block that was once handed out may already have been consumed and closed downstream.\nSteps to Reproduce\n./gradlew run\n\ncurl -u elastic-admin:elastic-password -H \"Content-Type: application/json\" \"127.0.0.1:9200/test1\" -XPUT -d '{\n  \"mappings\": {\n        \"properties\": {\"truefalse1\": {\"type\": \"boolean\"}, \"truefalse2\": {\"type\": \"boolean\"}}}}'\n\ncurl -u elastic-admin:elastic-password -H \"Content-Type: application/json\" \"127.0.0.1:9200/test2\" -XPUT -d '{\n  \"mappings\": {\n        \"properties\": {\"truefalse1\": {\"type\": \"keyword\"}, \"truefalse2\": {\"type\": \"keyword\"}}}}'\n\ncurl -u elastic-admin:elastic-password -H \"Content-Type: application/json\" \"127.0.0.1:9200/test3\" -XPUT -d '{\n  \"mappings\": {\n        \"properties\": {\"truefalse1\": {\"type\": \"keyword\"}, \"truefalse2\": {\"type\": \"keyword\"}}}}'\n\ncurl -u elastic:password -HContent-Type:application/json 'localhost:9200/test1/_doc?refresh' -d '{\"truefalse1\": null}'\n\ncurl -u elastic:password -HContent-Type:application/json 'localhost:9200/test2/_doc?refresh' -d '{\"truefalse1\": null}' \n\ncurl -u elastic:password -HContent-Type:application/json 'localhost:9200/test3/_doc?refresh' -d '{\"foo\": 1}'\n\ncurl -u elastic-admin:elastic-password -H \"Content-Type: application/json\" 'localhost:9200/_query?format=txt&error_trace' -d '\n{\n  \"query\": \"from test* | eval t1 = truefalse1::boolean, t2 = truefalse2::boolean | keep t1, t2\"\n}'\nLogs (if relevant)\nNo response", "created_at": "2025-03-28", "closed_at": "2025-04-08", "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL", ":Analytics/Compute Engine"], "State": "closed", "Author": "alex-spies"}
{"issue_number": 125848, "issue_title": "[CI] SmokeTestMultiNodeClientYamlTestSuiteIT test {yaml=cat.allocation/10_basic/Node forecasts} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7357 / ubuntu-2004_platform-support-unix\nelasticsearch-pull-request #64677 / part-1\nelasticsearch-pull-request #64547 / part-1\n\nReproduction Line:\n./gradlew \":qa:smoke-test-multinode:yamlRestTest\" --tests \"org.elasticsearch.smoketest.SmokeTestMultiNodeClientYamlTestSuiteIT\" -Dtests.method=\"test {yaml=cat.allocation/10_basic/Node forecasts}\" -Dtests.seed=A06E19E12355931B -Dtests.locale=ee-TG -Dtests.timezone=Australia/Yancowinna -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [cat.allocation/10_basic:292]: field [$body] was expected to match the provided regex but didn't\nExpected: ^\n  ( [-\\w.]+                \\s+\n    [-\\w.]+                \\s+\n    [-\\w.]+                \\s+\n    [\\w]+\n    \\n\n  )+\n$\n     but: was \"test-cluster-1 0 0.0 11.9kb\\ntest-cluster-0 0 0.0     0b\\n\"\n\nIssue Reasons:\n\n[main] 3 failures in test test {yaml=cat.allocation/10_basic/Node forecasts} (0.3% fail rate in 894 executions)\n[main] 2 failures in step part-1 (0.6% fail rate in 315 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (0.6% fail rate in 315 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-28", "closed_at": "2025-04-01", "labels": [">test-failure", ":Data Management/CAT APIs", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125847, "issue_title": "Ingest pipeline processors: Syntax for fields API-style access of fields with dots", "issue_body": "Description\nContext\nIt's not uncommon for documents to have fields with dots in them:\n{\n  \"nested\": {\n     \"a.b.c\": \"This is a test\"\n  }\n}\n\nWhen specifying a field in a processor (e.g. grok, rename or others), it's currently not possible to target these fields, because dots are always interpreted as nested objects. { \"grok\": { \"field\": \"nested.a.b.c\" }} will only work on { \"nested\": { \"a\": { \"b\": { \"c\": \"This is a test\" } } } }.\nThis is important for the streams effort, which aims to offer a simplified UI to manage data in the Elastic stack and simulates changes to ingest pipelines using the source of existing documents. With synthetic source, dots in field names or nested objects are not preserved. Allowing ingest pipelines to be agnostic to this makes it possible to gain confidence in pipeline changes before applying them.\nSolution\nWhile in some cases it can be preferable to explicitly specify which fields are dotted and which are nested, this is often cumbersome and doesn't matter much to a user.\nA new syntax should be introduced to allow accessing these fields identical to how the fields API allows to do so in painless script processors. If the whole field name is wrapped in $(' and '), then the field name is interpreted similar to the fields API in a painless processor:\n{ \"grok\": { \"field\": \"$('nested.a.b.c')\" }}\n\nThe syntax and behavior is completely identical with the fields API which makes it simple for users to understand.\nIt's possible to escape quotes within the quotes using \\ to access field names with $(' in them:\n$('$(\\'fieldname\\')') // matches { \"$('fieldname')\": \"...\" }\n\nOpen questions\nHow does this syntax play with mustache template which are supported in some cases? For the scope of the observability team, it would be OK to not support it initially - this could be added later on.\nBreaking change\nThis feature constitutes a change of behavior - having a field name starting with $(' and ending with ') in a field name specified in an ingest pipeline is currently allowed and treats these as regular characters. However, these cases are expected to be very rare.\nDraft for breaking change proposal: elastic/dev#3092\nWhy not dot_expander?\nThe dot_expander processor is addressing a similar need by normalizing the data instead of allowing the user to specify the difference. However, it has some downsides which are unacceptable in some cases:\n\nNot possible to have a prefix of a dotted field name as a primitive value (especially in OTel this is a common format):\n\n{\n  \"host\": \"abc\",\n  \"host.name\": \"def\"  // can't be dot-expanded without breaking host\n}\n\n\nPossible collisions\n\n{\n  \"host\": { \"name\": \"abc\" },\n  \"host.name\": \"def\"\n}\n\n\nDifferent from OTTL, which allows this style of access\nChanges the shape of the data which loses information - it becomes impossible to tell the difference between dotted field names and nested field names\n\nReferences\nPOC: #125804\nDiscussion: elastic/streams-program#224", "created_at": "2025-03-28", "closed_at": null, "labels": [">enhancement", ":Data Management/Ingest Node", "Team:Data Management"], "State": "open", "Author": "flash1293"}
{"issue_number": 125844, "issue_title": "Point-in-Time (PIT) search with results sorted by icu_collation_keyword across multiple indices causes infinite loop", "issue_body": "Elasticsearch Version\n8.17.4\nInstalled Plugins\nanalysis-icu\nJava Version\nbundled\nOS Version\nDarwin vve-m1 22.6.0 Darwin Kernel Version 22.6.0: Thu Dec  5 23:40:09 PST 2024; root:xnu-8796.141.3.709.7~4/RELEASE_ARM64_T6000 arm64\nProblem Description\nPerforming a Point-in-Time (PIT) search with search_after across multiple indices, using icu_collation_keyword for sorting, leads to an infinite loop.\nSteps to Reproduce\n// create index WITH icu_collation_keyword\ncurl -X PUT \"http://localhost:9200/a\" -H \"Content-Type: application/json\" -d '{\n  \"mappings\": {\n    \"properties\": {\n      \"id\": {\n        \"type\": \"keyword\"\n      },\n      \"keyw\": {\n        \"type\": \"keyword\"\n      },\n      \"icu\": {\n        \"type\": \"icu_collation_keyword\"\n      }\n    }\n  }\n}'\n\n// put one document in the index\ncurl -X POST \"http://localhost:9200/a/_bulk\" -H \"Content-Type: application/json\" -d '\n{ \"index\": { \"_id\": \"1\" } }\n{ \"id\": \"1\", \"sort\": \"a\", \"icu\": \"a\" }\n'\n\n// create index WITHOUT icu_collation_keyword\ncurl -X PUT \"http://localhost:9200/b\" -H \"Content-Type: application/json\" -d '{\n  \"mappings\": {\n    \"properties\": {\n      \"id\": {\n        \"type\": \"keyword\"\n      }\n    }\n  }\n}'\n\n// put one document in the second index\ncurl -X POST \"httpe://localhost:9200/b/_bulk\" -H \"Content-Type: application/json\" -d '\n{ \"index\": { \"_id\": \"2\" } }\n{ \"id\": \"2\" }\n'\n\n// open pit\ncurl -X POST \"http://localhost:9200/a,b/_pit?keep_alive=10m\"\n\n// search\ncurl -X POST \"http://localhost:9200/_search\" -H \"Content-Type: application/json\" -d '{\n  \"size\": 1,\n  \"pit\": { \"id\": \"=== A PIT-ID RETRIEVED WITH PREVIOUS COMMAND===\" },\n  \"sort\": [\n    { \"sort\": { \"order\": \"asc\", \"missing\": \"_first\", \"unmapped_type\": \"keyword\" } },\n    { \"id\": \"asc\" }\n  ]\n}'\n\n// search after\ncurl -X POST \"http://localhost:9200/_search\" -H \"Content-Type: application/json\" -d '{\n  \"size\": 1,\n  \"pit\": { \"id\": \"=== A PIT-ID RETRIEVED WITH PREVIOUS COMMAND===\" },\n  \"search_after\": [null,\"2\",4294967296],\n  \"sort\": [\n    { \"sort\": { \"order\": \"asc\", \"missing\": \"_first\", \"unmapped_type\": \"keyword\" } },\n    { \"id\": \"asc\" }\n  ]\n}'\n\n// search after\ncurl -X POST \"https://localhost:9200/_search\" -H \"Content-Type: application/json\" -d '{\n  \"size\": 1,\n  \"pit\": { \"id\": \"=== A PIT-ID RETRIEVED WITH PREVIOUS COMMAND===\" },\n  \"search_after\": [\"*\\u0001\\u0005\\u0001\\u0005\\u0000\",\"1\",0],\n  \"sort\": [\n    { \"icu\": { \"order\": \"asc\", \"missing\": \"_first\", \"unmapped_type\": \"keyword\" } },\n    { \"id\": \"asc\" }\n  ]\n}'\n\n-> expected: no hits\n-> actual: the last result repeats indefinitely\n\n-> note: if ordinary keyword 'keyw' is used for sorting, the pit+search_after works correctly and the server returns no hits when the last result is reached\nLogs (if relevant)\nNo response", "created_at": "2025-03-28", "closed_at": "2025-03-28", "labels": [">bug", "needs:triage"], "State": "closed", "Author": "fluffyartist"}
{"issue_number": 125842, "issue_title": "[CI] ThreadPoolMergeExecutorServiceTests testIORateIsAdjustedForRunningMergeTasks failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7286 / openjdk24_entitlements_false_checkpart1_java-matrix\nelasticsearch-pull-request #64612 / part-1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.engine.ThreadPoolMergeExecutorServiceTests.testIORateIsAdjustedForRunningMergeTasks\" -Dtests.seed=9BD0AF493A33E7D -Dtests.jvm.argline=\"-Des.entitlements.enabled=false\" -Dtests.locale=zh-Latn -Dtests.timezone=America/Lima -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: is <15288239L>\n     but: was <18874368L>\n\nIssue Reasons:\n\n[main] 2 failures in test testIORateIsAdjustedForRunningMergeTasks (0.3% fail rate in 666 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-28", "closed_at": null, "labels": [">test-failure", ":Distributed Indexing/Engine", "low-risk", "Team:Distributed Indexing"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125841, "issue_title": "Ingest pipeline processors: Syntax for explicit access of fields with dots", "issue_body": "Description\nContext\nIt's not uncommon for documents to have fields with dots in them:\n{\n  \"nested\": {\n     \"a.b.c\": \"This is a test\"\n  }\n}\n\nWhen specifying a field in a processor (e.g. grok, rename or others), it's currently not possible to target these fields, because dots are always interpreted as nested objects. { \"grok\": { \"field\": \"nested.a.b.c\" }} will only work on { \"nested\": { \"a\": { \"b\": { \"c\": \"This is a test\" } } } }.\nThis is especially relevant for OTel data and the streams project which plans to transform all incoming data to match the otel format.\nSolution\nA new syntax should be introduced to allow accessing these fields in all processors. Dots are interpreted as nested objects except when enclosed in [' and ']:\n{ \"grok\": { \"field\": \"nested['a.b.c']\" }}\n\nSome examples:\n\"resource.attributes['bar.foo']\" // matches {\"resource\": {\"attributes\": {\"bar.foo\": \"\u2026\"}}}\n\"['resource']['attributes']['bar.foo']\" // same as above\n\"resource.attributes.bar.foo\" // matches {\"resource\": {\"attributes\": {\"bar\": {\"foo\": \"\u2026\"}}}}\n\"['resource']['attributes']['bar']['foo']\" // matches {\"resource\": {\"attributes\": {\"bar\": {\"foo\": \"\u2026\"}}}}\n\"['resource.attributes']['bar.foo']\" // matches {\"resource.attributes\": {\"bar.foo\": \"\u2026\"}}\n\"['resource.attributes.bar.foo']\" // matches {\"resource.attributes.bar.foo\": \"\u2026\"}}\n\nIt's possible to escape quotes within the quotes using \\ to still access field names with brackets in them:\nmy['weird[\\'fieldname\\']'] // matches { \"my\": { \"weird['fieldname']\": \"...\" } }\n\nOpen questions\nHow does this syntax play with mustache template which are supported in some cases? For the scope of the observability team, it would be OK to not support it initially - this could be added later on.\nBreaking change\nThis feature constitutes a change of behavior - using [' followed by '] in a field name specified in an ingest pipeline is currently allowed and treats these as regular characters. However, these cases are expected to be very rare.\nDraft for breaking change proposal: elastic/dev#3091\nWhy not dot_expander?\nThe dot_expander processor is addressing a similar need by normalizing the data instead of allowing the user to specify the difference. However, it has some downsides which are unacceptable in some cases:\n\nNot possible to have a prefix of a dotted field name as a primitive value (especially in OTel this is a common format):\n\n{\n  \"host\": \"abc\",\n  \"host.name\": \"def\"  // can't be dot-expanded without breaking host\n}\n\n\nPossible collisions\n\n{\n  \"host\": { \"name\": \"abc\" },\n  \"host.name\": \"def\"\n}\n\n\nDifferent from OTTL, which allows this style of access\nChanges the shape of the data which loses information - it becomes impossible to tell the difference between dotted field names and nested field names\n\nReferences\nPOC: #125566\nDiscussion: elastic/streams-program#224", "created_at": "2025-03-28", "closed_at": null, "labels": [">enhancement", ":Data Management/Ingest Node", "Team:Data Management"], "State": "open", "Author": "flash1293"}
{"issue_number": 125822, "issue_title": "[CI] RcsCcsCommonYamlTestSuiteIT test {p0=search.vectors/41_knn_search_bbq_hnsw/Vector rescoring has same scoring as exact search for kNN section} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20921 / part1\nelasticsearch-pull-request #64841 / part-1\n\nReproduction Line:\n./gradlew \":qa:ccs-common-rest:yamlRestTest\" --tests \"org.elasticsearch.test.rest.yaml.RcsCcsCommonYamlTestSuiteIT\" -Dtests.method=\"test {p0=search.vectors/41_knn_search_bbq_hnsw/Vector rescoring has same scoring as exact search for kNN section}\" -Dtests.seed=659A6BF329A84A85 -Dtests.locale=xnr-IN -Dtests.timezone=Europe/Helsinki -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [search.vectors/41_knn_search_bbq_hnsw:146]: \nExpected: <3>\n     but: was <2>\n\nIssue Reasons:\n\n[8.x] 2 failures in test test {p0=search.vectors/41_knn_search_bbq_hnsw/Vector rescoring has same scoring as exact search for kNN section} (1.0% fail rate in 210 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-28", "closed_at": "2025-03-31", "labels": [">test-failure", ":Search Relevance/Vectors", "needs:risk", "Team:Search Relevance"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125821, "issue_title": "[CI] DebPreservationTests test40RestartOnUpgrade failing", "issue_body": "CI Link\nhttps://gradle-enterprise.elastic.co/s/hlm6k3lnhx5m2\nRepro line\nnull\nDoes it reproduce?\nDidn't try\nApplicable branches\n8.x\nFailure history\nhttps://es-delivery-stats.elastic.dev/app/r/s/S1bw0\nFailure excerpt\nMar 28 01:05:59 bk-agent-prod-gcp-1743122906777424442 systemd-entrypoint[10383]: ERROR: Elasticsearch died while starting up, with exit code 137\t\nMar 28 01:05:59 bk-agent-prod-gcp-1743122906777424442 systemd[1]: elasticsearch.service: Main process exited, code=exited, status=137/n/a\t\nMar 28 01:05:59 bk-agent-prod-gcp-1743122906777424442 systemd[1]: elasticsearch.service: Failed with result 'exit-code'.\t\nMar 28 01:05:59 bk-agent-prod-gcp-1743122906777424442 systemd[1]: Failed to start Elasticsearch.] stderr = []\t\n[2025-03-28T01:06:00,518][WARN ][o.e.p.u.Packages         ] [TEST-DebPreservationTests.test40RestartOnUpgrade-seed#[FE1534277C8F2373]-workerest_thread_info] \u25cf elasticsearch.service - Elasticsearch\t\n     Loaded: loaded (/lib/systemd/system/elasticsearch.service; enabled; vendor preset: enabled)\t\n     Active: failed (Result: exit-code) since Fri 2025-03-28 01:05:59 UTC; 716ms ago\t\n       Docs: https://www.elastic.co/\t\n    Process: 10383 ExecStart=/usr/share/elasticsearch/bin/systemd-entrypoint -p ${PID_DIR}/elasticsearch.pid --quiet (code=exited, status=137)\t\n   Main PID: 10383 (code=exited, status=137)```\n", "created_at": "2025-03-28", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "mark-vieira"}
{"issue_number": 125819, "issue_title": "ESQL: Improved documentation on ESQL limits", "issue_body": "Description\nThe page on ESQL default limits could use a bit more explanations and examples as well as a comparison (table) with Elasticsearch\nThis would help alleviate some of the confusion around it - a section with screenshots from Kibana would be a nice bonus!", "created_at": "2025-03-28", "closed_at": "2025-03-28", "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "closed", "Author": "costin"}
{"issue_number": 125800, "issue_title": "[CI] XPackRestIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7687 / openjdk21_checkpart3_java-fips-matrix\nelasticsearch-pull-request #68313 / part-3\nelasticsearch-pull-request #68282 / part-3\nelasticsearch-pull-request #68278 / part-3\nelasticsearch-pull-request #68284 / part-3\nelasticsearch-pull-request #68284 / rest-compatibility\nelasticsearch-pull-request #68264 / part-3\nelasticsearch-pull-request #68257 / part-3\nelasticsearch-pull-request #68250 / part-3\nelasticsearch-pull-request #68256 / part-3\n\nReproduction Line:\n./gradlew \":x-pack:plugin:yamlRestTest\" --tests \"org.elasticsearch.xpack.test.rest.XPackRestIT.test {p0=spatial/120_position_geo_line/geo_line on position field same grouping as time-series without time-series}\" -Dtests.seed=38E0BD1CD0F04462 -Dtests.locale=cv -Dtests.timezone=America/Dominica -Druntime.java=21 -Dtests.fips.enabled=true\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: 1 active tasks found:\nreindex-data-stream[c]         -VPBJbt_T660kOPZ_rZYvw:131432 cluster:177                   persistent 1744838210328 21:16:50 7.2m        127.0.0.1 yamlRestTest-0 Reindexing data stream my-data-stream\n expected:<0> but was:<1>\n\nIssue Reasons:\n\n[main] 40 failures in class org.elasticsearch.xpack.test.rest.XPackRestIT (4.0% fail rate in 992 executions)\n[main] 7 failures in step part3 (8.1% fail rate in 86 executions)\n[main] 5 failures in step rest-compatibility (1.7% fail rate in 294 executions)\n[main] 23 failures in step part-3 (8.0% fail rate in 288 executions)\n[main] 4 failures in pipeline elasticsearch-periodic (50.0% fail rate in 8 executions)\n[main] 7 failures in pipeline elasticsearch-intake (7.9% fail rate in 89 executions)\n[main] 25 failures in pipeline elasticsearch-pull-request (8.1% fail rate in 308 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-27", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "medium-risk", ":SearchOrg/Relevance"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125789, "issue_title": "[CI] SearchableSnapshotActionIT testResumingSearchableSnapshotFromPartialToFull failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21049 / part5\nelasticsearch-periodic-platform-support #7287 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic #7237 / single-processor-node-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:qa:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.ilm.actions.SearchableSnapshotActionIT.testResumingSearchableSnapshotFromPartialToFull\" -Dtests.seed=127DEF3256F9FBDC -Dtests.locale=fy -Dtests.timezone=Europe/Vienna -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: is <false>\n     but: was <true>\n\nIssue Reasons:\n\n[main] 3 failures in test testResumingSearchableSnapshotFromPartialToFull (0.3% fail rate in 862 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-27", "closed_at": "2025-04-10", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125788, "issue_title": "[Meta] Batched Query Phase Follow-up Tasks", "issue_body": "Quick follow up tasks mostly around tests for after #121885 lands, covering what isn't tracked in the rollout doc:\n\n Fix tests running rest-api-spec/src/yamlRestTest/resources/rest-api-spec/test/search/120_batch_reduce_size.yml\n Adjust SearchErrorTraceIT and remove batched execution override (#127150)\n Adjust TasksIT and remove batched execution override\n Adjust SearchCancellationIT and remove batched execution override\n Adjust TermsDocCountErrorIT to be useful with batched execution\n Adjust tests in SearchCancellationIT and remove batched execution override\n Adjust tests in AsyncSearchErrorTraceIT and remove batched execution override (#127150)\n Optimise failure path if no partial results are requested in org.elasticsearch.action.search.SearchQueryThenFetchAsyncAction#executeShardTasks\n", "created_at": "2025-03-27", "closed_at": null, "labels": ["Meta", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "original-brownbear"}
{"issue_number": 125783, "issue_title": "ES|QL dense vector support", "issue_body": "Description\nProvide support for dense_vector search in ES|QL, including:\nMinimal dense_vector field support for search:\n\n Support for indexed, doc values and synthetic source: #126456\n Float element type using Float internally instead of Double\n Byte element type\n Bit element type\n TO_DENSE_VECTOR casting operator\n\nES|QL operations support\n\n Arithmetic operations -  Could include arithmetic operations between vectors and doing scalar operations\n Similarity related operations, similar to existing script_score support\n CASE and COALESCE support\n Multivalue functions support (MV_AVG, MV_COUNT, MV_FIRST...)\n Support binary comparison (==)\n Support COUNT and COUNT_DISTINCT\n Format - based functions to display or operate on dense_vectors: VECTOR_TRUNC(field, 5)\n\nSearch support for dense_vector will be addressed in #126710", "created_at": "2025-03-27", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "carlosdelest"}
{"issue_number": 125779, "issue_title": "[CI] HeapAttackIT testLookupExplosion failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7643 / amazonlinux-2023_platform-support-aws\nelasticsearch-periodic-platform-support #7517 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":test:external-modules:test-esql-heap-attack:javaRestTest\" --tests \"org.elasticsearch.xpack.esql.heap_attack.HeapAttackIT.testLookupExplosion\" -Dtests.seed=343D03F300F9B039 -Dtests.locale=vun-Latn-TZ -Dtests.timezone=Indian/Chagos -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:40005], URI [/_query?error_trace=], status line [HTTP/1.1 429 Too Many Requests]\nWarnings: [No limit defined, adding default limit of [1000]]\n{\"error\":{\"root_cause\":[{\"type\":\"circuit_breaking_exception\",\"reason\":\"[request] Data too large, data for [serialize lookup join response] would be [335303584/319.7mb], which is larger than the limit of [322122547/307.1mb]; for more information, see https://www.elastic.co/docs/troubleshoot/elasticsearch/circuit-breaker-errors?version=master\",\"bytes_wanted\":335303584,\"bytes_limit\":322122547,\"durability\":\"TRANSIENT\",\"stack_trace\":\"org.elasticsearch.common.breaker.CircuitBreakingException: [request] Data too large, data for [serialize lookup join response] would be [335303584/319.7mb], which is larger than the limit of [322122547/307.1mb]; for more information, see https://www.elastic.co/docs/troubleshoot/elasticsearch/circuit-breaker-errors?version=master\\n\\tat org.elasti\n[truncated]\n\nIssue Reasons:\n\n[9.0] 2 failures in test testLookupExplosion (0.4% fail rate in 466 executions)\n[9.0] 2 failures in pipeline elasticsearch-periodic-platform-support (10.5% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-27", "closed_at": "2025-04-15", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125760, "issue_title": "Cluster admin task getting added in taskholder", "issue_body": "Elasticsearch Version\n7.4\nInstalled Plugins\nNo response\nJava Version\n8\nOS Version\nWindows 11\nProblem Description\nI was trying out implementing the HttpChannelTaskHandler class which is present in 7.4 version in 5.6 version. While testing I am sending out requests to localhost:9200 which timeouts in <1ms and getting TaskCancellation exception as well. However, I am seeing one more exception that I have provided in the logs where TaskCancellation happens on a cluster admin task. This should not be the case.\nSteps to Reproduce\nRun ES 7.4 locally and send this request in a loop - (i am using python script):\ndata = {\n\"query\": {\n\"match_all\": {}\n}\n}\nfor i in range(1, 100):\n    try:\n        # Set a very short timeout to simulate closing the connection early\n        response = requests.get(url, headers=headers, json=data, timeout=0.0001)\n        # print(response.json())\n    except requests.exceptions.Timeout:\n        print(\"Connection closed before receiving the response.\")\n\nLogs (if relevant)\n[elasticsearch] [2025-03-27T15:49:50,737][DEBUG][o.e.a.a.c.n.t.c.TransportCancelTasksAction] [DvK0haW] failed to execute on node [DvK0haW6R96L1erwD-RM8A]\n[elasticsearch] org.elasticsearch.transport.RemoteTransportException: [DvK0haW][127.0.0.1:9300][cluster:admin/tasks/cancel[n]]\n[elasticsearch] Caused by: org.elasticsearch.ResourceNotFoundException: task [DvK0haW6R96L1erwD-RM8A:12742] doesn't support cancellation\n[elasticsearch]         at org.elasticsearch.action.admin.cluster.node.tasks.cancel.TransportCancelTasksAction.processTasks(TransportCancelTasksAction.java:102) ~[elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at org.elasticsearch.action.admin.cluster.node.tasks.cancel.TransportCancelTasksAction.processTasks(TransportCancelTasksAction.java:61) ~[elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at org.elasticsearch.action.support.tasks.TransportTasksAction.nodeOperation(TransportTasksAction.java:110) ~[elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at org.elasticsearch.action.support.tasks.TransportTasksAction.access$1000(TransportTasksAction.java:67) ~[elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at org.elasticsearch.action.support.tasks.TransportTasksAction$NodeTransportHandler.messageReceived(TransportTasksAction.java:347) ~[elasticsearch-5.6.10-azs23-SNAPSHOT.jar:5.6.10-azs23-SNAPSHOT]\n[elasticsearch]         at org.elasticsearch.action.support.tasks.TransportTasksAction$NodeTransportHandler.messageReceived(TransportTasksAction.java:343) ~[elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33) ~[elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:69) ~[elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at org.elasticsearch.transport.TransportService$7.doRun(TransportService.java:654) [elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:674) [elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) [elasticsearch-5.6.10-SNAPSHOT.jar]\n[elasticsearch]         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_442]\n[elasticsearch]         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_442]\n[elasticsearch]         at java.lang.Thread.run(Thread.java:750) [?:1.8.0_442]", "created_at": "2025-03-27", "closed_at": "2025-03-27", "labels": [">bug", "needs:triage"], "State": "closed", "Author": "Kriti007"}
{"issue_number": 125752, "issue_title": "[CI] TimeSeriesDataStreamsIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7280 / debian-12_platform-support-unix\nelasticsearch-pull-request #64585 / part-5\n\nReproduction Line:\nundefined\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[main] 2 failures in class org.elasticsearch.xpack.ilm.TimeSeriesDataStreamsIT (0.6% fail rate in 357 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-27", "closed_at": "2025-03-31", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125751, "issue_title": "BulkIndexError", "issue_body": "File \"/home/paperspace/anaconda3/envs/doc_env/lib/python3.10/site-packages/elasticsearch/helpers/actions.py\", line 276, in _process_bulk_chunk_success\nraise BulkIndexError(f\"{len(errors)} document(s) failed to index.\", errors)\nelasticsearch.helpers.BulkIndexError: 27 document(s) failed to index.", "created_at": "2025-03-27", "closed_at": "2025-03-27", "labels": ["needs:triage"], "State": "closed", "Author": "HarikrishnanK9"}
{"issue_number": 125750, "issue_title": "[CI] MlWithSecurityIT test {yaml=ml/trained_model_cat_apis/Test cat trained models} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7503 / openjdk23_entitlements_true_checkpart4_java-matrix\nelasticsearch-pull-request #66683 / part-4\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:ml-with-security:yamlRestTest\" --tests \"org.elasticsearch.smoketest.MlWithSecurityIT.test {yaml=ml/trained_model_cat_apis/Test cat trained models}\" -Dtests.seed=9EF47C0940D8BA01 -Dtests.jvm.argline=\"-Des.entitlements.enabled=true\" -Dtests.locale=es-GQ -Dtests.timezone=Europe/Madrid -Druntime.java=23\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [ml/trained_model_cat_apis:94]: expected [2xx] status code but api [cat.ml_trained_models] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[{\"type\":\"no_shard_available_action_exception\",\"reason\":\"[yamlRestTest-0][127.0.0.1:41323][indices:data/read/search[phase/query]]\",\"stack_trace\":\"org.elasticsearch.action.NoShardAvailableActionException: [yamlRestTest-0][127.0.0.1:41323][indices:data/read/search[phase/query]]\\n\"}],\"type\":\"exception\",\"reason\":\"Searching for stats for models [lang_ident_model_1,a-regression-model-1,a-regression-model-0] failed\",\"caused_by\":{\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\".ml-stats-000001\",\"node\":\"JE72XTihR_acnUE9dmujHw\",\"reason\":{\"type\":\"no_shard_available_action_exception\",\"reason\":\"[yamlRestTest-0][127.0.0.1:41323][indices:data/read/search[phase/query]]\",\"stack_trace\":\"org.elasticsearch.action.NoShardAvailableA\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {yaml=ml/trained_model_cat_apis/Test cat trained models} (1.2% fail rate in 162 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-27", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125745, "issue_title": "request for a command line parser processor", "issue_body": "Description\nIn security use cases it is useful to be able to parse command lines that have been recorded during events in order to be able to analyse them for their arguments. This is reflected in the existence of the process.args ECS field.\nCurrently there are about a dozen integrations that need to be able to do this. The approach that is used is to use a painless script that has been a cause of performance cost (recent work has been done to fix this in one of the integration data stream after recognising that the idioms used in the script implementation, coming originally from a Go implementation, do not play well with the Java allocator).\nIt would be useful to have a processor that did this work for a number of reasons:\n\npotential performance gains that are not available to painless client code\nreduced code duplication with the maintenance burden that goes with it when performance improvements are identified (as in the linked PR above), or when bugs are found/platform behaviours change\nimproved possibility of parsing multiple shell command lines; at the moment this is largely infeasible and in many cases a brittle approach to arg splitting is used (split on whitespace) because authors are unaware of the existing script or cannot fully implement an arg splitter for the shell they are targetting.\n\nIt seems that every shell and their dog has a different way of handling quoting and escaping (and in some cases a single shell has multiples), so we cannot handle all shells, but it would be helpful is we could handle a set of common shells, maybe:\n\nPowerShell\ncmd\nbash\nsh\n\n/cc @joegallo @andrewkroh\nList of readily found datastreams/pipelines making use of the windows arg splitter mentioned above, or more brittle whitespace tokenising.\n\nsysmon_linux/log/default.yml\nm365_defender/event/pipeline_alert.yml\nm365_defender/event/pipeline_device.yml\nsentinel_one_cloud_funnel/event/default.yml\nwindows/powershell/default.yml\nwindows/powershell_operational/default.yml\nwindows/forwarded/powershell.yml\nwindows/forwarded/sysmon_operational.yml\nwindows/forwarded/powershell_operational.yml\nwindows/sysmon_operational/default.yml\ncrowdstrike/falcon/default.yml\ncrowdstrike/fdr/default.yml\n\n", "created_at": "2025-03-27", "closed_at": null, "labels": [">enhancement", ":Data Management/Ingest Node", "Team:Data Management"], "State": "open", "Author": "efd6"}
{"issue_number": 125744, "issue_title": "[CI] ThreadPoolMergeSchedulerStressTestIT testMergingFallsBehindAndThenCatchesUp failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20849 / part1\nelasticsearch-periodic-platform-support #7273 / ubuntu-2404-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\n./gradlew \":server:internalClusterTest\" --tests \"org.elasticsearch.index.engine.ThreadPoolMergeSchedulerStressTestIT.testMergingFallsBehindAndThenCatchesUp\" -Dtests.seed=BEBE22A867691519 -Dtests.locale=ml-Mlym-IN -Dtests.timezone=Africa/Timbuktu -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.Error: Maximum permit count exceeded\n\nIssue Reasons:\n\n[main] 2 failures in test testMergingFallsBehindAndThenCatchesUp (0.9% fail rate in 212 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-27", "closed_at": "2025-04-02", "labels": [">test-failure", ":Distributed Indexing/Engine", "medium-risk", "Team:Distributed Indexing"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125741, "issue_title": "Elasticsearch 8.17.0 WARN related to ANTLR", "issue_body": "Elasticsearch Version\n8.17.0\nInstalled Plugins\nmurmur3, mapper\nJava Version\nbundled\nOS Version\nDebian 12\nProblem Description\nSeeing some WARN in my logs\n[2025-03-25T10:41:31,389][WARN ][stderr                   ] [h1_es_hot01] ANTLR Tool version 4.11.1 used for code generation does not match the current runtime version 4.13.1\n[2025-03-25T10:41:31,393][WARN ][stderr                   ] [h1_es_hot01] ANTLR Runtime version 4.11.1 used for parser compilation does not match the current runtime version 4.13.1\n[2025-03-25T10:41:31,442][WARN ][stderr                   ] [h1_es_hot01] ANTLR Tool version 4.11.1 used for code generation does not match the current runtime version 4.13.1\n[2025-03-25T10:41:31,443][WARN ][stderr                   ] [h1_es_hot01] ANTLR Runtime version 4.11.1 used for parser compilation does not match the current runtime version 4.13.1\n\n\nSteps to Reproduce\nNothing special\nLogs (if relevant)\nNothing special", "created_at": "2025-03-26", "closed_at": null, "labels": [">bug", ":Core/Infra/Scripting", "Team:Core/Infra"], "State": "open", "Author": "ylasri"}
{"issue_number": 125735, "issue_title": "[CI] SpatialExtentAggregationNoLicenseIT testStExtentAggregationWithPoints failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7287 / ubuntu-2404_platform-support-unix\nelasticsearch-pull-request #65024 / part-3\nelasticsearch-pull-request #64988 / part-3\nelasticsearch-pull-request #64997 / part-3\nelasticsearch-periodic #7258 / openjdk24_entitlements_false_checkpart3_java-matrix\nelasticsearch-periodic-platform-support #7273 / rocky-9_platform-support-unix\nelasticsearch-periodic-platform-support #7273 / ubuntu-2004-aarch64_checkpart3_platform-support-arm\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.spatial.SpatialExtentAggregationNoLicenseIT.testStExtentAggregationWithShapes\" -Dtests.seed=9C1AC459ADC91921 -Dtests.locale=fr-VU -Dtests.timezone=Africa/Harare -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Expected exception VerificationException but no exception was thrown\n\nIssue Reasons:\n\n[main] 7 failures in test testStExtentAggregationWithPoints (4.8% fail rate in 146 executions)\n[main] 3 failures in step part-3 (5.1% fail rate in 59 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (66.7% fail rate in 3 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (5.2% fail rate in 58 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": "2025-04-03", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125734, "issue_title": "[CI] SpatialExtentAggregationNoLicenseIT testStExtentAggregationWithShapes failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7294 / oraclelinux-9_platform-support-unix\nelasticsearch-periodic-platform-support #7294 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #7294 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7294 / rocky-8_platform-support-unix\nelasticsearch-periodic-platform-support #7294 / windows-2022_checkpart3_platform-support-windows\nelasticsearch-pull-request #65142 / part-3\nelasticsearch-pull-request #65101 / part-3\nelasticsearch-pull-request #65101 / part-3\nelasticsearch-intake #20883 / part3\nelasticsearch-periodic-platform-support #7287 / ubuntu-2404_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:internalClusterTest\" --tests \"org.elasticsearch.xpack.esql.spatial.SpatialExtentAggregationNoLicenseIT.testStExtentAggregationWithShapes\" -Dtests.seed=60EDFAE803E8DCE9 -Dtests.locale=bm-Latn-ML -Dtests.timezone=Australia/Lord_Howe -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Expected exception VerificationException but no exception was thrown\n\nIssue Reasons:\n\n[main] 2 consecutive failures in step oraclelinux-9_platform-support-unix\n[main] 2 consecutive failures in step ubuntu-2404_platform-support-unix\n[main] 21 failures in test testStExtentAggregationWithShapes (9.5% fail rate in 222 executions)\n[main] 2 failures in step oraclelinux-9_platform-support-unix (50.0% fail rate in 4 executions)\n[main] 6 failures in step part-3 (5.9% fail rate in 101 executions)\n[main] 2 failures in step ubuntu-2404_platform-support-unix (50.0% fail rate in 4 executions)\n[main] 2 failures in step rocky-9_platform-support-unix (66.7% fail rate in 3 executions)\n[main] 4 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 4 executions)\n[main] 5 failures in pipeline elasticsearch-pull-request (5.2% fail rate in 97 executions)\n[main] 2 failures in pipeline elasticsearch-periodic (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": "2025-03-27", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125727, "issue_title": "[CI] ReindexDataStreamTransportActionIT testAlreadyUpToDateDataStream failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7293 / oraclelinux-8_platform-support-unix\nelasticsearch-pull-request #65123 / part-2\nelasticsearch-periodic #7264 / encryption-at-rest\nelasticsearch-periodic #7264 / concurrent-search-tests\nelasticsearch-periodic-platform-support #7279 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7279 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7272 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #7272 / ubuntu-2404-aarch64_checkpart2_platform-support-arm\nelasticsearch-intake #20830 / part2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:migrate:internalClusterTest\" --tests \"org.elasticsearch.xpack.migrate.action.ReindexDataStreamTransportActionIT.testAlreadyUpToDateDataStream\" -Dtests.seed=21AEE223CD422160 -Dtests.locale=asa-TZ -Dtests.timezone=Portugal -Druntime.java=24\n\nApplicable branches:\n9.0\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <true>\n     but: was <false>\n\nIssue Reasons:\n\n[9.0] 9 failures in test testAlreadyUpToDateDataStream (8.1% fail rate in 111 executions)\n[9.0] 2 failures in step oraclelinux-8_platform-support-unix (66.7% fail rate in 3 executions)\n[9.0] 3 failures in pipeline elasticsearch-periodic-platform-support (75.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": "2025-04-02", "labels": [">test-failure", ":Data Management/Data streams", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125723, "issue_title": "ConstructingObjectParser does not handle a mix of null and optional fields", "issue_body": "Elasticsearch Version\nmain\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nN/A\nProblem Description\nIf you configure a ConstructingObjectParser with a mix of required fields that can be null and optional fields, argument parsing breaks if one of the required fields has an explicit null value. Parsing is broken because we only build the target eagerly when we receive explicit values for all constructor args (null or otherwise). When we receive only a subset of the constructor args, we validate them all using logic that does not handle if explicit null is allowed.\nSteps to Reproduce\nConfigure a ConstructingObjectParser with both a required arg that can be null and an optional arg:\nMY_PARSER.declareObjectOrNull(\n    constructorArg(),\n    (p, c) -> Foo.parse(p),\n    null,\n    new ParseField(\"foo\")\n);\nMY_PARSER.declareObject(\n   optionalConstructorArg(),\n   (p, c) -> Bar.parse(p),\n   new ParseField(\"bar\")\n);\n\nIf you try to parse an object like:\n{\n  \"foo\": null\n}\n\nvalidation will fail on an error that foo is required, even though a value is specified for it.\nLogs (if relevant)\nNo response", "created_at": "2025-03-26", "closed_at": null, "labels": [">bug", ":Core/Infra/Core", "Team:Core/Infra"], "State": "open", "Author": "Mikep86"}
{"issue_number": 125713, "issue_title": "NPE on mapping merge for dense_vector field", "issue_body": "Elasticsearch Version\n8.19+\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nna\nProblem Description\nWhen attempting to update the mapping of a dense vector field that has dynamically set particular values, it may fail with an NPE.\nSpecifically, this will occur with dims.\nSteps to Reproduce\n---\n\"Test mapping update with dynamic dims\":\n  - requires:\n      cluster_features: \"gte_v8.16.0\"\n      reason: 'updatable dense vector field type for int4 was added in 8.16'\n  - requires:\n      test_runner_features: [ contains ]\n  - do:\n      indices.create:\n        index: test_index\n\n  - do:\n      indices.put_mapping:\n        index: test_index\n        body:\n          properties:\n            embedding:\n              type: dense_vector\n              index_options:\n                type: flat\n  - do:\n      index:\n        index: test_index\n        id: \"40\"\n        body:\n          embedding: [ 1, 1, 1, 11 ]\n  - do:\n      indices.flush: { }\n\n  - do:\n      indices.refresh: {}\n\n  - do:\n      indices.put_mapping:\n        index: test_index\n        body:\n          properties:\n            embedding:\n              type: dense_vector\n              index_options:\n                type: int4_flat\n\nLogs (if relevant)\njava.lang.NullPointerException\n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.FieldMapper$Parameter.merge(FieldMapper.java:982) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.FieldMapper$Builder.merge(FieldMapper.java:1419) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.FieldMapper.merge(FieldMapper.java:406) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.FieldMapper.merge(FieldMapper.java:63) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.ObjectMapper$MergeResult.buildMergedMappers(ObjectMapper.java:716) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.ObjectMapper$MergeResult.build(ObjectMapper.java:638) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.RootObjectMapper.merge(RootObjectMapper.java:234) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.Mapping.merge(Mapping.java:147) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.MapperService.mergeMappings(MapperService.java:676) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.index.mapper.MapperService.mergeMappings(MapperService.java:643) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.metadata.MetadataMappingService$PutMappingExecutor.applyRequest(MetadataMappingService.java:154) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.metadata.MetadataMappingService$PutMappingExecutor.execute(MetadataMappingService.java:117) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.service.MasterService.innerExecuteTasks(MasterService.java:1076) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.service.MasterService.executeTasks(MasterService.java:1039) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.service.MasterService.executeAndPublishBatch(MasterService.java:246) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.service.MasterService$BatchingTaskQueue$Processor.lambda$run$2(MasterService.java:1692) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListener.run(ActionListener.java:465) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.service.MasterService$BatchingTaskQueue$Processor.run(MasterService.java:1689) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.service.MasterService$5.lambda$doRun$0(MasterService.java:1284) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.ActionListener.run(ActionListener.java:465) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.cluster.service.MasterService$5.doRun(MasterService.java:1263) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:1044) \n  at org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27) \n  at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095) \n  at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619) \n  at java.base/java.lang.Thread.run(Thread.java:1447) \n", "created_at": "2025-03-26", "closed_at": "2025-03-26", "labels": [">bug", ":Search Relevance/Vectors", "priority:normal", "Team:Search Relevance"], "State": "closed", "Author": "benwtrent"}
{"issue_number": 125711, "issue_title": "[CI] MixedClusterClientYamlTestSuiteIT test {p0=cat.allocation/10_basic/Node forecasts} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20808 / 8.19.0_bwc-snapshots\nelasticsearch-pull-request #64231 / 9.0.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:mixed-cluster:v8.19.0#mixedClusterTest\" -Dtests.class=\"org.elasticsearch.backwards.MixedClusterClientYamlTestSuiteIT\" -Dtests.method=\"test {p0=cat.allocation/10_basic/Node forecasts}\" -Dtests.seed=1E1A2CF8BEA597F6 -Dtests.bwc=true -Dtests.locale=pt-MZ -Dtests.timezone=Australia/Eucla -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [cat.allocation/10_basic:292]: field [$body] was expected to match the provided regex but didn't\nExpected: ^\n  ( [-\\w.]+                \\s+\n    [-\\w.]+                \\s+\n    [-\\w.]+                \\s+\n    [\\w]+\n    \\n\n  )+\n$\n     but: was \"v8.19.0-0 0 0.0    0b\\nv8.19.0-3 0 0.0 5.2kb\\nv8.19.0-2 0 0.0    0b\\nv8.19.0-1 0 0.0    0b\\n\"\n\nIssue Reasons:\n\n[main] 2 failures in test test {p0=cat.allocation/10_basic/Node forecasts} (0.4% fail rate in 550 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": "2025-04-01", "labels": [">test-failure", ":Data Management/CAT APIs", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125710, "issue_title": "Incorrect results of ES|QL query for `point` field nested in object", "issue_body": "Elasticsearch Version\n9.1 and earlier\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\n\n\n\nProblem Description\nIf you create a document with an object array and a point field using array form inside, it is not possible to use such field in a ES|QL query. Using specifically an array form and having multiple values of the field is crucial for the reproduction. See the steps below. This also applies to geo_point.\nSteps to Reproduce\nPUT my-index\n{\n  \"mappings\": {\n    \"properties\": {\n      \"top\": {\n        \"properties\": {\n          \"p\": {\n            \"type\": \"point\"\n          }\n        }\n      }\n    }\n  }\n}\n\nPOST my-index/_bulk?refresh\n{ \"create\": {} }\n{ \"top\": [{\"p\": [-71.34, 41.12]}, {\"p\": \"POINT (-71.34 41.13)\"}] }\n\nPOST /_query?format=txt\n{\n  \"query\": \"FROM my-index\"\n}\n\n\nProduces:\n     top.p     \n---------------\nnull           \n\nBut should produce:\n                   top.p                    \n--------------------------------------------\n[POINT (-71.34 41.12), POINT (-71.34 41.13)]\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-26", "closed_at": null, "labels": [">bug", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "lkts"}
{"issue_number": 125685, "issue_title": "Incorrect index mode in Get Data Streams API", "issue_body": "When we create an index template with a set index mode setting and a data stream that matches the same index pattern, after updating the index mode in the index template, the index mode is not updated in the data stream:\n\n\n\n\n\nScreen.Recording.2025-03-25.at.11.01.33.mov\n\n\n\n\n\nRelated to #122486\nBlocking elastic/kibana#215683", "created_at": "2025-03-26", "closed_at": null, "labels": [">bug", ":Data Management/Data streams", "Team:Data Management"], "State": "open", "Author": "ElenaStoeva"}
{"issue_number": 125683, "issue_title": "[CI] SearchableSnapshotActionIT testSearchableSnapshotsInHotPhasePinnedToHotNodes failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7266 / oraclelinux-9_platform-support-unix\nelasticsearch-pull-request #64774 / checkpart5_release-tests\nelasticsearch-periodic #7223 / single-processor-node-tests\nelasticsearch-periodic-platform-support #7245 / ubuntu-2404_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ilm:qa:multi-node:javaRestTest\" --tests \"org.elasticsearch.xpack.ilm.actions.SearchableSnapshotActionIT.testSearchableSnapshotsInHotPhasePinnedToHotNodes\" -Dtests.seed=23428F9DB66FBCCC -Dtests.locale=nl-CW -Dtests.timezone=America/Indianapolis -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: is <{\"phase\":\"hot\",\"action\":\"complete\",\"name\":\"complete\"}>\n     but: was <{\"phase\":\"null\",\"action\":\"null\",\"name\":\"null\"}>\n\nIssue Reasons:\n\n[main] 4 failures in test testSearchableSnapshotsInHotPhasePinnedToHotNodes (2.0% fail rate in 204 executions)\n[main] 2 failures in pipeline elasticsearch-periodic-platform-support (50.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": "2025-04-10", "labels": [">test-failure", ":Data Management/ILM+SLM", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125681, "issue_title": "Add low-level statistics about the memory requirements and usage of vectors in the system", "issue_body": "The intent of this issue is to expose low-level statistics to users about the memory requirements and usage of vectors in the system.\nAs vector data grows in the system it is imperative for search performance that certain elements of the index fit and are resident in memory, .e.g the HNSW graph and the quantized vectors. Performance can degrade significantly if either of these is paged out of memory. A separate issue is tracking using memory \"better\", see  #125655. This issue will focus on providing statistics to help users better understand the memory requirements of vectors in their running systems.\nSpecifically,\n\nFor an HNSW index, the approximate required off-heap memory to load the entire graph.\nFor a quantized index, the approximate required off-heap memory to load the quantized vectors.\nWhether or not the index is resident in memory, and optionally what proportion of it is.\nThe level of granularity should be at least at the shard level, if not per field.\n\nConsiderations:\n\nDo we need a new API for this, or can it be part of a new section of the node stats, say dense_vector_field_stats.\nHow can we, or does it even make sense to try to, expose further details about the underlying page cache activity relating to the aforementioned index data.\n", "created_at": "2025-03-26", "closed_at": null, "labels": [">enhancement", ":Search Relevance/Vectors", "Team:Search Relevance", ":Search Relevance/Search"], "State": "open", "Author": "ChrisHegarty"}
{"issue_number": 125680, "issue_title": "[CI] DockerTests test010Install failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-packaging #7349 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #7316 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #7302 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #7274 / ubuntu-2204_packaging-tests-unix\nelasticsearch-periodic-packaging #7232 / ubuntu-2204_packaging-tests-unix\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Elasticsearch container did not start successfully.\n\nps output:\n    PID TTY      STAT   TIME COMMAND\n      1 ?        Ss     0:00 /bin/tini -- /usr/local/bin/docker-entrypoint.sh eswrapper\n      7 ?        Sl     0:24 /usr/share/elasticsearch/jdk/bin/java -Xms4m -Xmx64m -XX:+UseSerialGC -Djava.security.egd=file:/dev/urandom -Dcli.name=server -Dcli.script=/usr/share/elasticsearch/bin/elasticsearch -Dcli.libs=lib/tools/server-cli -Des.path.home=/usr/share/elasticsearch -Des.path.conf=/usr/share/elasticsearch/config -Des.distribution.type=docker -cp /usr/share/elasticsearch/lib/*:/usr/share/elasticsearch/lib/cli-launcher/* org.elasticsearch.launcher.CliToolLauncher\n    328 pts/0    Rs+    0:00 ps ax\n\nStdout:\nCreated elasticsearch keystore in /usr/share/elasticsearch/config/elasticsearch.keystore\n\nStderr:\n\n\nThread dump:\n2025-04-15 20:28:11\nFull thread dump OpenJDK 64-Bit Server VM (23+37-2369 mixed mode, sharing):\n\nThreads class SMR info:\n_java_thread_list=0x00007\n[truncated]\n\nIssue Reasons:\n\n[8.17] 5 failures in test test010Install (0.5% fail rate in 995 executions)\n[8.17] 5 failures in step ubuntu-2204_packaging-tests-unix (29.4% fail rate in 17 executions)\n[8.17] 5 failures in pipeline elasticsearch-periodic-packaging (29.4% fail rate in 17 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": null, "labels": [":Delivery/Packaging", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125668, "issue_title": "[CI] GCSRepositoryAnalysisRestIT testRepositoryAnalysis failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7312 / third-party_gcs\nelasticsearch-periodic-platform-support #7313 / rhel-8_platform-support-unix\nelasticsearch-pull-request #65096 / part-2\n\nReproduction Line:\n./gradlew \":x-pack:plugin:snapshot-repo-test-kit:qa:gcs:javaRestTest\" --tests \"org.elasticsearch.repositories.blobstore.testkit.analyze.GCSRepositoryAnalysisRestIT.testRepositoryAnalysis\" -Dtests.seed=E956DE65A2C7CA51 -Dtests.locale=en-KE -Dtests.timezone=Asia/Dhaka -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [POST], host [http://[::1]:44177], URI [/_snapshot/repository/_analyze?blob_count=10&seed=5856317475903747225&max_blob_size=10mb&timeout=120s&concurrency=4], status line [HTTP/1.1 500 Internal Server Error]\n{\"error\":{\"root_cause\":[{\"type\":\"repository_verification_exception\",\"reason\":\"[repository] register [test-register-contended-CbVb9VARRria-l-j_Xc3qg] should have value [10] but instead had value [OptionalBytesReference[MISSING]]\"}],\"type\":\"repository_verification_exception\",\"reason\":\"[repository] Elasticsearch observed the storage system underneath this repository behaved incorrectly which indicates it is not suitable for use with Elasticsearch snapshots. See [https://www.elastic.co/guide/en/elasticsearch/reference/master/repo-analysis-api.html] for further information. Elasticsearch attempted to remove the data it wrote at [temp-analysis-OcWnoI0QSvm-2kJTsnP86A] but may have left some behind. If so, please now remove this data manual\n[truncated]\n\nIssue Reasons:\n\n[8.x] 3 failures in test testRepositoryAnalysis (1.2% fail rate in 246 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": "2025-04-02", "labels": [":Distributed Coordination/Snapshot/Restore", ">test-failure", "low-risk", "Team:Distributed Coordination"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125665, "issue_title": "Match operator language evolution", "issue_body": "Search functionality in ES|QL is being driven primarily through search functions. Functions allow for a lot of flexibility and customisation of options, but ultimately do not feel as delightful as other language constructions, e.g. operators or commands.  This issue is an exploration on how we want to evolve full text search as a language construct in ES|QL.\ntracked in #123043\nCurrent state\nWe have already delivered match, qstr as ES|QL functions and we are now working on adding multi_match and match_phrase.\nWe also have a dedicated operator : which translates to a match query.\nThe operator has a short and delightful syntax, while the functions are more verbose but support configurable options:\nFROM books | WHERE title:\"Harry Potter\"\n\nis equivalent to\nFROM books | WHERE match(title, \"Harry Potter\")\n\nFuture evolution of the match operator\nWe see that users naturally gravitate towards using the match operator, rather than the match function.\nRight now we ask them to switch to using functions if they want something more than just doing a simple match.\nWe should be looking at how can we bridge the gap between the match operator and the functionality of full text functions, while preserving the simplicity of the operator syntax.\nMatch on all fields\nIn KQL or Lucene query syntax it is very easy to match on all fields e.g. *:Error.\nTo achieve this in ES|QL, we require using the qstr or kql function:\nFROM logs*\n| WHERE qstr(\"*:Error\")\n\nWith the match operator this could be expressed in a much simpler way:\nFROM logs*\n| WHERE *:\"Error\"\n\nSimilar to qstr, we should use the fields that are defined in index.query.default_field.\nMatch phrase\nWe are planning on adding support for match_phrase through functions.\nWe should also be looking at how we can add match phrase support in the match operator.\nThis could be through a special syntax:\nFROM logs*\n| WHERE message:`Internal Server Error`\n\nBoosting\nBoosting is a popular option, that has a well know notation in the query DLS using ^ that we can reuse for the match operator:\nFROM books METADATA _score\n| WHERE title^0.8:\"Harry Potter\" OR plot^0.2:\"Harry Potter\"\n| SORT _score DESC\n\nFuzziness\nFuzziness is another popular option when doing lexical search that also has its own notation in the Query DLS.\nFor the match operator:\nFROM books\n| WHERE title:\"Harry Potter\"~AUTO OR plot:\"Harry Potter\"~10\n\nMulti match\nThe match operator right now supports a field.\nWe could add support to query multiple fields (and translate to something like multi-match):\nFROM books\n| WHERE title,plot,tagline:\"Harry Potter\"\n\nIn combination with boosting:\nFROM books\n| WHERE title^0.7,plot^0.1,tagline^0.2:\"Harry Potter\"\n\ncc @carlosdelest", "created_at": "2025-03-26", "closed_at": null, "labels": [">feature", "ES|QL-ui", "Team:Search Relevance", ":Search Relevance/Search"], "State": "open", "Author": "ioanatia"}
{"issue_number": 125664, "issue_title": "[ML] Add AD Advanced Concepts documents on using DST calendars", "issue_body": "No body", "created_at": "2025-03-26", "closed_at": null, "labels": [">docs", ":ml", "Team:Docs", "Team:ML"], "State": "open", "Author": "valeriy42"}
{"issue_number": 125662, "issue_title": "ESQL: Query Monitoring meta issue", "issue_body": "This is a meta issue for tracking other issues related to query monitoring for ES|QL.\n\n Initial REST API Implementation #124827\n Query cancellation\n Filtering e.g., based on node IDs\n Submitting user information\n X-Opaque-Id  and trace.id information - could be used for filtering also\n Tracking memory usage\n Tracking bytes/memory/documents/rows read.\n", "created_at": "2025-03-26", "closed_at": null, "labels": ["Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "GalLalouche"}
{"issue_number": 125661, "issue_title": "[CI] ClientYamlTestSuiteIT test {yaml=cat.allocation/10_basic/Node forecasts} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7362 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7264 / ubuntu-2004_platform-support-unix\nelasticsearch-periodic-platform-support #7257 / rhel-7_platform-support-unix\n\nReproduction Line:\n./gradlew \":rest-api-spec:yamlRestTest\" --tests \"org.elasticsearch.test.rest.ClientYamlTestSuiteIT\" -Dtests.method=\"test {yaml=cat.allocation/10_basic/Node forecasts}\" -Dtests.seed=A0F537AA4D8473AA -Dtests.locale=se-NO -Dtests.timezone=Etc/GMT+12 -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [cat.allocation/10_basic:292]: field [$body] was expected to match the provided regex but didn't\nExpected: ^\n  ( [-\\w.]+                \\s+\n    [-\\w.]+                \\s+\n    [-\\w.]+                \\s+\n    [\\w]+\n    \\n\n  )+\n$\n     but: was \"test-cluster-0 0 0.0 3.7kb\\n\"\n\nIssue Reasons:\n\n[8.x] 3 failures in test test {yaml=cat.allocation/10_basic/Node forecasts} (0.5% fail rate in 597 executions)\n[8.x] 3 failures in pipeline elasticsearch-periodic-platform-support (20.0% fail rate in 15 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": "2025-04-01", "labels": [">test-failure", ":Data Management/CAT APIs", "Team:Data Management", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125655, "issue_title": "Optimise memory usage for vector search", "issue_body": "Meta issue for all things related to optimising memory usage for vector search (and in particular quantization and HNSW), with the best defaults for the best out-of-the-box experience.\nAt a high-level, HNSW works best when \"everything\" is in memory. Quantization is great in that it significantly reduces the size of the compressed vectors. When using HNSW with quantization we want to offer the best out of the box experience, so align the implementation to make best use of memory.\nThe general idea is to use the page cache as efficiently as possible, and avoid unnecessarily causing critical data structures from being paged out. Specifically, 1) pre load the HNSW graph (since not having it in memory results in very poor performance) and offer insights into its residency, and 2) avoid perturbing the page cache when rescoring.\nTasks\n\n Use Direct I/O for rescoring in BBQ\n Pre load the HNSW graph and quantised vectors for BBQ\n #125681\n Enhance the API to up level the pre loading, from file extensions to, say, dense vector index type\n Expose low-level statistics to allow for scale up / down events.\n\nThe focus of this issue is towards solving for the general case of HNSW and quantisation, but we should keep the BBQ use case top of mind and not make it any more complex than needs to be.", "created_at": "2025-03-26", "closed_at": null, "labels": ["Meta", ":Search Relevance/Vectors", "Team:Search Relevance"], "State": "open", "Author": "ChrisHegarty"}
{"issue_number": 125645, "issue_title": "Synonyms API - Add invalid synonyms information", "issue_body": "Description\nWhen invalid synonyms are added to a synonym graph or synonym token filter and lenient is set to true, invalid synonyms are ignored.\nThe only indication for this are log messages , which are not immediate feedback to the user. These failures are returned as part of any API in Elasticsearch.\nA way of detecting invalid synonyms configuration needs to be added to the Elasticsearch API, either in an existing one or as part of the Synonyms API.\nRelated:\n\n#110901\n#125603\n", "created_at": "2025-03-26", "closed_at": null, "labels": [">enhancement", ":Search Relevance/Analysis", "Team:SearchOrg", ":SearchOrg/Relevance", "Team:Search Relevance"], "State": "open", "Author": "carlosdelest"}
{"issue_number": 125643, "issue_title": "Put-shutdown `allocation_delay` parameter default is not documented", "issue_body": "The put-shutdown API docs say of the allocation_delay parameter:\n\nIf you specify both a restart allocation delay and an index-level allocation delay, the longer of the two is used.\n\nThis implies that if you don't specify both delays then the one which is specified will be used, but in fact in a RESTART shutdown if you don't specify an allocation delay to the shutdown API then it is treated as 5m which overrides shorter index-level allocation delays:\n\n\n\nelasticsearch/server/src/main/java/org/elasticsearch/cluster/metadata/SingleNodeShutdownMetadata.java\n\n\n        Lines 246 to 253\n      in\n      0dda109\n\n\n\n\n\n\n public TimeValue getAllocationDelay() { \n\n\n\n if (allocationDelay != null) { \n\n\n\n return allocationDelay; \n\n\n\n     } else if (Type.RESTART.equals(type)) { \n\n\n\n return DEFAULT_RESTART_SHARD_ALLOCATION_DELAY; \n\n\n\n     } \n\n\n\n return null; \n\n\n\n } \n\n\n\n\n\nAdditionally, the docs on delayed allocation do not say anything about this extra behaviour in a graceful restart, and this is confusing.\nRelates this forum question.", "created_at": "2025-03-26", "closed_at": null, "labels": [">bug", ">docs", "Team:Core/Infra", "Team:Docs", ":Core/Infra/Node Lifecycle"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 125642, "issue_title": "[CI] MlWithSecurityIT test {yaml=ml/data_frame_analytics_cat_apis/Test cat data frame analytics single job with header} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7259 / ubuntu-2204_platform-support-unix\nelasticsearch-pull-request #64533 / part-4-fips\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:ml-with-security:yamlRestTest\" --tests \"org.elasticsearch.smoketest.MlWithSecurityIT.test {yaml=ml/data_frame_analytics_cat_apis/Test cat data frame analytics single job with header}\" -Dtests.seed=D7EFC4CD4E253B2F -Dtests.locale=tok-001 -Dtests.timezone=Europe/Copenhagen -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [ml/data_frame_analytics_cat_apis:54]: expected [2xx] status code but api [cat.ml_data_frame_analytics] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[{\"type\":\"no_shard_available_action_exception\",\"reason\":null,\"stack_trace\":\"org.elasticsearch.action.NoShardAvailableActionException\\n\"}],\"type\":\"exception\",\"reason\":\"all shards failed\",\"caused_by\":{\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\".ml-stats-000001\",\"node\":null,\"reason\":{\"type\":\"no_shard_available_action_exception\",\"reason\":null,\"stack_trace\":\"org.elasticsearch.action.NoShardAvailableActionException\\n\"}}],\"stack_trace\":\"Failed to execute phase [query], all shards failed; shardFailures {[_na_][.ml-stats-000001][0]: org.elasticsearch.action.NoShardAvailableActionException\\n}\\n\\tat org.elasticsearch.server@9.1.0-SNAPSHOT/org.elasticsearch.action.search.AbstractSearchAsyncAction.onPhaseF\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {yaml=ml/data_frame_analytics_cat_apis/Test cat data frame analytics single job with header} (0.9% fail rate in 219 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125641, "issue_title": "[CI] MlWithSecurityIT test {yaml=ml/data_frame_analytics_cat_apis/Test cat data frame analytics all jobs with header and column selection} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7259 / amazonlinux-2023_platform-support-aws\nelasticsearch-pull-request #64533 / part-4-fips\n\nReproduction Line:\n./gradlew \":x-pack:plugin:ml:qa:ml-with-security:yamlRestTest\" --tests \"org.elasticsearch.smoketest.MlWithSecurityIT.test {yaml=ml/data_frame_analytics_cat_apis/Test cat data frame analytics all jobs with header and column selection}\" -Dtests.seed=7A71F19C13C8E7BC -Dtests.locale=vai-Latn-LR -Dtests.timezone=Israel -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: Failure at [ml/data_frame_analytics_cat_apis:77]: expected [2xx] status code but api [cat.ml_data_frame_analytics] returned [500 Internal Server Error] [{\"error\":{\"root_cause\":[{\"type\":\"no_shard_available_action_exception\",\"reason\":\"[yamlRestTest-0][127.0.0.1:46095][indices:data/read/search[phase/query]]\",\"stack_trace\":\"org.elasticsearch.action.NoShardAvailableActionException: [yamlRestTest-0][127.0.0.1:46095][indices:data/read/search[phase/query]]\\n\"}],\"type\":\"exception\",\"reason\":\"all shards failed\",\"caused_by\":{\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\".ml-stats-000001\",\"node\":\"bqQ2RQd_RB-g8EBRMrqG4w\",\"reason\":{\"type\":\"no_shard_available_action_exception\",\"reason\":\"[yamlRestTest-0][127.0.0.1:46095][indices:data/read/search[phase/query]]\",\"stack_trace\":\"org.elasticsearch.action.NoShardAvailableActionException: [yamlRestTest-0][127.0.0.1:46095][indices:data/read/se\n[truncated]\n\nIssue Reasons:\n\n[main] 2 failures in test test {yaml=ml/data_frame_analytics_cat_apis/Test cat data frame analytics all jobs with header and column selection} (0.9% fail rate in 218 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125639, "issue_title": "[CI] ThreadPoolMergeSchedulerTests testMergeSourceWithFollowUpMergesRunSequentially failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7259 / ubuntu-2004_platform-support-unix\nelasticsearch-pull-request #64721 / part-1\nelasticsearch-pull-request #64612 / part-1\nelasticsearch-pull-request #63698 / part-1\n\nReproduction Line:\n./gradlew \":server:test\" --tests \"org.elasticsearch.index.engine.ThreadPoolMergeSchedulerTests.testMergeSourceWithFollowUpMergesRunSequentially\" -Dtests.seed=C18F08EAE9F6D58A -Dtests.locale=es-UY -Dtests.timezone=America/Eirunepe -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.Exception: Test abandoned because suite timeout was reached.\n\nIssue Reasons:\n\n[main] 4 failures in test testMergeSourceWithFollowUpMergesRunSequentially (1.3% fail rate in 302 executions)\n[main] 3 failures in step part-1 (2.3% fail rate in 130 executions)\n[main] 3 failures in pipeline elasticsearch-pull-request (2.4% fail rate in 127 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": "2025-04-02", "labels": [">test-failure", ":Distributed Indexing/Engine", "low-risk", "Team:Distributed Indexing"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125638, "issue_title": "[CI] VerifyVersionConstantsIT testLuceneVersionConstant failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7256 / 7.9.3_bwc\nelasticsearch-periodic #7249 / 7.9.3_bwc\nelasticsearch-pull-request #64681 / 7.17.29_bwc-snapshots\n\nReproduction Line:\n./gradlew \":qa:verify-version-constants:v7.9.3#bwcTest\" -Dtests.class=\"org.elasticsearch.qa.verify_version_constants.VerifyVersionConstantsIT\" -Dtests.method=\"testLuceneVersionConstant\" -Dtests.seed=72D0A1379F989756 -Dtests.bwc=true -Dtests.locale=cgg -Dtests.timezone=US/Eastern -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: <8.6.2>\n     but: was <8.6.0>\n\nIssue Reasons:\n\n[8.x] 2 consecutive failures in step 7.9.3_bwc\n[8.x] 3 failures in test testLuceneVersionConstant (2.0% fail rate in 149 executions)\n[8.x] 2 failures in step 7.9.3_bwc (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (100.0% fail rate in 2 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-26", "closed_at": null, "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125635, "issue_title": "Highlight of SourceConfirmedTextQuery can throw NPE", "issue_body": "Caused by: java.lang.NullPointerException: Cannot invoke \\\"org.apache.lucene.search.ScorerSupplier.get(long)\\\" because the return value of \\\"org.elasticsearch.index.mapper.extras.SourceConfirmedTextQuery$2.scorerSupplier(org.apache.lucene.index.LeafReaderContext)\\\" is null\n\\tat org.elasticsearch.mapper.extras@9.1.0/org.elasticsearch.index.mapper.extras.SourceConfirmedTextQuery$2.matches(SourceConfirmedTextQuery.java:324)\n\\tat org.apache.lucene.core@10.1.0/org.apache.lucene.search.DisjunctionMaxQuery$DisjunctionMaxWeight.matches(DisjunctionMaxQuery.java:125)\n\\tat org.apache.lucene.highlighter@10.1.0/org.apache.lucene.search.uhighlight.FieldOffsetStrategy.createOffsetsEnumsWeightMatcher(FieldOffsetStrategy.java:147)\n\\tat org.apache.lucene.highlighter@10.1.0/org.apache.lucene.search.uhighlight.FieldOffsetStrategy.createOffsetsEnumFromReader(FieldOffsetStrategy.java:74)\n\\tat org.apache.lucene.highlighter@10.1.0/org.apache.lucene.search.uhighlight.MemoryIndexOffsetStrategy.getOffsetsEnum(MemoryIndexOffsetStrategy.java:117)\n\\tat org.apache.lucene.highlighter@10.1.0/org.apache.lucene.search.uhighlight.FieldHighlighter.highlightFieldForDoc(FieldHighlighter.java:83)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.lucene.search.uhighlight.CustomFieldHighlighter.highlightFieldForDoc(CustomFieldHighlighter.java:75)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.lucene.search.uhighlight.CustomUnifiedHighlighter.highlightField(CustomUnifiedHighlighter.java:152)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.fetch.subphase.highlight.DefaultHighlighter.highlight(DefaultHighlighter.java:87)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.fetch.subphase.highlight.HighlightPhase$1.process(HighlightPhase.java:70)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.fetch.FetchPhase$1.nextDoc(FetchPhase.java:188)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.fetch.FetchPhaseDocsIterator.iterate(FetchPhaseDocsIterator.java:90)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.fetch.FetchPhase.buildSearchHits(FetchPhase.java:205)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.fetch.FetchPhase.execute(FetchPhase.java:85)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.search.SearchService.lambda$executeFetchPhase$13(SearchService.java:1028)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:79)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$3.accept(ActionRunnable.java:76)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.action.ActionRunnable$4.doRun(ActionRunnable.java:101)\n\\tat org.elasticsearch.server@9.1.0/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:27)\n", "created_at": "2025-03-26", "closed_at": null, "labels": [">bug", ":Search Relevance/Highlighting", "priority:normal", "Team:Search Relevance"], "State": "open", "Author": "dnhatn"}
{"issue_number": 125634, "issue_title": "Bound task runtimes on the search threadpool?", "issue_body": "Currently long running tasks on the search pool can degrade a cluster's responsiveness massively.\nWhile we bound a searches to 5 shards at a time per node by default, the introduction of query-phase parallelism with its internal fan-out to up to 10 tasks allows for up to 50 parallel tasks to run per search.\nSome tasks that are of the full-scan type (e.g. runtime field queries over large shards) have been observed to run for minutes. Frozen tier shards are another example of tasks that may run for minutes as well.\nThis creates a situation where a few very long running tasks can turn a cluster non-response for minutes or if executed in a hot enough loop can easily crowd out faster queries completely.\nThe problem can also show up in a less severe form as very high tail latencies for fast queries when we have concurrent slow queries on the same nodes.\nThis fact is well known and led to the introduction of the search_coordination threadpool for shorter tasks to retain liveness for field_caps and can_match.\nAlso, a number of deployments have been observed to work around this state of affairs by oversubscribing hardware resources (e.g. through running multiple ES nodes on a single physical machine with without setting a CPU limit on any of them), thereby offloading the liveness to the kernel thread scheduling.\nThe use of the search_coordination pool and oversubscribing resources are both less than ideal solutions because of the contention and scheduling overheads that come with running more CPU bound threads in parallel than there are available CPUs.\nShould we address this issue by introducing some (potentially very approximate) liveness guarantees on the search pool by bounding individual task execution times step by step (obviously a little trickier for search threads since instead of forking to another pool the solution would be to break large tasks into multiple smaller tasks and make them schedule each other) similar to how we approach liveness on transport threads to make latencies smoother and more predictable?", "created_at": "2025-03-26", "closed_at": null, "labels": [">enhancement", "team-discuss", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "original-brownbear"}
{"issue_number": 125633, "issue_title": "Cancellation check in CancellableBulkScorer might be too insensitive in some situations", "issue_body": "In situations where a large number of documents are scored and scoring is also slow, cancellation can become very insensitive. Concretely, this was observed for a broken altering rule that ran for more than 5 minutes and was cancelled by Kibana at the 5 minute mark but had shard level tasks go on for minutes after cancellation.\nThis seems like a result of the cancellation check interval increasing to 1M geometrically after starting from 2048, i.e. within ~1M iterations. For slow running runtime field queries this turned out to make shards overshoot by minutes.\nThe math seems to make sense here. A 1M cancellation would take up to 1 minute to kick in for the case of each individual document's source taking 60 us to load and parse (which seems reasonably realistic).\nIt is conceivable if not likely that real world runtime field queries would take this long or even longer per document.\nMaybe the maximum check interval should be lowered or made more adaptive or simply lowered?\nThe current check interval makes the check effectively free and improvements like #104305 have made these checks cheaper in recent times => A lower interval seems like a good enough solution?", "created_at": "2025-03-26", "closed_at": null, "labels": [">bug", "priority:high", "Team:Search Foundations", ":Search Foundations/Search"], "State": "open", "Author": "original-brownbear"}
{"issue_number": 125623, "issue_title": "[CI] SystemIndicesUpgradeIT class failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7228 / 8.0.1_bwc\nelasticsearch-periodic #7221 / 8.0.1_bwc\n\nReproduction Line:\nundefined\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\nundefined\n\nIssue Reasons:\n\n[8.x] 2 failures in class org.elasticsearch.upgrades.SystemIndicesUpgradeIT (0.2% fail rate in 1000 executions)\n[8.x] 2 failures in step 8.0.1_bwc (100.0% fail rate in 2 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic (66.7% fail rate in 3 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-25", "closed_at": null, "labels": [":Core/Infra/Core", ">test-failure", "Team:Core/Infra", "low-risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125607, "issue_title": "[TSDS] Reindexing seems to ignore routing_path derived from mappings", "issue_body": "Elasticsearch Version\n8.17.4\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nNot relevant\nProblem Description\nWhen attempting to reindex a TSDS data stream into another, the reindex doesn't start because of the error:\n[index.mode=time_series] requires a non-empty [index.routing_path]\n\nAttempting to reproduce, I noticed it triggers the error only when the routing_path on the destination index is not defined explicitly but deduced from the TSDS dimensions in the mappings.\nSteps to Reproduce\n\n\nSpawn an ECH deployment 8.17.4 (but also older versions present the same issue)\n\n\nGET _index_template/metrics-fleet_server.agent_status as we want to reindex the data streams metrics-fleet_server.agent_status...\n\n\nWe create a slightly modified index template reusing the existing index template\n\n\nPUT _index_template/metrics-fleet_server.agent_status-storedsource\n{\n  \"index_patterns\": [\n    \"metrics-fleet_server.agent_status-storedsource*\" # MORE SPECIFIC\n  ],\n  \"template\": {\n    \"settings\": {\n      \"index\": {\n        \"mode\": \"time_series\",\n        \"mapping.source.mode\": \"stored\" # WE FORCE STORED (but this is not relevant for the bug)\n      },\n      \"time_series\": { # WE SET THIS (but it is not relevant for the bug)\n        \"end_time\": \"2026-12-31T00:00:00.000Z\",\n        \"start_time\": \"2023-09-01T00:00:00.000Z\"\n      }\n    },\n    \"mappings\": {\n      \"_meta\": {\n        \"package\": {\n          \"name\": \"fleet_server\"\n        },\n        \"managed_by\": \"fleet\",\n        \"managed\": true\n      },\n      \"_source\": {\n        \"mode\": \"STORED\" # WE FORCE STORED (but this is not relevant for the bug)\n      }\n    }\n  },\n  \"composed_of\": [\n    \"metrics@tsdb-settings\",\n    \"metrics-fleet_server.agent_status@package\",\n    \"metrics@custom\",\n    \"metrics-fleet_server.agent_status@custom\",\n    \"ecs@mappings\",\n    \".fleet_globals-1\",\n    \".fleet_agent_id_verification-1\"\n  ],\n  \"priority\": 250, # WE INCREASE THE PRIORITY\n  \"_meta\": {\n    \"package\": {\n      \"name\": \"fleet_server\"\n    },\n    \"managed_by\": \"fleet\",\n    \"managed\": true\n  },\n  \"data_stream\": {\n    \"hidden\": false,\n    \"allow_custom_routing\": false\n  },\n  \"ignore_missing_component_templates\": [\n    \"metrics@custom\",\n    \"metrics-fleet_server.agent_status@custom\"\n  ]\n}\n\n\nWe trigger the reindexing\n\nPOST _reindex\n{\n  \"source\": {\n    \"index\": \"metrics-fleet_server.agent_status-default\"\n  },\n  \"dest\": {\n    \"index\": \"metrics-fleet_server.agent_status-storedsource\",\n    \"op_type\": \"create\"\n  }\n}\n\n\nThe response is:\n\n# Response\n#{\n#  \"error\": {\n#    \"root_cause\": [\n#      {\n#        \"type\": \"illegal_argument_exception\",\n#        \"reason\": \"[index.mode=time_series] requires a non-empty [index.routing_path]\"\n#      }\n#    ],\n#    \"type\": \"illegal_argument_exception\",\n#    \"reason\": \"[index.mode=time_series] requires a non-empty [index.routing_path]\"\n#  },\n#  \"status\": 400\n#}\n\n\nIf we trigger the creation of the DS manually, it gets created:\n\nPUT _data_stream/metrics-fleet_server.agent_status-storedsource\n\n\nIt has routing_path (GET metrics-fleet_server.agent_status-storedsource/_settings)\n\n# Response\n#{\n#  \".ds-metrics-fleet_server.agent_status-storedsource-2025.03.25-000001\": {\n#    \"settings\": {\n#      \"index\": {\n#        \"mapping\": {\n#          \"total_fields\": {\n#            \"limit\": \"1000\",\n#            \"ignore_dynamic_beyond_limit\": \"true\"\n#          },\n#          \"source\": {\n#            \"mode\": \"stored\"\n#          }\n#        },\n#        \"hidden\": \"true\",\n#        \"time_series\": {\n#          \"end_time\": \"2026-12-31T00:00:00.000Z\",\n#          \"start_time\": \"2023-09-01T00:00:00.000Z\"\n#        },\n#        \"provided_name\": \".ds-metrics-fleet_server.agent_status-storedsource-2025.03.#25-000001\",\n#        \"final_pipeline\": \".fleet_final_pipeline-1\",\n#        \"creation_date\": \"1742927336776\",\n#        \"number_of_replicas\": \"1\",\n#        \"routing_path\": [\n#          \"cluster.id\" ### <<< HERE\n#        ],\n#        \"uuid\": \"ZoZZhCW0SrO9Y3uXSAzdgg\",\n#        \"version\": {\n#          \"created\": \"8521000\"\n#        },\n#        \"lifecycle\": {\n#          \"name\": \"metrics\"\n#        },\n#        \"mode\": \"time_series\",\n#        \"routing\": {\n#          \"allocation\": {\n#            \"include\": {\n#              \"_tier_preference\": \"data_hot\"\n#            }\n#          }\n#        },\n#        \"number_of_shards\": \"1\",\n#        \"default_pipeline\": \"metrics-fleet_server.agent_status-1.6.0\"\n#      }\n#    }\n#  }\n#}\n\n\n\nTry to re-execute the reindex, it fails again, same error\n\n\nUpdate the Index template to explicitly define the routing_path:\n\n\nPUT _index_template/metrics-fleet_server.agent_status-storedsource\n{\n  \"index_patterns\": [\n    \"metrics-fleet_server.agent_status-storedsource*\"\n  ],\n  \"template\": {\n    \"settings\": {\n      \"index\": {\n        \"mode\": \"time_series\",\n        \"mapping.source.mode\": \"stored\"\n      },\n      \"routing_path\": [\n        \"cluster.id\" # ADDED THIS\n      ],\n      \"time_series\": {\n        \"end_time\": \"2026-12-31T00:00:00.000Z\",\n        \"start_time\": \"2023-09-01T00:00:00.000Z\"\n      }\n    },\n    \"mappings\": {\n      \"_meta\": {\n        \"package\": {\n          \"name\": \"fleet_server\"\n        },\n        \"managed_by\": \"fleet\",\n        \"managed\": true\n      },\n      \"_source\": {\n        \"mode\": \"STORED\"\n      }\n    }\n  },\n  \"composed_of\": [\n    \"metrics@tsdb-settings\",\n    \"metrics-fleet_server.agent_status@package\",\n    \"metrics@custom\",\n    \"metrics-fleet_server.agent_status@custom\",\n    \"ecs@mappings\",\n    \".fleet_globals-1\",\n    \".fleet_agent_id_verification-1\"\n  ],\n  \"priority\": 250,\n  \"_meta\": {\n    \"package\": {\n      \"name\": \"fleet_server\"\n    },\n    \"managed_by\": \"fleet\",\n    \"managed\": true\n  },\n  \"data_stream\": {\n    \"hidden\": false,\n    \"allow_custom_routing\": false\n  },\n  \"ignore_missing_component_templates\": [\n    \"metrics@custom\",\n    \"metrics-fleet_server.agent_status@custom\"\n  ]\n}\n\n\nRe-trigger the reindexing\n\nPOST _reindex\n{\n  \"source\": {\n    \"index\": \"metrics-fleet_server.agent_status-default\"\n  },\n  \"dest\": {\n    \"index\": \"metrics-fleet_server.agent_status-storedsource\",\n    \"op_type\": \"create\"\n  }\n}\n\n\nIt works (which is odd as the destination index is still there from the manual DS creation at step 6, I didn't even need to delete it)\n\n# Response\n#{\n#  \"took\": 157,\n#  \"timed_out\": false,\n#  \"total\": 353,\n#  \"updated\": 0,\n#  \"created\": 353,\n#  \"deleted\": 0,\n#  \"batches\": 1,\n#  \"version_conflicts\": 0,\n#  \"noops\": 0,\n#  \"retries\": {\n#    \"bulk\": 0,\n#    \"search\": 0\n#  },\n#  \"throttled_millis\": 0,\n#  \"requests_per_second\": -1,\n#  \"throttled_until_millis\": 0,\n#  \"failures\": []\n#}\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-25", "closed_at": null, "labels": [">bug", ":Data Management/Data streams", "Team:Data Management", ":StorageEngine/TSDB", "Team:StorageEngine"], "State": "open", "Author": "lucabelluccini"}
{"issue_number": 125603, "issue_title": "Synonyms API: Index gets red status when synonyms set does not exist", "issue_body": "Elasticsearch Version\n8.10+\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nany\nProblem Description\nIt is possible to create an index with an analyzer that uses a synonym or synonym_graph filter, that point to a synonym set that does not exist.\nWhen that happens, the index is created but the shards cannot be recovered (as synonyms are loaded during shard recovery). This makes both the index and the cluster health to be red, as no shard can be recovered for it.\nUsers can solve the problem by creating the synonym set via the Synonyms API.\nSteps to Reproduce\nCreate an index that uses a synonyms set that has not been created yet:\nPUT test-synonyms\n{\n  \"settings\": {\n    \"analysis\": {\n      \"filter\": {\n        \"synonyms_filter\": {\n          \"type\": \"synonym_graph\",\n          \"synonyms_set\": \"my-synonyms-set\",\n          \"updateable\": true\n        }\n      },\n      \"analyzer\": {\n        \"my_index_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\"]\n        },\n        \"my_search_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"standard\",\n          \"filter\": [\"lowercase\", \"synonyms_filter\"]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"title\": {\n        \"type\": \"text\",\n        \"analyzer\": \"my_index_analyzer\",\n        \"search_analyzer\": \"my_search_analyzer\"\n      }\n    }\n  }\n}\nThe index is created, but shards do not acknowledge:\n{\n    \"acknowledged\": true,\n    \"shards_acknowledged\": false,\n    \"index\": \"test-synonyms\"\n}\nThe index and the cluster are in red status:\nGET _cat/indices\n    {\n        \"health\": \"red\",\n        \"status\": \"open\",\n        \"index\": \"test-synonyms\",\n        \"uuid\": \"CFdqVx5XRsCvIpNGLEQHbw\",\n        \"pri\": \"1\",\n        \"rep\": \"1\",\n        \"docs.count\": null,\n        \"docs.deleted\": null,\n        \"store.size\": null,\n        \"pri.store.size\": null,\n        \"dataset.size\": null\n    }\nLogs (if relevant)\nNo response", "created_at": "2025-03-25", "closed_at": "2025-03-27", "labels": [">bug", ":Search Relevance/Analysis", ":SearchOrg/Relevance", "priority:high", "Team:Search Relevance"], "State": "closed", "Author": "carlosdelest"}
{"issue_number": 125585, "issue_title": "[CI] ModelRegistryMetadataTests testAlreadyUpgraded failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20922 / part2\nelasticsearch-intake #20784 / part2\nelasticsearch-periodic-platform-support #7250 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #7250 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7236 / sles-15_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.registry.ModelRegistryMetadataTests.testAlreadyUpgraded\" -Dtests.seed=68482702E60D912A -Dtests.locale=he -Dtests.timezone=US/Pacific -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njunit.framework.AssertionFailedError: Expected exception IllegalArgumentException but no exception was thrown\n\nIssue Reasons:\n\n[8.x] 5 failures in test testAlreadyUpgraded (1.1% fail rate in 445 executions)\n[8.x] 2 failures in step part2 (3.7% fail rate in 54 executions)\n[8.x] 2 failures in pipeline elasticsearch-intake (3.7% fail rate in 54 executions)\n[8.x] 2 failures in pipeline elasticsearch-periodic-platform-support (22.2% fail rate in 9 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-25", "closed_at": "2025-03-28", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125583, "issue_title": "Specify API for capabilities filter using API name rather than method/path", "issue_body": "In the YAML test runner there's a mismatch between specifying the capabilities of APIs (which requires method and path) and actually invoking those APIs (which uses the API's name from its JSON specification document).\nFor instance, the first test in this file is calling the cluster.stats API after checking that GET /_cluster/stats has the required capabilities:\n\"cross-cluster search stats basic\":\n  - requires:\n      test_runner_features: [ capabilities ]\n      capabilities:\n        - method: GET\n          path: /_cluster/stats\n          capabilities:\n            - \"ccs-stats\"\n      reason: \"Capability required to run test\"\n\n  - do:\n      cluster.stats: { }\n...\n\nThese are the same things! It seems more natural to me to say something like the following instead, using cluster.stats in place of {\"method\": \"GET\",\"path\": \"/_cluster/stats\",....\n\"cross-cluster search stats basic\":\n  - requires:\n      test_runner_features: [ capabilities ]\n      capabilities:\n        cluster.stats:\n          capabilities:\n            - \"ccs-stats\"\n      reason: \"Capability required to run test\"\n\n  - do:\n      cluster.stats: { }\n", "created_at": "2025-03-25", "closed_at": null, "labels": [">enhancement", ":Core/Infra/Core", "Team:Core/Infra"], "State": "open", "Author": "DaveCTurner"}
{"issue_number": 125577, "issue_title": "ESQL: Skip LOOKUP JOIN when join key is missing from index", "issue_body": "ReplaceMissingFieldWithNull will check if the indices of a data node even have a given field, and if not, will define a literal NULL in its place to avoid extracting null blocks.\nWhen the join key for a LOOKUP JOIN is missing on the data node, we could optimize away the whole join rather than extracting null blocks and then performing lookups with them.\nOr, at least we should check that the current implementation is sufficiently cheap - but I think it's likely not in cases where we fan out to loads of data nodes, many of which just don't have values for the join key; like in FROM * | LOOKUP JOIN lu_idx ON some_rather_rare_field | SORT whatever_field.", "created_at": "2025-03-25", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 125576, "issue_title": "ESQL: Enable plan consistency checker for local logical plans", "issue_body": "I realized that the plan consistency checker is enabled for the global logical and physical plan optimizer, for the local physical one, but not for the local logical one. We should enable it there as well.", "created_at": "2025-03-25", "closed_at": null, "labels": [">bug", "team-discuss", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "alex-spies"}
{"issue_number": 125560, "issue_title": "System data streams issue after upgrading to 9.0 with feature migration API", "issue_body": "In 9.0.0-rc1 we identified an issue where system data stream .fleet-actions-results is still problematic after being upgraded from 7.17.28 > 8.18 > 9.0.0-rc1.\nSlack thread: https://elastic.slack.com/archives/C8UUBNASY/p1742824896518599\nHow to reproduce:\n\nOn 7.17.28 instance run osquery queries or endpoint isolate/release action. That saved actions to .fleet-actions-results\nUpgrade to 8.18.0\nAt this point there is no issue\nResolve all ES critical issues - there was over 40 issues that I had to reindex - however none of them was about fleet-actions-results\nUpgrade to 9.0.0\nIssue exists.\n\nThis issue pops out in multiple places, eg. fleet, index management etc. But also breaks other functionalities (eg. those using fleet/agents).\n\nOriginally posted by @tomsonpl in #122949\n\nHi @alexey-ivanov-es, unfortunately another issue occurred with the above mentioned data stream. It was found on 9.0.0-rc1.\nIs this still in your ownership, or fleet now?\n\n{\n    \"statusCode\": 500,\n    \"error\": \"Internal Server Error\",\n    \"message\": \"illegal_argument_exception\\n\\tRoot causes:\\n\\t\\tillegal_argument_exception: Data stream(s) [.fleet-actions-results] may not be accessed by product [kibana]\"\n}\n\n", "created_at": "2025-03-25", "closed_at": "2025-03-26", "labels": [">bug", "blocker", ":Core/Infra/Core", "Team:Core/Infra", "v9.0.0", "stateful", "v9.0.1"], "State": "closed", "Author": "tomsonpl"}
{"issue_number": 125555, "issue_title": "[CI] IndicesPermissionTests testAuthorizeDataStreamFailureIndices failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7270 / release-tests\nelasticsearch-periodic #7263 / release-tests\nelasticsearch-periodic #7256 / release-tests\nelasticsearch-periodic #7249 / release-tests\nelasticsearch-periodic #7242 / release-tests\nelasticsearch-periodic #7235 / release-tests\nelasticsearch-periodic #7228 / release-tests\nelasticsearch-periodic #7221 / release-tests\nelasticsearch-periodic #7214 / release-tests\nelasticsearch-periodic #7207 / release-tests\n\nReproduction Line:\n./gradlew \":x-pack:plugin:security:test\" --tests \"org.elasticsearch.xpack.security.authz.accesscontrol.IndicesPermissionTests.testAuthorizeDataStreamFailureIndices\" -Dtests.seed=93669AFB5AAE2CBD -Dbuild.snapshot=false -Dtests.jvm.argline=\"-Dbuild.snapshot=false\" -Dlicense.key=x-pack/license-tools/src/test/resources/public.key -Dtests.locale=syr-SY -Dtests.timezone=SystemV/YST9YDT -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: for privilege [read_failure_store]\nExpected: is <true>\n     but: was <false>\n\nIssue Reasons:\n\n[8.x] 10 consecutive failures in step release-tests\n[8.x] 10 failures in test testAuthorizeDataStreamFailureIndices (2.3% fail rate in 432 executions)\n[8.x] 10 failures in step release-tests (100.0% fail rate in 10 executions)\n[8.x] 10 failures in pipeline elasticsearch-periodic (100.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-25", "closed_at": "2025-03-27", "labels": [">test-failure", ":Security/Authorization", "Team:Security", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125554, "issue_title": "[CI] ModelRegistryMetadataTests testUpgrade failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20966 / part2\nelasticsearch-periodic-platform-support #7238 / sles-15_platform-support-unix\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.registry.ModelRegistryMetadataTests.testUpgrade\" -Dtests.seed=34A4E865A50F2C52 -Dtests.locale=es-CR -Dtests.timezone=Pacific/Ponape -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.IllegalArgumentException: Can't pick a random object from an empty collection.\n\nIssue Reasons:\n\n[main] 2 failures in test testUpgrade (2.7% fail rate in 74 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-25", "closed_at": "2025-03-31", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125553, "issue_title": "[CI] ModelRegistryUpgradeIT testUpgradeModels {upgradedNodes=2} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7249 / 8.13.4_bwc\nelasticsearch-periodic #7235 / 8.13.4_bwc\nelasticsearch-periodic #7235 / 8.14.3_bwc\nelasticsearch-periodic #7228 / 8.14.3_bwc\nelasticsearch-periodic #7221 / 8.12.2_bwc\nelasticsearch-periodic #7214 / 8.13.4_bwc\nelasticsearch-periodic #7207 / 8.13.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.13.4#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.ModelRegistryUpgradeIT\" -Dtests.method=\"testUpgradeModels {upgradedNodes=2}\" -Dtests.seed=6C599F56D822327E -Dtests.bwc=true -Dtests.locale=rwk-TZ -Dtests.timezone=America/Miquelon -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred while checking cluster 'test-cluster' status.\n\nIssue Reasons:\n\n[8.x] 7 failures in test testUpgradeModels {upgradedNodes=2} (1.6% fail rate in 442 executions)\n[8.x] 4 failures in step 8.13.4_bwc (57.1% fail rate in 7 executions)\n[8.x] 2 failures in step 8.14.3_bwc (33.3% fail rate in 6 executions)\n[8.x] 6 failures in pipeline elasticsearch-periodic (85.7% fail rate in 7 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-25", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125551, "issue_title": "[CI] HuggingFaceServiceUpgradeIT testHFEmbeddings {upgradedNodes=2} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7284 / 8.12.2_bwc\nelasticsearch-pull-request #65257 / 8.18.0_bwc-snapshots\nelasticsearch-pull-request #65192 / 8.18.0_bwc-snapshots\nelasticsearch-pull-request #65197 / 8.18.0_bwc-snapshots\nelasticsearch-pull-request #65192 / 8.18.0_bwc-snapshots\nelasticsearch-pull-request #65188 / 8.18.0_bwc-snapshots\nelasticsearch-pull-request #65162 / 8.18.0_bwc-snapshots\nelasticsearch-pull-request #65136 / 8.18.0_bwc-snapshots\nelasticsearch-pull-request #65114 / 8.18.0_bwc\nelasticsearch-pull-request #65119 / 8.18.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.12.2#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.HuggingFaceServiceUpgradeIT\" -Dtests.method=\"testHFEmbeddings {upgradedNodes=2}\" -Dtests.seed=96673DD75A466A6C -Dtests.bwc=true -Dtests.locale=ff-Latn-GW -Dtests.timezone=America/Panama -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred while checking cluster 'test-cluster' status.\n\nIssue Reasons:\n\n[8.x] 20 failures in test testHFEmbeddings {upgradedNodes=2} (2.3% fail rate in 857 executions)\n[8.x] 5 failures in step 8.12.2_bwc (41.7% fail rate in 12 executions)\n[8.x] 9 failures in step 8.18.0_bwc-snapshots (8.1% fail rate in 111 executions)\n[8.x] 2 failures in step 8.14.3_bwc (18.2% fail rate in 11 executions)\n[8.x] 3 failures in step 8.13.4_bwc (25.0% fail rate in 12 executions)\n[8.x] 8 failures in pipeline elasticsearch-periodic (66.7% fail rate in 12 executions)\n[8.x] 9 failures in pipeline elasticsearch-pull-request (10.6% fail rate in 85 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-25", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125550, "issue_title": "[CI] HuggingFaceServiceUpgradeIT testElser {upgradedNodes=2} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #20875 / 8.18.0_bwc-snapshots\nelasticsearch-periodic #7256 / 8.14.3_bwc\nelasticsearch-periodic #7249 / 8.12.2_bwc\nelasticsearch-periodic #7242 / 8.12.2_bwc\nelasticsearch-periodic #7235 / 8.13.4_bwc\nelasticsearch-periodic #7235 / 8.12.2_bwc\nelasticsearch-periodic #7228 / 8.13.4_bwc\nelasticsearch-periodic #7214 / 8.12.2_bwc\nelasticsearch-periodic #7207 / 8.13.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.18.0#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.HuggingFaceServiceUpgradeIT\" -Dtests.method=\"testElser {upgradedNodes=1}\" -Dtests.seed=14DF2583434FCA7B -Dtests.bwc=true -Dtests.locale=bs-BA -Dtests.timezone=Africa/Ndjamena -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred while checking cluster 'test-cluster' status.\n\nIssue Reasons:\n\n[8.x] 9 failures in test testElser {upgradedNodes=2} (1.5% fail rate in 593 executions)\n[8.x] 3 failures in step 8.13.4_bwc (33.3% fail rate in 9 executions)\n[8.x] 4 failures in step 8.12.2_bwc (50.0% fail rate in 8 executions)\n[8.x] 7 failures in pipeline elasticsearch-periodic (77.8% fail rate in 9 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-25", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125549, "issue_title": "[CI] ModelRegistryUpgradeIT testUpgradeModels {upgradedNodes=0} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7396 / 8.11.4_bwc\nelasticsearch-periodic #7270 / 8.11.4_bwc\nelasticsearch-pull-request #65114 / 8.11.4_bwc\nelasticsearch-periodic #7263 / 8.11.4_bwc\nelasticsearch-periodic #7256 / 8.11.4_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.11.4#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.ModelRegistryUpgradeIT\" -Dtests.method=\"testUpgradeModels {upgradedNodes=0}\" -Dtests.seed=53132BE40FA3D62F -Dtests.bwc=true -Dtests.locale=pa-IN -Dtests.timezone=Atlantic/Cape_Verde -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.elasticsearch.client.ResponseException: method [PUT], host [http://[::1]:38013], URI [_inference/text_embedding/test-inference-0?error_trace], status line [HTTP/1.1 400 Bad Request]\n{\"error\":{\"root_cause\":[{\"type\":\"status_exception\",\"reason\":\"Unknown service [hugging_face]\",\"stack_trace\":\"org.elasticsearch.ElasticsearchStatusException: Unknown service [hugging_face]\\n\\tat org.elasticsearch.xpack.inference@8.11.4/org.elasticsearch.xpack.inference.action.TransportPutInferenceModelAction.masterOperation(TransportPutInferenceModelAction.java:96)\\n\\tat org.elasticsearch.xpack.inference@8.11.4/org.elasticsearch.xpack.inference.action.TransportPutInferenceModelAction.masterOperation(TransportPutInferenceModelAction.java:44)\\n\\tat org.elasticsearch.server@8.11.4/org.elasticsearch.action.support.master.TransportMasterNodeAction.executeMasterOperation(TransportMasterNodeAction.java:125)\\n\\tat org.elasticsearch.server@8.11.4/org.elasticsearch.action.support.master.TransportMasterNodeAction$As\n[truncated]\n\nIssue Reasons:\n\n[8.x] 5 consecutive failures in step 8.11.4_bwc\n[8.x] 5 failures in test testUpgradeModels {upgradedNodes=0} (1.7% fail rate in 289 executions)\n[8.x] 5 failures in step 8.11.4_bwc (100.0% fail rate in 5 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-25", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125544, "issue_title": "[CI] HuggingFaceServiceUpgradeIT testElser {upgradedNodes=3} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7270 / 8.14.3_bwc\nelasticsearch-periodic #7270 / 8.13.4_bwc\nelasticsearch-periodic #7270 / 8.12.2_bwc\nelasticsearch-pull-request #65114 / 8.12.2_bwc\nelasticsearch-pull-request #65114 / 8.14.3_bwc\nelasticsearch-pull-request #65114 / 8.13.4_bwc\nelasticsearch-periodic #7263 / 8.14.3_bwc\nelasticsearch-periodic #7263 / 8.13.4_bwc\nelasticsearch-periodic #7263 / 8.12.2_bwc\nelasticsearch-periodic #7256 / 8.14.3_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.14.3#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.HuggingFaceServiceUpgradeIT\" -Dtests.method=\"testHFEmbeddings {upgradedNodes=3}\" -Dtests.seed=8A4606AD6DD5BF6D -Dtests.bwc=true -Dtests.locale=fil-PH -Dtests.timezone=Europe/Kaliningrad -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred while checking cluster 'test-cluster' status.\n\nIssue Reasons:\n\n[8.x] 11 consecutive failures in step 8.14.3_bwc\n[8.x] 11 consecutive failures in step 8.13.4_bwc\n[8.x] 11 consecutive failures in step 8.12.2_bwc\n[8.x] 33 failures in test testElser {upgradedNodes=3} (4.8% fail rate in 682 executions)\n[8.x] 11 failures in step 8.14.3_bwc (100.0% fail rate in 11 executions)\n[8.x] 11 failures in step 8.13.4_bwc (100.0% fail rate in 11 executions)\n[8.x] 11 failures in step 8.12.2_bwc (100.0% fail rate in 11 executions)\n[8.x] 10 failures in pipeline elasticsearch-periodic (100.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125543, "issue_title": "[CI] HuggingFaceServiceUpgradeIT testHFEmbeddings {upgradedNodes=3} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7270 / 8.14.3_bwc\nelasticsearch-periodic #7270 / 8.13.4_bwc\nelasticsearch-periodic #7270 / 8.12.2_bwc\nelasticsearch-pull-request #65114 / 8.12.2_bwc\nelasticsearch-pull-request #65114 / 8.14.3_bwc\nelasticsearch-pull-request #65114 / 8.13.4_bwc\nelasticsearch-periodic #7263 / 8.14.3_bwc\nelasticsearch-periodic #7263 / 8.13.4_bwc\nelasticsearch-periodic #7263 / 8.12.2_bwc\nelasticsearch-periodic #7256 / 8.14.3_bwc\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.14.3#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.HuggingFaceServiceUpgradeIT\" -Dtests.method=\"testHFEmbeddings {upgradedNodes=3}\" -Dtests.seed=8A4606AD6DD5BF6D -Dtests.bwc=true -Dtests.locale=fil-PH -Dtests.timezone=Europe/Kaliningrad -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.RuntimeException: An error occurred while checking cluster 'test-cluster' status.\n\nIssue Reasons:\n\n[8.x] 11 consecutive failures in step 8.14.3_bwc\n[8.x] 11 consecutive failures in step 8.13.4_bwc\n[8.x] 11 consecutive failures in step 8.12.2_bwc\n[8.x] 33 failures in test testHFEmbeddings {upgradedNodes=3} (4.8% fail rate in 682 executions)\n[8.x] 11 failures in step 8.14.3_bwc (100.0% fail rate in 11 executions)\n[8.x] 11 failures in step 8.13.4_bwc (100.0% fail rate in 11 executions)\n[8.x] 11 failures in step 8.12.2_bwc (100.0% fail rate in 11 executions)\n[8.x] 10 failures in pipeline elasticsearch-periodic (100.0% fail rate in 10 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125536, "issue_title": "[CI] StatementParserTests testInvalidJoinPatterns failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7209 / single-processor-node-tests\nelasticsearch-periodic-platform-support #7231 / opensuse-leap-15_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / rhel-8_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / debian-12_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / oraclelinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / rhel-9_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / ubuntu-2404_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / sles-15_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / almalinux-8_platform-support-unix\nelasticsearch-periodic-platform-support #7231 / amazonlinux-2023_platform-support-aws\n\nReproduction Line:\n./gradlew \":x-pack:plugin:esql:test\" --tests \"org.elasticsearch.xpack.esql.parser.StatementParserTests.testInvalidJoinPatterns\" -Dtests.seed=40CE02365A6C686B -Dtests.locale=ln-AO -Dtests.timezone=America/Monterrey -Druntime.java=24\n\nApplicable branches:\nmain\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a string containing \"mismatched input '::' expecting {<EOF>, '|', ',', 'metadata'}\"\n     but: was \"line 1:162: mismatched input '-11:00}}>::data' expecting {DEV_CHANGE_POINT, 'enrich', 'dissect', 'eval', 'grok', 'limit', 'sort', 'stats', 'where', DEV_INLINESTATS, DEV_FORK, 'lookup', DEV_JOIN_LEFT, DEV_JOIN_RIGHT, DEV_LOOKUP, 'mv_expand', 'drop', 'keep', DEV_INSIST, DEV_RRF, 'rename'}\"\n\nIssue Reasons:\n\n[main] 13 failures in test testInvalidJoinPatterns (26.5% fail rate in 49 executions)\n[main] 2 failures in step part-3 (8.7% fail rate in 23 executions)\n[main] 2 failures in pipeline elasticsearch-pull-request (8.7% fail rate in 23 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-27", "labels": [">test-failure", "Team:Analytics", ":Analytics/ES|QL", "low-risk", "v8.19.0", "v9.1.0"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125535, "issue_title": "[CI] ModelRegistryUpgradeIT testUpgradeModels {upgradedNodes=3} failing", "issue_body": "Build Scans:\n\nelasticsearch-intake #21241 / 8.17.5_bwc-snapshots\nelasticsearch-intake #21241 / 8.18.0_bwc-snapshots\nelasticsearch-intake #21241 / 8.16.7_bwc-snapshots\nelasticsearch-intake #21241 / 8.19.0_bwc-snapshots\nelasticsearch-periodic #7396 / 8.11.4_bwc\nelasticsearch-periodic #7270 / 8.14.3_bwc\nelasticsearch-periodic #7270 / 8.13.4_bwc\nelasticsearch-periodic #7270 / 8.11.4_bwc\nelasticsearch-periodic #7270 / 8.12.2_bwc\nelasticsearch-pull-request #65162 / 8.18.0_bwc-snapshots\n\nReproduction Line:\n./gradlew \":x-pack:plugin:inference:qa:rolling-upgrade:v8.17.5#bwcTest\" -Dtests.class=\"org.elasticsearch.xpack.application.ModelRegistryUpgradeIT\" -Dtests.method=\"testUpgradeModels {upgradedNodes=3}\" -Dtests.seed=84560C13E60BBEBD -Dtests.bwc=true -Dtests.locale=it-IT -Dtests.timezone=Antarctica/Macquarie -Druntime.java=24\n\nApplicable branches:\n8.x\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\njava.lang.AssertionError: \nExpected: a value greater than <0>\n     but: <0> was equal to <0>\n\nIssue Reasons:\n\n[8.x] 4 consecutive failures in test testUpgradeModels {upgradedNodes=3}\n[8.x] 5 consecutive failures in step 8.11.4_bwc\n[8.x] 25 failures in test testUpgradeModels {upgradedNodes=3} (7.0% fail rate in 359 executions)\n[8.x] 4 failures in step 8.18.0_bwc-snapshots (9.5% fail rate in 42 executions)\n[8.x] 4 failures in step 8.14.3_bwc (80.0% fail rate in 5 executions)\n[8.x] 4 failures in step 8.12.2_bwc (80.0% fail rate in 5 executions)\n[8.x] 4 failures in step 8.13.4_bwc (80.0% fail rate in 5 executions)\n[8.x] 5 failures in step 8.11.4_bwc (100.0% fail rate in 5 executions)\n[8.x] 4 failures in pipeline elasticsearch-periodic (100.0% fail rate in 4 executions)\n[8.x] 4 failures in pipeline elasticsearch-pull-request (9.8% fail rate in 41 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": null, "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "open", "Author": "elasticsearchmachine"}
{"issue_number": 125534, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest module projects are wired into test cluster setup failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7338 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7338 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.spockframework.runtime.ConditionFailedWithExceptionError: Condition failed with Exception:\n\nresult.task(\":distribution:archives:integ-test-zip:buildExpanded\").outcome == TaskOutcome.SUCCESS\n|      |                                                           |\n|      null                                                        java.lang.NullPointerException: Cannot get property 'outcome' on null object\n|                                                                  \tat org.elasticsearch.gradle.internal.test.rest.LegacyYamlRestTestPluginFuncTest.#type projects are wired into test cluster setup(LegacyYamlRestTestPluginFuncTest.groovy:143)\n<org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner$NormalizedBuildResult@5ae1c281 delegate=org.gradle.testkit.runner.internal.FeatureCheckBuildResult@1e957e2f normalizedString=null this$0=org.elasticsearch.gradle.internal.test.NormalizeOutputGradleRunner@691500ab>\n\n\nIssue Reasons:\n\n[8.16] 2 consecutive failures in test module projects are wired into test cluster setup\n[8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 38 failures in test module projects are wired into test cluster setup (29.0% fail rate in 131 executions)\n[8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 19 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 19 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 19 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-31", "labels": [":Delivery/Build", "Team:Delivery", "low-risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125533, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest plugin projects are wired into test cluster setup failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]\n\nOutput:\nCalculating task graph as no cached configuration is available for tasks: yamlRestTest\n=======================================\nElasticsearch Build Hamster says Hello!\n  Gradle Version        : 8.13\n  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)\n  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)\n  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)\n  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Random Testing Seed   : C70DCF99734E0852\n  In FIPS 140 mode      : false\n=======================================\n\nFAILURE: \n[truncated]\n\nIssue Reasons:\n\n[8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 39 failures in test plugin projects are wired into test cluster setup (28.3% fail rate in 138 executions)\n[8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)\n[8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-31", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125532, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest yamlRestTest executes and copies api and tests to correct source set failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]\n\nOutput:\nCalculating task graph as no cached configuration is available for tasks: yamlRestTest\n=======================================\nElasticsearch Build Hamster says Hello!\n  Gradle Version        : 8.13\n  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)\n  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)\n  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)\n  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Random Testing Seed   : C70DCF99734E0852\n  In FIPS 140 mode      : false\n=======================================\n\nFAILURE: \n[truncated]\n\nIssue Reasons:\n\n[8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 39 failures in test yamlRestTest executes and copies api and tests to correct source set (28.3% fail rate in 138 executions)\n[8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)\n[8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-31", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125531, "issue_title": "[CI] LegacyYamlRestTestPluginFuncTest yamlRestTest does nothing when there are no tests failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic-platform-support #7373 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7373 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7366 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7359 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7352 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / almalinux-8-aarch64_checkpart1_platform-support-arm\nelasticsearch-periodic-platform-support #7345 / ubuntu-2004-aarch64_checkpart1_platform-support-arm\n\nReproduction Line:\nnull\n\nApplicable branches:\n8.16\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.gradle.testkit.runner.UnexpectedBuildFailure: Unexpected build execution failure in /tmp/junit2731184467363460981 with arguments [yamlRestTest, --full-stacktrace, --configuration-cache, -Dorg.elasticsearch.gradle.build-api-restriction.disabled=true, -Dtest.external=true]\n\nOutput:\nCalculating task graph as no cached configuration is available for tasks: yamlRestTest\n=======================================\nElasticsearch Build Hamster says Hello!\n  Gradle Version        : 8.13\n  OS Info               : Linux 4.18.0-513.18.1.el8_9.aarch64 (aarch64)\n  Runtime JDK Version   : 21.0.6+7-LTS (Eclipse Temurin, 21.0.6+7-LTS)\n  Runtime java.home     : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Gradle JDK Version    : 21.0.6+7-LTS (Eclipse Temurin)\n  Gradle java.home      : /opt/buildkite-agent/.gradle/jdks/eclipse_adoptium-21-aarch64-linux.2\n  Random Testing Seed   : C70DCF99734E0852\n  In FIPS 140 mode      : false\n=======================================\n\nFAILURE: \n[truncated]\n\nIssue Reasons:\n\n[8.16] 20 consecutive failures in step almalinux-8-aarch64_checkpart1_platform-support-arm\n[8.16] 19 consecutive failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm\n[8.16] 20 consecutive failures in pipeline elasticsearch-periodic-platform-support\n[8.16] 39 failures in test yamlRestTest does nothing when there are no tests (28.3% fail rate in 138 executions)\n[8.16] 20 failures in step almalinux-8-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 20 executions)\n[8.16] 19 failures in step ubuntu-2004-aarch64_checkpart1_platform-support-arm (100.0% fail rate in 19 executions)\n[8.16] 20 failures in pipeline elasticsearch-periodic-platform-support (100.0% fail rate in 20 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-31", "labels": [":Delivery/Build", ">test-failure", "Team:Delivery", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125516, "issue_title": "[CI] ModelRegistryMetadataTests.testAlreadyUpgraded", "issue_body": "CI Link\nhttps://gradle-enterprise.elastic.co/s/ftobtcknux2yy/console-log?anchor=8903&page=9\nRepro line\n./gradlew \":x-pack:plugin:inference:test\" --tests \"org.elasticsearch.xpack.inference.registry.ModelRegistryMetadataTests.testAlreadyUpgraded\" -Dtests.seed=57D83B0D7329D6D -Dtests.locale=su-Latn-ID -Dtests.timezone=Atlantic/Reykjavik -Druntime.java=24\nDoes it reproduce?\nYes\nApplicable branches\nmain\nFailure history\nNo response\nFailure excerpt\njunit.framework.AssertionFailedError: Expected exception IllegalArgumentException but no exception was thrown\n        at __randomizedtesting.SeedInfo.seed([57D83B0D7329D6D:5DACAE4EF9E07A4E]:0)\n        at org.apache.lucene.tests.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2889)\n        at org.apache.lucene.tests.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2875)\n        at org.elasticsearch.xpack.inference.registry.ModelRegistryMetadataTests.testAlreadyUpgraded(ModelRegistryMetadataTests.java:105)\n", "created_at": "2025-03-24", "closed_at": "2025-03-28", "labels": [">test-failure", ":ml", "Team:ML", "needs:risk"], "State": "closed", "Author": "thecoop"}
{"issue_number": 125515, "issue_title": "Cannot migrate a semantic text index from 8.18 to 9.0", "issue_body": "Elasticsearch Version\n9.0\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nN/A\nProblem Description\nIf a user creates an index with a semantic_text field in 8.18+, they cannot migrate that index to 9.0. If they try, they get this error:\n\"type\": \"illegal_argument_exception\",\n        \"reason\": \"\"\"cannot change field \"description.inference.chunks.embeddings\" from storeTermVector=true to inconsistent storeTermVector=false\"\"\"\n\nSteps to Reproduce\n\nCreate an index with a semantic_text field in 8.18\nUpgrade to 9.0\nAttempt to reload the index on 9.0\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-24", "closed_at": "2025-03-24", "labels": [">bug", "blocker", ":SearchOrg/Relevance"], "State": "closed", "Author": "Mikep86"}
{"issue_number": 125511, "issue_title": "Errors when running Elasticsearch with inline scripts disabled because of shipped default ingest pipeline templates", "issue_body": "Elasticsearch Version\n8.17.3\nInstalled Plugins\nNone\nJava Version\nbundled\nOS Version\nUbuntu 20.04.1\nProblem Description\nWhen inline scripts are disabled, Elasticsearch logs out large volume of errors adding ingest pipeline template (logs@json-message & logs@json-pipeline) on start up, and on certain operations like creating or deleting indices.\nSetting stack.templates.enabled: false did not prevent these errors from being logged.\nWhen looking at the code in ES that creates these templates (logs@json-message & logs@json-pipeline), couldn't see any config settings to prevent their creation.\nSteps to Reproduce\n\nRun ES container locally\ndocker run -p 127.0.0.1:9200:9200 -e \"script.allowed_types=stored\" -e=\"stack.templates.enabled=false\" docker.elastic.co/elasticsearch/elasticsearch:8.17.3\nSee logs that have message: error adding ingest pipeline template and error.message: java.lang.IllegalArgumentException: cannot execute [inline] scripts\n\nLogs (if relevant)\n{\n    \"@timestamp\": \"2025-03-24T14:26:14.278Z\",\n    \"log.level\": \"ERROR\",\n    \"message\": \"error adding ingest pipeline template [logs@json-message] for [stack]\",\n    \"ecs.version\": \"1.2.0\",\n    \"service.name\": \"ES_ECS\",\n    \"event.dataset\": \"elasticsearch.server\",\n    \"process.thread.name\": \"elasticsearch[{{.Service.Name}}][management][T#5]\",\n    \"log.logger\": \"org.elasticsearch.xpack.core.template.IndexTemplateRegistry\",\n    \"elasticsearch.cluster.uuid\": \"rovbdM29SeiH6PFjQdhZWA\",\n    \"elasticsearch.node.id\": \"6IZfGtCDRquENVBQueeGog\",\n    \"elasticsearch.node.name\": \"{{.Service.Name}}\",\n    \"elasticsearch.cluster.name\": \"docker-cluster\",\n    \"error.type\": \"org.elasticsearch.ElasticsearchException\",\n    \"error.message\": \"java.lang.IllegalArgumentException: cannot execute [inline] scripts\",\n    \"error.stack_trace\": \"org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ExceptionsHelper.convertToElastic(ExceptionsHelper.java:55)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.newConfigurationException(ConfigurationUtils.java:480)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:631)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:579)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessorConfigs(ConfigurationUtils.java:499)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.Pipeline.create(Pipeline.java:98)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.validatePipeline(IngestService.java:688)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.validatePipelineRequest(IngestService.java:502)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.lambda$putPipeline$5(IngestService.java:485)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:245)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:32)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:202)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:196)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:307)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListener.respondAndRelease(ActionListener.java:367)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.lambda$newResponseAsync$2(TransportNodesAction.java:215)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListener.run(ActionListener.java:444)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.newResponseAsync(TransportNodesAction.java:215)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction$1.lambda$onCompletion$4(TransportNodesAction.java:166)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.lambda$doExecute$0(TransportNodesAction.java:178)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:245)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.ThreadedActionListener$1.doRun(ThreadedActionListener.java:39)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\\n\\tat java.base/java.lang.Thread.run(Thread.java:1570)\\n\\tSuppressed: org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\t... 27 more\\n\\tCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t\\t... 24 more\\n\\tSuppressed: org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\t... 27 more\\n\\tCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t\\t... 24 more\\nCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t... 24 more\\n\"\n}\n\n{\n    \"@timestamp\": \"2025-03-24T14:26:14.278Z\",\n    \"log.level\": \"ERROR\",\n    \"message\": \"error adding ingest pipeline template [logs@json-pipeline] for [stack]\",\n    \"ecs.version\": \"1.2.0\",\n    \"service.name\": \"ES_ECS\",\n    \"event.dataset\": \"elasticsearch.server\",\n    \"process.thread.name\": \"elasticsearch[{{.Service.Name}}][management][T#1]\",\n    \"log.logger\": \"org.elasticsearch.xpack.core.template.IndexTemplateRegistry\",\n    \"elasticsearch.cluster.uuid\": \"rovbdM29SeiH6PFjQdhZWA\",\n    \"elasticsearch.node.id\": \"6IZfGtCDRquENVBQueeGog\",\n    \"elasticsearch.node.name\": \"{{.Service.Name}}\",\n    \"elasticsearch.cluster.name\": \"docker-cluster\",\n    \"error.type\": \"org.elasticsearch.ElasticsearchException\",\n    \"error.message\": \"java.lang.IllegalArgumentException: cannot execute [inline] scripts\",\n    \"error.stack_trace\": \"org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ExceptionsHelper.convertToElastic(ExceptionsHelper.java:55)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.newConfigurationException(ConfigurationUtils.java:480)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:631)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:579)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessorConfigs(ConfigurationUtils.java:499)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.Pipeline.create(Pipeline.java:98)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.validatePipeline(IngestService.java:688)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.validatePipelineRequest(IngestService.java:502)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.IngestService.lambda$putPipeline$5(IngestService.java:485)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:245)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.ContextPreservingActionListener.onResponse(ContextPreservingActionListener.java:32)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:202)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.tasks.TaskManager$1.onResponse(TaskManager.java:196)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$RunBeforeActionListener.onResponse(ActionListenerImplementations.java:307)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListener.respondAndRelease(ActionListener.java:367)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.lambda$newResponseAsync$2(TransportNodesAction.java:215)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListener.run(ActionListener.java:444)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.newResponseAsync(TransportNodesAction.java:215)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction$1.lambda$onCompletion$4(TransportNodesAction.java:166)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.nodes.TransportNodesAction.lambda$doExecute$0(TransportNodesAction.java:178)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.ActionListenerImplementations$ResponseWrappingActionListener.onResponse(ActionListenerImplementations.java:245)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.action.support.ThreadedActionListener$1.doRun(ThreadedActionListener.java:39)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingAbstractRunnable.doRun(ThreadContext.java:984)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:26)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\\n\\tat java.base/java.lang.Thread.run(Thread.java:1570)\\n\\tSuppressed: org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\t... 27 more\\n\\tCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t\\t... 24 more\\n\\tSuppressed: org.elasticsearch.ElasticsearchException: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\t... 27 more\\n\\tCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\t\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t\\t... 24 more\\nCaused by: java.lang.IllegalArgumentException: cannot execute [inline] scripts\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.script.ScriptService.compile(ScriptService.java:602)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:80)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConditionalProcessor.<init>(ConditionalProcessor.java:61)\\n\\tat org.elasticsearch.server@8.15.4/org.elasticsearch.ingest.ConfigurationUtils.readProcessor(ConfigurationUtils.java:627)\\n\\t... 24 more\\n\"\n}\n", "created_at": "2025-03-24", "closed_at": null, "labels": [">bug", ":Data Management/Ingest Node", "Team:Data Management"], "State": "open", "Author": "cexmmaqsood"}
{"issue_number": 125499, "issue_title": "Missing mappings in monitoring-logstash-mb template", "issue_body": "Elasticsearch Version\n8.17.3\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nElastic Cloud Service\nProblem Description\nAfter each update of our ECS instances, we have to manually add some missing mapping fields in monitoring templates (in this issue, I'll discuss about logstash monitoring template, ie, \".monitoring-logstash-mb\")...\nWe can retrieve the missing field list by adding a data view on the corresponding datastream, is \".monitoring-logstash-*\", all missing fields appear in the \"Unmapped field\" section on the field panel on Discover.\n\nI can push a merge pull request if needed...\nSteps to Reproduce\n\nAdd metricbeat to monitor a Logstash instance in a Elasticsearch cluster\nThis will automatically create \".monitoring-logstash-mb\" template\nCreate a dataview on \".monitoring-logstash-*\"\nGot to Discover and have a look to Unmapped fields in fields panel\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-24", "closed_at": null, "labels": [">bug", ":Data Management/Monitoring", "Team:Data Management", "Team:Stack Monitoring"], "State": "open", "Author": "ijardillier"}
{"issue_number": 125488, "issue_title": "[ES|QL] Provide a way for combining results of multiple queries", "issue_body": "Description\nIn ES|QL there is currently no way to combine the results of 2+ queries that requires STATS ... BY ... of differing combinations, but that have a similar result column set.\nExample:\nI want to determine the approximate cost of a number of AWS EKS clusters based on their resources. I can write an ES|QL query for each of the resource types (ex: EBS storage & EKS cluster runtime), but I can't then combine (SUM) their costs into a single result that I can then use.\nEBS cost query: note the STATS ... BY ... values.\nFROM metrics-kubernetes.node-*\n| SORT @timestamp DESC\n| WHERE `kubernetes.labels.k8s_io/cloud-provider-aws` IS NOT NULL\n| STATS first_ts = TOP(@timestamp, 1, \"asc\"), last_ts = TOP(@timestamp, 1, \"desc\") BY name = kubernetes.node.name, host = host.id, capacity_bytes = `kubernetes.node.fs.capacity.bytes`, environment = service.environment\n| EVAL time_range = DATE_DIFF(\"second\", first_ts, last_ts) / 3600.0,\n    capacity_gb = capacity_bytes / POW(1024, 3),\n    ebs_gp3_cost_per_gb_per_hr = 0.08 / 730.001,\n    rw_fs_cost = (capacity_gb * ebs_gp3_cost_per_gb_per_hr) * time_range,\n    ro_fs_cost = (2 * ebs_gp3_cost_per_gb_per_hr) * time_range,\n    total_fs_cost = rw_fs_cost + ro_fs_cost\n| STATS cost = SUM(total_fs_cost)\n\nEKS cost query:\nFROM metrics-kubernetes.node-*\n| SORT @timestamp DESC\n| STATS first_ts = TOP(@timestamp, 1, \"asc\"), last_ts = TOP(@timestamp, 1, \"desc\") BY cluster = orchestrator.cluster.name\n| WHERE cluster IS NOT NULL\n| EVAL time_range = DATE_DIFF(\"second\", first_ts, last_ts) / 3600.0,\n    eks_cost_hour = 0.1,\n    cluster_cost = eks_cost_hour * time_range\n| STATS cost = SUM(cluster_cost)\n\n\nBecause the STATS ... BY ... are different (even though the query the same index), they can't be run at the same time.", "created_at": "2025-03-24", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "BenB196"}
{"issue_number": 125483, "issue_title": "[Field_caps] field_caps request don't return fields for indices with readonly_state when include_empty_fields=false", "issue_body": "Elasticsearch Version\n9.0rc1\nInstalled Plugins\nNo response\nJava Version\nbundled\nOS Version\nmacOS 15.3.2\nProblem Description\nWhen requesting field_stats using the param include_empty_fields set to false targeting an index in readonly state, the only fields returned are _tier, _index, _index_mode.  There should be much more fields being returned, attaching a screenshot showing the problem with migrated indices from 7.18 -> 9.0rc1:\n\nOriginally reported by @jughosta\nSteps to Reproduce\n\nSet an Elasticsearch index to readonly\nTarget the index with a field_caps request with the parameter include_empty_fields=false\nThe returned resultset just returns a few meta fields\n\nLogs (if relevant)\nNo response", "created_at": "2025-03-24", "closed_at": "2025-03-26", "labels": [">bug", "blocker", ":Search Foundations/Mapping", "Team:Search Foundations"], "State": "closed", "Author": "kertal"}
{"issue_number": 125482, "issue_title": "ES|QL - Allow full text functions to be used in EVAL", "issue_body": "Description\nFull text functions should be usable in EVAL:\nFROM books \n| EVAL m = author:\"tolkien\"", "created_at": "2025-03-24", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL", "ES|QL-ui"], "State": "open", "Author": "carlosdelest"}
{"issue_number": 125481, "issue_title": "ES|QL - Allow full text functions to be used in STATS ... WHERE", "issue_body": "Description\nAllows full text functions to be used in STATS ... WHERE:\nFROM books \n| STATS c = count(*) where author:\"tolkien\"\nJust filters should be enough for now, although BY could also use full text functions for grouping", "created_at": "2025-03-24", "closed_at": null, "labels": [">enhancement", "Team:Analytics", ":Analytics/ES|QL"], "State": "open", "Author": "carlosdelest"}
{"issue_number": 125472, "issue_title": "[CI] DateTimeToCharProcessorTests test {tochar-generated.csv:70 TZH @ FMTZHTH} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7189 / corretto11_java-matrix\nelasticsearch-periodic #7189 / zulu11_java-matrix\nelasticsearch-periodic #7189 / zulu8_java-matrix\nelasticsearch-periodic #7182 / corretto11_java-matrix\nelasticsearch-periodic #7182 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7182 / zulu11_java-matrix\nelasticsearch-periodic #7182 / zulu8_java-matrix\nelasticsearch-periodic #7175 / zulu11_java-matrix\nelasticsearch-periodic #7175 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7175 / zulu8_java-matrix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:test' --tests \"org.elasticsearch.xpack.sql.expression.function.scalar.datetime.DateTimeToCharProcessorTests\" -Dtests.method=\"test {tochar-generated.csv:76 mi @ FMmiTH}\" -Dtests.seed=2EBBF65D34692CF7 -Dtests.locale=sl-SI -Dtests.timezone=CST6CDT -Druntime.java=11\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.ComparisonFailure: \nLine number:                        76 (in tochar-generated.csv)\nzone:                               CET\ntimestamp (as epoch):               -46592614152.945861\ntimestamp (java, UTC):              0493-07-15T15:10:47.054139Z\ntimestamp (postgres, to_timestamp): 0493-07-15 16:10:47.054139+01\ntimestamp (java with zone):         0493-07-15T15:28:17.054139+00:17:30[CET]\nformat string:                      mi @ FMmiTH\nexpected (postgres to_char result): 10 @ 10TH\nactual (ES to_char result):         28 @ 28TH\n    FAILED (sub)pattern: mi, expected:<[10]> but was:<[28]>\n\nIssue Reasons:\n\n[7.17] 3 consecutive failures in test test {tochar-generated.csv:70 TZH @ FMTZHTH}\n[7.17] 16 consecutive failures in step corretto11_java-matrix\n[7.17] 16 consecutive failures in step zulu11_java-matrix\n[7.17] 16 consecutive failures in step zulu8_java-matrix\n[7.17] 14 consecutive failures in step adoptopenjdk11_java-matrix\n[7.17] 62 failures in test test {tochar-generated.csv:70 TZH @ FMTZHTH} (10.0% fail rate in 620 executions)\n[7.17] 16 failures in step corretto11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 16 failures in step zulu11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 16 failures in step zulu8_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 14 failures in step adoptopenjdk11_java-matrix (100.0% fail rate in 14 executions)\n[7.17] 16 failures in pipeline elasticsearch-periodic (100.0% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-25", "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
{"issue_number": 125471, "issue_title": "[CI] DateTimeToCharProcessorTests test {tochar-generated.csv:76 mi @ FMmiTH} failing", "issue_body": "Build Scans:\n\nelasticsearch-periodic #7189 / corretto11_java-matrix\nelasticsearch-periodic #7189 / zulu11_java-matrix\nelasticsearch-periodic #7189 / zulu8_java-matrix\nelasticsearch-periodic #7182 / corretto11_java-matrix\nelasticsearch-periodic #7182 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7182 / zulu11_java-matrix\nelasticsearch-periodic #7182 / zulu8_java-matrix\nelasticsearch-periodic #7175 / zulu11_java-matrix\nelasticsearch-periodic #7175 / adoptopenjdk11_java-matrix\nelasticsearch-periodic #7175 / zulu8_java-matrix\n\nReproduction Line:\n./gradlew ':x-pack:plugin:sql:test' --tests \"org.elasticsearch.xpack.sql.expression.function.scalar.datetime.DateTimeToCharProcessorTests\" -Dtests.method=\"test {tochar-generated.csv:76 mi @ FMmiTH}\" -Dtests.seed=2EBBF65D34692CF7 -Dtests.locale=sl-SI -Dtests.timezone=CST6CDT -Druntime.java=11\n\nApplicable branches:\n7.17\nReproduces locally?:\nN/A\nFailure History:\nSee dashboard\nFailure Message:\norg.junit.ComparisonFailure: \nLine number:                        76 (in tochar-generated.csv)\nzone:                               CET\ntimestamp (as epoch):               -46592614152.945861\ntimestamp (java, UTC):              0493-07-15T15:10:47.054139Z\ntimestamp (postgres, to_timestamp): 0493-07-15 16:10:47.054139+01\ntimestamp (java with zone):         0493-07-15T15:28:17.054139+00:17:30[CET]\nformat string:                      mi @ FMmiTH\nexpected (postgres to_char result): 10 @ 10TH\nactual (ES to_char result):         28 @ 28TH\n    FAILED (sub)pattern: mi, expected:<[10]> but was:<[28]>\n\nIssue Reasons:\n\n[7.17] 3 consecutive failures in test test {tochar-generated.csv:76 mi @ FMmiTH}\n[7.17] 16 consecutive failures in step corretto11_java-matrix\n[7.17] 16 consecutive failures in step zulu11_java-matrix\n[7.17] 16 consecutive failures in step zulu8_java-matrix\n[7.17] 14 consecutive failures in step adoptopenjdk11_java-matrix\n[7.17] 62 failures in test test {tochar-generated.csv:76 mi @ FMmiTH} (10.0% fail rate in 620 executions)\n[7.17] 16 failures in step corretto11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 16 failures in step zulu11_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 16 failures in step zulu8_java-matrix (100.0% fail rate in 16 executions)\n[7.17] 14 failures in step adoptopenjdk11_java-matrix (100.0% fail rate in 14 executions)\n[7.17] 16 failures in pipeline elasticsearch-periodic (100.0% fail rate in 16 executions)\n\nNote:\nThis issue was created using new test triage automation. Please report issues or feedback to es-delivery.", "created_at": "2025-03-24", "closed_at": "2025-03-25", "labels": [">test-failure", ":Analytics/SQL", "Team:Analytics", "needs:risk"], "State": "closed", "Author": "elasticsearchmachine"}
